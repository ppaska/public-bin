(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3cVM":function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("mrSG"),r=i("lMX+"),o=i("j13F"),a=i("TwVa"),s=i("TYT/"),l=i("EQPC"),h=i("UkaQ"),c=["grid"],u=function(){function t(){this.preprocessors=a.i,this.dataTypes=Object.values(a.l)}return t.prototype.ngOnInit=function(){var t=this;this.grid.addEventListener(this.grid.hostElement,"contextmenu",(function(e){var i=t.grid.hitTest(e);t.rowIndex=i.row})),this.grid.cellEditEnded.addHandler((function(e,i){var n=t.grid.rows[i.row].dataItem,s=t.grid.columns[i.col].binding,l=n[s];if(i.panel.cellType===r.CellType.Cell){switch(s){case"dataType":n.size=a.m[l]||null;break;case"preprocessFunc":n.dataType=o.a[l]||null,n.dataType&&(n.size=a.m[n.dataType]||null)}t.grid.refreshCells(!1)}}))},t.prototype.onCtxMenuClicked=function(){this.grid.collectionView.sourceCollection=Object(n.i)(this.grid.collectionView.items.slice(0,this.rowIndex),[{isKey:!1,dataType:a.l.NVARCHAR,size:a.m[a.l.NVARCHAR]}],this.grid.collectionView.items.slice(this.rowIndex))},t.prototype.getItems=function(){return this.grid.collectionView.items},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-fields-mappings"]],viewQuery:function(t,e){var i;1&t&&s["\u0275\u0275staticViewQuery"](c,!0),2&t&&s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e.grid=i.first)},inputs:{isNewTable:"isNewTable",tableColumns:"tableColumns",sourceFields:"sourceFields"},decls:25,vars:31,consts:[[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],[3,"value"],[1,"h-100",3,"itemsSource","allowDelete","allowAddNew","wjContextMenu"],["grid",""],["header","IsKey","binding","isKey","dataType","Boolean",3,"isReadOnly","width","allowSorting"],["header","Table Field","binding","fieldName","dataType","String",3,"isReadOnly","minWidth","width","allowSorting"],["header","Source Field","binding","sourceField",3,"isReadOnly","dataMap","minWidth","width","allowSorting"],["header","Field Data Type","binding","dataType",3,"isReadOnly","dataMap","allowSorting"],["header","Size","binding","size","dataType","Number",3,"isRequired","isReadOnly","allowSorting"],["header","Preprocess Function","binding","preprocessFunc",3,"isRequired","isReadOnly","dataMap","allowSorting"],["header","Parameters","binding","preprocessParams",3,"isRequired","isReadOnly","allowSorting"]],template:function(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"wj-menu",0,1),s["\u0275\u0275listener"]("itemClicked",(function(t){return e.onCtxMenuClicked()})),s["\u0275\u0275text"](2,"\n  "),s["\u0275\u0275elementStart"](3,"wj-menu-item",2),s["\u0275\u0275text"](4,"Insert Field above"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](5,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6,"\n"),s["\u0275\u0275elementStart"](7,"wj-flex-grid",3,4),s["\u0275\u0275text"](9,"\n  "),s["\u0275\u0275element"](10,"wj-flex-grid-column",5),s["\u0275\u0275text"](11,"\n  "),s["\u0275\u0275element"](12,"wj-flex-grid-column",6),s["\u0275\u0275text"](13,"\n  "),s["\u0275\u0275element"](14,"wj-flex-grid-column",7),s["\u0275\u0275text"](15,"\n  "),s["\u0275\u0275element"](16,"wj-flex-grid-column",8),s["\u0275\u0275text"](17,"\n  "),s["\u0275\u0275element"](18,"wj-flex-grid-column",9),s["\u0275\u0275text"](19,"\n  "),s["\u0275\u0275element"](20,"wj-flex-grid-column",10),s["\u0275\u0275text"](21,"\n  "),s["\u0275\u0275elementStart"](22,"wj-flex-grid-column",11),s["\u0275\u0275text"](23,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](24,"\n"),s["\u0275\u0275elementEnd"]()),2&t){var i=s["\u0275\u0275reference"](1);s["\u0275\u0275property"]("isButton",!0),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value","edit"),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("itemsSource",e.tableColumns)("allowDelete",e.isNewTable)("allowAddNew",e.isNewTable)("wjContextMenu",i),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("isReadOnly",!e.isNewTable)("width",50)("allowSorting",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isReadOnly",!e.isNewTable)("minWidth",50)("width","*")("allowSorting",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isReadOnly",!1)("dataMap",e.sourceFields)("minWidth",50)("width","*")("allowSorting",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isReadOnly",!e.isNewTable)("dataMap",e.dataTypes)("allowSorting",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isRequired",!1)("isReadOnly",!e.isNewTable)("allowSorting",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isRequired",!1)("isReadOnly",!1)("dataMap",e.preprocessors)("allowSorting",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("isRequired",!1)("isReadOnly",!1)("allowSorting",!1)}},directives:[l.WjMenu,l.WjMenuItem,h.WjFlexGrid,l.WjContextMenu,h.WjFlexGridColumn],styles:[""]}),t}()},"4CEX":function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("mrSG"),r=i("TYT/"),o=(i("oW1M"),i("tcrU")),a=i("QJY3"),s=i("Valr");function l(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",23),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var i=e.$implicit;r["\u0275\u0275property"]("value",i.value),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](i.label)}}function h(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",23),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var i=e.$implicit;r["\u0275\u0275property"]("value",i.value),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](i.label)}}function c(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275elementStart"](2,"label",13),r["\u0275\u0275text"](3,"Display Format"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n        "),r["\u0275\u0275elementStart"](5,"div",9),r["\u0275\u0275text"](6,"\n          "),r["\u0275\u0275elementStart"](7,"select",24),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().columnInfo.displayFormat=t})),r["\u0275\u0275text"](8,"\n            "),r["\u0275\u0275template"](9,h,2,2,"option",15),r["\u0275\u0275text"](10,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n      "),r["\u0275\u0275elementEnd"]()}if(2&t){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",n.columnInfo.displayFormat),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",n.dateFormats)}}function u(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"option",23),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var i=e.$implicit;r["\u0275\u0275property"]("value",i.value),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](i.label)}}function d(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275elementStart"](2,"label",13),r["\u0275\u0275text"](3,"Display format"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n        "),r["\u0275\u0275elementStart"](5,"div",9),r["\u0275\u0275text"](6,"\n          "),r["\u0275\u0275elementStart"](7,"select",24),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().columnInfo.displayFormat=t})),r["\u0275\u0275text"](8,"\n            "),r["\u0275\u0275template"](9,u,2,2,"option",15),r["\u0275\u0275text"](10,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n      "),r["\u0275\u0275elementEnd"]()}if(2&t){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",n.columnInfo.displayFormat),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",n.numberFormats)}}var p=function(){function t(){this.save=new r.EventEmitter,this.columnInfo={headerText:null,width:null,dataType:o.DataType.String,displayFormat:null,bindingName:null},this.dataTypes=[{label:"String",value:o.DataType.String},{label:"Number",value:o.DataType.Number},{label:"Date",value:o.DataType.Date},{label:"Boolean",value:o.DataType.Boolean}],this.dateFormats=[{label:"(dd/MM/yyyy) 24/08/2015",value:"dd/MM/yyyy"},{label:"(MM/dd/yyyy) 08/24/2015",value:"MM/dd/yyyy"},{label:"(yyyy-MM-dd) 2015-08-24",value:"yyyy-MM-dd"},{label:"(dd/MMM/yyyy) 24/Aug/2015",value:"dd/MMM/yyyy"},{label:"(MMM/dd/yyyy) Aug/24/2015",value:"MMM/dd/yyyy"},{label:"(dd/MM/yyyy HH:mm:ss) 24/08/2015 15:28:22",value:"dd/MM/yyyy HH:mm:ss"},{label:"(MM/dd/yyyy HH:mm:ss) 08/24/2015 15:28:22",value:"MM/dd/yyyy HH:mm:ss"},{label:"(yyyy-MM-dd HH:mm:ss) 2015-08-24 15:28:22",value:"yyyy-MM-dd HH:mm:ss"},{label:"(dd/MMM/yyyy HH:mm:ss) 24/Aug/2015 15:28:22",value:"dd/MMM/yyyy HH:mm:ss"},{label:"(MMM/dd/yyyy HH:mm:ss) Aug/24/2015 15:28:22",value:"MMM/dd/yyyy HH:mm:ss"}],this.numberFormats=[{label:"12,345",value:"n0"},{label:"12,345.6",value:"n1"},{label:"12,345.67",value:"n2"},{label:"12,345.689",value:"n3"},{label:"12,345.6891",value:"n4"},{label:"12345",value:"f0"},{label:"1234.1",value:"g1"},{label:"1234.12",value:"g2"},{label:"1234.123",value:"g3"},{label:"1234.1234",value:"g4"},{label:"1234.12345",value:"g5"},{label:"1234.123456",value:"g6"}]}return t.prototype.ngOnInit=function(){var t=this;Object.keys(this.columnInfo).forEach((function(e){t.columnInfo[e]="dataType"===e?Number(t.config[0][e]):"bindingName"===e?t.config.map((function(t){return t.bindingName})).join(", "):t.config[0][e]}))},t.prototype.saveColumn=function(){var t=this;this.save.emit(this.config.map((function(e,i){var r=Object(n.a)(Object(n.a)({},t.columnInfo),{bindingName:e.bindingName});return 0!==i&&delete r.headerText,r}))),this.modalRef.hide()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-column-editor"]],inputs:{config:"config",modalRef:"modalRef"},outputs:{save:"save"},decls:85,vars:8,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column"],[1,"position-relative","h-100"],["columnInfoForm","ngForm"],[1,"form-group","row","mx-0","mb-2"],["for","field-name",1,"col-form-label","px-0","col-5","col-lg-3"],[1,"flex-fill","ml-2"],["type","text","disabled","disabled","placeholder","Enter column header text","name","fieldName","id","field-name",1,"form-control",3,"ngModel","ngModelChange"],["for","header-text",1,"col-form-label","px-0","col-5","col-lg-3"],["type","text","placeholder","Enter column header text","name","headerText","id","header-text",1,"form-control",3,"ngModel","ngModelChange"],["for","type-selection",1,"col-form-label","px-0","col-5","col-lg-3"],["id","type-selection","name","data-type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row mx-0 mb-2",4,"ngIf"],["for","column-width",1,"col-form-label","px-0","col-5","col-lg-3"],["type","number","placeholder","Enter column width","name","name","id","column-width",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-primary","ml-auto","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-light",3,"click"],[3,"value"],["id","type-selection","name","display-format",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"h4",1),r["\u0275\u0275text"](3,"Column editor"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n  "),r["\u0275\u0275elementStart"](5,"button",2),r["\u0275\u0275listener"]("click",(function(t){return e.modalRef.hide()})),r["\u0275\u0275text"](6,"\n    "),r["\u0275\u0275elementStart"](7,"span",3),r["\u0275\u0275text"](8,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n"),r["\u0275\u0275elementStart"](12,"div",4),r["\u0275\u0275text"](13,"\n  "),r["\u0275\u0275elementStart"](14,"div",5),r["\u0275\u0275text"](15,"\n    "),r["\u0275\u0275elementStart"](16,"form",null,6),r["\u0275\u0275text"](18,"\n      "),r["\u0275\u0275elementStart"](19,"div",7),r["\u0275\u0275text"](20,"\n        "),r["\u0275\u0275elementStart"](21,"label",8),r["\u0275\u0275text"](22,"Field Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n        "),r["\u0275\u0275elementStart"](24,"div",9),r["\u0275\u0275text"](25,"\n          "),r["\u0275\u0275elementStart"](26,"input",10),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.columnInfo.bindingName=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n      "),r["\u0275\u0275elementStart"](30,"div",7),r["\u0275\u0275text"](31,"\n        "),r["\u0275\u0275elementStart"](32,"label",11),r["\u0275\u0275text"](33,"Header Text"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](34,"\n        "),r["\u0275\u0275elementStart"](35,"div",9),r["\u0275\u0275text"](36,"\n          "),r["\u0275\u0275elementStart"](37,"input",12),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.columnInfo.headerText=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](38,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](39,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](40,"\n      "),r["\u0275\u0275elementStart"](41,"div",7),r["\u0275\u0275text"](42,"\n        "),r["\u0275\u0275elementStart"](43,"label",13),r["\u0275\u0275text"](44,"Data Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](45,"\n        "),r["\u0275\u0275elementStart"](46,"div",9),r["\u0275\u0275text"](47,"\n          "),r["\u0275\u0275elementStart"](48,"select",14),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.columnInfo.dataType=t})),r["\u0275\u0275text"](49,"\n            "),r["\u0275\u0275template"](50,l,2,2,"option",15),r["\u0275\u0275text"](51,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](52,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](53,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](54,"\n      "),r["\u0275\u0275template"](55,c,13,2,"div",16),r["\u0275\u0275text"](56,"\n      "),r["\u0275\u0275template"](57,d,13,2,"div",16),r["\u0275\u0275text"](58,"\n      "),r["\u0275\u0275elementStart"](59,"div",7),r["\u0275\u0275text"](60,"\n        "),r["\u0275\u0275elementStart"](61,"label",17),r["\u0275\u0275text"](62,"Width"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](63,"\n        "),r["\u0275\u0275elementStart"](64,"div",9),r["\u0275\u0275text"](65,"\n          "),r["\u0275\u0275elementStart"](66,"input",18),r["\u0275\u0275listener"]("ngModelChange",(function(t){return e.columnInfo.width=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](67,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](68,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](69,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](70,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](71,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](72,"\n"),r["\u0275\u0275elementStart"](73,"div",19),r["\u0275\u0275text"](74,"\n  "),r["\u0275\u0275elementStart"](75,"div",20),r["\u0275\u0275text"](76,"\n    "),r["\u0275\u0275elementStart"](77,"button",21),r["\u0275\u0275listener"]("click",(function(t){return e.saveColumn()})),r["\u0275\u0275text"](78,"Save"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](79,"\n    "),r["\u0275\u0275elementStart"](80,"button",22),r["\u0275\u0275listener"]("click",(function(t){return e.modalRef.hide()})),r["\u0275\u0275text"](81,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](82,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](83,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](84,"\n")),2&t){var i=r["\u0275\u0275reference"](17);r["\u0275\u0275advance"](26),r["\u0275\u0275property"]("ngModel",e.columnInfo.bindingName),r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngModel",e.columnInfo.headerText),r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngModel",e.columnInfo.dataType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.dataTypes),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",4==e.columnInfo.dataType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",2==e.columnInfo.dataType),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngModel",e.columnInfo.width),r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("disabled",!i.valid)}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,a.NgControlStatus,a.NgModel,a.SelectControlValueAccessor,s.NgForOf,s.NgIf,a.NumberValueAccessor,a.NgSelectOption,a["\u0275angular_packages_forms_forms_x"]],encapsulation:2}),t}()},"8JMH":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n={production:!0,useHash:!0,apiBaseUrl:"https://worksheets-web-api-test.azurewebsites.net/api",version:i("kiQV").version}},"DOl/":function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return g}));var n=i("mrSG"),r=i("g4vN"),o=i("lgZ4"),a=i("TYT/"),s=i("E+9f"),l=i("Valr");function h(t,e){if(1&t&&a["\u0275\u0275element"](0,"wj-flex-chart-axis",7),2&t){var i=e.ngIf;a["\u0275\u0275property"]("position",i.position)("title",i.title)("format",i.format)("min",i.min)("max",i.max)("axisLine",i.axisLine)}}function c(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"wj-flex-chart-series",5),a["\u0275\u0275text"](1,"\n    "),a["\u0275\u0275template"](2,h,1,6,"wj-flex-chart-axis",6),a["\u0275\u0275text"](3,"\n  "),a["\u0275\u0275elementEnd"]()),2&t){var i=e.$implicit,n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("name",i.name)("binding",i.binding)("chartType",i.chartType||n.ChartType.Line)("tooltipContent",i.tooltipContent)("symbolSize",i.symbolSize),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",i.secondaryAxis)}}function u(t,e){if(1&t&&a["\u0275\u0275element"](0,"wj-flex-chart-axis",8),2&t){var i=e.ngIf;a["\u0275\u0275property"]("position",i.position||"Bottom")("axisLine",i.axisLine)("title",i.title)("format",i.format)("min",i.min)("max",i.max)("binding",i.binding)}}function d(t,e){if(1&t&&a["\u0275\u0275element"](0,"wj-flex-chart-axis",9),2&t){var i=e.ngIf;a["\u0275\u0275property"]("position",i.position||"Left")("axisLine",i.axisLine)("title",i.title)("format",i.format)("min",i.min)("max",i.max)("binding",i.binding)}}var p=function(){return["rgba(42,159,214,1)","rgba(119,179,0,1)","rgba(153,51,204,1)","rgba(255,136,0,1)","rgba(204,0,0,1)","rgba(0,204,163,1)","rgba(61,109,204,1)","rgba(82,82,82,1)","rgba(0,0,0,1)"]},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ChartType=o.ChartType,e.Stacking=o.Stacking,e}return Object(n.d)(e,t),e.\u0275fac=function(t){return m(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["dc-chart"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:11,consts:[[1,"w-100","h-100",3,"header","bindingX","selectionMode","stacking","itemsSource","palette"],[3,"position"],[3,"name","binding","chartType","tooltipContent","symbolSize",4,"ngFor","ngForOf"],["wjProperty","axisX",3,"position","axisLine","title","format","min","max","binding",4,"ngIf"],["wjProperty","axisY",3,"position","axisLine","title","format","min","max","binding",4,"ngIf"],[3,"name","binding","chartType","tooltipContent","symbolSize"],["wjProperty","axisY",3,"position","title","format","min","max","axisLine",4,"ngIf"],["wjProperty","axisY",3,"position","title","format","min","max","axisLine"],["wjProperty","axisX",3,"position","axisLine","title","format","min","max","binding"],["wjProperty","axisY",3,"position","axisLine","title","format","min","max","binding"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"wj-flex-chart",0),a["\u0275\u0275text"](1,"\n  "),a["\u0275\u0275element"](2,"wj-flex-chart-legend",1),a["\u0275\u0275text"](3,"\n\n  "),a["\u0275\u0275template"](4,c,4,6,"wj-flex-chart-series",2),a["\u0275\u0275text"](5,"\n\n  "),a["\u0275\u0275template"](6,u,1,7,"wj-flex-chart-axis",3),a["\u0275\u0275text"](7,"\n  "),a["\u0275\u0275template"](8,d,1,7,"wj-flex-chart-axis",4),a["\u0275\u0275text"](9,"\n\n  "),a["\u0275\u0275text"](10,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](11,"\n")),2&t&&(a["\u0275\u0275property"]("header",e.properties.header)("bindingX",e.properties.bindingX)("selectionMode",e.properties.selectionMode)("stacking",e.properties.stacking||e.Stacking.None)("itemsSource",e.componentDataModel)("palette",a["\u0275\u0275pureFunction0"](10,p)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("position",e.properties.legendPosition),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.properties.series),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.properties.xAxis),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.properties.yAxis))},directives:[s.WjFlexChart,s.WjFlexChartLegend,l.NgForOf,l.NgIf,s.WjFlexChartSeries,s.WjFlexChartAxis],styles:[""]}),e}(r.b),m=a["\u0275\u0275getInheritedFactory"](f),g={name:"chart",packageName:"wijmo",label:"Chart",category:"Data",description:"Chart component",itemProperties:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.d)(e,t),Object(n.c)([Object(r.t)({description:"Chart header",example:"New chart"}),Object(n.f)("design:type",String)],e.prototype,"header",void 0),Object(n.c)([Object(r.t)({description:"Chart X axis",example:"propName",link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Basic/Data-Binding#data-binding-in-flexchart"}),Object(n.f)("design:type",String)],e.prototype,"bindingX",void 0),Object(n.c)([Object(r.t)({description:"Selection in Chart",example:"Point|Series|None",link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Advanced/Selection"}),Object(n.f)("design:type",Object)],e.prototype,"selectionMode",void 0),Object(n.c)([Object(r.t)({description:"Legend position",example:"Bottom",link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Advanced/Legend-Titles#setting-the-legend-title-position"}),Object(n.f)("design:type",Object)],e.prototype,"legendPosition",void 0),Object(n.c)([Object(r.t)({description:"Chart series",example:'[{name: "Name", binding: "propName"}]',link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Advanced/Legend-Titles#setting-the-legend-title-position"}),Object(n.f)("design:type",Array)],e.prototype,"series",void 0),Object(n.c)([Object(r.t)({description:"ChartType Enumeration",example:"5",link:"https://www.grapecity.com/wijmo/api/enums/wijmo_chart.charttype.html"}),Object(n.f)("design:type",Number)],e.prototype,"chartType",void 0),Object(n.c)([Object(r.t)({description:"Determines whether and how the series objects are stacked.",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_chart.flexchart.html#stacking"}),Object(n.f)("design:type",Number)],e.prototype,"stacking",void 0),e}(r.g),component:f,example:{title:"Chart example",uiModel:{type:"wijmo:chart",containerProperties:{},itemProperties:{dataModelPath:"$.chartData",header:"Countries",bindingX:"country",selectionMode:"Point",legendPosition:"Bottom",series:[{name:"2014",binding:"2014"},{name:"2015",binding:"2015"},{name:"2016",binding:"2016"}]}},dataModel:{chartData:[{country:"United States",2014:17348075,2015:18036650,2016:18624450},{country:"China",2014:10356508,2015:11181556,2016:11232110},{country:"Japan",2014:4602367,2015:4124211,2016:4936540},{country:"Germany",2014:3874437,2015:3365293,2016:3479230},{country:"United Kingdom",2014:2950039,2015:2858482,2016:2629190},{country:"France",2014:2833687,2015:2420163,2016:2466470},{country:"India",2014:2051228,2015:2073002,2016:2263790},{country:"Italy",2014:2147744,2015:1815759,2016:1850740}]}},propertiesDescriptor:[["chartType",{name:"chartType",label:"Type",category:r.n.Main,combo:[[{label:"Area",value:5},{label:"Bar",value:1},{label:"Bubble",value:6},{label:"Candlestick",value:7},{label:"Column",value:0},{label:"Funnel",value:12},{label:"HighLowOpenClose",value:8},{label:"Line",value:3},{label:"LineSymbols",value:4},{label:"Scatter",value:2},{label:"Spline",value:9},{label:"SplineArea",value:11},{label:"SplineSymbols",value:10}]]}]]}},DkY2:function(t,e,i){"use strict";i.r(e),i.d(e,"softFinancial",(function(){return u})),i.d(e,"softRadar",(function(){return d})),i.d(e,"Easing",(function(){return r})),i.d(e,"AnimationMode",(function(){return a})),i.d(e,"ChartAnimation",(function(){return p}));var n,r,o,a,s=i("tcrU"),l=i("lgZ4"),h=i("DkY2"),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function u(){return Object(s._getModule)("wijmo.chart.finance")}function d(){return Object(s._getModule)("wijmo.chart.radar")}(o=r||(r={}))[o.Linear=0]="Linear",o[o.Swing=1]="Swing",o[o.EaseInQuad=2]="EaseInQuad",o[o.EaseOutQuad=3]="EaseOutQuad",o[o.EaseInOutQuad=4]="EaseInOutQuad",o[o.EaseInCubic=5]="EaseInCubic",o[o.EaseOutCubic=6]="EaseOutCubic",o[o.EaseInOutCubic=7]="EaseInOutCubic",o[o.EaseInQuart=8]="EaseInQuart",o[o.EaseOutQuart=9]="EaseOutQuart",o[o.EaseInOutQuart=10]="EaseInOutQuart",o[o.EaseInQuint=11]="EaseInQuint",o[o.EaseOutQuint=12]="EaseOutQuint",o[o.EaseInOutQuint=13]="EaseInOutQuint",o[o.EaseInSine=14]="EaseInSine",o[o.EaseOutSine=15]="EaseOutSine",o[o.EaseInOutSine=16]="EaseInOutSine",o[o.EaseInExpo=17]="EaseInExpo",o[o.EaseOutExpo=18]="EaseOutExpo",o[o.EaseInOutExpo=19]="EaseInOutExpo",o[o.EaseInCirc=20]="EaseInCirc",o[o.EaseOutCirc=21]="EaseOutCirc",o[o.EaseInOutCirc=22]="EaseInOutCirc",o[o.EaseInBack=23]="EaseInBack",o[o.EaseOutBack=24]="EaseOutBack",o[o.EaseInOutBack=25]="EaseInOutBack",o[o.EaseInBounce=26]="EaseInBounce",o[o.EaseOutBounce=27]="EaseOutBounce",o[o.EaseInOutBounce=28]="EaseInOutBounce",o[o.EaseInElastic=29]="EaseInElastic",o[o.EaseOutElastic=30]="EaseOutElastic",o[o.EaseInOutElastic=31]="EaseInOutElastic",function(t){t[t.All=0]="All",t[t.Point=1]="Point",t[t.Series=2]="Series"}(a||(a={}));var p=function(){function t(t,e){this._play=!0;var i=this,n=t.hostElement,r=new s.Size(n.offsetWidth,n.offsetHeight);i._chart=t,i._updateEventArgs=[],t instanceof l.FlexPie?i._animation=new m(t,i._updateEventArgs):(i._animation=d()&&t instanceof d().FlexRadar?new _(t,i._updateEventArgs):new g(t,i._updateEventArgs),i._chartType=t.chartType),e&&i._initOptions(e),t.beginUpdate(),window.setTimeout((function(){t.rendered.addHandler(i._playAnimation,i),t.endUpdate()}),0),i._setCV(t.collectionView),window.addEventListener("resize",(function(t){var e=new s.Size(n.offsetWidth,n.offsetHeight);r.equals(e)||(i._play=!1,r=e)}))}return t.prototype._initOptions=function(t){t.duration&&(this.duration=t.duration),t.easing&&(this.easing=t.easing),t.animationMode&&(this.animationMode=t.animationMode)},t.prototype._setCV=function(t){this._cv=t,this._animation._clearState()},Object.defineProperty(t.prototype,"animationMode",{get:function(){return this._animation.animationMode},set:function(t){(t=Object(s.asEnum)(t,a))!=this.animationMode&&(this._animation.animationMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"easing",{get:function(){return this._animation.easing},set:function(t){(t=Object(s.asEnum)(t,r))!=this.easing&&(this._animation.easing=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._animation.duration},set:function(t){(t=Object(s.asNumber)(t))!=this.duration&&(this._animation.duration=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisAnimation",{get:function(){return this._animation.axisAnimation},set:function(t){(t=Object(s.asBoolean)(t))!=this.axisAnimation&&(this._animation.axisAnimation=t)},enumerable:!0,configurable:!0}),t.prototype._playAnimation=function(){var t=this._chart,e=t.chartType;this._cv!==t.collectionView&&this._setCV(t.collectionView),null!=this._chartType&&this._chartType!==e&&(this._chartType=e,this._animation._clearState()),this._play?this._animation.playAnimation():this._play=!0},t.prototype.animate=function(){var t=this._chart;if(t){var e=t.itemsSource;t.beginUpdate(),t.itemsSource=null,t.itemsSource=e,t.endUpdate()}},t}(),f=function(){function t(t,e){this._axisAnimation=!0,this._chart=t,this._timers=[]}return Object.defineProperty(t.prototype,"animationMode",{get:function(){return this._animationMode||a.All},set:function(t){(t=Object(s.asEnum)(t,a,!1))!==this._animationMode&&(this._clearState(),this._animationMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"easing",{get:function(){return null==this._easing?r.Swing:this._easing},set:function(t){t!==this._easing&&(this._easing=Object(s.asEnum)(t,r,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration||400},set:function(t){t!==this._duration&&(this._duration=Object(s.asNumber)(t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisAnimation",{get:function(){return!!this._axisAnimation},set:function(t){t!==this._axisAnimation&&(this._axisAnimation=Object(s.asBoolean)(t,!1))},enumerable:!0,configurable:!0}),t.prototype.playAnimation=function(){},t.prototype._clearState=function(){this._previousState&&(this._previousState=null),this._currentState&&(this._currentState=null)},t.prototype._setInitState=function(t,e,i){var n=y.parseAttrs(e,i);y.setElementAttr(t,n,0)},t.prototype._getAnimation=function(t,e){return t[e]||(t[e]=[]),t[e]},t.prototype._toggleVisibility=function(t,e){e?y.playAnimation(t,{opacity:0},{opacity:1},null,r.Swing,100):t.setAttribute("opacity","0")},t.prototype._toggleDataLabelVisibility=function(t){var e=this._chart.hostElement,i=e&&e.querySelector(".wj-data-labels");i&&this._toggleVisibility(i,t)},t.prototype._playAnimation=function(t){var e,i=this,n=this,r=n.duration,o=n.easing,a=t.length;n._toggleDataLabelVisibility(!1),e=n._getDurationAndDelay(t.length,r),this._timers&&this._timers.length&&(this._timers.forEach((function(t){return window.clearInterval(t)})),this._timers.length=0),t.forEach((function(t,r){var l;t&&(l=window.setTimeout((function(){var l;t.forEach((function(t,h){if(t&&t.ele){if(r===a-1&&0===h){var c=t.done;t.done=function(){n._toggleDataLabelVisibility(!0),c&&c()}}Object(s.isArray)(t.ele)?(l=y.playAnimations(t.ele,t.from,t.to,t.done,o,e.duration),i._timers=i._timers.concat.apply(l)):(l=y.playAnimation(t.ele,t.from,t.to,t.done,o,e.duration),i._timers.push(l))}}))}),e.delay*r),i._timers.push(l))}))},t.prototype._getDurationAndDelay=function(t,e){var i={duration:e,delay:0};return t>1&&(this._previousState?(i.duration=e/t,i.delay=e/t):(i.duration=.5*e,i.delay=.5*e/(t-1))),i},t}(),m=function(t){function e(e,i){var n=t.call(this,e,i)||this;return e.selectionChanged.addHandler(n._selectionChanged,n),n}return c(e,t),e.prototype._selectionChanged=function(){this._isSelectionChanged=!0},e.prototype._clearState=function(){t.prototype._clearState.call(this),this._isSelectionChanged=!1},e.prototype._getElementRotate=function(t){var e,i=t.getAttribute("transform");return i&&i.indexOf("rotate")>-1?1==(i=(i=i.replace("rotate(","").replace(")","")).indexOf(",")>-1?i.split(",").map((function(t){return+t})):i.split(" ").map((function(t){return+t}))).length&&i.push((e=this._chart._areas[0].center).x,e.y):i=[0,(e=this._chart._areas[0].center).x,e.y],i},e.prototype._getDurationAndDelay=function(t,e){var i={duration:e,delay:0};return this.animationMode===a.Point&&t>1&&(i.duration=e/t,i.delay=e/t),i},e.prototype.playAnimation=function(){t.prototype.playAnimation.call(this);var e=[];this._playPieAnimation(e),e.length&&this._playAnimation(e)},e.prototype._playPieAnimation=function(t){var e=this._chart,i=!0;this._previousState=this._currentState,this._currentState={areas:e._areas,pels:e._pels,rotate:e._pels.length&&this._getElementRotate(e._pels[0].parentNode)},this._previousState&&(i=!1),this._isSelectionChanged?(e.isAnimated||this._playSelectPieAnimation(t),this._isSelectionChanged=!1):i?this._playLoadPieAnimation(t):this._playUpdatePieAnimation(t)},e.prototype._playSelectPieAnimation=function(t){if(null!=this._previousState){var e,i,n,r=this._chart._pels[0].parentNode,o=this._previousState.rotate,a=this._getElementRotate(r),s=o[0],l=a[0];s!==l&&(s-l>180?a[0]+=360:l-s>180&&(o[0]+=360),e=this._getAnimation(t,0),this._setInitState(r,i={rotate:o},n={rotate:a}),e.push({ele:r,from:i,to:n}))}},e.prototype._playUpdatePieAnimation=function(t){var e,i,n,r,o=this._chart,a=this._previousState,s=o._areas,l=o._pels,h=a.areas.length,c=s.length,u=Math.max(c,h),d=this._getAnimation(t,0),p=0;if(0!==c&&0!==h)for(this._playSelectPieAnimation(t),e=0;e<u;e++)i={},l[e]&&l[e].childNodes&&l[e].childNodes.length>0&&(e<c&&e<h&&(n=s[0],0===e&&(p=n.angle),l[e].childNodes[0].setAttribute("d",1===h?y.getPathDescOfPie(n.center.x,n.center.y,n.radius,p,2*Math.PI,n.innerRadius||0):a.pels[e].childNodes[0].getAttribute("d"))),e<c?(i.to={pie:[(n=s[e]).center.x,n.center.y,n.radius,n.angle,n.sweep,n.innerRadius||0]},i.ele=l[e].childNodes[0]):(r=a.pels[e],i.to={pie:[(n=s[0]).center.x,n.center.y,n.radius,p+2*Math.PI,0,n.innerRadius||0]},l[0].parentNode.appendChild(r),i.done=function(t){return function(){t.parentNode.removeChild(t)}}(r),i.ele=r.childNodes[0]),e<h?i.from={pie:[(n=a.areas[e]).center.x,n.center.y,n.radius,n.angle,n.sweep,n.innerRadius||0]}:(l[e].childNodes[0].setAttribute("d",y.getPathDescOfPie(n.center.x,n.center.y,n.radius,2*Math.PI+p,0,n.innerRadius||0)),i.from={pie:[(n=a.areas[0]).center.x,n.center.y,n.radius,2*Math.PI+p,0,n.innerRadius||0]}),d.push(i))},e.prototype._playLoadPieAnimation=function(t){var e=this,i=e._chart,n=e.animationMode,r=i._areas;i._pels.forEach((function(i,o){var s,l=i.childNodes[0],h={},c={};l&&(n===a.Point?(e._parsePathByAngle(r[o],h,c),s=e._getAnimation(t,o)):(e._parsePathByRadius(r[o],h,c),s=e._getAnimation(t,0)),e._setInitState(l,h,c),s.push({ele:l,from:h,to:c}))}))},e.prototype._parsePathByRadius=function(t,e,i){var n,r=t.center.x,o=t.center.y,a=t.angle,s=t.sweep;n=[r,o,t.radius,a,s,t.innerRadius||0],e.pie=[r,o,0,a,s,0],i.pie=n},e.prototype._parsePathByAngle=function(t,e,i){var n,r=t.center.x,o=t.center.y,a=t.radius,s=t.angle,l=t.innerRadius;n=[r,o,a,s,t.sweep,l||0],e.pie=[r,o,a,s,0,l||0],e["stroke-width"]=0,i.pie=n,i["stroke-width"]=1},e}(f),g=function(t){function e(e,i){return t.call(this,e,i)||this}return c(e,t),e.prototype._clearState=function(){t.prototype._clearState.call(this),this._prevAxesStates&&(this._prevAxesStates=null),this._currAxesStates&&(this._currAxesStates=null)},e.prototype.playAnimation=function(){t.prototype.playAnimation.call(this);var e,i,n,r,o,a,s,l,h,c=!0,d=this._chart,p=u()&&d instanceof u().FinancialChart,f=d.series,m=f.length,g=[];for(this._previousState=this._currentState,this._previousXVal=this._currentXVal,this._currentState=[],this._addStart=0,this._removeStart=0,this._currentXVal=d._xlabels.slice(),this._previousState&&this._previousState.length&&(c=!1,o=(a=this._previousState).length,l=this._currentXVal,(s=this._previousXVal).length>2&&l.length>2&&((e=l.indexOf(s[0]))>0&&e<l.length-2?l[e+1]===s[1]&&l[e+2]===s[2]&&(this._addStart=e):(e=s.indexOf(l[0]))>0&&e<s.length-2&&s[e+1]===l[1]&&s[e+2]===l[2]&&(this._removeStart=e))),e=0;e<m;e++)if(r=null!=(i=f[e])._getChartType()?i._getChartType():d._getChartType(),n=this._getChartType(r),this._currentState.push({seriesType:r,ele:i.hostElement}),p)this._playDefaultAnimation(g,e);else{if(h=a&&a[e],"Default"===n){this._playDefaultAnimation(g,e);continue}if(c||h&&h.seriesType!==r||h&&h.ele&&(""==h.ele.innerHTML||0===h.ele.childNodes.length))this._playLoadAnimation(g,e,n);else if(this._playUpdateAnimation(g,e,n,i,h&&h.ele||null),e===m-1&&e<o-1)for(e++;e<=o-1;e++)this._playUpdateAnimation(g,e,n,null,h.ele)}this._adjustAnimations(n,g),g.length&&this._playAnimation(g),this.axisAnimation&&!p&&this._playAxesAnimation()},e.prototype._playAxesAnimation=function(){var t,e,i,n=this._chart.axes,r=n.length;for(this._prevAxesStates=this._currAxesStates,this._currAxesStates=[],e=0;e<r;e++)(t=n[e]).hostElement&&this._currAxesStates.push({ele:t.hostElement,vals:t._vals,axis:t,maxValue:Object(s.isDate)(t.actualMax)?t.actualMax.getTime():t.actualMax,minValue:Object(s.isDate)(t.actualMin)?t.actualMin.getTime():t.actualMin});if(this._prevAxesStates)for(i=Math.max(this._prevAxesStates.length,this._currAxesStates.length),e=0;e<i;e++)this._playAxisAnimation(this._prevAxesStates[e],this._currAxesStates[e])},e.prototype._playAxisAnimation=function(t,e){var i,n=[],r=[];e&&e.maxValue-e.minValue&&(i=this._parseAxisState(e),this._convertAxisAnimation(n,i.major,e.axis,t.maxValue,t.minValue),this._convertAxisAnimation(n,i.minor,e.axis,t.maxValue,t.minValue)),t&&t.maxValue-t.minValue&&(i=this._parseAxisState(t),this._convertAxisAnimation(r,i.major,t.axis),this._convertAxisAnimation(r,i.minor,t.axis)),n&&r&&this._combineAxisAnimations(n,r),this._playCurrAxisAnimation(n),this._playPrevAxisAnimation(r)},e.prototype._combineAxisAnimations=function(t,e){var i,n,r=this;for(i=e.length-1;i>=0;i--)(n=e[i]).text&&t.some((function(t){if(t.text&&t.text===n.text)return r._combineAxisAnimation(t,n),e.splice(i,1),!0}))},e.prototype._combineAxisAnimation=function(t,e){var i=this;["label","majorGrid","tick"].forEach((function(n){t[n]&&e[n]&&i._resetExistAxisAttrs(t[n],e[n])}))},e.prototype._resetExistAxisAttrs=function(t,e){var i=t.ele,n=e.ele,r={},o={};["x","y","x1","x2","y1","y2"].forEach((function(t){var e=i.getAttribute(t),a=n.getAttribute(t);e!==a&&(r[t]=a,o[t]=e)})),t.calcPos=r,t.elePos=o},e.prototype._convertAxisAnimation=function(t,e,i,n,r){var o,a=this,s=i.hostElement,h=i.axisType==l.AxisType.Y;e.forEach((function(e,l){var c=i.convert(e.val,n,r);isNaN(c)||(o={},e.majorGrid&&(o.majorGrid=a._getAxisAnimationAttrs(e.majorGrid,s,c,h)),e.label&&(o.label=a._getAxisAnimationAttrs(e.label,s,c,h),o.text=e.label.innerHTML||e.label.textContent),e.tick&&(o.tick=a._getAxisAnimationAttrs(e.tick,s,c,h)),t.push(o))}))},e.prototype._getAxisAnimationAttrs=function(t,e,i,n){var r,o,a;return r={ele:t,parent:e,elePos:{},calcPos:{}},"text"===t.nodeName?(o=n?"y":"x",a=Number(t.getAttribute(o)),r.elePos[o]=a,r.calcPos[o]=i):(o=n?"y1":"x1",a=Number(t.getAttribute(o)),n?(r.elePos={y1:a,y2:a},r.calcPos={y1:i,y2:i}):(r.elePos={x1:a,x2:a},r.calcPos={x1:i,x2:i})),r.elePos.opacity=1,r.calcPos.opacity=0,r},e.prototype._playCurrAxisAnimation=function(t){var e=this.duration;t&&0!==t.length&&t.forEach((function(t){["majorGrid","label","tick"].forEach((function(i){var n=t[i];n&&y.playAnimation(n.ele,n.calcPos,n.elePos,null,r.Swing,e)}))}))},e.prototype._playPrevAxisAnimation=function(t){var e=this.duration;t&&0!==t.length&&t.forEach((function(t){["majorGrid","label","tick"].forEach((function(i){var n=t[i];if(n){var o=n.parent,a=n.ele,s=n.elePos,l=n.calcPos;o.appendChild(a),y.playAnimation(a,s,l,(function(){a.parentNode===o&&o.removeChild(a)}),r.Swing,e)}}))}))},e.prototype._parseAxisState=function(t){if(null==t)return null;var e=t.vals,i=t.axis,n=i.axisType==l.AxisType.Y,r=t.ele.childNodes,o=0,a=e.major,h=e.minor,c=e.hasLbls,u=[],d=[];return a&&a.forEach((function(t,e){var a,h={},d=!!c[e];u.push(h),h.val=t,a=r[o],i.majorGrid&&Object(s.hasClass)(a,l.FlexChart._CSS_GRIDLINE)&&(h.majorGrid=a,a=r[++o]),n?(d&&a&&i.majorTickMarks!==l.TickMark.None&&Object(s.hasClass)(a,l.FlexChart._CSS_TICK)&&(h.tick=a,a=r[++o]),d&&a&&(Object(s.hasClass)(a,l.FlexChart._CSS_LABEL)||a.querySelector("."+l.FlexChart._CSS_LABEL))&&(h.label=a,o++)):(d&&a&&(Object(s.hasClass)(a,l.FlexChart._CSS_LABEL)||a.querySelector("."+l.FlexChart._CSS_LABEL))&&(h.label=a,a=r[++o]),d&&a&&i.majorTickMarks!==l.TickMark.None&&Object(s.hasClass)(a,l.FlexChart._CSS_TICK)&&(h.tick=a,o++))})),h&&h.forEach((function(t,e){var n,a={};d.push(a),a.val=t,n=r[o],i.minorTickMarks!==l.TickMark.None&&Object(s.hasClass)(n,l.FlexChart._CSS_TICK_MINOR)&&(a.tick=n,n=r[++o]),i.minorGrid&&Object(s.hasClass)(n,l.FlexChart._CSS_GRIDLINE_MINOR)&&(a.majorGrid=n,o++)})),{major:u,minor:d}},e.prototype._playLoadAnimation=function(t,e,i){this["_playLoad"+i+"Animation"](t,e)},e.prototype._playUpdateAnimation=function(t,e,i,n,r){null==n||null==r?null==n?this["_play"+i+"RemoveAnimation"](t,r):this["_play"+i+"AddAnimation"](t,n):this["_play"+i+"MoveAnimation"](t,n,r)},e.prototype._adjustAnimations=function(t,e){var i;if("Column"===t||"Bar"===t)for(i=e.length-1;i>=0;i--)null==e[i]&&e.splice(i,1)},e.prototype._getChartType=function(t){var e="Default",i=this._chart._isRotated();switch(t){case l.ChartType.Scatter:case l.ChartType.Bubble:case l.ChartType.Candlestick:case l.ChartType.HighLowOpenClose:e="Scatter";break;case l.ChartType.Column:case l.ChartType.Bar:e=i?"Bar":"Column";break;case l.ChartType.Line:case l.ChartType.LineSymbols:case l.ChartType.Area:case l.ChartType.Spline:case l.ChartType.SplineSymbols:case l.ChartType.SplineArea:e="Line";break;default:e="Default"}return e},e.prototype._playLoadLineAnimation=function(t,e){var i,n=this,r=n.animationMode,o=n._chart.series[e].hostElement;r===a.Point?n._playDefaultAnimation(t,e):(i=n._getAnimation(t,r===a.All?0:e),[].slice.call(o.childNodes).forEach((function(t){n._setLineRiseDiveAnimation(i,t,!0)})))},e.prototype._setLineRiseDiveAnimation=function(t,e,i){var n,r,o,a,s,l,h,c=this,u=this,d=u._chart,p=e.nodeName,f=[],m=[],g=u._chart._plotRect,_=g.top+g.height,y=g.left,b={},v={};if("g"===p&&e.childNodes)[].slice.call(e.childNodes).forEach((function(e){c._setLineRiseDiveAnimation(t,e,i)}));else{if("polyline"===p||"polygon"===p){for(o=(l=e.points).length||l.numberOfItems,a=0;a<o;a++)s=l[a]||l.getItem(a),f.push(d.rotated?{x:y,y:s.y}:{x:s.x,y:_}),m.push({x:s.x,y:s.y});b[p]=f,v[p]=m}else"ellipse"===p&&(u._toggleVisibility(e,!1),i&&(h=function(){u._toggleVisibility(e,!0)}));u._setInitState(e,n=i?b:v,r=i?v:b),t.push({ele:e,from:n,to:r,done:h})}},e.prototype._setLineMoveAnimation=function(t,e,i,n,r){if(null!=e&&null!=i){var o,a,s,l,h,c,u,d,p,f=e.nodeName,m=[],g=[],_={},y={};for(p="polygon"===f,o=(s=e.points).length||s.numberOfItems,l=(c=i.points).length||c.numberOfItems,d=Math.max(o,l),u=0;u<d;u++)u<o&&(a=s[u]||s.getItem(u),m.push({x:a.x,y:a.y})),u<l&&(h=c[u]||c.getItem(u),g.push({x:h.x,y:h.y}));this._addStart?(this._adjustStartLinePoints(this._addStart,m,s),o+=this._addStart):this._removeStart&&(this._adjustStartLinePoints(this._removeStart,g,c),l+=this._removeStart),l>o?this._adjustEndLinePoints(l,o,m,s,p):l<o&&this._adjustEndLinePoints(o,l,g,c,p),_[f]=m,y[f]=g,this._setInitState(n,_,y),t.push({ele:n,from:_,to:y,done:r})}},e.prototype._adjustStartLinePoints=function(t,e,i){for(var n=i[0]||i.getItem(0);t;)e.splice(0,0,{x:n.x,y:n.y}),t--},e.prototype._adjustEndLinePoints=function(t,e,i,n,r){var o,a,s;for(r&&(n.length>=3||n.numberOfItems>=3)?(a=i.pop(),o=i.pop(),s=n[n.length-3]||n.getItem(n.numberOfItems-3)):(n.length>0||n.numberOfItems>0)&&(s=n[n.length-1]||n.getItem(n.numberOfItems-1));t>e&&s;)i.push({x:s.x,y:s.y}),e++;r&&a&&o&&(i.push(o),i.push(a))},e.prototype._playLineRemoveAnimation=function(t,e){var i,n=this,r=n._chart.series[0].hostElement.parentNode,o=n._getAnimation(t,0);r.appendChild(e),[].slice.call(e.childNodes).forEach((function(t){n._setLineRiseDiveAnimation(o,t,!1)})),o.length&&(i=o[0].done,o[0].done=function(){e&&e.parentNode===r&&r.removeChild(e),i&&i()})},e.prototype._playLineAddAnimation=function(t,e){var i=this,n=e.hostElement,r=this._getAnimation(t,0);[].slice.call(n.childNodes).forEach((function(t){i._setLineRiseDiveAnimation(r,t,!0)}))},e.prototype._playLineMoveAnimation=function(t,e,i){var n,r,o,a,s=this,l=s._getAnimation(t,0),h=[];n=e.hostElement,r=[].slice.call(i.childNodes),[].slice.call(n.childNodes).forEach((function(t,e){o=r[e],"g"===(a=t.nodeName)&&t.nodeChilds?[].slice.call(t.nodeChilds).forEach((function(t,e){o&&(h.push(t),s._toggleVisibility(t,!1))})):"polygon"===a||"polyline"===a?s._setLineMoveAnimation(l,o,t,t,0===e?function(){h.forEach((function(t){s._toggleVisibility(t,!0)})),h=null}:null):o&&(h.push(t),s._toggleVisibility(t,!1))}))},e.prototype._playLoadColumnAnimation=function(t,e){this._playLoadBarAnimation(t,e,!0)},e.prototype._playLoadBarAnimation=function(t,e,i){void 0===i&&(i=!1);var n=this,r=n.animationMode;[].slice.call(n._chart.series[e].hostElement.childNodes).forEach((function(o,s){var l,h=o.nodeName;l=n._getAnimation(t,r===a.Point?s:r===a.Series?e:0),"g"===h?o.childNodes&&[].slice.call(o.childNodes).forEach((function(t,e){n._setLoadBarAnimation(l,t,i)})):n._setLoadBarAnimation(l,o,i)}))},e.prototype._setBarAnimation=function(t,e,i,n,r){this._setInitState(e,i,n),t.push({ele:e,from:i,to:n,done:r})},e.prototype._setLoadBarAnimation=function(t,e,i,n,r){void 0===n&&(n=!1);var o,a,s=this,l=i?"height":"width",h=i?"y":"x",c=e.getAttribute(l),u=e.getAttribute(h),d=i?"top":"left",p=s._chart._plotRect,f={},m={};f[l]=0,m[l]=Number(c),i&&(f[h]=p[l]+p[d],m[h]=Number(u)),o=n?m:f,a=n?f:m,"g"===e.nodeName?e.childNodes&&[].slice.call(e.childNodes).forEach((function(e){s._setBarAnimation(t,e,o,a,r)})):s._setBarAnimation(t,e,o,a,r)},e.prototype._setMoveBarAnimation=function(t,e,i){var n={},r={};null!=e&&null!=i&&(["width","height","x","y","top","left"].forEach((function(t){var o=e.getAttribute(t),a=i.getAttribute(t);o!==a&&(n[t]=Number(o),r[t]=Number(a))})),this._setInitState(i,n,r),t.push({ele:i,from:n,to:r}))},e.prototype._playColumnRemoveAnimation=function(t,e){this._playBarRemoveAnimation(t,e,!0)},e.prototype._playColumnAddAnimation=function(t,e){this._playBarAddAnimation(t,e,!0)},e.prototype._playColumnMoveAnimation=function(t,e,i){this._playBarMoveAnimation(t,e,i,!0)},e.prototype._playBarRemoveAnimation=function(t,e,i){void 0===i&&(i=!1);var n=this,r=n._chart.series[0].hostElement.parentNode,o=n._getAnimation(t,0);r.appendChild(e),[].slice.call(e.childNodes).forEach((function(t){n._setLoadBarAnimation(o,t,i,!0)})),o.length&&(o[0].done=function(){e&&e.parentNode===r&&r.removeChild(e)})},e.prototype._playBarAddAnimation=function(t,e,i){var n=this;void 0===i&&(i=!1);var r=e.hostElement,o=this._getAnimation(t,2);[].slice.call(r.childNodes).forEach((function(t){n._setLoadBarAnimation(o,t,i,!1)}))},e.prototype._playBarMoveAnimation=function(t,e,i,n){void 0===n&&(n=!1);var r,o,a,s,l,h,c,u=this;if(r=e.hostElement,a=[].slice.call(i.childNodes),u._addStart)for(c=0,s=a[0];c<u._addStart;)a.splice(0,0,s),c++;if(u._removeStart)for(c=0,s=a[a.length-1];c<u._removeStart;){var d=a.shift();a.push(d),c++}l=a.length,o=[].slice.call(r.childNodes),h=o.length,o.forEach((function(e,i){var r;if(i<l){if(s=a[i],i<u._addStart?(r=u._getAnimation(t,2),u._setLoadBarAnimation(r,e,n,!1)):i>=l-u._removeStart?(r=u._getAnimation(t,2),u._setLoadBarAnimation(r,e,n,!1),r=u._getAnimation(t,0),u._removeBarAnimation(r,e,s,n)):(r=u._getAnimation(t,1),u._setMoveBarAnimation(r,s,e)),i===h-1&&i<l-1)for(r=u._getAnimation(t,0),i++;i<l;i++)u._removeBarAnimation(r,e,s=a[i],n)}else r=u._getAnimation(t,2),u._setLoadBarAnimation(r,e,n,!1)}))},e.prototype._removeBarAnimation=function(t,e,i,n){var r=e.parentNode;r.appendChild(i),this._setLoadBarAnimation(t,i,n,!0,function(t){return function(){t.parentNode&&t.parentNode===r&&r.removeChild(t)}}(i))},e.prototype._playLoadScatterAnimation=function(t,e){var i=this,n=i._chart,r=n.series[e],o=i.animationMode,s=r._xValues||n._xvals;0===s.length&&(s=r._pointIndexes),[].slice.call(r.hostElement.childNodes).forEach((function(n,r){var l;l=o===a.Point?i._getScatterAnimation(t,s[r]):i._getAnimation(t,o===a.Series?e:0),i._setLoadScatterAnimation(l,n,!1)}))},e.prototype._setLoadScatterAnimation=function(t,e,i,n){var r=this;void 0===i&&(i=!1);var o,a,s={},l={};"g"===e.nodeName&&e.childNodes?[].slice.call(e.childNodes).forEach((function(e){r._setLoadScatterAnimation(t,e,i,n)})):(["rx","ry","stroke-width"].forEach((function(t){var i=e.getAttribute(t);s[t]=0,l[t]=Number(i)})),this._setInitState(e,o=i?l:s,a=i?s:l),t.push({ele:e,from:o,to:a,done:n}))},e.prototype._setUpdateScatterAnimation=function(t,e,i,n){var r={},o={};["cx","cy"].forEach((function(t){var n=e.getAttribute(t),a=i.getAttribute(t);n!==a&&(r[t]=Number(n),o[t]=Number(a))})),this._setInitState(i,r,o),t.push({ele:i,from:r,to:o,done:n})},e.prototype._getScatterAnimation=function(t,e){var i=this._getScatterAnimationIndex(t,e);return t[i]||(t[i]=[]),t[i]},e.prototype._getScatterAnimationIndex=function(t,e){var i=this._chart.axisX,n=null==i.min?i.actualMin:i.min;return Math.ceil((e-n)/(((null==i.max?i.actualMax:i.max)-n)/20))},e.prototype._playScatterRemoveAnimation=function(t,e){var i=this,n=i._chart.series[0].hostElement.parentNode,r=i._getAnimation(t,0);n.appendChild(e),[].slice.call(e.childNodes).forEach((function(t){i._setLoadScatterAnimation(r,t,!0)})),r.length&&(r[0].done=function(){e&&e.parentNode===n&&n.removeChild(e)})},e.prototype._playScatterAddAnimation=function(t,e){var i=this,n=e.hostElement,r=this._getAnimation(t,0);[].slice.call(n.childNodes).forEach((function(t){i._setLoadScatterAnimation(r,t,!1)}))},e.prototype._playScatterMoveAnimation=function(t,e,i){var n,r,o,a,s,l,h,c=this,u=c._getAnimation(t,0);if(n=e.hostElement,o=[].slice.call(i.childNodes),c._addStart)for(h=0,a=o[0];h<c._addStart;)o.splice(0,0,a),h++;if(c._removeStart)for(h=0,a=o[o.length-1];h<c._removeStart;){var d=o.shift();o.push(d),h++}s=o.length,r=[].slice.call(n.childNodes),l=r.length,r.forEach((function(t,e){if(e<s){if(e<c._addStart?c._setLoadScatterAnimation(u,t,!1):e>=s-c._removeStart?(c._setLoadScatterAnimation(u,t,!1),c._removeScatterAnimation(u,t,a=o[e])):c._setUpdateScatterAnimation(u,a=o[e],t),e===l-1&&e<s-1)for(e++;e<s;e++)c._removeScatterAnimation(u,t,a=o[e])}else c._setLoadScatterAnimation(u,t,!1)}))},e.prototype._removeScatterAnimation=function(t,e,i){var n=e.parentNode;n.appendChild(i),this._setLoadScatterAnimation(t,i,!0,function(t){return function(){t.parentNode&&t.parentNode===n&&n.removeChild(t)}}(i))},e.prototype._playDefaultAnimation=function(t,e){var i,n=this._chart,r=n.series[e].hostElement,o=n._plotRect,a=n._currentRenderEngine,l=r.getAttribute("clip-path"),h="clipPath"+(1e6*Math.random()).toFixed();a.addClipRect(new s.Rect(o.left,o.top,0,o.height),h),r.setAttribute("clip-path","url(#"+h+")"),i=n.hostElement.querySelector("#"+h),this._getAnimation(t,0).push({ele:i.querySelector("rect"),from:{width:0},to:{width:o.width},done:function(){r&&(l?r.setAttribute("clip-path",l):r.removeAttribute("clip-path"),i&&i.parentNode&&i.parentNode.removeChild(i))}})},e}(f),_=function(t){function e(e,i){return t.call(this,e,i)||this}return c(e,t),e.prototype._getDurationAndDelay=function(e,i){var n=t.prototype._getDurationAndDelay.call(this,e,i);return this.animationMode===a.Point&&(n.duration=i/e,n.delay=i/e),n},e.prototype._playAxesAnimation=function(){},e.prototype._getChartType=function(e){var i=t.prototype._getChartType.call(this,e);return"Bar"===i&&(i="Column"),i},e.prototype._playLoadLineAnimation=function(t,e){var i,n,r,o=this,s=o._chart.series[e],l=s._xValues||o._chart._xvals,h=o.animationMode,c=s.hostElement;h===a.Point?(0===l.length&&(l=s._pointIndexes),r=[].slice.call(c.childNodes),n=r.length-c.querySelectorAll("ellipse").length,r.forEach((function(e,i){o._setRadarLinePointAnimation(t,e,i,l,n)}))):(i=o._getAnimation(t,h===a.All?0:e),[].slice.call(c.childNodes).forEach((function(t){o._setLineRiseDiveAnimation(i,t,!0)})))},e.prototype._setRadarLinePointAnimation=function(t,e,i,n,r){var o,a,s,l,h,c,u,d=this,p=d._chart,f=e.nodeName,m=[],g=[],_=[],y=[],b=p._center,v=[],x=!1,w={},S={},C=0;if("polyline"===f||"polygon"===f){for(o=(l=e.points).length||l.numberOfItems,a=0;a<o;a++)v[u=d._getScatterAnimationIndex(t,n[a])]||(v[u]=[]),v[u].push(a),s=l[a]||l.getItem(a),m.push({x:b.x,y:b.y}),g.push({x:s.x,y:s.y});for(a=0,o=v.length;a<o;a++)v[a]&&(c=d._getAnimation(t,C),_=y.length?y.slice():m.slice(),y=_.slice(),v[a].forEach((function(t){var e=g[t];y[t]={x:e.x,y:e.y}})),S={},(w={})[f]=_,S[f]=y,x||(d._setInitState(e,w,S),x=!0),c.push({ele:e,from:w,to:S,done:h}),C++)}else if("ellipse"===f){if((a=i-(r||0))<0)return;c=d._getScatterAnimation(t,p._isPolar?n[a]:a),d._toggleVisibility(e,!1),c.push({ele:e,from:w,to:S,done:h=function(){d._toggleVisibility(e,!0)}})}},e.prototype._setLineRiseDiveAnimation=function(t,e,i){var n,r,o,a,s,l,h,c=this,u=e.nodeName,d=[],p=[],f=c._chart._center,m={},g={};if("polyline"===u||"polygon"===u){for(o=(l=e.points).length||l.numberOfItems,a=0;a<o;a++)s=l[a]||l.getItem(a),d.push({x:f.x,y:f.y}),p.push({x:s.x,y:s.y});m[u]=d,g[u]=p}else"ellipse"===u&&(c._toggleVisibility(e,!1),i&&(h=function(){c._toggleVisibility(e,!0)}));c._setInitState(e,n=i?m:g,r=i?g:m),t.push({ele:e,from:n,to:r,done:h})},e.prototype._parsePathByRadius=function(t,e,i){var n,r=t.center.x,o=t.center.y,a=t.angle,s=t.sweep;n=[r,o,t.radius,a,s,t.innerRadius||0],e.pie=[r,o,0,a,s,0],i.pie=n},e.prototype._playUpdateAnimation=function(e,i,n,r,o){if("Bar"===n||"Column"===n){if(null==r)return;this._playLoadBarAnimation(e,i,!1)}else t.prototype._playUpdateAnimation.call(this,e,i,n,r,o)},e.prototype._playLoadBarAnimation=function(t,e,i){void 0===i&&(i=!1);var n=this,r=n._chart,o=r._areas[e],s=n.animationMode;[].slice.call(r.series[e].hostElement.childNodes).forEach((function(i,r){var l,h={},c={};l=n._getAnimation(t,s===a.Point?r:s===a.Series?e:0),n._parsePathByRadius(o[r],h,c),n._setInitState(i,h,c),l.push({ele:i,from:h,to:c})}))},e}(g),y=function(){function t(){}return t.playAnimations=function(e,i,n,o,a,s,l){void 0===a&&(a=r.Swing);var h=e.length,c=0,u=[];return e.forEach((function(e,r){var d=t.playAnimation(e,i[r],n[r],(function(){c===h-1&&o&&o(),c++}),a,s,l);u.push(d)})),u},t.playAnimation=function(e,i,n,o,a,s,l){void 0===a&&(a=r.Swing);var h=t.parseAttrs(i,n);return t.animate((function(i){t.setElementAttr(e,h,i)}),o,a,s,l)},t.setElementAttr=function(e,i,n){var r,o;for(o in i)t.calcValue(r=i[o],n),e.setAttribute(o,r.getValue(r.value,n))},t.getPathDescOfPie=function(t,e,i,n,r,o){void 0===o&&(o=0);var a=!1;r>=2*Math.PI&&(a=!0,r=2*Math.PI-.001);var l=new s.Point(t,e);l.x+=i*Math.cos(n),l.y+=i*Math.sin(n);var h=n+r,c=new s.Point(t,e);if(c.x+=i*Math.cos(h),c.y+=i*Math.sin(h),o){var u=new s.Point(t,e);u.x+=o*Math.cos(h),u.y+=o*Math.sin(h);var d=new s.Point(t,e);d.x+=o*Math.cos(n),d.y+=o*Math.sin(n)}var p=" 0 0,1 ",f=" 0 0,0 ";Math.abs(r)>Math.PI&&(p=" 0 1,1 ",f=" 0 1,0 ");var m="M "+l.x.toFixed(3)+","+l.y.toFixed(3);return m+=" A "+i.toFixed(3)+","+i.toFixed(3)+p,m+=c.x.toFixed(3)+","+c.y.toFixed(3),o?(m+=a?" M "+u.x.toFixed(3)+","+u.y.toFixed(3):" L "+u.x.toFixed(3)+","+u.y.toFixed(3),m+=" A "+o.toFixed(3)+","+o.toFixed(3)+f,m+=d.x.toFixed(3)+","+d.y.toFixed(3)):m+=" L "+t.toFixed(3)+","+e.toFixed(3),a||(m+=" z"),m},t.parseAttrs=function(e,i){var n={};for(var r in e)if(null!=i[r])switch(r){case"polyline":n.points=t.parseAttr(e[r],i[r],(function(t,e){if(1===e){for(var i,n,r;t.length>1;){if((n=t[0]).x!==(r=t[1]).x||n.y!==r.y){n=null,r=null;break}t.splice(1,1)}for(i=t.length-1;i>0;i--)if(n=r,r=t[i],n){if(n.x!==r.x||n.y!==r.y)break;t.pop()}}return t.map((function(t){return t.x+","+t.y})).join(" ")}));break;case"polygon":n.points=t.parseAttr(e[r],i[r],(function(t,e){if(1===e){var i,n,r,o,a;for(o=t.pop(),a=t.pop();t.length>1;){if((n=t[0]).x!==(r=t[1]).x||n.y!==r.y){n=null,r=null;break}t.splice(1,1)}for(i=t.length-1;i>=0;i--)if(n=r,r=t[i],n){if(n.x!==r.x||n.y!==r.y)break;t.splice(i,1)}t.push(a),t.push(o)}return t.map((function(t){return t.x+","+t.y})).join(" ")}));break;case"d":n[r]=t.parseAttr(e[r],i[r],(function(t){return t.map((function(t){return"string"==typeof t?t:t[0]+","+t[1]})).join(" ")}));break;case"pie":n.d=t.parseAttr(e[r],i[r],(function(e){return t.getPathDescOfPie.apply(t,e)}));break;case"rotate":n.transform=t.parseAttr(e[r],i[r],(function(t){return"rotate("+t.join(" ")+")"}));break;case"width":case"height":case"rx":case"ry":case"stroke-width":n[r]=t.parseAttr(e[r],i[r],(function(t){return Math.abs(t)}));break;default:n[r]=t.parseAttr(e[r],i[r])}return n},t.animate=function(t,e,i,n,o){void 0===i&&(i=r.Swing),void 0===n&&(n=400),void 0===o&&(o=16),Object(s.asFunction)(t),Object(s.asNumber)(n,!1,!0),Object(s.asNumber)(o,!1,!0);var a=0,l=setInterval((function(){Date.now();var s=a/n;s=b[r[i]](s),t(s),(a+=o)>=n&&(clearInterval(l),(s<1||s>1)&&t(1),e&&e())}),o);return l},t.calcValue=function(e,i){var n=e.from,r=e.diff,o=e.value;Object(s.isNumber)(n)?e.value=0===r?n:n+r*i:Object(s.isArray)(n)&&t.parseArrayAttr(o,n,r,(function(t,e){return"number"==typeof t?t+e*i:t}))},t.parseAttr=function(e,i,n){var r,o,a,l;return Object(s.isArray)(e)&&Object(s.isArray)(i)?(o=i,a=[],l=(r=e).slice(),t.parseArrayAttr(a,r,o,(function(t,e){return t===e?0:e-t}))):(l=r=Number(e),a=(o=Number(i))-r),{from:r,to:o,value:l,diff:a,getValue:n||function(t,e){return t}}},t.parseArrayAttr=function(t,e,i,n){e.forEach((function(e,r){var o={},a=[],l=i[r];Object(s.isNumber)(e)||"string"==typeof e?t[r]=n(e,l):Object(s.isArray)(e)?(e.forEach((function(t,i){a[i]=n(e[i],l[i])})),t[r]=a):(Object.getOwnPropertyNames(e).forEach((function(t){o[t]=n(e[t],l[t])})),t[r]=o)}))},t}(),b=function(){function t(){}return t.Linear=function(t){return t},t.Swing=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},t.EaseInQuad=function(t){return t*t},t.EaseOutQuad=function(t){return t*(2-t)},t.EaseInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1},t.EaseInCubic=function(t){return t*t*t},t.EaseOutCubic=function(t){return--t*t*t+1},t.EaseInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},t.EaseInQuart=function(t){return t*t*t*t},t.EaseOutQuart=function(t){return 1- --t*t*t*t},t.EaseInOutQuart=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},t.EaseInQuint=function(t){return t*t*t*t*t},t.EaseOutQuint=function(t){return 1+--t*t*t*t*t},t.EaseInOutQuint=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},t.EaseInSine=function(t){return 1-Math.cos(t*(Math.PI/2))},t.EaseOutSine=function(t){return Math.sin(t*(Math.PI/2))},t.EaseInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.EaseInExpo=function(t){return 0==t?0:Math.pow(2,10*(t-1))},t.EaseOutExpo=function(t){return 1==t?1:1-Math.pow(2,-10*t)},t.EaseInOutExpo=function(t){return t==!!t?t:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},t.EaseInCirc=function(t){return-(Math.sqrt(1-t*t)-1)},t.EaseOutCirc=function(t){return Math.sqrt(1-Math.pow(t-1,2))},t.EaseInOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.EaseInBack=function(t){var e=1.70158;return t*t*((e+1)*t-e)},t.EaseOutBack=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},t.EaseInOutBack=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},t.EaseInBounce=function(e){return 1-t.EaseOutBounce(1-e)},t.EaseOutBounce=function(t){var e=7.5625;return t<1/2.75?e*t*t:t<2/2.75?e*(t-=1.5/2.75)*t+.75:t<2.5/2.75?e*(t-=2.25/2.75)*t+.9375:e*(t-=2.625/2.75)*t+.984375},t.EaseInOutBounce=function(e){return e<.5?.5*t.EaseInBounce(2*e):.5*t.EaseOutBounce(2*e-1)+.5},t.EaseInElastic=function(t){return t==!!t?t:-Math.pow(2,10*(t-=1))*Math.sin((t-.075)*(2*Math.PI)/.3)},t.EaseOutElastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},t.EaseInOutElastic=function(t){return t==!!t?t:(t*=2)<1?Math.pow(2,10*(t-=1))*Math.sin((t-.1125)*(2*Math.PI)/.45)*-.5:Math.pow(2,-10*(t-=1))*Math.sin((t-.1125)*(2*Math.PI)/.45)*.5+1},t}();Object(s._registerModule)("wijmo.chart.animation",h)},"E+9f":function(t,e,i){"use strict";var n,r=i("TYT/"),o=(i("Valr"),["*"]),a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,i,a):r(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},l=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var h=i("TYT/"),c=i("Valr"),u=i("QJY3"),d=i("Efb2"),p=i("lgZ4"),f={selector:"wj-flex-chart",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","binding","footer","header","selectionMode","palette","plotMargin","footerStyle","headerStyle","tooltipContent","itemsSource","bindingX","interpolateNulls","legendToggle","symbolSize","options","selection","itemFormatter","labelContent","chartType","rotated","stacking"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","renderingNg: rendering","renderedNg: rendered","selectionChangedNg: selectionChanged","selectionChangePC: selectionChange","itemsSourceChangingNg: itemsSourceChanging","itemsSourceChangedNg: itemsSourceChanged","seriesVisibilityChangedNg: seriesVisibilityChanged"],providers:[{provide:u.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};e.wjFlexChartMeta=f;var m=function(t){function e(e,i,n){var r=t.call(this,d.WjDirectiveBehavior.getHostElement(e,i))||this;return r.isInitialized=!1,r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.prototype.addEventListener=function(e,i,n,r){var o=this;void 0===r&&(r=!1);var a=d.WjDirectiveBehavior,s=a.ngZone;s&&a.outsideZoneEvents[i]?s.runOutsideAngular((function(){t.prototype.addEventListener.call(o,e,i,n,r)})):t.prototype.addEventListener.call(this,e,i,n,r)},Object.defineProperty(e.prototype,"tooltipContent",{get:function(){return this.tooltip.content},set:function(t){this.tooltip.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelContent",{get:function(){return this.dataLabel.content},set:function(t){this.dataLabel.content=t},enumerable:!0,configurable:!0}),e.meta={outputs:f.outputs,changeEvents:{selectionChanged:["selection"]}},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart"]],inputs:{asyncBindings:"asyncBindings",wjModelProperty:"wjModelProperty",isDisabled:"isDisabled",binding:"binding",footer:"footer",header:"header",selectionMode:"selectionMode",palette:"palette",plotMargin:"plotMargin",footerStyle:"footerStyle",headerStyle:"headerStyle",tooltipContent:"tooltipContent",itemsSource:"itemsSource",bindingX:"bindingX",interpolateNulls:"interpolateNulls",legendToggle:"legendToggle",symbolSize:"symbolSize",options:"options",selection:"selection",itemFormatter:"itemFormatter",labelContent:"labelContent",chartType:"chartType",rotated:"rotated",stacking:"stacking"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",renderingNg:"rendering",renderedNg:"rendered",selectionChangedNg:"selectionChanged",selectionChangePC:"selectionChange",itemsSourceChangingNg:"itemsSourceChanging",itemsSourceChangedNg:"itemsSourceChanged",seriesVisibilityChangedNg:"seriesVisibilityChanged"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(f.providers))],ngContentSelectors:o,decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275projection(1),r.\u0275\u0275elementEnd())},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.FlexChart);e.WjFlexChart=m;var g={selector:"wj-flex-pie",template:"<div><ng-content></ng-content></div>",inputs:["wjModelProperty","isDisabled","binding","footer","header","selectionMode","palette","plotMargin","footerStyle","headerStyle","tooltipContent","itemsSource","bindingName","innerRadius","isAnimated","offset","reversed","startAngle","selectedIndex","selectedItemPosition","selectedItemOffset","itemFormatter","labelContent","titles"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","renderingNg: rendering","renderedNg: rendered","selectionChangedNg: selectionChanged","itemsSourceChangingNg: itemsSourceChanging","itemsSourceChangedNg: itemsSourceChanged"],providers:[{provide:u.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};e.wjFlexPieMeta=g;var _=function(t){function e(e,i,n){var r=t.call(this,d.WjDirectiveBehavior.getHostElement(e,i))||this;return r.isInitialized=!1,r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.prototype.addEventListener=function(e,i,n,r){var o=this;void 0===r&&(r=!1);var a=d.WjDirectiveBehavior,s=a.ngZone;s&&a.outsideZoneEvents[i]?s.runOutsideAngular((function(){t.prototype.addEventListener.call(o,e,i,n,r)})):t.prototype.addEventListener.call(this,e,i,n,r)},Object.defineProperty(e.prototype,"tooltipContent",{get:function(){return this.tooltip.content},set:function(t){this.tooltip.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelContent",{get:function(){return this.dataLabel.content},set:function(t){this.dataLabel.content=t},enumerable:!0,configurable:!0}),e.meta={outputs:g.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-pie"]],inputs:{wjModelProperty:"wjModelProperty",isDisabled:"isDisabled",binding:"binding",footer:"footer",header:"header",selectionMode:"selectionMode",palette:"palette",plotMargin:"plotMargin",footerStyle:"footerStyle",headerStyle:"headerStyle",tooltipContent:"tooltipContent",itemsSource:"itemsSource",bindingName:"bindingName",innerRadius:"innerRadius",isAnimated:"isAnimated",offset:"offset",reversed:"reversed",startAngle:"startAngle",selectedIndex:"selectedIndex",selectedItemPosition:"selectedItemPosition",selectedItemOffset:"selectedItemOffset",itemFormatter:"itemFormatter",labelContent:"labelContent",titles:"titles"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",renderingNg:"rendering",renderedNg:"rendered",selectionChangedNg:"selectionChanged",itemsSourceChangingNg:"itemsSourceChanging",itemsSourceChangedNg:"itemsSourceChanged"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(g.providers))],ngContentSelectors:o,decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275projection(1),r.\u0275\u0275elementEnd())},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.FlexPie);e.WjFlexPie=_;var y={selector:"wj-flex-chart-axis",template:"",inputs:["wjProperty","axisLine","format","labels","majorGrid","majorTickMarks","majorUnit","max","min","position","reversed","title","labelAngle","minorGrid","minorTickMarks","minorUnit","origin","logBase","plotArea","labelAlign","name","overlappingLabels","labelPadding","itemFormatter","itemsSource","binding"],outputs:["initialized","rangeChangedNg: rangeChanged"],providers:[]};e.wjFlexChartAxisMeta=y;var b=function(t){function e(e,i,n){var r=t.call(this)||this;return r.isInitialized=!1,r.wjProperty="axes",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:y.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-axis"]],inputs:{wjProperty:"wjProperty",axisLine:"axisLine",format:"format",labels:"labels",majorGrid:"majorGrid",majorTickMarks:"majorTickMarks",majorUnit:"majorUnit",max:"max",min:"min",position:"position",reversed:"reversed",title:"title",labelAngle:"labelAngle",minorGrid:"minorGrid",minorTickMarks:"minorTickMarks",minorUnit:"minorUnit",origin:"origin",logBase:"logBase",plotArea:"plotArea",labelAlign:"labelAlign",name:"name",overlappingLabels:"overlappingLabels",labelPadding:"labelPadding",itemFormatter:"itemFormatter",itemsSource:"itemsSource",binding:"binding"},outputs:{initialized:"initialized",rangeChangedNg:"rangeChanged"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(y.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.Axis);e.WjFlexChartAxis=b;var v={selector:"wj-flex-chart-legend",template:"",inputs:["wjProperty","orientation","position","title","titleAlign"],outputs:["initialized"],providers:[]};e.wjFlexChartLegendMeta=v;var x=function(t){function e(e,i,n){var r=t.call(this,n)||this;return r.isInitialized=!1,r.wjProperty="legend",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:v.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-legend"]],inputs:{wjProperty:"wjProperty",orientation:"orientation",position:"position",title:"title",titleAlign:"titleAlign"},outputs:{initialized:"initialized"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(v.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.Legend);e.WjFlexChartLegend=x;var w={selector:"wj-flex-chart-data-label",template:"",inputs:["wjProperty","content","border","offset","connectingLine","position"],outputs:["initialized","renderingNg: rendering"],providers:[]};e.wjFlexChartDataLabelMeta=w;var S=function(t){function e(e,i,n){var r=t.call(this)||this;return r.isInitialized=!1,r.wjProperty="dataLabel",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:w.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-data-label"]],inputs:{wjProperty:"wjProperty",content:"content",border:"border",offset:"offset",connectingLine:"connectingLine",position:"position"},outputs:{initialized:"initialized",renderingNg:"rendering"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(w.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.DataLabel);e.WjFlexChartDataLabel=S;var C={selector:"wj-flex-pie-data-label",template:"",inputs:["wjProperty","content","border","offset","connectingLine","position"],outputs:["initialized","renderingNg: rendering"],providers:[]};e.wjFlexPieDataLabelMeta=C;var O=function(t){function e(e,i,n){var r=t.call(this)||this;return r.isInitialized=!1,r.wjProperty="dataLabel",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:C.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-pie-data-label"]],inputs:{wjProperty:"wjProperty",content:"content",border:"border",offset:"offset",connectingLine:"connectingLine",position:"position"},outputs:{initialized:"initialized",renderingNg:"rendering"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(C.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.PieDataLabel);e.WjFlexPieDataLabel=O;var j={selector:"wj-flex-chart-series",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjProperty","axisX","axisY","binding","bindingX","cssClass","name","style","altStyle","symbolMarker","symbolSize","symbolStyle","visibility","itemsSource","interpolateNulls","tooltipContent","itemFormatter","chartType"],outputs:["initialized","renderingNg: rendering","renderedNg: rendered","visibilityChangePC: visibilityChange"],providers:[]};e.wjFlexChartSeriesMeta=j;var T=function(t){function e(e,i,n){var r=t.call(this)||this;return r.isInitialized=!1,r.wjProperty="series",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:j.outputs,changeEvents:{"chart.seriesVisibilityChanged":["visibility"]},siblingId:"series"},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-series"]],inputs:{asyncBindings:"asyncBindings",wjProperty:"wjProperty",axisX:"axisX",axisY:"axisY",binding:"binding",bindingX:"bindingX",cssClass:"cssClass",name:"name",style:"style",altStyle:"altStyle",symbolMarker:"symbolMarker",symbolSize:"symbolSize",symbolStyle:"symbolStyle",visibility:"visibility",itemsSource:"itemsSource",interpolateNulls:"interpolateNulls",tooltipContent:"tooltipContent",itemFormatter:"itemFormatter",chartType:"chartType"},outputs:{initialized:"initialized",renderingNg:"rendering",renderedNg:"rendered",visibilityChangePC:"visibilityChange"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(j.providers))],ngContentSelectors:o,decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275projection(1),r.\u0275\u0275elementEnd())},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.Series);e.WjFlexChartSeries=T;var A={selector:"wj-flex-line-marker",template:"",inputs:["wjProperty","isVisible","seriesIndex","horizontalPosition","content","verticalPosition","alignment","lines","interaction","dragLines","dragThreshold","dragContent"],outputs:["initialized","positionChangedNg: positionChanged"],providers:[]};e.wjFlexChartLineMarkerMeta=A;var M=function(t){function e(e,i,n){var r=t.call(this,n)||this;return r.isInitialized=!1,r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:A.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-line-marker"]],inputs:{wjProperty:"wjProperty",isVisible:"isVisible",seriesIndex:"seriesIndex",horizontalPosition:"horizontalPosition",content:"content",verticalPosition:"verticalPosition",alignment:"alignment",lines:"lines",interaction:"interaction",dragLines:"dragLines",dragThreshold:"dragThreshold",dragContent:"dragContent"},outputs:{initialized:"initialized",positionChangedNg:"positionChanged"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(A.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.LineMarker);e.WjFlexChartLineMarker=M;var N={selector:"wj-flex-chart-data-point",template:"",inputs:["wjProperty","x","y"],outputs:["initialized"],providers:[]};e.wjFlexChartDataPointMeta=N;var P=function(t){function e(e,i,n){var r=t.call(this)||this;return r.isInitialized=!1,r.wjProperty="",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:N.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-data-point"]],inputs:{wjProperty:"wjProperty",x:"x",y:"y"},outputs:{initialized:"initialized"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(N.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.DataPoint);e.WjFlexChartDataPoint=P;var E={selector:"wj-flex-chart-plot-area",template:"",inputs:["wjProperty","column","height","name","row","style","width"],outputs:["initialized"],providers:[]};e.wjFlexChartPlotAreaMeta=E;var I=function(t){function e(e,i,n){var r=t.call(this)||this;return r.isInitialized=!1,r.wjProperty="plotAreas",r._wjBehaviour=d.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return a(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:E.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.ElementRef),r.\u0275\u0275directiveInject(h.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-plot-area"]],inputs:{wjProperty:"wjProperty",column:"column",height:"height",name:"name",row:"row",style:"style",width:"width"},outputs:{initialized:"initialized"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:h.forwardRef((function(){return i}))}].concat(E.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=s([,l(0,h.Inject(h.ElementRef)),l(1,h.Inject(h.Injector)),l(2,h.Inject("WjComponent")),l(2,h.SkipSelf()),l(2,h.Optional())],e)}(p.PlotArea);e.WjFlexChartPlotArea=I;var k=function(){function t(){}return t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({factory:function(e){return new(e||t)},imports:[[c.CommonModule]]}),t}();e.WjChartModule=k},EPMZ:function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"Workbook",(function(){return f})),i.d(n,"WorkSheet",(function(){return m})),i.d(n,"WorkbookColumn",(function(){return g})),i.d(n,"WorkbookRow",(function(){return _})),i.d(n,"WorkbookCell",(function(){return y})),i.d(n,"WorkbookFrozenPane",(function(){return b})),i.d(n,"WorkbookStyle",(function(){return v})),i.d(n,"WorkbookFont",(function(){return x})),i.d(n,"WorkbookFill",(function(){return w})),i.d(n,"WorkbookBorder",(function(){return S})),i.d(n,"WorkbookBorderSetting",(function(){return C})),i.d(n,"DefinedName",(function(){return O})),i.d(n,"WorkbookTable",(function(){return j})),i.d(n,"WorkbookTableColumn",(function(){return T})),i.d(n,"WorkbookTableStyle",(function(){return A})),i.d(n,"WorkbookTableCommonStyle",(function(){return M})),i.d(n,"WorkbookTableBandedStyle",(function(){return N})),i.d(n,"WorkbookTableBorder",(function(){return P})),i.d(n,"WorkbookTextRun",(function(){return E})),i.d(n,"HAlign",(function(){return a})),i.d(n,"VAlign",(function(){return l})),i.d(n,"BorderStyle",(function(){return h})),i.d(n,"useJSZip",(function(){return k})),i.d(n,"_xlsx",(function(){return F}));var r={};i.r(r),i.d(r,"softDetail",(function(){return V})),i.d(r,"softMultiRow",(function(){return B})),i.d(r,"FlexGridXlsxConverter",(function(){return z})),i.d(r,"XlsxFormatItemEventArgs",(function(){return W}));var o,a,s,l,h,c=i("tcrU"),u=i("lMX+"),d=i("fDnD"),p=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f=function(){function t(){}return Object.defineProperty(t.prototype,"sheets",{get:function(){return null==this._sheets&&(this._sheets=[]),this._sheets},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return null==this._styles&&(this._styles=[]),this._styles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definedNames",{get:function(){return null==this._definedNames&&(this._definedNames=[]),this._definedNames},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorThemes",{get:function(){return null==this._colorThemes&&(this._colorThemes=[]),this._colorThemes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reservedContent",{get:function(){return null==this._reservedContent&&(this._reservedContent={}),this._reservedContent},set:function(t){this._reservedContent=t},enumerable:!0,configurable:!0}),t.prototype.save=function(e){var i=F.save(this);return e&&t._saveToFile(i.base64,e,!(!this._reservedContent||!this._reservedContent.macros)),i.base64},t.prototype.saveAsync=function(e,i,n){var r=this;F.saveAsync(r,n).then((function(n){e&&t._saveToFile(n,e,!(!r._reservedContent||!r._reservedContent.macros)),i&&i(n)}))},t.prototype.load=function(t){var e=F.load(this._getBase64String(t));this._deserialize(e),e=null},t.prototype.loadAsync=function(t,e,i){var n=this;F.loadAsync(n._getBase64String(t)).then((function(t){n._deserialize(t),t=null,e(n)})).catch(i)},t.prototype._serialize=function(){var t={sheets:[]};return t.sheets=this._serializeWorkSheets(),this._styles&&this._styles.length>0&&(t.styles=this._serializeWorkbookStyles()),this._reservedContent&&(t.reservedContent=this._reservedContent),null!=this.activeWorksheet&&!isNaN(this.activeWorksheet)&&this.activeWorksheet>=0&&(t.activeWorksheet=this.activeWorksheet),this.application&&(t.application=this.application),this.company&&(t.company=this.company),null!=this.created&&(t.created=this.created),this.creator&&(t.creator=this.creator),this.lastModifiedBy&&(t.lastModifiedBy=this.lastModifiedBy),null!=this.modified&&(t.modified=this.modified),this._definedNames&&this._definedNames.length>0&&(t.definedNames=this._serializeDefinedNames()),this._colorThemes&&this._colorThemes.length>0&&(t.colorThemes=this._colorThemes.slice()),t},t.prototype._deserialize=function(t){this._deserializeWorkSheets(t.sheets),t.styles&&t.styles.length>0&&this._deserializeWorkbookStyles(t.styles),this.activeWorksheet=t.activeWorksheet,this.application=t.application,this.company=t.company,this.created=t.created,this.creator=t.creator,this.lastModifiedBy=t.lastModifiedBy,this.modified=t.modified,this.reservedContent=t.reservedContent,t.definedNames&&t.definedNames.length>0&&this._deserializeDefinedNames(t.definedNames),t.colorThemes&&t.colorThemes.length>0&&(this._colorThemes=t.colorThemes.slice())},t.prototype._addWorkSheet=function(t,e){null==this._sheets&&(this._sheets=[]),null==e||isNaN(e)?this._sheets.push(t):this._sheets[e]=t},t._saveToFile=function(e,i,n){var r,o,a,s,l,h,c=window.document,u=n?"xlsm":"xlsx",d="xlsm"===u?"application/vnd.ms-excel.sheet.macroEnabled.12":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if((o=i.lastIndexOf("."))<0)i+="."+u;else{if(0===o)throw"Invalid file name.";""===(r=i.substring(o+1))?i+="."+u:r!==u&&(i+="."+u)}a=new Blob([t._base64DecToArr(e)],{type:d}),navigator.msSaveBlob?navigator.msSaveBlob(a,i):URL.createObjectURL?(l=c.createElement("a"),h=function(t){var e=c.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)},l.download=i,l.href=URL.createObjectURL(a),h(l),l=null):(s=new FileReader,l=c.createElement("a"),h=function(t){var e=c.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)},s.onload=function(){l.download=i,l.href=s.result,h(l),l=null},s.readAsDataURL(a))},t.prototype._getBase64String=function(t){var e;if(null==t||0===t.length)throw"Invalid xlsx file content.";return-1!==(e=t.search(/base64,/i))&&(t=t.substring(e+7)),t},t.toXlsxDateFormat=function(t){var e;if(1===t.length)switch(t){case"r":case"R":return"ddd, dd MMM yyyy HH:mm:ss &quot;GMT&quot;";case"u":return"yyyy-MM-dd&quot;T&quot;HH:mm:ss&quot;Z&quot;";case"o":case"O":e=(e=c.culture.Globalize.calendar.patterns[t]).replace(/f+k/gi,"000");break;default:e=c.culture.Globalize.calendar.patterns[t]}return e||(e=t),e=e.replace(/"/g,"").replace(/tt/,"AM/PM").replace(/t/,"A/P").replace(/M+/gi,(function(t){return t.toLowerCase()})).replace(/g+y+/gi,(function(t){return t.substring(0,t.indexOf("y"))+"e"})),/FY|Q/i.test(e)?"General":e},t.toXlsxNumberFormat=function(t){var e,i,n,r,o,a,s,l=-1,h=t?t.toLowerCase():"",u=[];if(/^[ncpfdg]\d*.*,*$/.test(h)&&(i=this._formatMap[e=h[0]]),i){if(r=h.split(","),"c"===e&&("\u200b"===(n=(s=t?t.match(/([a-z])(\d*)(,*)(.*)/i):null)&&s[4]?s[4]:c.culture.Globalize.numberFormat.currency.symbol)&&(n=""),i=i.replace(/\{1\}/g,n)),h.length>1?l=parseInt(r[0].substr(1)):"d"!==e&&(l=2),!isNaN(l))for(a=0;a<l;a++)u.push(0);for(a=0;a<r.length-1;a++)u.push(",");o=i.replace(/\{0\}/g,u.length>0?"d"===e?u.join(""):(!isNaN(l)&&l>0?".":"")+u.join(""):"d"===e?"0":"")}else o=h;return o},t.fromXlsxFormat=function(t){var e,i,n,r,o,a,s,l,h,u=[],d=c.culture.Globalize.numberFormat.currency.symbol;if(!t||"General"===t)return[""];for(i=(t=t.replace(/;@/g,"").replace(/&quot;?/g,"")).split(";"),r=0;r<i.length;r++){if(/[hsmy\:]/i.test(n=i[r]))e=n.replace(/\[\$\-.+\]/g,"").replace(/(\\)(.)/g,"$2").replace(/H+/g,(function(t){return t.toLowerCase()})).replace(/m+/g,(function(t){return t.toUpperCase()})).replace(/S+/g,(function(t){return t.toLowerCase()})).replace(/AM\/PM/gi,"tt").replace(/A\/P/gi,"t").replace(/\.000/g,".fff").replace(/\.00/g,".ff").replace(/\.0/g,".f").replace(/\\[\-\s,]/g,(function(t){return t.substring(1)})).replace(/Y+/g,(function(t){return t.toLowerCase()})).replace(/D+/g,(function(t){return t.toLowerCase()})).replace(/M+:?|:?M+/gi,(function(t){return t.indexOf(":")>-1?t.toLowerCase():t})).replace(/g+e/gi,(function(t){return t.substring(0,t.length-1)+"yy"}));else if(a=n.lastIndexOf("."),s=n.lastIndexOf("0"),l=n.lastIndexOf(","),e=n.search(/\[\$([^\-\]]+)[^\]]*\]/)>-1||n.indexOf(d)>-1&&-1===n.search(/\[\$([\-\]]+)[^\]]*\]/)?"c":"%"===n[t.length-1]?"p":"n",e+=a>-1&&a<s?n.substring(a,s).length:"0",/^0+,*$/.test(n)&&(e="d"+((s=n.lastIndexOf("0"))+1)),l>-1&&s>-1&&s<l)for(h=n.substring(s+1,l+1).split(""),o=0;o<h.length;o++)e+=",";u.push(e)}return u},t._parseCellFormat=function(t,e){return e?this.toXlsxDateFormat(t):this.toXlsxNumberFormat(t)},t._parseExcelFormat=function(t){if(null!=t&&null!=t.value&&!isNaN(t.value)){var e=t.style&&t.style.format?t.style.format:"";return t.isDate||Object(c.isDate)(t.value)?this.fromXlsxFormat(e)[0]:!Object(c.isNumber)(t.value)||e&&"General"!==e?Object(c.isNumber)(t.value)||""===t.value?this.fromXlsxFormat(e)[0]:e:Object(c.isInt)(t.value)?"d":"f2"}},t.xlsxAddress=function(t,e,i,n,r){var o=i?"$":"",a=null==n?o:n?"$":"";return!0===r?"":(isNaN(e)?"":a+this._numAlpha(e))+(!1===r?"":isNaN(t)?"":o+(t+1).toString())},t.tableAddress=function(t){var e=t&&/^((\$?)([A-Za-z]+))?((\$?)(\d+))?$/.exec(t),i={};return e?(e[3]&&(i.col=this._alphaNum(e[3]),i.absCol=!!e[2]),e[6]&&(i.row=+e[6]-1,i.absRow=!!e[5]),i):null},t._parseHAlignToString=function(t){switch(t){case a.Left:return"left";case a.Center:return"center";case a.Right:return"right";case a.Justify:return"justify";default:return"general"}},t._parseStringToHAlign=function(t){var e=t?t.toLowerCase():"";return"left"===e?a.Left:"center"===e?a.Center:"right"===e?a.Right:"justify"===e?a.Justify:a.General},t._parseVAlignToString=function(t){switch(t){case l.Bottom:return"bottom";case l.Center:return"center";case l.Top:return"top";default:return null}},t._parseStringToVAlign=function(t){var e=t?t.toLowerCase():"";return"top"===e?l.Top:"center"===e?l.Center:"bottom"===e?l.Bottom:null},t._parseBorderTypeToString=function(t){switch(t){case h.Dashed:return"dashed";case h.Dotted:return"dotted";case h.Double:return"double";case h.Hair:return"hair";case h.Medium:return"medium";case h.MediumDashDotDotted:return"mediumDashDotDot";case h.MediumDashDotted:return"mediumDashDot";case h.MediumDashed:return"mediumDashed";case h.SlantedMediumDashDotted:return"slantDashDot";case h.Thick:return"thick";case h.Thin:return"thin";case h.ThinDashDotDotted:return"dashDotDot";case h.ThinDashDotted:return"dashDot";case h.None:default:return"none"}},t._parseStringToBorderType=function(t){return"dashed"===t?h.Dashed:"dotted"===t?h.Dotted:"double"===t?h.Double:"hair"===t?h.Hair:"medium"===t?h.Medium:"mediumDashDotDot"===t?h.MediumDashDotDotted:"mediumDashDot"===t?h.MediumDashDotted:"mediumDashed"===t?h.MediumDashed:"slantDashDot"===t?h.SlantedMediumDashDotted:"thick"===t?h.Thick:"thin"===t?h.Thin:"dashDotDot"===t?h.ThinDashDotDotted:"dashDot"===t?h.ThinDashDotted:null},t._escapeXML=function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""},t._unescapeXML=function(t){return"string"==typeof t?t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/"):""},t._numAlpha=function(t){var e=Math.floor(t/26)-1;return(e>-1?this._numAlpha(e):"")+this._alphabet.charAt(t%26)},t._alphaNum=function(t){var e=0;return t&&(t=t.toUpperCase()),2===t.length&&(e=this._alphaNum(t.charAt(0))+1),26*e+this._alphabet.indexOf(t.substr(-1))},t._b64ToUint6=function(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:43===t?62:47===t?63:0},t._base64DecToArr=function(t,e){for(var i,n,r=t.replace(/[^A-Za-z0-9\+\/]/g,""),o=r.length,a=e?Math.ceil((3*o+1>>2)/e)*e:3*o+1>>2,s=new Uint8Array(a),l=0,h=0,c=0;c<o;c++)if(n=3&c,l|=this._b64ToUint6(r.charCodeAt(c))<<18-6*n,3===n||o-c==1){for(i=0;i<3&&h<a;i++,h++)s[h]=l>>>(16>>>i&24)&255;l=0}return s},t._uint6ToB64=function(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65},t._base64EncArr=function(t){for(var e=2,i="",n=t.length,r=0,o=0;o<n;o++)o>0&&4*o/3%76==0&&(i+="\r\n"),r|=t[o]<<(16>>>(e=o%3)&24),2!==e&&t.length-o!=1||(i+=String.fromCharCode(this._uint6ToB64(r>>>18&63),this._uint6ToB64(r>>>12&63),this._uint6ToB64(r>>>6&63),this._uint6ToB64(63&r)),r=0);return i.substr(0,i.length-2+e)+(2===e?"":1===e?"=":"==")},t.prototype._serializeWorkSheets=function(){var t,e,i=[];for(e=0;e<this._sheets.length;e++)(t=this._sheets[e])&&(i[e]=t._serialize());return i},t.prototype._serializeWorkbookStyles=function(){var t,e,i=[];for(e=0;e<this._styles.length;e++)(t=this._styles[e])&&(i[e]=t._serialize());return i},t.prototype._serializeDefinedNames=function(){var t,e,i=[];for(e=0;e<this._definedNames.length;e++)(t=this._definedNames[e])&&(i[e]=t._serialize());return i},t.prototype._serializeTableStyles=function(){var t,e,i=[];for(e=0;e<this._tableStyles.length;e++)(t=this._tableStyles[e])&&(i[e]=t._serialize());return i},t.prototype._deserializeWorkSheets=function(t){var e,i,n;for(this._sheets=[],Object(c.assert)(null!=t,"workSheets should not be null."),n=0;n<t.length;n++)(i=t[n])&&((e=new m)._deserialize(i),this._sheets[n]=e)},t.prototype._deserializeWorkbookStyles=function(t){var e,i,n;for(this._styles=[],n=0;n<t.length;n++)(i=t[n])&&((e=new v)._deserialize(i),this._styles[n]=e)},t.prototype._deserializeDefinedNames=function(t){var e,i,n;for(this._definedNames=[],n=0;n<t.length;n++)(i=t[n])&&((e=new O)._deserialize(i),this._definedNames[n]=e)},t.prototype._deserializeTableStyles=function(t){var e,i,n;for(this._tableStyles=[],n=0;n<t.length;n++)(i=t[n])&&((e=new A)._deserialize(i),this._tableStyles[n]=e)},t._alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t._formatMap={n:"#,##0{0}",c:"{1}#,##0{0}_);({1}#,##0{0})",p:"#,##0{0}%",f:"0{0}",d:"{0}",g:"0{0}"},t}(),m=function(){function t(){}return Object.defineProperty(t.prototype,"columns",{get:function(){return null==this._columns&&(this._columns=[]),this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return null==this._rows&&(this._rows=[]),this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tables",{get:function(){return null==this._tables&&(this._tables=[]),this._tables},enumerable:!0,configurable:!0}),t.prototype._serialize=function(){var t;return this._checkEmptyWorkSheet()?null:(t={},this.style&&(t.style=this.style._serialize()),this._columns&&this._columns.length>0&&(t.columns=this._serializeWorkbookColumns()),this._rows&&this._rows.length>0&&(t.rows=this._serializeWorkbookRows()),this.frozenPane&&(t.frozenPane=this.frozenPane._serialize()),this.name&&(t.name=this.name),null!=this.summaryBelow&&(t.summaryBelow=this.summaryBelow),null!=this.visible&&(t.visible=this.visible),this._tables&&this._tables.length>0&&(t.tables=this._serializeTables()),t)},t.prototype._deserialize=function(t){var e,i;t.style&&((i=new v)._deserialize(t.style),this.style=i),t.columns&&t.columns.length>0&&this._deserializeWorkbookColumns(t.columns),t.rows&&t.rows.length>0&&this._deserializeWorkbookRows(t.rows),t.frozenPane&&((e=new b)._deserialize(t.frozenPane),this.frozenPane=e),this.name=t.name,this.summaryBelow=t.summaryBelow,this.visible=t.visible,t.tables&&t.tables.length>0&&this._deserializeTables(t.tables)},t.prototype._addWorkbookColumn=function(t,e){null==this._columns&&(this._columns=[]),null==e||isNaN(e)?this._columns.push(t):this._columns[e]=t},t.prototype._addWorkbookRow=function(t,e){null==this._rows&&(this._rows=[]),null==e||isNaN(e)?this._rows.push(t):this._rows[e]=t},t.prototype._serializeWorkbookColumns=function(){var t,e,i=[];for(e=0;e<this._columns.length;e++)(t=this._columns[e])&&(i[e]=t._serialize());return i},t.prototype._serializeWorkbookRows=function(){var t,e,i=[];for(e=0;e<this._rows.length;e++)(t=this._rows[e])&&(i[e]=t._serialize());return i},t.prototype._serializeTables=function(){var t,e,i=[];for(e=0;e<this._tables.length;e++)(t=this._tables[e])&&(i[e]=t._serialize());return i},t.prototype._deserializeWorkbookColumns=function(t){var e,i,n;for(this._columns=[],n=0;n<t.length;n++)(e=t[n])&&((i=new g)._deserialize(e),this._columns[n]=i)},t.prototype._deserializeWorkbookRows=function(t){var e,i,n;for(this._rows=[],n=0;n<t.length;n++)(e=t[n])&&((i=new _)._deserialize(e),this._rows[n]=i)},t.prototype._deserializeTables=function(t){var e,i,n;for(this._tables=[],n=0;n<t.length;n++)(i=t[n])&&((e=new j)._deserialize(i),this._tables[n]=e)},t.prototype._checkEmptyWorkSheet=function(){return!(null!=this._rows||null!=this._columns||null!=this.visible||null!=this.summaryBelow||null!=this.frozenPane||null!=this.style||null!=this.name&&""!==this.name||null!=this._tables&&0!=this._tables.length)},t}(),g=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookColumn()?null:(t={},this.style&&(t.style=this.style._serialize()),null!=this.autoWidth&&(t.autoWidth=this.autoWidth),null!=this.width&&(t.width=this.width),null!=this.visible&&(t.visible=this.visible),t)},t.prototype._deserialize=function(t){var e;t.style&&((e=new v)._deserialize(t.style),this.style=e),this.autoWidth=t.autoWidth,this.visible=t.visible,this.width=t.width},t.prototype._checkEmptyWorkbookColumn=function(){return null==this.style&&null==this.width&&null==this.autoWidth&&null==this.visible},t}(),_=function(){function t(){}return Object.defineProperty(t.prototype,"cells",{get:function(){return null==this._cells&&(this._cells=[]),this._cells},enumerable:!0,configurable:!0}),t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookRow()?null:(t={},this._cells&&this._cells.length>0&&(t.cells=this._serializeWorkbookCells()),this.style&&(t.style=this.style._serialize()),null!=this.collapsed&&(t.collapsed=this.collapsed),null==this.groupLevel||isNaN(this.groupLevel)||(t.groupLevel=this.groupLevel),null==this.height||isNaN(this.height)||(t.height=this.height),null!=this.visible&&(t.visible=this.visible),t)},t.prototype._deserialize=function(t){var e;t.cells&&t.cells.length>0&&this._deserializeWorkbookCells(t.cells),t.style&&((e=new v)._deserialize(t.style),this.style=e),this.collapsed=t.collapsed,this.groupLevel=t.groupLevel,this.height=t.height,this.visible=t.visible},t.prototype._addWorkbookCell=function(t,e){null==this._cells&&(this._cells=[]),null==e||isNaN(e)?this._cells.push(t):this._cells[e]=t},t.prototype._serializeWorkbookCells=function(){var t,e,i=[];for(e=0;e<this._cells.length;e++)(t=this._cells[e])&&(i[e]=t._serialize());return i},t.prototype._deserializeWorkbookCells=function(t){var e,i,n;for(this._cells=[],n=0;n<t.length;n++)(e=t[n])&&((i=new y)._deserialize(e),this._cells[n]=i)},t.prototype._checkEmptyWorkbookRow=function(){return null==this._cells&&null==this.style&&null==this.collapsed&&null==this.visible&&(null==this.height||isNaN(this.height))&&(null==this.groupLevel||isNaN(this.groupLevel))},t}(),y=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookCell()?null:(t={},this.style&&(t.style=this.style._serialize()),null!=this.value&&(t.value=this.value),this.formula&&(t.formula=this.formula),null!=this.isDate&&(t.isDate=this.isDate),null!=this.colSpan&&!isNaN(this.colSpan)&&this.colSpan>1&&(t.colSpan=this.colSpan),null!=this.rowSpan&&!isNaN(this.rowSpan)&&this.rowSpan>1&&(t.rowSpan=this.rowSpan),this.link&&(t.link=this.link),this.textRuns&&this.textRuns.length>0&&(t.textRuns=this._serializeTextRuns()),t)},t.prototype._deserialize=function(t){var e;t.style&&((e=new v)._deserialize(t.style),this.style=e),this.value=t.value,this.formula=t.formula,this.isDate=t.isDate,this.colSpan=t.colSpan,this.rowSpan=t.rowSpan,this.link=t.link,t.textRuns&&t.textRuns.length>0&&this._deserializeTextRuns(t.textRuns)},t.prototype._serializeTextRuns=function(){var t,e=[];for(t=0;t<this.textRuns.length;t++)e.push(this.textRuns[t]._serialize());return e},t.prototype._deserializeTextRuns=function(t){var e,i;for(this.textRuns=[],i=0;i<t.length;i++)(e=new E)._deserialize(t[i]),this.textRuns.push(e)},t.prototype._checkEmptyWorkbookCell=function(){return null==this.style&&null==this.value&&null==this.isDate&&(null==this.formula||""===this.formula)&&(null==this.colSpan||isNaN(this.colSpan)||this.colSpan<=1)&&(null==this.rowSpan||isNaN(this.rowSpan)||this.rowSpan<=1)&&(null==this.link||""===this.link)},t}(),b=function(){function t(){}return t.prototype._serialize=function(){return null!=this.columns&&!isNaN(this.columns)&&0!==this.columns||null!=this.rows&&!isNaN(this.rows)&&0!==this.rows?{columns:this.columns,rows:this.rows}:null},t.prototype._deserialize=function(t){this.columns=t.columns,this.rows=t.rows},t}(),v=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookStyle()?null:(t={},this.basedOn&&(t.basedOn=this.basedOn._serialize()),this.fill&&(t.fill=this.fill._serialize()),this.font&&(t.font=this.font._serialize()),this.borders&&(t.borders=this.borders._serialize()),this.format&&(t.format=this.format),null!=this.hAlign&&(t.hAlign=Object(c.asEnum)(this.hAlign,a,!1)),null!=this.vAlign&&(t.vAlign=Object(c.asEnum)(this.vAlign,l,!1)),null==this.indent||isNaN(this.indent)||(t.indent=this.indent),this.wordWrap&&(t.wordWrap=this.wordWrap),t)},t.prototype._deserialize=function(e){var i,n,r,o;e.basedOn&&((i=new t)._deserialize(e.basedOn),this.basedOn=i),e.fill&&((n=new w)._deserialize(e.fill),this.fill=n),e.font&&((r=new x)._deserialize(e.font),this.font=r),e.borders&&((o=new S)._deserialize(e.borders),this.borders=o),this.format=e.format,null!=e.hAlign&&(this.hAlign=Object(c.asEnum)(e.hAlign,a,!1)),null!=e.vAlign&&(this.vAlign=Object(c.asEnum)(e.vAlign,l,!1)),null==e.indent||isNaN(e.indent)||(this.indent=e.indent),e.wordWrap&&(this.wordWrap=e.wordWrap)},t.prototype._checkEmptyWorkbookStyle=function(){return null==this.basedOn&&null==this.fill&&null==this.font&&null==this.borders&&(null==this.format||""===this.format)&&null==this.hAlign&&null==this.vAlign&&null==this.wordWrap},t}(),x=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookFont()?null:(t={},null!=this.bold&&(t.bold=this.bold),null!=this.italic&&(t.italic=this.italic),null!=this.underline&&(t.underline=this.underline),this.color&&(t.color=this.color),this.family&&(t.family=this.family),null==this.size||isNaN(this.size)||(t.size=this.size),t)},t.prototype._deserialize=function(t){this.bold=t.bold,null!=t.color&&(this.color=t.color),this.family=t.family,this.italic=t.italic,this.size=t.size,this.underline=t.underline},t.prototype._checkEmptyWorkbookFont=function(){return null==this.bold&&null==this.italic&&null==this.underline&&(null==this.color||""===this.color)&&(null==this.family||""===this.family)&&(null==this.size||isNaN(this.size))},t}(),w=function(){function t(){}return t.prototype._serialize=function(){return this.color?{color:this.color}:null},t.prototype._deserialize=function(t){null!=t.color&&(this.color=t.color)},t}(),S=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookBorder()?null:(t={},this.top&&(t.top=this.top._serialize()),this.bottom&&(t.bottom=this.bottom._serialize()),this.left&&(t.left=this.left._serialize()),this.right&&(t.right=this.right._serialize()),this.diagonal&&(t.diagonal=this.diagonal._serialize()),t)},t.prototype._deserialize=function(t){var e,i,n,r,o;t.top&&((e=new C)._deserialize(t.top),this.top=e),t.bottom&&((i=new C)._deserialize(t.bottom),this.bottom=i),t.left&&((n=new C)._deserialize(t.left),this.left=n),t.right&&((r=new C)._deserialize(t.right),this.right=r),t.diagonal&&((o=new C)._deserialize(t.diagonal),this.diagonal=o)},t.prototype._checkEmptyWorkbookBorder=function(){return null==this.top&&null==this.bottom&&null==this.left&&null==this.right&&null==this.diagonal},t}(),C=function(){function t(){}return t.prototype._serialize=function(){var t;return null!=this.color&&""!==this.color||null!=this.style?(t={},this.color&&(t.color=this.color),null!=this.style&&(t.style=Object(c.asEnum)(this.style,h,!1)),t):null},t.prototype._deserialize=function(t){null!=t.color&&(this.color=t.color,null!=t.style&&(this.style=Object(c.asEnum)(t.style,h,!1)))},t}(),O=function(){function t(){}return t.prototype._serialize=function(){var t;return null==this.name?null:(t={name:this.name,value:this.value},null!=this.sheetName&&(t.sheetName=this.sheetName),t)},t.prototype._deserialize=function(t){this.name=t.name,this.value=t.value,this.sheetName=t.sheetName},t}(),j=function(){function t(){}return Object.defineProperty(t.prototype,"columns",{get:function(){return null==this._columns&&(this._columns=[]),this._columns},enumerable:!0,configurable:!0}),t.prototype._serialize=function(){var t,e;return null==this.name||null==this.range||null==this._columns?null:(null!=this.style&&(e=this.style._serialize()),(t={name:this.name,range:this.range,showHeaderRow:this.showHeaderRow,showTotalRow:this.showTotalRow,style:e,showBandedColumns:this.showBandedColumns,showBandedRows:this.showBandedRows,alterFirstColumn:this.alterFirstColumn,alterLastColumn:this.alterLastColumn,columns:[]}).columns=this._serializeTableColumns(),t)},t.prototype._deserialize=function(t){var e;this.name=t.name,this.range=t.range,this.showHeaderRow=t.showHeaderRow,this.showTotalRow=t.showTotalRow,null!=t.style&&((e=new A)._deserialize(t.style),this.style=e),this.showBandedColumns=t.showBandedColumns,this.showBandedRows=t.showBandedRows,this.alterFirstColumn=t.alterFirstColumn,this.alterLastColumn=t.alterLastColumn,this._deserializeTableColumns(t.columns)},t.prototype._serializeTableColumns=function(){var t,e,i=[];for(e=0;e<this._columns.length;e++)(t=this._columns[e])&&(i[e]=t._serialize());return i},t.prototype._deserializeTableColumns=function(t){var e,i,n;for(Object(c.assert)(null!=t,"table Columns should not be null."),this._columns=[],n=0;n<t.length;n++)(i=t[n])&&((e=new T)._deserialize(i),this._columns[n]=e)},t}(),T=function(){function t(){}return t.prototype._serialize=function(){return null==this.name?null:{name:this.name,totalRowLabel:this.totalRowLabel,totalRowFunction:this.totalRowFunction,showFilterButton:this.showFilterButton}},t.prototype._deserialize=function(t){this.name=t.name,this.totalRowLabel=t.totalRowLabel,this.totalRowFunction=t.totalRowFunction,this.showFilterButton=t.showFilterButton},t}(),A=function(){function t(){}return t.prototype._serialize=function(){var t;return this._checkEmptyWorkbookTableStyle()?null:(t={name:this.name},this.wholeTableStyle&&(t.wholeTableStyle=this.wholeTableStyle._serialize()),this.firstBandedColumnStyle&&(t.firstBandedColumnStyle=this.firstBandedColumnStyle._serialize()),this.firstBandedRowStyle&&(t.firstBandedRowStyle=this.firstBandedRowStyle._serialize()),this.secondBandedColumnStyle&&(t.secondBandedColumnStyle=this.secondBandedColumnStyle._serialize()),this.secondBandedRowStyle&&(t.secondBandedRowStyle=this.secondBandedRowStyle._serialize()),this.headerRowStyle&&(t.headerRowStyle=this.headerRowStyle._serialize()),this.totalRowStyle&&(t.totalRowStyle=this.totalRowStyle._serialize()),this.firstColumnStyle&&(t.firstColumnStyle=this.firstColumnStyle._serialize()),this.lastColumnStyle&&(t.lastColumnStyle=this.lastColumnStyle._serialize()),this.firstHeaderCellStyle&&(t.firstHeaderCellStyle=this.firstHeaderCellStyle._serialize()),this.lastHeaderCellStyle&&(t.lastHeaderCellStyle=this.lastHeaderCellStyle._serialize()),this.firstTotalCellStyle&&(t.firstTotalCellStyle=this.firstTotalCellStyle._serialize()),this.lastTotalCellStyle&&(t.lastTotalCellStyle=this.lastTotalCellStyle._serialize()),t)},t.prototype._deserialize=function(t){this.name=t.name,t.wholeTableStyle&&(this.wholeTableStyle=new M,this.wholeTableStyle._deserialize(t.wholeTableStyle)),t.firstBandedColumnStyle&&(this.firstBandedColumnStyle=new N,this.firstBandedColumnStyle._deserialize(t.firstBandedColumnStyle)),t.firstBandedRowStyle&&(this.firstBandedRowStyle=new N,this.firstBandedRowStyle._deserialize(t.firstBandedRowStyle)),t.secondBandedColumnStyle&&(this.secondBandedColumnStyle=new N,this.secondBandedColumnStyle._deserialize(t.secondBandedColumnStyle)),t.secondBandedRowStyle&&(this.secondBandedRowStyle=new N,this.secondBandedRowStyle._deserialize(t.secondBandedRowStyle)),t.headerRowStyle&&(this.headerRowStyle=new M,this.headerRowStyle._deserialize(t.headerRowStyle)),t.totalRowStyle&&(this.totalRowStyle=new M,this.totalRowStyle._deserialize(t.totalRowStyle)),t.firstColumnStyle&&(this.firstColumnStyle=new M,this.firstColumnStyle._deserialize(t.firstColumnStyle)),t.lastColumnStyle&&(this.lastColumnStyle=new M,this.lastColumnStyle._deserialize(t.lastColumnStyle)),t.firstHeaderCellStyle&&(this.firstHeaderCellStyle=new M,this.firstHeaderCellStyle._deserialize(t.firstHeaderCellStyle)),t.lastHeaderCellStyle&&(this.lastHeaderCellStyle=new M,this.lastHeaderCellStyle._deserialize(t.lastHeaderCellStyle)),t.firstTotalCellStyle&&(this.firstTotalCellStyle=new M,this.firstTotalCellStyle._deserialize(t.firstTotalCellStyle)),t.lastTotalCellStyle&&(this.lastTotalCellStyle=new M,this.lastTotalCellStyle._deserialize(t.lastTotalCellStyle))},t.prototype._checkEmptyWorkbookTableStyle=function(){return null==this.name||null==this.wholeTableStyle&&null==this.firstBandedColumnStyle&&null==this.firstBandedRowStyle&&null==this.secondBandedColumnStyle&&null==this.secondBandedRowStyle&&null==this.headerRowStyle&&null==this.totalRowStyle&&null==this.firstColumnStyle&&null==this.lastColumnStyle&&null==this.firstHeaderCellStyle&&null==this.lastHeaderCellStyle&&null==this.firstTotalCellStyle&&null==this.lastTotalCellStyle},t}(),M=function(t){function e(){return t.call(this)||this}return p(e,t),e.prototype._deserialize=function(e){var i;t.prototype._deserialize.call(this,e),e.borders&&((i=new P)._deserialize(e.borders),this.borders=i)},e}(v),N=function(t){function e(){return t.call(this)||this}return p(e,t),e.prototype._serialize=function(){var e;return(e=t.prototype._serialize.call(this)).size=this.size,e},e.prototype._deserialize=function(e){t.prototype._deserialize.call(this,e),null!=e.size&&(this.size=e.size)},e}(M),P=function(t){function e(){return t.call(this)||this}return p(e,t),e.prototype._serialize=function(){var e;return null!=(e=t.prototype._serialize.call(this))||this.vertical&&this.horizontal||(e={}),this.vertical&&(e.vertical=this.vertical._serialize()),this.horizontal&&(e.horizontal=this.horizontal._serialize()),e},e.prototype._deserialize=function(e){var i,n;t.prototype._deserialize.call(this,e),e.vertical&&((i=new C)._deserialize(e.vertical),this.vertical=i),e.horizontal&&((n=new C)._deserialize(e.horizontal),this.horizontal=n)},e}(S),E=function(){function t(){}return t.prototype._serialize=function(){var t={text:this.text};return this.font&&(t.font=this.font._serialize()),t},t.prototype._deserialize=function(t){t.font&&(this.font=new x,this.font._deserialize(t.font)),this.text=t.text},t}();(s=a||(a={}))[s.General=0]="General",s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right",s[s.Fill=4]="Fill",s[s.Justify=5]="Justify",function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Bottom=2]="Bottom",t[t.Justify=3]="Justify"}(l||(l={})),function(t){t[t.None=0]="None",t[t.Thin=1]="Thin",t[t.Medium=2]="Medium",t[t.Dashed=3]="Dashed",t[t.Dotted=4]="Dotted",t[t.Thick=5]="Thick",t[t.Double=6]="Double",t[t.Hair=7]="Hair",t[t.MediumDashed=8]="MediumDashed",t[t.ThinDashDotted=9]="ThinDashDotted",t[t.MediumDashDotted=10]="MediumDashDotted",t[t.ThinDashDotDotted=11]="ThinDashDotDotted",t[t.MediumDashDotDotted=12]="MediumDashDotDotted",t[t.SlantedMediumDashDotted=13]="SlantedMediumDashDotted"}(h||(h={}));var I=d;function k(t){I=t}var F=function(){function t(){}return t.load=function(t){var e=new I;Object(c.assert)(null==e.loadAsync,"Please use JSZip 2.5 to load excel files synchronously.");var i,n=new L(e);return this._loadImpl(n,t).then((function(t){return i=t})),i},t.loadAsync=function(t){var e=new I;return Object(c.assert)(null!=e.loadAsync,"Please use JSZip 3.0 to load excel files asynchrounously."),this._loadImpl(e,t)},t.save=function(t){var e,i=Date.now(),n=this._saveWorkbookToZip(t);i=Date.now()-i,e=this._macroEnabled?"application/vnd.ms-excel.sheet.macroEnabled.12;":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;";var r=Date.now(),o=n.generate({compression:"DEFLATE"});return{base64:o,zipTime:Date.now()-r,processTime:i,href:function(){return"data:"+e+"base64,"+o}}},t.saveAsync=function(t,e){var i=this._saveWorkbookToZip(t,!0).generateAsync({type:"base64",compression:"DEFLATE"});return e&&i.catch(e),i},t._loadImpl=function(t,e){var i,n=this,r=Date.now(),o={sheets:[]},a=t.loadAsync(e,{base64:!0}).then((function(t){return i=t}));e=null;var s=a.constructor;return(a=(a=(a=(a=(a=(a=a.then((function(){var t=i.file("xl/theme/theme1.xml");if(t)return t.async("string").then((function(t){n._getTheme(t),o.colorThemes=n._colorThemes})).then((function(){var t=s.resolve();return t=n._getZipStyle(i,t,o),n._getZipSharedString(i,t,o)}));var e=s.resolve();return e=n._getZipStyle(i,e,o),n._getZipSharedString(i,e,o)}))).then((function(){var t=i.file("xl/workbook.xml");if(t)return t.async("string").then((function(t){n._getWorkbook(t,o)}))}))).then((function(){n._tables=null;var t=s.resolve();return i.folder("xl/tables").forEach((function(e,i){null==n._tables&&(n._tables=[]),t=t.then((function(){return i.async("string").then((function(t){var e=n._getTable(t);e.fileName=i.name.substring(i.name.lastIndexOf("/")+1),n._tables.push(e)}))}))})),t}))).then((function(){var t=i.file("docProps/core.xml");if(t)return t.async("string").then((function(t){n._getCoreSetting(t,o)}))}))).then((function(){var t=i.file("xl/vbaProject.bin");if(t)return t.async("uint8array").then((function(t){null==o.reservedContent&&(o.reservedContent={}),o.reservedContent.macros=t}))}))).then((function(){var t=s.resolve();return i.folder("xl/worksheets").forEach((function(e,r){if(e&&-1===e.indexOf("/")){var a=n._getSheetIndex(r.name);isNaN(a)||(t=t.then((function(){return r.async("string").then((function(t){if(n._getSheet(t,a-1,o),null!=o.sheets[a-1].tableRIds||null!=o.sheets[a-1].hyperlinkRIds){var e=i.file("xl/worksheets/_rels/sheet"+a+".xml.rels");if(e)return e.async("string").then((function(t){for(var e=t.split("<Relationship "),i=e.length;--i;){var r=e[i],s=n._getAttr(r,"Id");o.sheets[a-1].tableRIds&&-1!==o.sheets[a-1].tableRIds.indexOf(s)?(null==o.sheets[a-1].tables&&(o.sheets[a-1].tables=[]),o.sheets[a-1].tables.push(n._getSheetRelatedTable(r))):o.sheets[a-1].hyperlinkRIds&&n._getSheetRelatedHyperlink(r,s,o.sheets[a-1])}}))}}))})))}})),t}))).then((function(){return o.processTime=Date.now()-r,i=null,o}))},t._getZipStyle=function(t,e,i){var n=this,r=t.file("xl/styles.xml");return r&&(e=e.then((function(){return r.async("string").then((function(t){n._getStyle(t),i.styles=n._styles,null!=n._tableStyles&&(i.tableStyles=n._tableStyles)}))}))),e},t._getZipSharedString=function(t,e,i){var n=this,r=t.file("xl/sharedStrings.xml");return r&&e.then((function(){return r.async("string").then((function(t){n._getSharedString(t)}))})),e},t._saveWorkbookToZip=function(t,e){void 0===e&&(e=!1),Date.now();var i=new I;e?Object(c.assert)(null!=i.generateAsync,"Please use JSZip 3.0 to save excel files asynchrounously."):Object(c.assert)(null==i.generateAsync,"Please use JSZip 2.5 to save excel files synchronously."),i.folder("_rels").file(".rels",this._xmlDescription+this._generateRelsDoc());var n=i.folder("docProps"),r=i.folder("xl");this._colorThemes=t.colorThemes,r.folder("theme").file("theme1.xml",this._xmlDescription+this._generateThemeDoc()),this._macroEnabled=!(!t.reservedContent||!t.reservedContent.macros),this._macroEnabled&&r.file("vbaProject.bin",t.reservedContent.macros);var o=r.folder("worksheets");n.file("core.xml",this._xmlDescription+this._generateCoreDoc(t)),this._sharedStrings=[[],0],this._styles=new Array(1),this._borders=new Array(1),this._fonts=new Array(1),this._fills=new Array(2),this._tableStyles=new Array,this._dxfs=new Array,this._contentTypes=[],this._props=[],this._xlRels=[],this._worksheets=[],this._tables=[],this._tableStyles=[];for(var a,s=t.sheets.length;s--;)if(this._generateWorkSheet(s,t,o),t.sheets[s]&&(t.sheets[s].tables&&t.sheets[s].tables.length>0||t.sheets[s].externalLinks&&t.sheets[s].externalLinks.length>0)){var l=0,h='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';if(t.sheets[s].externalLinks&&t.sheets[s].externalLinks.length>0&&(h+=this._generateHyperlinkRel(t.sheets[s].externalLinks),l=t.sheets[s].externalLinks.length),t.sheets[s].tables&&t.sheets[s].tables.length>0){null==a&&(a=r.folder("tables"));for(var u=0;u<t.sheets[s].tables.length;u++){var d=t.sheets[s].tables[u];this._generateTable(d,a),h+='<Relationship Target="../tables/'+d.fileName+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/table" Id="rId'+(u+1+l)+'"/>'}}h+="</Relationships>",o.folder("_rels").file("sheet"+(s+1)+".xml.rels",this._xmlDescription+h)}r.file("styles.xml",this._xmlDescription+this._generateStyleDoc()),i.file("[Content_Types].xml",this._xmlDescription+this._generateContentTypesDoc()),n.file("app.xml",this._xmlDescription+this._generateAppDoc(t)),r.folder("_rels").file("workbook.xml.rels",this._xmlDescription+this._generateWorkbookRels());var p=this._xmlDescription+this._generateSharedStringsDoc();return this._sharedStrings=[[],0],r.file("sharedStrings.xml",p),p=null,r.file("workbook.xml",this._xmlDescription+this._generateWorkbook(t)),i},t._getSharedString=function(t){var e,i,n,r,o,a,s,l,h=t.split(/<si.*?>/g),c=h.length;for(this._sharedStrings=[];--c;)for(e=1,r=!1,h[c].search(/<r>/gi)>-1?(r=!0,i=h[c].split(/<r>/g)):h[c].indexOf("<t/>")>=0?i=["",""]:(h[c]=h[c].substring(0,h[c].indexOf("</t>")),i=h[c].split(/<t.*?>/g));e<i.length;)a=null,r?(-1!==i[e].indexOf("<rPr>")&&(a=this._getTextRunFont(i[e])),(n=i[e].match(/(<t.*?>)(.*)/))&&3===n.length&&null!=n[2]&&-1!==(l=(s=n[2]).indexOf("</t>"))&&(s=s.substring(0,l)),o={font:a,text:f._unescapeXML(s)},null==this._sharedStrings[c-1]?this._sharedStrings[c-1]=[o]:this._sharedStrings[c-1].push(o)):this._sharedStrings[c-1]=f._unescapeXML(i[e]),e++},t._getInlineString=function(t){for(var e=t.split("<t>"),i=e.length,n="";--i;)n+=e[i].substring(0,e[i].indexOf("</t>"));return n},t._getCoreSetting=function(t,e){var i,n;(n=t.indexOf("<dc:creator>"))>=0&&(i=t.substr(n+12),e.creator=i.substring(0,i.indexOf("</dc:creator>"))),(n=t.indexOf("<cp:lastModifiedBy>"))>=0&&(i=t.substr(n+19),e.lastModifiedBy=i.substring(0,i.indexOf("</cp:lastModifiedBy>"))),(n=t.indexOf('<dcterms:created xsi:type="dcterms:W3CDTF">'))>=0&&(i=t.substr(n+43),e.created=new Date(i.substring(0,i.indexOf("</dcterms:created>")))),(n=t.indexOf('<dcterms:modified xsi:type="dcterms:W3CDTF">'))>=0&&(i=t.substr(n+44),e.modified=new Date(i.substring(0,i.indexOf("</dcterms:modified>"))))},t._getWorkbook=function(t,e){var i,n,r,o,a,s,l,h,c=t.substring(t.indexOf("<bookViews>"),t.indexOf("</bookViews>")),u="",d=t.indexOf("<definedNames>");for(c&&(u=this._getAttr(c,"activeTab")),e.activeWorksheet=+u,s=(a=t.split("<sheet ")).length;--s;)l=this._getAttr(a[s],"name"),h="hidden"!==this._getAttr(a[s],"state"),e.sheets.unshift({name:l,visible:h,columns:[],rows:[]});if(d>-1)for(e.definedNames=[],s=(a=t.substring(d,t.indexOf("</definedNames>")).split("<definedName ")).length;--s;)l=this._getAttr(a[s],"name"),(n=a[s].match(/.*>.+(?=<\/definedName>)/))&&(n=n[0].replace(/(.*>)(.+)/,"$2"),n=isNaN(+n)?n:+n),i={name:l,value:n},""!==(r=this._getAttr(a[s],"localSheetId"))&&(o=e.sheets[+r])&&(i.sheetName=o.name),e.definedNames.unshift(i)},t._getTheme=function(t){t=t.substring(t.indexOf("<a:clrScheme"),t.indexOf("</a:clrScheme>")),this._colorThemes=this._defaultColorThemes.slice(),this._colorThemes[0]=this._getAttr(t.substring(t.indexOf("a:lt1"),t.indexOf("</a:lt1>")),"lastClr")||this._getAttr(t.substring(t.indexOf("a:lt1"),t.indexOf("</a:lt1>")),"val"),this._colorThemes[1]=this._getAttr(t.substring(t.indexOf("a:dk1"),t.indexOf("</a:dk1>")),"lastClr")||this._getAttr(t.substring(t.indexOf("a:dk1"),t.indexOf("</a:dk1>")),"val"),this._colorThemes[2]=this._getAttr(t.substring(t.indexOf("a:lt2"),t.indexOf("</a:lt2>")),"val"),this._colorThemes[3]=this._getAttr(t.substring(t.indexOf("a:dk2"),t.indexOf("</a:dk2>")),"val");for(var e=t.substring(t.indexOf("<a:accent1"),t.indexOf("</a:accent6>")).split("<a:accent"),i=e.length;--i;)this._colorThemes[i+3]=this._getAttr(e[i],"val")},t._getStyle=function(t){var e,i,n,r,o,a=[],s=[],l=[],h=this._numFmts.slice();if(this._styles=[],(n=t.indexOf("<numFmts"))>=0){var c=t.substring(n+8,t.indexOf("</numFmts>")).split("<numFmt");for(e=c.length;--e;)h[+this._getAttr(i=c[e],"numFmtId")]=this._getAttr(i,"formatCode")}if((n=t.indexOf("<fonts"))>=0){var u,d=t.substring(n,t.indexOf("</fonts>")).split("<font>");for(e=d.length;--e;)r=this._getChildNodeValue(i=d[e],"sz"),a[e-1]={bold:i.indexOf("<b/>")>=0||"true"===this._getChildNodeValue(i,"b"),italic:i.indexOf("<i/>")>=0||"true"===this._getChildNodeValue(i,"i"),underline:i.indexOf("<u/>")>=0||(u=this._getChildNodeValue(i,"u"))&&"none"!==u,size:Math.round(r?96*+r/72:14),family:this._getChildNodeValue(i,"name"),color:this._getColor(i,!1)},r=null}if((n=t.indexOf("<fills"))>=0){var p=t.substring(n,t.indexOf("</fills>")).split("<fill>");for(e=p.length;--e;)s[e-1]=this._getColor(p[e],!0)}if((n=t.indexOf("<borders"))>=0){var m=t.substring(n,t.indexOf("</borders>")).split(/<border\/?>/);for(e=m.length;--e;)l[e-1]={left:this._getEdgeBorder(i=m[e],"left"),right:this._getEdgeBorder(i,"right"),top:this._getEdgeBorder(i,"top"),bottom:this._getEdgeBorder(i,"bottom")}}if((n=t.indexOf("<cellXfs"))>=0){var g,_,y,b,v,x,w=t.substring(n,t.indexOf("</cellXfs>")).split("<xf");for(e=w.length;--e;)_=(g=h[y=+this._getAttr(i=w[e],"numFmtId")])?/[hsmy\:]/i.test(g)?"date":g.indexOf("0")>-1?"number":"@"===g?"string":"unknown":"unknown",b=(y=+this._getAttr(i,"fontId"))>0?a[y]:null,v=(y=+this._getAttr(i,"fillId"))>1?s[y]:null,x=(y=+this._getAttr(i,"borderId"))>0?l[y]:null,n=i.indexOf("<alignment"),o=+this._getAttr(i,"quotePrefix"),this._styles.unshift({formatCode:g,type:_,font:b,fillColor:v,borders:x,hAlign:n>=0?f._parseStringToHAlign(this._getAttr(i,"horizontal")):null,vAlign:n>=0?f._parseStringToVAlign(this._getAttr(i,"vertical")):null,wordWrap:n>=0?"1"===this._getAttr(i,"wrapText"):null,quotePrefix:1===o})}if(t.indexOf("<tableStyle ")>-1){this._tableStyles=[];var S=t.substring(t.indexOf("<tableStyles "),t.indexOf("</tableStyles>")),C=t.substring(t.indexOf("<dxfs "),t.indexOf("</dxfs>"));this._getTableStyles(S,C.split("<dxf>"))}},t._getEdgeBorder=function(t,e){var i,n,r,o,a=t.indexOf("<"+e),s=t.indexOf("</"+e+">");if(a>=0){n=(n=t.substring(a)).substring(0,s>=0?s:n.indexOf("/>"));var l=this._getAttr(n,"style");l&&(r=f._parseStringToBorderType(l),o=this._getColor(n,!1),r===h.Thin&&o&&"#c6c6c6"===o.toLowerCase()||((i={}).style=r,i.color=o))}return i},t._getSheet=function(t,e,i){var n,r=[];if(t.indexOf("<mergeCells")>-1)for(var o=t.substring(t.indexOf("<mergeCells"),t.indexOf("</mergeCells>")).split("<mergeCell "),a=o.length;--a;)2===(n=this._getAttr(o[a],"ref").split(":")).length&&r.unshift({topRow:+n[0].match(/\d*/g).join("")-1,leftCol:this._alphaNum(n[0].match(/[a-zA-Z]*/g)[0]),bottomRow:+n[1].match(/\d*/g).join("")-1,rightCol:this._alphaNum(n[1].match(/[a-zA-Z]*/g)[0])});this._getsBaseSharedFormulas(t);var s=t.split("<row "),l=i.sheets[e];if(s[0].indexOf("<dimension")>=0){var h=this._getAttr(s[0].substr(s[0].indexOf("<dimension")),"ref");h&&(h=h.substr(h.indexOf(":")+1),l.maxCol=this._alphaNum(h.match(/[a-zA-Z]*/g)[0])+1,l.maxRow=+h.match(/\d*/g).join(""))}var u=t.indexOf("<tableParts");if(u>-1){var d=t.substring(u,t.indexOf("</tableParts>")).split("<tablePart "),p=d.length;for(l.tableRIds=[];--p;)l.tableRIds.unshift(this._getAttr(d[p],"r:id"))}if(s.length>0&&s[0].indexOf("<pane")>-1&&"frozen"===this._getAttr(s[0].substr(s[0].indexOf("<pane")),"state")){var m=this._getAttr(s[0].substr(s[0].indexOf("<pane")),"ySplit"),g=this._getAttr(s[0].substr(s[0].indexOf("<pane")),"xSplit");l.frozenPane={rows:m?+m:NaN,columns:g?+g:NaN}}l.summaryBelow="0"!==this._getAttr(s[0],"summaryBelow"),a=s.length,s.length<=1?(l.maxCol=20,l.maxRow=200):l.maxRow<a-1&&(l.maxRow=a-1);for(var _,y=null,b=null;--a;){var v=l.rows[+this._getAttr(s[a],"r")-1]={visible:!0,groupLevel:NaN,cells:[]};if(s[a].substring(0,s[a].indexOf(">")).indexOf("hidden")>-1&&"1"===this._getAttr(s[a],"hidden")&&(v.visible=!1),"1"===this._getAttr(s[a],"customHeight")){var x=+this._getAttr(s[a].substring(0,s[a].indexOf(">")).replace("customHeight",""),"ht");v.height=96*x/72}y=null,b=null,"1"===this._getAttr(s[a],"customFormat")&&(y=(b=this._styles[+this._getAttr(s[a].substring(s[a].indexOf(" s=")),"s")]||{type:"General",formatCode:null}).font||b.fillColor||b.hAlign||b.vAlign||b.wordWrap||b.borders||b.formatCode&&"General"!==b.formatCode?{format:b.formatCode&&"General"!==b.formatCode?b.formatCode:null,font:b.font,fill:{color:b.fillColor},borders:b.borders,hAlign:b.hAlign,vAlign:b.vAlign,wordWrap:b.wordWrap}:null),v.style=y;var w=this._getAttr(s[a],"outlineLevel");v.groupLevel=w&&""!==w?+w:NaN,v.collapsed="1"===this._getAttr(s[a],"collapsed");var S=s[a].split("<c "),C=S.length;for((null==l.maxCol||l.maxCol<C-1)&&(l.maxCol=C-1);--C;){var O=S[C];y=(b=this._styles[+this._getAttr(O,"s")]||{type:"General",formatCode:null}).font||b.fillColor||b.hAlign||b.vAlign||b.wordWrap||b.borders||b.formatCode&&"General"!==b.formatCode?{format:b.formatCode&&"General"!==b.formatCode?b.formatCode:null,font:b.font,fill:{color:b.fillColor},borders:b.borders,hAlign:b.hAlign,vAlign:b.vAlign,wordWrap:b.wordWrap}:null;var j=this._getAttr(O.substring(0,O.indexOf(">")),"t")||b.type,T=null,A="inlineStr"===j||O.indexOf("<is>")>=0;A?T=this._getInlineString(O):O.indexOf("<v>")>-1&&(T=O.substring(O.indexOf("<v>")+3,O.indexOf("</v>")));var M=null,N=null,P=null;O.indexOf("<f")>-1&&(O.indexOf("</f>")>-1?(M=O.match(/<f.*>.+(?=<\/f>)/))&&(M=M[0].replace(/(\<f.*>)(.+)/,"$2")):(N=this._getAttr(O,"si"))&&(P=this._getAttr(O,"r"),M=this._getSharedFormula(N,P))),null!=M&&(M=M.replace(/\[\#This Row\]\s*,\s*/gi,"@")),"str"===j||"e"===j||A||(T=T?+T:T),_=this._alphaNum(this._getAttr(O,"r").match(/[a-zA-Z]*/g)[0]);var E=null;switch(j){case"s":null!=(T=this._sharedStrings[T])&&(Object(c.isString)(T)?b&&b.quotePrefix&&(T="'"+T):(E=T.slice(),T=this._getTextOfTextRuns(E)));break;case"b":T=1===T;break;case"date":T=T?this._convertDate(T):""}Object(c.isNumber)(T)&&(null==y&&(y={format:""}),y.format=Object(c.isInt)(T)?y.format||"#,##0":y.format||"#,##0.00"),v.cells[_]={value:T,textRuns:E,isDate:"date"===j,formula:f._unescapeXML(M),style:y}}}var I=[],k=[];if(y=null,b=null,s.length>0&&s[0].indexOf("<cols>")>-1)for(var F=(I=s[0].substring(s[0].indexOf("<cols>")+6,s[0].indexOf("</cols>")).split("<col ")).length-1;F>0;F--){var D=this._parseCharWidthToPixel(+this._getAttr(I[F],"width"));for(b=null,I[F].indexOf("style")>-1&&(b=this._styles[+this._getAttr(I[F],"style")]||{type:"General",formatCode:null}),y=null,b&&(b.font||b.fillColor||b.hAlign||b.vAlign||b.wordWrap||b.borders||b.formatCode&&"General"!==b.formatCode)&&(y={format:b.formatCode&&"General"!==b.formatCode?b.formatCode:null,font:b.font,fill:{color:b.fillColor},borders:b.borders,hAlign:b.hAlign,vAlign:b.vAlign,wordWrap:b.wordWrap}),_=+this._getAttr(I[F],"min")-1;_<+this._getAttr(I[F],"max")&&_<l.maxCol;_++)k[_]={visible:"1"!==this._getAttr(I[F],"hidden"),autoWidth:"1"===this._getAttr(I[F],"bestFit"),width:D,style:y}}l.columns=k;var L,R=t.indexOf("<hyperlinks");if(R>-1)for(var V=t.substring(R,t.indexOf("</hyperlinks>")).split("<hyperlink "),B=V.length;--B;)this._getHyperlink(l,V[B]);if(l.frozenPane){if(!isNaN(l.frozenPane.rows))for(a=0;a<l.rows.length&&a<l.frozenPane.rows;a++)l.rows[a]&&!l.rows[a].visible&&l.frozenPane.rows++;if(!isNaN(l.frozenPane.columns))for(a=0;a<k.length&&a<l.frozenPane.columns;a++)k[a]&&!k[a].visible&&l.frozenPane.columns++}for(C=0;C<r.length;C++)l.rows[(L=r[C]).topRow]||(l.rows[L.topRow]={cells:[]}),l.rows[L.topRow].cells||(l.rows[L.topRow].cells=[]),l.rows[L.topRow].cells[L.leftCol]||(l.rows[L.topRow].cells[L.leftCol]={}),l.rows[L.topRow].cells[L.leftCol].rowSpan=L.bottomRow<l.maxRow?L.bottomRow-L.topRow+1:200,l.rows[L.topRow].cells[L.leftCol].colSpan=L.rightCol<l.maxCol?L.rightCol-L.leftCol+1:20},t._getTable=function(t){var e={};e.name=this._getAttr(t,"name"),e.range=this._getAttr(t,"ref");var i=this._getAttr(t,"headerRowCount");e.showHeaderRow=""==i||"1"===i;var n=this._getAttr(t,"totalsRowCount");e.showTotalRow="1"===n;var r=t.substring(t.indexOf("<tableStyleInfo")),o=this._getAttr(r,"name");e.style=this._isBuiltInStyleName(o)?{name:o}:this._getTableStyleByName(o),e.showBandedColumns="1"===this._getAttr(r,"showColumnStripes"),e.showBandedRows="1"===this._getAttr(r,"showRowStripes"),e.alterFirstColumn="1"===this._getAttr(r,"showFirstColumn"),e.alterLastColumn="1"===this._getAttr(r,"showLastColumn");var a=t.split("<tableColumn ");e.columns=[];for(var s=1;s<a.length;s++)e.columns.push(this._getTableColumn(a[s]));if(t.indexOf("filterColumn")>-1)for(var l=t.substring(t.indexOf("<autoFilter"),t.indexOf("</autoFilter>")).split("<filterColumn"),h=1;h<l.length;h++){var c=l[h],u=+this._getAttr(c,"colId");e.columns[u].showFilterButton="1"!==this._getAttr(c,"hiddenButton")}return e},t._getTableColumn=function(t){var e={};e.name=this._getAttr(t,"name");var i=this._getAttr(t,"totalsRowLabel");if(i)e.totalRowLabel=i;else{var n=this._getAttr(t,"totalsRowFunction");"custom"===n&&(n=t.substring(t.indexOf("<totalsRowFormula>")+2+"totalsRowFormula".length,t.indexOf("</totalsRowFormula>"))),e.totalRowFunction=n}return e},t._getSheetRelatedTable=function(t){var e=this._getAttr(t,"Target");e=e.substring(e.lastIndexOf("/")+1);for(var i=0;i<this._tables.length;i++){var n=this._tables[i];if(e===n.fileName)return n}return null},t._getSheetRelatedHyperlink=function(t,e,i){for(var n=0;n<i.hyperlinkRIds.length;n++){var r=i.hyperlinkRIds[n];if(r.rId===e){var o=this._getAttr(t,"Target");i.rows[r.ref.row]&&i.rows[r.ref.row].cells[r.ref.col]&&(i.rows[r.ref.row].cells[r.ref.col].link=o)}}},t._getTableStyles=function(t,e){for(var i=t.split("<tableStyle "),n=i.length;--n;){var r={},o=i[n];r.name=this._getAttr(o,"name");for(var a=o.split("<tableStyleElement "),s=a.length;--s;){var l=a[s],h=this._getAttr(l,"type");switch(h){case"firstRowStripe":h="firstBandedRowStyle";break;case"secondRowStripe":h="secondBandedRowStyle";break;case"firstColumnStripe":h="firstBandedColumnStyle";break;case"secondColumnStripe":h="secondBandedColumnStyle";break;default:h+="Style"}var c=this._getAttr(l,"dxfId");""!==c&&(r[h]=this._getTableStyleElement(e[+c+1]));var u=this._getAttr(l,"size");u&&(null==r[h]&&(r[h]={}),r[h].size=+u)}this._tableStyles.push(r)}},t._getTableStyleElement=function(t){var e=null,i=null,n=null,r=null,o=t.indexOf("<font>");if(o>=0){e=t.substring(o,t.indexOf("</font>"));var a=this._getChildNodeValue(e,"sz");i={bold:"1"===this._getChildNodeValue(e,"b"),italic:"1"===this._getChildNodeValue(e,"i"),underline:"1"===this._getChildNodeValue(e,"u"),size:Math.round(a?96*+a/72:14),family:this._getChildNodeValue(e,"name"),color:this._getColor(e,!1)}}return e=null,(o=t.indexOf("<fill>"))>=0&&(e=t.substring(o,t.indexOf("</fill>")),n={color:this._getColor(e,!0)}),e=null,(o=t.indexOf("<border>"))>=0&&(e=t.substring(o,t.indexOf("</border>")),r={left:this._getEdgeBorder(e,"left"),right:this._getEdgeBorder(e,"right"),top:this._getEdgeBorder(e,"top"),bottom:this._getEdgeBorder(e,"bottom"),vertical:this._getEdgeBorder(e,"vertical"),horizontal:this._getEdgeBorder(e,"horizontal")}),{font:i,fill:n,borders:r}},t._getTableStyleByName=function(t){var e,i;if(null==this._tableStyles||0===this._tableStyles.length)return null;for(e=0;e<this._tableStyles.length;e++)if((i=this._tableStyles[e])&&i.name.toLowerCase()===t.toLowerCase())return i;return null},t._getHyperlink=function(t,e){var i,n,r,o,a;if(null!=(i=this._getAttr(e,"ref"))){n=i.split(":"),null==(o=this._getAttr(e,"r:id"))&&(a=this._getAttr(e,"location"));for(var s=0;s<n.length;s++)r=f.tableAddress(n[s]),o?(null==t.hyperlinkRIds&&(t.hyperlinkRIds=[]),t.hyperlinkRIds.push({ref:r,rId:o})):a&&t.rows[r.row]&&t.rows[r.row].cells[r.col]&&(t.rows[r.row].cells[r.col].link=a)}},t._getTextRunFont=function(t){var e,i=this._getChildNodeValue(t,"sz");return{bold:t.indexOf("<b/>")>=0||"true"===this._getChildNodeValue(t,"b"),italic:t.indexOf("<i/>")>=0||"true"===this._getChildNodeValue(t,"i"),underline:t.indexOf("<u/>")>=0||(e=this._getChildNodeValue(t,"u"))&&"none"!==e,size:Math.round(i?96*+i/72:14),family:this._getChildNodeValue(t,"name"),color:this._getColor(t,!1)}},t._getTextOfTextRuns=function(t){var e,i,n="";for(e=0;e<t.length;e++)(i=t[e])&&(n+=i.text);return n},t._isBuiltInStyleName=function(t){var e;if(0===t.search(/TableStyleLight/i)){if(e=+t.substring(15),!isNaN(e)&&e>=1&&e<=21)return!0}else if(0===t.search(/TableStyleMedium/i)){if(e=+t.substring(16),!isNaN(e)&&e>=1&&e<=28)return!0}else if(0===t.search(/TableStyleDark/i)&&(e=+t.substring(14),!isNaN(e)&&e>=1&&e<=11))return!0;return!1},t._generateRelsDoc=function(){return'<Relationships xmlns="'+this._relationshipsNS+'"><Relationship Target="docProps/app.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Id="rId3"/><Relationship Target="docProps/core.xml" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Id="rId2"/><Relationship Target="xl/workbook.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Id="rId1"/></Relationships>'},t._generateThemeDoc=function(){return'<a:theme name="Office Theme" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:themeElements>'+this._generateClrScheme()+this._generateFontScheme()+this._generateFmtScheme()+"</a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/></a:theme>"},t._generateClrScheme=function(){return null===this._colorThemes&&(this._colorThemes=[]),'<a:clrScheme name="Office"><a:dk1><a:sysClr lastClr="'+(this._colorThemes[1]||"000000")+'" val="windowText"/></a:dk1><a:lt1><a:sysClr lastClr="'+(this._colorThemes[0]||"FFFFFF")+'" val="window"/></a:lt1><a:dk2><a:srgbClr val="'+(this._colorThemes[3]||"1F497D")+'"/></a:dk2><a:lt2><a:srgbClr val="'+(this._colorThemes[2]||"EEECE1")+'"/></a:lt2><a:accent1><a:srgbClr val="'+(this._colorThemes[4]||"4F81BD")+'"/></a:accent1><a:accent2><a:srgbClr val="'+(this._colorThemes[5]||"C0504D")+'"/></a:accent2><a:accent3><a:srgbClr val="'+(this._colorThemes[6]||"9BBB59")+'"/></a:accent3><a:accent4><a:srgbClr val="'+(this._colorThemes[7]||"8064A2")+'"/></a:accent4><a:accent5><a:srgbClr val="'+(this._colorThemes[8]||"4BACC6")+'"/></a:accent5><a:accent6><a:srgbClr val="'+(this._colorThemes[9]||"F79646")+'"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme>'},t._generateFontScheme=function(){return'<a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria"/><a:ea typeface=""/><a:cs typeface=""/><a:font typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af" script="Jpan"/><a:font typeface="\ub9d1\uc740 \uace0\ub515" script="Hang"/><a:font typeface="\u5b8b\u4f53" script="Hans"/><a:font typeface="\u65b0\u7d30\u660e\u9ad4" script="Hant"/><a:font typeface="Times New Roman" script="Arab"/><a:font typeface="Times New Roman" script="Hebr"/><a:font typeface="Tahoma" script="Thai"/><a:font typeface="Nyala" script="Ethi"/><a:font typeface="Vrinda" script="Beng"/><a:font typeface="Shruti" script="Gujr"/><a:font typeface="MoolBoran" script="Khmr"/><a:font typeface="Tunga" script="Knda"/><a:font typeface="Raavi" script="Guru"/><a:font typeface="Euphemia" script="Cans"/><a:font typeface="Plantagenet Cherokee" script="Cher"/><a:font typeface="Microsoft Yi Baiti" script="Yiii"/><a:font typeface="Microsoft Himalaya" script="Tibt"/><a:font typeface="MV Boli" script="Thaa"/><a:font typeface="Mangal" script="Deva"/><a:font typeface="Gautami" script="Telu"/><a:font typeface="Latha" script="Taml"/><a:font typeface="Estrangelo Edessa" script="Syrc"/><a:font typeface="Kalinga" script="Orya"/><a:font typeface="Kartika" script="Mlym"/><a:font typeface="DokChampa" script="Laoo"/><a:font typeface="Iskoola Pota" script="Sinh"/><a:font typeface="Mongolian Baiti" script="Mong"/><a:font typeface="Times New Roman" script="Viet"/><a:font typeface="Microsoft Uighur" script="Uigh"/><a:font typeface="Sylfaen" script="Geor"/></a:majorFont><a:minorFont><a:latin typeface="Calibri"/><a:ea typeface=""/><a:cs typeface=""/><a:font typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af" script="Jpan"/><a:font typeface="\ub9d1\uc740 \uace0\ub515" script="Hang"/><a:font typeface="\u5b8b\u4f53" script="Hans"/><a:font typeface="\u65b0\u7d30\u660e\u9ad4" script="Hant"/><a:font typeface="Arial" script="Arab"/><a:font typeface="Arial" script="Hebr"/><a:font typeface="Tahoma" script="Thai"/><a:font typeface="Nyala" script="Ethi"/><a:font typeface="Vrinda" script="Beng"/><a:font typeface="Shruti" script="Gujr"/><a:font typeface="DaunPenh" script="Khmr"/><a:font typeface="Tunga" script="Knda"/><a:font typeface="Raavi" script="Guru"/><a:font typeface="Euphemia" script="Cans"/><a:font typeface="Plantagenet Cherokee" script="Cher"/><a:font typeface="Microsoft Yi Baiti" script="Yiii"/><a:font typeface="Microsoft Himalaya" script="Tibt"/><a:font typeface="MV Boli" script="Thaa"/><a:font typeface="Mangal" script="Deva"/><a:font typeface="Gautami" script="Telu"/><a:font typeface="Latha" script="Taml"/><a:font typeface="Estrangelo Edessa" script="Syrc"/><a:font typeface="Kalinga" script="Orya"/><a:font typeface="Kartika" script="Mlym"/><a:font typeface="DokChampa" script="Laoo"/><a:font typeface="Iskoola Pota" script="Sinh"/><a:font typeface="Mongolian Baiti" script="Mong"/><a:font typeface="Arial" script="Viet"/><a:font typeface="Microsoft Uighur" script="Uigh"/><a:font typeface="Sylfaen" script="Geor"/></a:minorFont></a:fontScheme>'},t._generateFmtScheme=function(){return'<a:fmtScheme name="Office">'+this._generateFillScheme()+this._generateLineStyles()+this._generateEffectScheme()+this._generateBgFillScheme()+"</a:fmtScheme>"},t._generateFillScheme=function(){return'<a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin scaled="1" ang="16200000"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin scaled="1" ang="16200000"/></a:gradFill></a:fillStyleLst>'},t._generateLineStyles=function(){return'<a:lnStyleLst><a:ln algn="ctr" cmpd="sng" cap="flat" w="9525"><a:solidFill><a:schemeClr val="phClr"><a:shade val="9500"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln algn="ctr" cmpd="sng" cap="flat" w="25400"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln algn="ctr" cmpd="sng" cap="flat" w="38100"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst>'},t._generateEffectScheme=function(){return'<a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw dir="5400000" rotWithShape="0" dist="23000" blurRad="40000"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw dir="5400000" rotWithShape="0" dist="23000" blurRad="40000"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw dir="5400000" rotWithShape="0" dist="23000" blurRad="40000"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot rev="0" lon="0" lat="0"/></a:camera><a:lightRig dir="t" rig="threePt"><a:rot rev="1200000" lon="0" lat="0"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst>'},t._generateBgFillScheme=function(){return'<a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst>'},t._generateCoreDoc=function(t){var e='<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">';return e+=t.creator?"<dc:creator>"+t.creator+"</dc:creator>":"<dc:creator/>",(e+=t.lastModifiedBy?"<cp:lastModifiedBy>"+t.lastModifiedBy+"</cp:lastModifiedBy>":"<cp:lastModifiedBy/>")+'<dcterms:created xsi:type="dcterms:W3CDTF">'+(t.created||new Date).toISOString()+'</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">'+(t.modified||new Date).toISOString()+"</dcterms:modified></cp:coreProperties>"},t._generateSheetGlobalSetting=function(t,e,i){var n=e.rows&&e.rows[0]&&e.rows[0].cells?e.rows[0].cells.length:0,r=' xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">';return r+='<sheetPr><outlinePr summaryBelow="0"/></sheetPr>',r+='<dimension ref="A1'+(n>0?":"+this._numAlpha(n-1)+e.rows.length:"")+'"/>',r+='<sheetViews><sheetView workbookViewId="0"',t===i.activeWorksheet&&(r+=' tabSelected="1"'),!e.frozenPane||0===e.frozenPane.rows&&0===e.frozenPane.columns?r+="/>":(r+=">",r+='<pane state="frozen" activePane="'+(0!==e.frozenPane.rows&&0!==e.frozenPane.columns?"bottomRight":0!==e.frozenPane.rows?"bottomLeft":"topRight")+'" topLeftCell="'+(this._numAlpha(e.frozenPane.columns)+(e.frozenPane.rows+1))+'" ySplit="'+e.frozenPane.rows.toString()+'" xSplit="'+e.frozenPane.columns.toString()+'"/>',r+="</sheetView>"),(r+="</sheetViews>")+'<sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>'},t._generateCell=function(t,e,i,n,r,o){var a='<c r="'+this._numAlpha(e)+(t+1)+'" s="'+i.toString()+'"';n&&(a+=' t="'+n+'"');var s="";return o&&("="===o[0]&&(o=o.substring(1)),o=o.replace(/\@\s*/gi,"[#This Row], "),s+="<f>"+f._escapeXML(o)+"</f>"),null!=r&&""!==r&&(s+="<v>"+r+"</v>"),a+(s?">"+s+"</c>":"/>")},t._generateMergeSetting=function(t){for(var e='<mergeCells count="'+t.length.toString()+'">',i=0;i<t.length;i++)e+='<mergeCell ref="'+t[i].join(":")+'"/>';return e+"</mergeCells>"},t._generateStyleDoc=function(){var t='<styleSheet xmlns="'+this._workbookNS+'" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac">',e="",i="",n=[],r=0,o=0,a="",s="";s=this._generateFontStyle({},!0);var l="",h="";h+=this._generateFillStyle("none",null),h+=this._generateFillStyle("gray125",null);var c="",u="";u+=this._generateBorderStyle({});var d="",p="";for(p+=this._generateCellXfs(0,0,0,0,{});r<this._styles.length;){var f=this._styles[r];if(f){var m=0;if((f=JSON.parse(f)).format&&"General"!==f.format&&(m=this._numFmts.indexOf(f.format))<0){var g=n.indexOf(f.format);-1===g?(n.push(f.format),i+='<numFmt numFmtId="'+(m=164+o).toString()+'" formatCode="'+f.format+'"/>',o++):m=164+g}var _=0;if(f.borders){var y=JSON.stringify(f.borders);(_=this._borders.indexOf(y))<0&&(_=this._borders.push(y)-1,u+=this._generateBorderStyle(f.borders))}var b=0;if(f.font){var v=JSON.stringify(f.font);(b=this._fonts.indexOf(v))<0&&(b=this._fonts.push(v)-1,s+=this._generateFontStyle(f.font))}var x=0;if(f.fill&&f.fill.color){var w=JSON.stringify(f.fill);(x=this._fills.indexOf(w))<0&&(x=this._fills.push(w)-1,h+=this._generateFillStyle("solid",f.fill.color))}p+=this._generateCellXfs(m,_,b,x,f)}r++}n=null,o>0?(e='<numFmts count="'+o+'">',e+=i,e+="</numFmts>"):e='<numFmts count="0"/>',t+=e,a='<fonts count="'+this._fonts.length+'" x14ac:knownFonts="1">',a+=s,t+=a+="</fonts>",l='<fills count="'+this._fills.length+'">',l+=h,t+=l+="</fills>",c='<borders count="'+this._borders.length+'">',c+=u,t+=c+="</borders>",t+='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',d='<cellXfs count="'+this._styles.length+'">',d+=p,d+="</cellXfs>";var S="",C="";return this._tableStyles.length>0&&(this._getDxfs(),this._dxfs.length>0&&(S=this._generateDxfs()),C=this._generateTableStyles()),t+(d+'<cellStyles count="1"><cellStyle xfId="0" builtinId="0" name="Normal"/></cellStyles>')+(""===S?'<dxfs count="0"/>':S)+(""===C?'<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleLight16"/>':C)+'<extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}"><x14ac:slicerStyles defaultSlicerStyle="SlicerStyleLight1" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"/></ext></extLst></styleSheet>'},t._generateBorderStyle=function(t,e){void 0===e&&(e=!1);var i,n,r="<border>";for(var o in{left:0,right:0,top:0,bottom:0,diagonal:0,vertical:0,horizontal:0})(e||"vertical"!==o&&"horizontal"!==o)&&(t[o]?(i="<"+o+' style="'+t[o].style+'">',6===(n=(n=t[o].color)?"#"===n[0]?n.substring(1):n:"").length&&(n="FF"+n),n||(n="FF000000"),i+='<color rgb="'+n+'"/>',i+="</"+o+">"):i="<"+o+"/>",r+=i);return r+"</border>"},t._generateFontStyle=function(t,e){void 0===e&&(e=!1);var i="<font>";return t.bold&&(i+="<b/>"),t.italic&&(i+="<i/>"),t.underline&&(i+="<u/>"),i+='<sz val="'+(t.size?Math.round(72*t.size/96):this._defaultFontSize)+'"/>',i+=t.color?'<color rgb="FF'+("#"===t.color[0]?t.color.substring(1):t.color)+'"/>':'<color theme="1"/>',i+='<name val="'+(t.family||this._defaultFontName)+'"/>',i+='<family val="2"/>',e&&(i+='<scheme val="minor"/>'),i+"</font>"},t._generateFillStyle=function(t,e,i){void 0===i&&(i=!1);var n,r='<fill><patternFill patternType="'+t+'">';return e&&(n=i?"<bgColor ":"<fgColor ",r+=n+='rgb="FF'+("#"===e[0]?e.substring(1):e)+'"/>'),r+"</patternFill></fill>"},t._generateCellXfs=function(t,e,i,n,r){var o='<xf xfId="0" ';if(o+='numFmtId="'+t.toString()+'" ',t>0&&(o+='applyNumberFormat="1" '),o+='borderId="'+e.toString()+'" ',e>0&&(o+='applyBorder="1" '),o+='fontId="'+i.toString()+'" ',i>0&&(o+='applyFont="1" '),o+='fillId="'+n.toString()+'" ',n>0&&(o+='applyFill="1" '),r.quotePrefix&&(o+='quotePrefix="1" '),r.hAlign||r.vAlign||r.indent||r.wordWrap){o+='applyAlignment="1">';var a="<alignment ";r.hAlign&&(a+='horizontal="'+r.hAlign+'" '),r.vAlign&&(a+='vertical="'+r.vAlign+'" '),r.indent&&(a+='indent="'+r.indent+'" '),r.wordWrap&&(a+='wrapText="1"'),o+=a+="/>",o+="</xf>"}else o+="/>";return o},t._generateContentTypesDoc=function(){var t,e='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">';for(this._macroEnabled&&(e+='<Default ContentType="application/vnd.ms-office.vbaProject" Extension="bin"/>'),e+='<Default ContentType="application/vnd.openxmlformats-package.relationships+xml" Extension="rels"/><Default ContentType="application/xml" Extension="xml"/><Override ContentType="'+(this._macroEnabled?"application/vnd.ms-excel.sheet.macroEnabled.main+xml":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml")+'" PartName="/xl/workbook.xml"/>',t=0;t<this._contentTypes.length;t++)e+=this._contentTypes[t];for(e+='<Override ContentType="application/vnd.openxmlformats-officedocument.theme+xml" PartName="/xl/theme/theme1.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" PartName="/xl/styles.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" PartName="/xl/sharedStrings.xml"/><Override ContentType="application/vnd.openxmlformats-package.core-properties+xml" PartName="/docProps/core.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" PartName="/docProps/app.xml"/>',t=0;t<this._tables.length;t++)e+='<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml" PartName="/xl/tables/'+this._tables[t]+'"/>';return e+"</Types>"},t._generateAppDoc=function(t){for(var e='<Properties xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes" xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>'+(t.application||"wijmo.xlsx")+'</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector baseType="variant" size="2"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>'+this._props.length+'</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector baseType="lpstr" size="'+this._props.length+'">',i=0;i<this._props.length;i++)e+="<vt:lpstr>"+this._props[i]+"</vt:lpstr>";return e+"</vt:vector></TitlesOfParts><Manager/><Company>"+(t.company||"GrapeCity, Inc.")+"</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>1.0</AppVersion></Properties>"},t._generateWorkbookRels=function(){for(var t='<Relationships xmlns="'+this._relationshipsNS+'">',e=0;e<this._xlRels.length;e++)t+=this._xlRels[e];return t+='<Relationship Target="sharedStrings.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Id="rId'+(this._xlRels.length+1)+'"/><Relationship Target="styles.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Id="rId'+(this._xlRels.length+2)+'"/><Relationship Target="theme/theme1.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Id="rId'+(this._xlRels.length+3)+'"/>',this._macroEnabled&&(t+='<Relationship Target="vbaProject.bin" Type="http://schemas.microsoft.com/office/2006/relationships/vbaProject" Id="rId'+(this._xlRels.length+4)+'"/>'),t+"</Relationships>"},t._generateWorkbook=function(t){for(var e='<workbook xmlns="'+this._workbookNS+'" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion rupBuild="9303" lowestEdited="5" lastEdited="5" appName="xl"/><workbookPr/><bookViews><workbookView xWindow="480" yWindow="60" windowWidth="18195" windowHeight="8505"'+(null!=t.activeWorksheet?' activeTab="'+t.activeWorksheet.toString()+'"':"")+"/></bookViews><sheets>",i=0;i<this._worksheets.length;i++)e+=this._worksheets[i];if(e+="</sheets>",t.definedNames&&t.definedNames.length>0){for(e+="<definedNames>",i=0;i<t.definedNames.length;i++){var n=-1;t.definedNames[i].sheetName&&(n=this._getSheetIndexBySheetName(t,t.definedNames[i].sheetName)),e+='<definedName name="'+t.definedNames[i].name+'" '+(n>-1?'localSheetId="'+n+'"':"")+">"+t.definedNames[i].value+"</definedName>"}e+="</definedNames>"}return e+'<calcPr fullCalcOnLoad="1"/></workbook>'},t._generateWorkSheet=function(t,e,i){var n,r,o,s,h,u,d,p,m,g,_,y,b,v,x,w,S,C,O,j,T,A,M,N=1;if(n=t+1,o=(r=e.sheets[t]).columns,s=this._cloneColumnsStyle(o),!r)throw"Worksheet should not be empty!";var P='<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"';P+=this._generateSheetGlobalSetting(t,r,e);var E="<sheetData>";for(h=r.style?this._cloneStyle(r.style):null,d=[],p=-1,m=(u=r.rows)?u.length:0;++p<m;){for(g=-1,_=u[p]&&u[p].cells?u[p].cells.length:0,y=null,E+='<row x14ac:dyDescent="0.25" r="'+(p+1).toString()+'"',u[p]&&(u[p].height&&(E+=' customHeight="1" ht="'+(72*+u[p].height/96).toString()+'"'),u[p].groupLevel&&(E+=' outlineLevel="'+u[p].groupLevel.toString()+'"'),(y=u[p].style?this._cloneStyle(u[p].style):null)&&((y=this._resolveStyleInheritance(y)).font&&y.font.color&&(y.font.color=this._parseColor(y.font.color)),y.fill&&y.fill.color&&(y.fill.color=this._parseColor(y.fill.color)),null==y.hAlign||Object(c.isString)(y.hAlign)||(y.hAlign=f._parseHAlignToString(Object(c.asEnum)(y.hAlign,a))),null==y.vAlign||Object(c.isString)(y.vAlign)||(y.vAlign=f._parseVAlignToString(Object(c.asEnum)(y.vAlign,l))),b=JSON.stringify(y),(v=this._styles.indexOf(b))<0&&(v=this._styles.push(b)-1),E+=' customFormat="1" s="'+v.toString()+'"')),u[p]&&!1===u[p].visible&&(E+=' hidden="1"'),u[p]&&!0===u[p].collapsed&&(E+=' collapsed="1"'),E+=">";++g<_;){if(w=null,S=null,C="",O=-1,M=(x=u[p].cells[g])?x.textRuns:null,w=x&&x.hasOwnProperty("value")?x.value:x,S=x&&x.style?this._cloneStyle(x.style):{},S=this._resolveStyleInheritance(S),(j=s[g])&&(j=this._resolveStyleInheritance(j),S=this._extend(S,j)),y&&(S=this._extend(S,y)),h&&(h=this._resolveStyleInheritance(h),S=this._extend(S,h)),null==S.hAlign||Object(c.isString)(S.hAlign)||(S.hAlign=f._parseHAlignToString(Object(c.asEnum)(S.hAlign,a))),null==S.vAlign||Object(c.isString)(S.vAlign)||(S.vAlign=f._parseVAlignToString(Object(c.asEnum)(S.vAlign,l))),S.font&&S.font.color&&(S.font.color=this._parseColor(S.font.color)),S.fill&&S.fill.color&&(S.fill.color=this._parseColor(S.fill.color)),this._applyDefaultBorder(S),S.borders&&(S.borders=this._extend({},S.borders),this._parseBorder(S.borders,!!S.fill&&!!S.fill.color)),x&&x.isDate&&!Object(c.isDate)(w)){var I=new Date(w);Object(c.isDate)(I)&&(w=I)}!Object(c.isNumber)(w)||!isNaN(w)&&isFinite(w)||(w=w.toString()),M||w&&Object(c.isString)(w)&&("@"===S.format||"General"===S.format||(+w).toString()!==w||!isFinite(+w))?(this._sharedStrings[1]++,"'"===(w=M?"{RichTextMark}"+JSON.stringify(M):f._unescapeXML(w))[0]&&(S.quotePrefix=!0,w=w.substring(1)),(O=this._sharedStrings[0].indexOf(w))<0&&(O=this._sharedStrings[0].push(w)-1),w=O,C="s"):Object(c.isBoolean)(w)?(w=w?1:0,C="b"):Object(c.isDate)(w)?(w=this._convertDate(w),S.format=S.format||"mm-dd-yy"):Object(c.isObject)(w)&&(w=null),S=JSON.stringify(S),(v=this._styles.indexOf(S))<0&&(v=this._styles.push(S)-1),x&&(null!=x.colSpan&&x.colSpan>1||null!=x.rowSpan&&x.rowSpan>1)&&(x.colSpan=x.colSpan||1,x.rowSpan=x.rowSpan||1,this._checkValidMergeCell(d,p,x.rowSpan,g,x.colSpan)&&d.push([this._numAlpha(g)+(p+1),this._numAlpha(g+x.colSpan-1)+(p+x.rowSpan)])),x&&x.link&&(null==A&&(A=[]),A.push({ref:f.xlsxAddress(p,g),value:w,href:x.link})),S=null,E+=this._generateCell(p,g,v,C,w,x&&x.formula?x.formula:null)}E+="</row>"}if(E+="</sheetData>",o&&o.length>0){for(P+="<cols>",p=0;p<o.length;p++)if(v=-1,!this._isEmpty(s[p])&&(j=s[p])&&((j=this._resolveStyleInheritance(j)).font&&j.font.color&&(j.font.color=this._parseColor(j.font.color)),j.fill&&j.fill.color&&(j.fill.color=this._parseColor(j.fill.color)),null==j.hAlign||Object(c.isString)(j.hAlign)||(j.hAlign=f._parseHAlignToString(Object(c.asEnum)(j.hAlign,a))),null==j.vAlign||Object(c.isString)(j.vAlign)||(j.vAlign=f._parseVAlignToString(Object(c.asEnum)(j.vAlign,l))),j=JSON.stringify(j),(v=this._styles.indexOf(j))<0&&(v=this._styles.push(j)-1)),!this._isEmpty(o[p])){T=null!=(T=o[p].width)?"string"==typeof T&&T.indexOf("ch")>-1?this._parseCharCountToCharWidth(T.substring(0,T.indexOf("ch"))):this._parsePixelToCharWidth(T):8.43;var k=(p+1).toString();P+='<col min="'+k+'" max="'+k+'"',v>=0&&(P+=' style="'+v.toString()+'"'),T&&(P+=' width="'+T+'" customWidth="1"'),!1!==o[p].autoWidth&&(P+=' bestFit="1"'),!1===o[p].visible&&(P+=' hidden="1"'),P+="/>"}P+="</cols>"}if(P=E=P+E,E=null,d.length>0&&(P+=this._generateMergeSetting(d)),A&&A.length>0){for(P+="<hyperlinks>",p=0;p<A.length;p++)/\'?(\w+)\'?\!\$?[A-Za-z]{1,2}\$?\d+(:\$?[A-Za-z]{1,2}\$?\d+)?/.test(A[p].href)||/^\$?[A-Za-z]{1,2}\$?\d+(:\$?[A-Za-z]{1,2}\$?\d+)?$/.test(A[p].href)?P+='<hyperlink ref="'+A[p].ref+'" display="'+A[p].value+'" location="'+A[p].href+'"/>':(null==r.externalLinks&&(r.externalLinks=[]),r.externalLinks.push(A[p].href),P+='<hyperlink ref="'+A[p].ref+'" r:id="rId'+N+'"/>',N++);P+="</hyperlinks>"}if(P+='<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/>',r.tables&&r.tables.length>0){for(P+='<tableParts count="'+r.tables.length+'">',p=0;p<r.tables.length;p++)P+='<tablePart r:id="rId'+N+'"/>',N++;P+="</tableParts>"}i.file("sheet"+n+".xml",this._xmlDescription+(P+="</worksheet>")),P=null,this._contentTypes.unshift('<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" PartName="/xl/worksheets/sheet'+n+'.xml"/>'),this._props.unshift(f._escapeXML(r.name)||"Sheet"+n),this._xlRels.unshift('<Relationship Target="worksheets/sheet'+n+'.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Id="rId'+n+'"/>');var F='<sheet r:id="rId'+n+'" sheetId="'+n+'" name="'+(f._escapeXML(r.name)||"Sheet"+n)+'"'+(!1===r.visible?' state="hidden"':"")+"/>";this._worksheets.unshift(F)},t._generateSharedStringsDoc=function(){var t,e='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="'+this._sharedStrings[1]+'" uniqueCount="'+this._sharedStrings[0].length+'">';for(t=0;t<this._sharedStrings[0].length;t++){e+="<si>";var i=this._sharedStrings[0][t];if(i&&0===i.indexOf("{RichTextMark}"))try{var n=JSON.parse(i.substring(14));if(n&&n.length>0){for(var r=0;r<n.length;r++){e+="<r>";var o=n[r];o.font&&(e+=this._generateFontStyle(o.font,!0).replace(/font/g,"rPr")),e+=this._generatePlainText(o.text),e+="</r>"}e+="</si>"}}catch(t){e+=this._generatePlainText(i)+"</si>"}else e+=this._generatePlainText(i)+"</si>"}return e+"</sst>"},t._generatePlainText=function(t){if(""===t)return"<t/>";var e="<t";return(Object(c.isNullOrWhiteSpace)(t)||/^\s+\w*|\w*\s+$/.test(t))&&(e+=' xml:space="preserve"'),e+">"+f._escapeXML(t)+"</t>"},t._generateTable=function(t,e){var i=this._tables.length+1,n="table"+i+".xml";t.fileName=n,this._tables.push(n);var r='<table ref="'+t.range+'" displayName="'+t.name+'" name="'+t.name+'" id="'+i+'" '+(!1===t.showHeaderRow?'headerRowCount="0" ':"")+(!0===t.showTotalRow?'totalsRowCount="1" ':'totalsRowShown="0" ')+' xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';!1!==t.showHeaderRow&&(r+=this._generateTableFilterSetting(t.range,t.showTotalRow,t.columns)),r+='<tableColumns count="'+t.columns.length+'">';for(var o="",a=0;a<t.columns.length;a++){var s=t.columns[a];o+='<tableColumn name="'+s.name+'" id="'+(a+1)+'" ',s.totalRowFunction?this._tableColumnFunctions.indexOf(s.totalRowFunction)>-1?o+='totalsRowFunction="'+s.totalRowFunction+'"/>':o+='totalsRowFunction="custom"><totalsRowFormula>'+s.totalRowFunction+"</totalsRowFormula></tableColumn>":o+=(s.totalRowLabel?'totalsRowLabel="'+s.totalRowLabel+'"':"")+"/>"}if(r+=o+"</tableColumns>",r+='<tableStyleInfo name="'+t.style.name+'" showColumnStripes="'+(t.showBandedColumns?"1":"0")+'" showRowStripes="'+(t.showBandedRows?"1":"0")+'" showLastColumn="'+(t.alterLastColumn?"1":"0")+'" showFirstColumn="'+(t.alterFirstColumn?"1":"0")+'"/></table>',!this._isBuiltInStyleName(t.style.name)){var l=JSON.stringify(t.style);-1===this._tableStyles.indexOf(l)&&this._tableStyles.push(l)}e.file(n,this._xmlDescription+r),r=null},t._generateTableFilterSetting=function(t,e,i){var n=t;if(e){var r=n.indexOf(":")+1,o=f.tableAddress(n.substring(n.indexOf(":")+1));o.row-=1,n=n.substring(0,r)+f.xlsxAddress(o.row,o.col)}for(var a='<autoFilter ref="'+n+'"',s="",l=0;l<i.length;l++)!1===i[l].showFilterButton&&(s+='<filterColumn hiddenButton="1" colId="'+l+'"/>');return a+(""===s?"/>":">"+s+"</autoFilter>")},t._generateHyperlinkRel=function(t){for(var e="",i=0;i<t.length;i++)e+='<Relationship TargetMode="External" Target="'+t[i]+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Id="rId'+(i+1)+'"/>';return e},t._getDxfs=function(){for(var t,e=this,i=0;i<this._tableStyles.length;i++)t=JSON.parse(this._tableStyles[i]),Object.keys(t).forEach((function(i){var n,r,o=t[i];!o||Object(c.isString)(o)||e._isEmptyStyleEle(o)||(n=JSON.stringify(o),-1===(r=e._dxfs.indexOf(n))&&(r=e._dxfs.push(n)-1,o.styleIndex=r))})),this._tableStyles[i]=t},t._generateDxfs=function(){for(var t,e='<dxfs count="'+this._dxfs.length+'">',i=0;i<this._dxfs.length;i++)e+="<dxf>",(t=JSON.parse(this._dxfs[i])).font&&(e+=this._generateFontStyle(t.font)),t.fill&&t.fill.color&&(e+=this._generateFillStyle("solid",t.fill.color,!0)),t.borders&&!this._isEmpty(t.borders)&&(t.borders=this._extend({},t.borders),this._parseBorder(t.borders,!1),e+=this._generateBorderStyle(t.borders,!0)),e+="</dxf>";return e+"</dxfs>"},t._generateTableStyles=function(){for(var t,e,i,n,r,o,a='<tableStyles count="'+this._tableStyles.length+'" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleLight16">',s=0;s<this._tableStyles.length;s++){t=this._tableStyles[s],e=Object.keys(t),r="",o=0;for(var l=0;l<e.length;l++)if(n=t[i=e[l]],!Object(c.isString)(n)){switch(o++,r+="<tableStyleElement",null!=n.styleIndex&&(r+=' dxfId="'+n.styleIndex+'"'),i){case"firstBandedColumnStyle":r+=' type="firstColumnStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;case"secondBandedColumnStyle":r+=' type="secondColumnStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;case"firstBandedRowStyle":r+=' type="firstRowStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;case"secondBandedRowStyle":r+=' type="secondRowStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;default:r+=' type="'+i.substring(0,i.length-5)+'"'}r+="/>"}o>0&&(a+='<tableStyle count="'+o+'" name="'+t.name+'" pivot="0">',a+=r+"</tableStyle>")}return a+"</tableStyles>"},t._isEmptyStyleEle=function(t){return this._isEmpty(t.borders)&&(this._isEmpty(t.fill)||Object(c.isNullOrWhiteSpace)(t.fill.color))&&(this._isEmpty(t.font)||!0!==t.font.bold&&Object(c.isNullOrWhiteSpace)(t.font.color)&&Object(c.isNullOrWhiteSpace)(t.font.family)&&!0!==t.font.italic&&null==t.font.size&&!0!==t.font.underline)},t._getTableFileName=function(t,e){for(var i="",n=0;n<t.length;n++){var r=t[n];if(r.name===e){i=r.fileName;break}}return i},t._getColor=function(t,e){var i,n,r,o,a;return-1===t.search(/fgcolor/i)&&-1===t.search(/bgcolor/i)&&e||-1===t.search(/color/i)&&!e?null:(-1===(i=t.indexOf("<fgColor"))&&(i=t.indexOf("<bgColor")),-1!==(t=e?t.substring(i,t.indexOf("/>")):t.substring(t.indexOf("<color"))).indexOf("rgb=")?(o=this._getAttr(t,"rgb"))&&8===o.length&&(o=o.substring(2)):-1!==t.indexOf("indexed")?(r=+this._getAttr(t,"indexed"),o=this._indexedColors[r]||""):-1!==t.indexOf("auto")&&"1"===this._getAttr(t,"auto")?o="#000000":(n=+this._getAttr(t,"theme"),-1!==t.indexOf("tint")&&(a=+this._getAttr(t,"tint")),o=this._getThemeColor(n,a)),o&&"#"===o[0]?o:"#"+o)},t._getThemeColor=function(t,e){var i,n=this._colorThemes[t];return null!=e?((i=new c.Color("#"+n).getHsl())[2]=e<0?i[2]*(1+e):i[2]*(1-e)+(1-1*(1-e)),c.Color.fromHsl(i[0],i[1],i[2]).toString().substring(1)):n},t._parseColor=function(t){var e=new c.Color(t);return e.a<1&&(e=c.Color.toOpaque(e)),e.toString()},t._getsBaseSharedFormulas=function(t){var e,i,n,r=t.match(/\<f[^<]*ref[^<]*>[^<]+(?=\<\/f>)/g);if(this._sharedFormulas=[],r&&r.length>0)for(var o=0;o<r.length;o++)i=this._getAttr(e=r[o],"si"),n=(n=this._getAttr(e,"ref"))?n.substring(0,n.indexOf(":")):"",e=e.replace(/(\<f.*>)(.+)/,"$2"),this._sharedFormulas[+i]=this._parseSharedFormulaInfo(n,e)},t._parseSharedFormulaInfo=function(t,e){var i,n,r,o,a,s=e.match(/(\'?\w+\'?\!)?(\$?[A-Za-z]+)(\$?\d+)/g);if(o=f.tableAddress(t),s&&s.length>0){a=[];for(var l=0;l<s.length;l++)e=e.replace(i=s[l],"{"+l+"}"),(n=i.indexOf("!"))>0&&(r=i.substring(0,n),i=i.substring(n+1)),a[l]={cellAddress:f.tableAddress(i),sheetRef:r}}return{cellRef:o,formula:e,formulaRefs:a}},t._getSharedFormula=function(t,e){var i,n,r,o,a,s,l,h,c;if(this._sharedFormulas&&this._sharedFormulas.length>0&&(i=this._sharedFormulas[+t])){if(s=i.formula,(l=i.formulaRefs)&&l.length>0){r=(n=f.tableAddress(e)).row-(i.cellRef?i.cellRef.row:0),o=n.col-(i.cellRef?i.cellRef.col:0);for(var u=0;u<l.length;u++)a=(h=l[u]).cellAddress.row+(h.cellAddress.absRow?0:r),c=f.xlsxAddress(a,h.cellAddress.col+(h.cellAddress.absCol?0:o),h.cellAddress.absRow,h.cellAddress.absCol),null!=h.sheetRef&&""!==h.sheetRef&&(c=h.sheetRef+"!"+c),s=s.replace("{"+u+"}",c)}return s}return""},t._convertDate=function(t){var e,i,n=new Date(1900,0,0),r=Date.UTC(1900,0,0),o="[object Date]"===Object.prototype.toString.call(t),a=6e4*((o?t.getTimezoneOffset():(new Date).getTimezoneOffset())-n.getTimezoneOffset()),s=n.getTime()-r-6e4*n.getTimezoneOffset();return o?(t.getTime()-n.getTime()-a+s)/864e5+1:Object(c.isNumber)(t)?(e=t>59?1:0,0!=(a=6e4*((i=new Date(1e3*Math.round((+n+864e5*(t-e))/1e3))).getTimezoneOffset()-n.getTimezoneOffset()))?new Date(1e3*Math.round((+n+a-s+864e5*(t-e))/1e3)):i):null},t._parseBorder=function(t,e){for(var i in{left:0,right:0,top:0,bottom:0,diagonal:0}){var n=t[i];n&&(Object(c.isString)(n.color)&&(n.color=this._parseColor(n.color)),null==n.style||Object(c.isString)(n.style)||(n.style=f._parseBorderTypeToString(Object(c.asEnum)(n.style,h,!1))),!e&&n.color&&"#c6c6c6"===n.color.toLowerCase()&&"thin"===n.style&&(t[i]=null))}},t._applyDefaultBorder=function(t){if(t.fill&&t.fill.color)for(var e in null==t.borders&&(t.borders={}),{left:0,right:0,top:0,bottom:0})null==t.borders[e]&&(t.borders[e]={style:h.Thin,color:"#C6C6C6"})},t._resolveStyleInheritance=function(t){var e;if(!t.basedOn)return t;for(var i in t.basedOn)if("basedOn"===i)for(i in e=this._resolveStyleInheritance(t.basedOn)){var n=e[i];t[i]=null==t[i]?n:this._extend(t[i],n)}else n=t.basedOn[i],t[i]=null==t[i]?n:this._extend(t[i],n);return delete t.basedOn,t},t._parsePixelToCharWidth=function(t){return null==t||isNaN(+t)?null:((+t-5)/7*100+.5)/100},t._parseCharWidthToPixel=function(t){return null==t||isNaN(+t)?null:Math.floor((256*+t+128/7)/256*7)+5},t._parseCharCountToCharWidth=function(t){return null==t||isNaN(+t)?null:(7*+t+5)/7*256/256},t._numAlpha=function(t){var e=Math.floor(t/26)-1;return(e>-1?this._numAlpha(e):"")+this._alphabet.charAt(t%26)},t._alphaNum=function(t){return t.length>1?(this._alphabet.indexOf(t[0])+1)*Math.pow(26,t.length-1)+this._alphaNum(t.substring(1)):this._alphabet.indexOf(t)},t._typeOf=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},t._extend=function(t,e){if(Object(c.isObject)(t)&&Object(c.isObject)(e)){for(var i in e){var n=e[i];Object(c.isObject)(n)&&null!=t[i]?this._extend(t[i],n):null!=n&&null==t[i]&&(t[i]=n)}return t}return e},t._isEmpty=function(t){var e=Object.prototype.hasOwnProperty;if(null==t)return!0;if(t.length>0)return!1;if(0===t.length)return!0;for(var i in t)if(e.call(t,i))return!1;return!0},t._cloneStyle=function(t){var e;if(null==t||"object"!=typeof t)return t;for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this._cloneStyle(t[i]));return e},t._cloneColumnsStyle=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[n])&&e.style&&(i[n]=this._cloneStyle(e.style));return i},t._getSheetIndex=function(t){return+(t=t.substring(0,t.lastIndexOf(".xml"))).substring(t.lastIndexOf("sheet")+5)},t._checkValidMergeCell=function(t,e,i,n,r){for(var o=0;o<t.length;o++){var a=t[o],s=+a[0].match(/\d*/g).join("")-1,l=this._alphaNum(a[0].match(/[a-zA-Z]*/g)[0]),h=+a[1].match(/\d*/g).join("")-1,c=this._alphaNum(a[1].match(/[a-zA-Z]*/g)[0]);if(!(e>h||e+i-1<s||n>c||n+r-1<l))return!1}return!0},t._getAttr=function(t,e){var i=t.indexOf(e+'="');return i>=0?(t=t.substr(i+e.length+2)).substring(0,t.indexOf('"')):""},t._getChildNodeValue=function(t,e){var i=t.indexOf(e+' val="');return i>=0?(t=t.substr(i+e.length+6)).substring(0,t.indexOf('"')):""},t._getSheetIndexBySheetName=function(t,e){for(var i=0;i<t.sheets.length;i++)if(t.sheets[i].name===e)return i;return-1},t._alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t._indexedColors=["000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","800000","008000","000080","808000","800080","008080","C0C0C0","808080","9999FF","993366","FFFFCC","CCFFFF","660066","FF8080","0066CC","CCCCFF","000080","FF00FF","FFFF00","00FFFF","800080","800000","008080","0000FF","00CCFF","CCFFFF","CCFFCC","FFFF99","99CCFF","FF99CC","CC99FF","FFCC99","3366FF","33CCCC","99CC00","FFCC00","FF9900","FF6600","666699","969696","003366","339966","003300","333300","993300","993366","333399","333333","000000","FFFFFF"],t._numFmts=["General","0","0.00","#,##0","#,##0.00",,,"$#,##0.00_);($#,##0.00)",,"0%","0.00%","0.00E+00","# ?/?","# ??/??","m/d/yyyy","d-mmm-yy","d-mmm","mmm-yy","h:mm AM/PM","h:mm:ss AM/PM","h:mm","h:mm:ss","m/d/yy h:mm",,,,,,,,,,,,,,,"#,##0 ;(#,##0)","#,##0 ;[Red](#,##0)","#,##0.00;(#,##0.00)","#,##0.00;[Red](#,##0.00)",,,,,"mm:ss","[h]:mm:ss","mmss.0","##0.0E+0","@"],t._tableColumnFunctions="average, count, countNums, max, min, stdDev, sum, var",t._xmlDescription='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',t._workbookNS="http://schemas.openxmlformats.org/spreadsheetml/2006/main",t._relationshipsNS="http://schemas.openxmlformats.org/package/2006/relationships",t._defaultFontName="Calibri",t._defaultFontSize=11,t._macroEnabled=!1,t._defaultColorThemes=["FFFFFF","000000","EEECE1","1F497D","4F818D","C0504D","9BBB59","8064A2","4BACC6","F79646"],t}(),D=function(){function t(t){this.value=t}return t.prototype.then=function(e,i){return new t(e?e(this.value):null)},t.prototype.catch=function(t){return this.then(null,t)},t.resolve=function(){return new t},t}(),L=function(){function t(t){this._obj=t}return t.prototype.loadAsync=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=(t=this._obj).load.apply(t,e);return new D(this._wrapOrNull(n))},t.prototype.file=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=(t=this._obj).file.apply(t,e);return this._wrapOrNull(n)},Object.defineProperty(t.prototype,"name",{get:function(){return this._obj.name},enumerable:!0,configurable:!0}),t.prototype.async=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t=e&&e.length>0&&"uint8array"===e[0].toLowerCase()?this._obj.asUint8Array():this._obj.asText(),new D(t)},t.prototype.folder=function(t){var e=this._obj.folder(t);return this._wrapOrNull(e)},t.prototype.forEach=function(e){var i=this._obj.root,n=i.length,r=this._obj.files;for(var o in r)o.length>n&&o.substr(0,n).toLowerCase()===i&&e(o.substr(n),new t(r[o]))},t.prototype._wrapOrNull=function(e){return null!=e?new t(e):null},t}();Object(c._registerModule)("wijmo.xlsx",n),i.d(e,"softDetail",(function(){return V})),i.d(e,"softMultiRow",(function(){return B})),i.d(e,"FlexGridXlsxConverter",(function(){return z})),i.d(e,"XlsxFormatItemEventArgs",(function(){return W}));var R=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function V(){return Object(c._getModule)("wijmo.grid.detail")}function B(){return Object(c._getModule)("wijmo.grid.multirow")}var z=function(){function t(){}return t.save=function(t,e,i){var n=this._saveFlexGridToWorkbook(t,e);return i&&n.save(i),n},t.saveAsync=function(t,e,i,n,r){var o=this._saveFlexGridToWorkbook(t,e);return i&&o.saveAsync(i,n,r),o},t.load=function(t,e,i){var n=this;if(e instanceof Blob){var r=new FileReader;r.onload=function(){var e=f._base64EncArr(new Uint8Array(r.result)),o=new f;o.load(e),e=null,t.deferUpdate((function(){n._loadToFlexGrid(t,o,i),o=null}))},r.readAsArrayBuffer(e)}else if(e instanceof f)t.deferUpdate((function(){n._loadToFlexGrid(t,e,i),e=null}));else{if(e instanceof ArrayBuffer)e=f._base64EncArr(new Uint8Array(e));else if(!Object(c.isString)(e))throw"Invalid workbook.";var o=new f;o.load(e),e=null,t.deferUpdate((function(){n._loadToFlexGrid(t,o,i),o=null}))}},t.loadAsync=function(t,e,i,n,r){var o=this;if(e instanceof Blob){var a=new FileReader;a.onload=function(){var e=f._base64EncArr(new Uint8Array(a.result)),s=new f;s.loadAsync(e,(function(r){e=null,s=null,t.deferUpdate((function(){o._loadToFlexGrid(t,r,i),n&&n(r),r=null}))}),r)},a.readAsArrayBuffer(e)}else if(e instanceof f)t.deferUpdate((function(){o._loadToFlexGrid(t,e,i),n&&n(e),e=null}));else{if(e instanceof ArrayBuffer)e=f._base64EncArr(new Uint8Array(e));else if(!Object(c.isString)(e))throw"Invalid workbook.";(new f).loadAsync(e,(function(r){e=null,t.deferUpdate((function(){o._loadToFlexGrid(t,r,i),n&&n(r),r=null}))}),r)}},t._saveFlexGridToWorkbook=function(t,e){var i,n,r,o,a,s,l,h,d,p,y,x,w,S,C=new f,O=new m,j=(new v,new b),T=!e||null==e.includeColumnHeaders||e.includeColumnHeaders,A=!(!e||null==e.includeRowHeaders)&&e.includeRowHeaders,M=!e||null==e.includeCellStyles||e.includeCellStyles,N=e?e.activeWorksheet:null,P=e?e.includeColumns:null,E=e?e.formatItem:null,I=0,k=0,F=0,D=[];if(null==this.hasCssText&&(this.hasCssText="cssText"in document.body.style),p=t.wj_sheetInfo,O.name=e?e.sheetName:"",O.visible=!e||!1!==e.sheetVisible,p&&p.tables&&p.tables.length>0)for(var L=0;L<p.tables.length;L++)O.tables.push(p.tables[L]);if(s=[],p||!M&&!E||((y=document.createElement("div")).style.visibility="hidden",y.setAttribute(u.FlexGrid._WJS_MEASURE,"true"),t.hostElement.appendChild(y)),A){for(h=0,l=0;l<t.rowHeaders.rows.length;l++)if(!(t.rowHeaders.rows[l].renderSize<=0)){for(s[h]=[],d=0;d<t.rowHeaders.columns.length;d++)r=t._getBindingColumn(t.rowHeaders,l,t.rowHeaders.columns[d]),(o=this._getColumnSetting(r,d,t.columnHeaders.columns))&&(s[h][d]=o,0===h&&((a=new g)._deserialize(o),O._addWorkbookColumn(a,d)));h++}F=d}if(t.columnHeaders.rows.length>0){for(h=0,l=0;l<t.columnHeaders.rows.length;l++)if(!(t.columnHeaders.rows[l].renderSize<=0)){s[h]||(s[h]=[]);for(var R=0,V=0;R<t.columnHeaders.columns.length;R++)r=t._getBindingColumn(t.columnHeaders,l,t.columnHeaders.columns[R]),(o=this._getColumnSetting(r,R,t.columnHeaders.columns))&&(s[h][F+R]=o,0!==h||P&&!P(r)||((a=new g)._deserialize(o),O._addWorkbookColumn(a,F+V++)));T&&(F=0,i={},n=new _,A&&(F=this._parseFlexGridRowToSheetRow(t.topLeftCells,i,l,0,s,M,y,D,!1,0,P,E)),this._parseFlexGridRowToSheetRow(t.columnHeaders,i,l,F,s,M,y,D,!1,0,P,E),i.cells.length>0&&(n._deserialize(i),O._addWorkbookRow(n,h))),h++}k=T?h:0}for(l=0;l<t.cells.rows.length;l++)F=0,i={},n=new _,(x=t.rows[l])instanceof u._NewRowTemplate||((w=x instanceof u.GroupRow)?I=Object(c.tryCast)(x,u.GroupRow).level:t.rows.maxGroupLevel>-1&&(I=t.rows.maxGroupLevel+1),A&&(F=this._parseFlexGridRowToSheetRow(t.rowHeaders,i,l,0,s,M,y,D,w,I,P,E)),this._parseFlexGridRowToSheetRow(t.cells,i,l,F,s,M,y,D,w,I,P,E),i.cells.length>0&&(n._deserialize(i),O._addWorkbookRow(n,k+l)));for(S=t.cells.rows.length,l=0;l<t.columnFooters.rows.length;l++)F=0,i={},n=new _,w=(x=t.columnFooters.rows[l])instanceof u.GroupRow,A&&(F=this._parseFlexGridRowToSheetRow(t.rowHeaders,i,l,0,s,M,y,D,w,0,P,E)),this._parseFlexGridRowToSheetRow(t.columnFooters,i,l,F,s,M,y,D,w,0,P,E),i.cells.length>0&&(n._deserialize(i),O._addWorkbookRow(n,k+S+l));return j.rows=T?t.frozenRows+k:t.frozenRows,j.columns=A?t.frozenColumns+F:t.frozenColumns,O.frozenPane=j,C._addWorkSheet(O),p||!M&&!E||(t.hostElement.removeChild(y),D.forEach((function(t){return t.forEach((function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}))}))),C.activeWorksheet=N,C},t._loadToFlexGrid=function(t,e,i){i=i||{};var n,r=null!=t.wj_sheetInfo,o={},s=[],l=[],h={};t.itemsSource=null,t.columns.clear(),t.columnHeaders.rows.clear(),t.rows.clear(),t.frozenColumns=0,t.frozenRows=0;var d=null==i.sheetIndex||isNaN(i.sheetIndex)?0:i.sheetIndex;if(d<0||d>=e.sheets.length)throw"The sheet index option is out of the sheet range of current workbook.";if(null!=i.sheetName)for(var p=0;p<e.sheets.length;p++)if(i.sheetName===e.sheets[p].name){n=e.sheets[p];break}if(null!=(n=n||e.sheets[d]).rows){for(var m=this._getColumnCount(n.rows),g=this._getRowCount(n.rows,m),_=n.columns,y=0;y<m;y++)t.columns.push(new u.Column),_[y]&&(isNaN(+_[y].width)||(t.columns[y].width=+_[y].width),_[y].visible||null==_[y].visible||(t.columns[y].visible=!!_[y].visible),_[y].style&&_[y].style.wordWrap&&(t.columns[y].wordWrap=_[y].style.wordWrap));var b,v=(null==i.includeColumnHeaders||i.includeColumnHeaders)&&n.rows.length>0,x=v?this._getColumnHeadersHeight(n):0,w=!1,S=[],C=n.frozenPane&&n.frozenPane.rows,O=n.frozenPane&&n.frozenPane.columns;C=Object(c.isNumber)(C)&&!isNaN(C)?C:null,O=Object(c.isNumber)(O)&&!isNaN(O)?O:null;for(var j=x;j<g;j++){var T=!1,A=null,M=n.rows[j];if(M)for(var N=j+1;N<n.rows.length;){var P=n.rows[N];if(P){(isNaN(M.groupLevel)&&!isNaN(P.groupLevel)||!isNaN(M.groupLevel)&&M.groupLevel<P.groupLevel)&&(T=!0);break}N++}if(T&&!n.summaryBelow)b&&(b.isCollapsed=w),(b=new u.GroupRow).isReadOnly=!1,w=null!=M.collapsed&&M.collapsed,b.level=isNaN(M.groupLevel)?0:M.groupLevel,h[b.level]=w,this._checkParentCollapsed(h,b.level)&&b._setFlag(u.RowColFlags.ParentCollapsed,!0),t.rows.push(b);else{var E=new u.Row;M&&this._checkParentCollapsed(h,M.groupLevel)&&E._setFlag(u.RowColFlags.ParentCollapsed,!0),t.rows.push(E)}for(M&&M.height&&!isNaN(M.height)&&(t.rows[j-x].height=M.height),y=0;y<m;y++)if(M){var I=M.cells[y],k=I?I.formula:null;k&&"="!==k[0]&&(k="="+k),I&&I.textRuns&&I.textRuns.length>0?(t.rows[j-x].isContentHtml=!0,t.setCellData(j-x,y,this._parseTextRunsToHTML(I.textRuns))):t.setCellData(j-x,y,k&&r?k:this._getItemValue(I)),T||this._setColumn(S,y,I);var F=j*m+y,D=I?I.style:null,L=f._parseExcelFormat(I),R=void 0;if(D){if(A=null==A?!!D.wordWrap:A&&!!D.wordWrap,D.hAlign)R=f._parseHAlignToString(Object(c.asEnum)(D.hAlign,a));else switch(this._getItemType(I)){case c.DataType.Number:R="right";break;case c.DataType.Boolean:R="center";break;default:R=L&&0===L.search(/[n,c,p]/i)?"right":"left"}if(o[F]={fontWeight:D.font&&D.font.bold?"bold":"none",fontStyle:D.font&&D.font.italic?"italic":"none",textDecoration:D.font&&D.font.underline?"underline":"none",textAlign:R,fontFamily:D.font&&D.font.family?D.font.family:"",fontSize:D.font&&D.font.size?D.font.size+"px":"",color:D.font&&D.font.color?D.font.color:"",backgroundColor:D.fill&&D.fill.color?D.fill.color:"",whiteSpace:D.wordWrap?"pre-wrap":"normal",format:L},D.borders&&(D.borders.left&&(this._parseBorderStyle(D.borders.left.style,"Left",o[F]),o[F].borderLeftColor=D.borders.left.color),D.borders.right&&(this._parseBorderStyle(D.borders.right.style,"Right",o[F]),o[F].borderRightColor=D.borders.right.color),D.borders.top&&(this._parseBorderStyle(D.borders.top.style,"Top",o[F]),o[F].borderTopColor=D.borders.top.color),D.borders.bottom&&(this._parseBorderStyle(D.borders.bottom.style,"Bottom",o[F]),o[F].borderBottomColor=D.borders.bottom.color)),D.fill&&D.fill.color){var V=o[F],B=D.borders,z=D.fill.color;B?(B.left&&B.left.color||(V.borderLeftColor=z),B.right&&B.right.color||y===O-1||(V.borderRightColor=z),B.top&&B.top.color||(V.borderTopColor=z),B.bottom&&B.bottom.color||j===C-1||(V.borderBottomColor=z)):(V.borderLeftColor=z,y!==O-1&&(V.borderRightColor=z),V.borderTopColor=z,j!==C-1&&(V.borderBottomColor=z))}D.font&&-1===l.indexOf(D.font.family)&&l.push(D.font.family)}I&&Object(c.isNumber)(I.rowSpan)&&I.rowSpan>0&&Object(c.isNumber)(I.colSpan)&&I.colSpan>0&&(I.rowSpan>1||I.colSpan>1)&&s.push(new u.CellRange(j,y,j+I.rowSpan-1,y+I.colSpan-1))}M&&(this._checkParentCollapsed(h,M.groupLevel)||M.visible||null==M.visible||(t.rows[j-x].visible=M.visible),t.rows[j-x].wordWrap=!!M.style&&!!M.style.wordWrap||!!A)}for(b&&(b.isCollapsed=w),null!=O&&(t.frozenColumns=O),null!=C&&(t.frozenRows=v&&C>0?C-1:C),y=0;y<t.columnHeaders.columns.length;y++){var W=S[y],H=t.columns[y];H.isRequired=!1,W&&(W.dataType===c.DataType.Boolean&&(H.dataType=W.dataType),H.format=W.format,H.align=W.hAlign,H.wordWrap=H.wordWrap||!!W.wordWrap)}for(p=0;p<Math.max(x,1);p++)t.columnHeaders.rows.push(new u.Row);var G=Object.keys(n.rows);for(p=0;p<x;p++)for(var X=0;X<n.columns.length;X++){var Y=n.rows[G[p]].cells[X],U=Y&&Y.value||"",q=t.columnHeaders.columns[X];if(U){var $=f._parseExcelFormat(Y);U=c.Globalize.format(U,$)}q.header=q.header||U,t.columnHeaders.setCellData(p,X,U)}if(r){var K=null==i.sheetVisible||i.sheetVisible;t.wj_sheetInfo.name=n.name,t.wj_sheetInfo.visible=!0===K||!1!==n.visible,t.wj_sheetInfo.styledCells=o,t.wj_sheetInfo.mergedRanges=s,t.wj_sheetInfo.fonts=l,t.wj_sheetInfo.tables=n.tables}}},t._getColumnHeadersHeight=function(t){if(!t&&!t.rows.length)return 0;for(var e=1,i=0;i<t.rows.length;i++){var n=t.rows[i];if(n){n.cells.forEach((function(t){e=Math.max(e,t.rowSpan||0)}));break}}return e},t._escapePlainText=function(t){return""===t?"'":t&&"'"===t[0]?"'"+t:t},t._parseFlexGridRowToSheetRow=function(t,e,i,n,r,o,s,h,d,p,m,g){var _,y,b,v,x,w,S,C,O,j,T,A,M,N,P,E,I,k,F,D,L,R,z,H,G,X,Y,U,q,$,K=!1,Z=!1;for((F=(_=t.grid).wj_sheetInfo)&&(D=F.evaluateFormula),null==(y=t.rows[i]).recordIndex?(H=0,t.cellType===u.CellType.ColumnHeader&&t.rows.length>1&&(H=i===r.length?i-1:i)):H=y.recordIndex,e.cells||(e.cells=[]),e.visible=y.isVisible,e.height=y.renderHeight||t.rows.defaultSize,e.groupLevel=p,d&&(e.collapsed=y.isCollapsed),y.wordWrap&&(e.style={wordWrap:y.wordWrap}),(y.constructor===u.Row||y.constructor===u._NewRowTemplate||V()&&y.constructor===V().DetailRow||B()&&y.constructor===B()._MultiRow)&&(K=!0),V()&&y.constructor===V().DetailRow&&(Z=!0),v=0;v<t.columns.length;v++)if(x=null,k=1,I=1,q=0,z=!1,P=null,X=null,C=null,R=_._getBindingColumn(t,i,t.columns[v]),E=null,F&&t===_.cells?(N=i*t.columns.length+v,F.mergedRanges&&(E=this._getMergedRange(i,v,F.mergedRanges)),F.styledCells&&(P=F.styledCells[N])):o&&(X=this._getMeasureCell(t,v,s,h),P=(E=_.getMergedRange(t,i,v,!1))?this._getCellStyle(t,X,E.bottomRow,E.rightCol)||{}:this._getCellStyle(t,X,i,v)||{}),E||(E=_.getMergedRange(t,i,v,!1)),E?i===E.topRow&&v===E.leftCol&&(I=E.bottomRow-E.topRow+1,k=this._getColSpan(t,E,m),z=!0):z=!0,!m||m(R)){if(b=r[H]?r[H][v+n]:null,K||d?(S=z?t.getCellData(i,v,!0):null,O=z?t.getCellData(i,v,!1):null,T=!1,M=null,S&&Object(c.isString)(S)&&S.length>1&&"="===S[0]&&(T=!0),L=Object(c.isDate)(O),P&&P.format&&null!=O?(/[hsmyt\:]/i.test(x=P.format)&&(L=!0),w=f._parseCellFormat(P.format,L)):b&&b.style&&b.style.format?(x=R.format,w=b.style.format):w=null,T&&null!=D&&Object(c.isFunction)(D)&&(M=D(S)),w||(L?w="m/d/yyyy":Object(c.isNumber)(O)&&!R.dataMap?w=Object(c.isInt)(O)?"#,##0":"#,##0.00":T?(A=S.toLowerCase()).indexOf("now()")>-1?(w="m/d/yyyy h:mm",L=!0):A.indexOf("today()")>-1||A.indexOf("date(")>-1?(w="m/d/yyyy",L=!0):A.indexOf("time(")>-1&&(w="h:mm AM/PM",L=!0):w="General")):(S=z?_.columnHeaders.getCellData(0,v,!0):null,w="General"),Object(c.isString)(S)&&-1!==S.indexOf("<span")&&(C=this._parseToTextRuns(S),S=null),Y=this._parseCellStyle(P)||{},t===_.cells&&d&&y.hasChildren&&v===_.columns.firstVisibleIndex){if(T&&null!=M?j=M:S?j=S:z&&(j=y.getGroupHeader().replace(/<\/?\w+>/g,"").replace(/&#39;/g,"'")),null==j&&!P)continue;!(L=Object(c.isDate)(j))&&x&&"d"===x.toLowerCase()&&Object(c.isInt)(j)&&(w="0"),j=Object(c.isString)(j)?f._unescapeXML(j):j,v===_.columns.firstVisibleIndex&&_.treeIndent&&(q=p),G={value:j,isDate:L,formula:T?this._parseToExcelFormula(S,L):null,colSpan:k,rowSpan:I,style:this._extend(Y,{format:w,font:{bold:!0},hAlign:a.Left,indent:q}),textRuns:C}}else S=Object(c.isString)(S)?f._unescapeXML(S):S,O=Object(c.isString)(O)?f._unescapeXML(O):O,!L&&x&&"d"===x.toLowerCase()&&Object(c.isInt)(O)&&(w="0"),U=Y&&Y.hAlign?Y.hAlign:b&&b.style&&null!=b.style.hAlign?Object(c.asEnum)(b.style.hAlign,a,!0):Object(c.isDate)(O)?a.Left:a.General,v!==_.columns.firstVisibleIndex||!_.treeIndent||U!==a.Left&&U!==a.General||(q=p),G={value:T?M:this._escapePlainText("General"===w?S:O),isDate:L,formula:T?this._parseToExcelFormula(S,L):null,colSpan:v<_.columns.firstVisibleIndex?1:k,rowSpan:I,style:this._extend(Y,{format:w,hAlign:U,vAlign:I>1?t===_.cells||!1===_.centerHeadersVertically?l.Top:l.Center:null,indent:q}),textRuns:C},Z&&($=t.getCellElement(i,v))&&$.appendChild(y.detail);g&&g(new W(t,new u.CellRange(i,v),X,s,h,G)),e.cells.push(G)}return n+v},t._parseCellStyle=function(t,e){if(void 0===e&&(e=!1),null==t)return null;var i=t.fontSize;i=i?+i.substring(0,i.indexOf("px")):null,isNaN(i)&&(i=null);var n=t.fontWeight;n="bold"===n||+n>=700;var r="italic"===t.fontStyle,o=t.textDecorationStyle;null==o&&(o=t.textDecoration),o="underline"===o;var a=t.whiteSpace;return a=!!a&&a.indexOf("pre")>-1,{font:{bold:n,italic:r,underline:o,family:this._parseToExcelFontFamily(t.fontFamily),size:i,color:t.color},fill:{color:t.backgroundColor},borders:this._parseBorder(t,e),hAlign:f._parseStringToHAlign(t.textAlign),wordWrap:a}},t._parseBorder=function(t,e){var i={};return i.left=this._parseEgdeBorder(t,"Left"),i.right=this._parseEgdeBorder(t,"Right"),i.top=this._parseEgdeBorder(t,"Top"),i.bottom=this._parseEgdeBorder(t,"Bottom"),e&&(i.vertical=this._parseEgdeBorder(t,"Vertical"),i.horizontal=this._parseEgdeBorder(t,"Horizontal")),i},t._parseEgdeBorder=function(t,e){var i,n=t["border"+e+"Style"],r=t["border"+e+"Width"];if(r&&r.length>2&&(r=+r.substring(0,r.length-2)),n&&"none"!==n&&"hidden"!==n){switch(i={},n=n.toLowerCase()){case"dotted":i.style=r>1?h.MediumDashDotted:h.Dotted;break;case"dashed":i.style=r>1?h.MediumDashed:h.Dashed;break;case"double":i.style=h.Double;break;default:i.style=r>2?h.Thick:r>1?h.Medium:h.Thin}i.color=t["border"+e+"Color"]}return i},t._parseBorderStyle=function(t,e,i){var n="border"+e+"Style",r="border"+e+"Width";switch(t){case h.Dotted:case h.Hair:i[n]="dotted",i[r]="1px";break;case h.Dashed:case h.ThinDashDotDotted:case h.ThinDashDotted:i[n]="dashed",i[r]="1px";break;case h.MediumDashed:case h.MediumDashDotDotted:case h.MediumDashDotted:case h.SlantedMediumDashDotted:i[n]="dashed",i[r]="2px";break;case h.Double:i[n]="double",i[r]="3px";break;case h.Medium:i[n]="solid",i[r]="2px";break;case h.Thick:i[n]="solid",i[r]="3px";break;default:i[n]="solid",i[r]="1px"}},t._parseToExcelFontFamily=function(t){var e;return t&&(e=t.split(","))&&e.length>0&&(t=e[0].replace(/\"|\'/g,"")),t},t._parseToExcelFormula=function(t,e){var i,n,r,o,a,s,l,h=/\"?\w+\"?\s*\,\s*\"(\w+)\"/i;if(i=t.match(/(floor|ceiling)\([+-]?\d+\.?\d*\)/gi))for(a=0;a<i.length;a++)l=(s=i[a]).substring(0,s.lastIndexOf(")"))+", 1)",t=t.replace(s,l);if(i=null,i=t.match(/text\(\"?\w+\"?\s*\,\s*\"\w+\"\)/gi))for(a=0;a<i.length;a++)(n=(s=i[a]).match(h))&&2===n.length&&(/^d{1,4}?$/.test(r=n[1])||(o=f._parseCellFormat(r,e),l=s.replace(r,o),t=t.replace(s,l)));return t},t._parseToTextRuns=function(t){var e,i,n,r=t.split("<span "),o=[];for(e=0;e<r.length;e++)n=-1!==(i=r[e]).indexOf("</span>")?{text:i.substring(i.indexOf(">")+1,i.indexOf("</span>")),font:this._parseToTextRunFont(i.substring(i.indexOf('style="')+7,i.indexOf(';"')))}:{text:i},o.push(n);return o},t._parseToTextRunFont=function(t){var e,i,n,r,o,a,s,l,h,c=t.split(";");if(c.length>0){for(e=0;e<c.length;e++)if(2===(i=c[e].split(":")).length)switch(i[1]=i[1].trim(),i[0]){case"font-size":a=+i[1].substring(0,i[1].indexOf("px")),isNaN(a)&&(a=null);break;case"font-weight":n="bold"===i[1]||+i[1]>=700;break;case"font-style":r="italic"===i[1];break;case"text-decoration-style":case"text-decoration":o="underline"===i[1];break;case"font-family":s=this._parseToExcelFontFamily(i[1]);break;case"color":l=i[1]}h={bold:n,italic:r,underline:o,family:s,size:a,color:l}}return h},t._getMeasureCell=function(t,e,i,n){var r=n[t.cellType],o=r&&r[e],a=null==o;return o?this.hasCssText&&(o.style.cssText="",o.style.visibility="hidden"):(r||(n[t.cellType]=r=[]),r[e]=o=i.cloneNode()),!a&&o.parentElement||(t.hostElement.children.length>0?t.hostElement.children[0].appendChild(o):t.hostElement.appendChild(o)),o},t._getColumnSetting=function(t,e,i){var n=t;return null!=t.colspan&&(n=this._getRenderColumn(e,i)),n?{autoWidth:!0,width:n.renderWidth||i.defaultSize,visible:n.visible,style:{format:t.format?f._parseCellFormat(t.format,t.dataType===c.DataType.Date):"",hAlign:f._parseStringToHAlign(this._toExcelHAlign(t.getAlignment())),wordWrap:t.wordWrap}}:null},t._toExcelHAlign=function(t){return(t=t?t.trim().toLowerCase():t)?t.indexOf("center")>-1?"center":t.indexOf("right")>-1||t.indexOf("end")>-1?"right":t.indexOf("justify")>-1?"justify":"left":t},t._getColumnCount=function(t){for(var e,i=0,n=0,r=0;r<t.length;r++)(e=t[r]&&t[r].cells?t[r].cells:[])&&e.length>0&&(n=e.length,Object(c.isInt)(e[n-1].colSpan)&&e[n-1].colSpan>1&&(n=n+e[n-1].colSpan-1),n>i&&(i=n));return i},t._getRowCount=function(t,e){for(var i,n,r=t.length,o=r-1,a=0;a<e;a++)t:for(;o>=0;o--)if((n=((i=t[o])&&i.cells?i.cells:[])[a])&&(null!=n.value&&""!==n.value||Object(c.isInt)(n.rowSpan)&&n.rowSpan>1)){Object(c.isInt)(n.rowSpan)&&n.rowSpan>1&&o+n.rowSpan>r&&(r=o+n.rowSpan);break t}return r},t._numAlpha=function(t){var e=Math.floor(t/26)-1;return(e>-1?this._numAlpha(e):"")+String.fromCharCode(65+t%26)},t._getItemType=function(t){return null==t||null==t.value||isNaN(t.value)?null:Object(c.getType)(t.value)},t._setColumn=function(t,e,i){var n,r,o,s=t[e];s?(n=this._getItemType(i),s.dataType!==n&&s.dataType===c.DataType.Boolean&&n!==c.DataType.Boolean&&(s.dataType=n),!i||null==i.value||Object(c.isString)(i.value)&&Object(c.isNullOrWhiteSpace)(i.value)||(r=f._parseExcelFormat(i))&&s.format!==r&&"General"!==r&&(s.format=r),i&&i.style&&(i.style.hAlign&&(o=f._parseHAlignToString(Object(c.asEnum)(i.style.hAlign,a))),s.wordWrap=null==s.wordWrap?!!i.style.wordWrap:s.wordWrap&&!!i.style.wordWrap),o||n!==c.DataType.Number||(o="right"),s.hAlign=o):t[e]={dataType:this._getItemType(i),format:f._parseExcelFormat(i),hAlign:"",wordWrap:null}},t._getItemValue=function(t){if(null==t||null==t.value)return null;var e=t.value;return Object(c.isString)(e)&&"'"===e[0]&&(e=e.substr(1)),Object(c.isNumber)(e)&&isNaN(e)?"":e instanceof Date&&isNaN(e.getTime())?"":e},t._getCellStyle=function(t,e,i,n){try{t.grid.cellFactory.updateCell(t,i,n,e),e.className=e.className.replace("wj-state-selected",""),e.className=e.className.replace("wj-state-multi-selected","")}catch(t){return null}return window.getComputedStyle(e)},t._parseTextRunsToHTML=function(t){var e,i,n,r;for(n="",r=0;r<t.length;r++)n+=(i=(e=t[r]).font)?'<span style="'+(i.bold?"font-weight: bold;":"")+(i.italic?"font-style: italic;":"")+(i.underline?"text-decoration: underline;":"")+(i.family?"font-family: "+i.family+";":"")+(null!=i.size?"font-size: "+i.size+"px;":"")+(i.color?"color: "+i.color+";":"")+'">'+e.text+"</span>":e.text;return n},t._extend=function(t,e){for(var i in e){var n=e[i];Object(c.isObject)(n)&&t[i]?Object(c.copy)(t[i],n):t[i]=n}return t},t._checkParentCollapsed=function(t,e){var i=!1;return Object.keys(t).forEach((function(n){!0===t[n]&&!1===i&&!isNaN(e)&&+n<e&&(i=!0)})),i},t._getColSpan=function(t,e,i){for(var n=0,r=e.leftCol;r<=e.rightCol;r++)i&&!i(t.columns[r])||n++;return n},t._getRenderColumn=function(t,e){return t>=e.length?null:e[t]},t._getMergedRange=function(t,e,i){var n,r;for(n=0;n<i.length;n++)if(t>=(r=i[n]).topRow&&t<=r.bottomRow&&e>=r.leftCol&&e<=r.rightCol)return r;return null},t}(),W=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i)||this;return s._cell=n,s._patternCell=r,s._xlsxCell=a,s._cellsCache=o,s}return R(e,t),Object.defineProperty(e.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xlsxCell",{get:function(){return this._xlsxCell},set:function(t){this._xlsxCell=t},enumerable:!0,configurable:!0}),e.prototype.getFormattedCell=function(){return this._cell||(this._cell=z._getMeasureCell(this.panel,this.col,this._patternCell,this._cellsCache),z._getCellStyle(this.panel,this._cell,this.row,this.col)),this._cell},e}(u.CellRangeEventArgs);Object(c._registerModule)("wijmo.grid.xlsx",r)},HvV6:function(t,e,i){"use strict";i.d(e,"a",(function(){return h})),i("CbkN");var n=i("TwVa"),r=i("iFvM"),o=i("TYT/"),a=i("UkaQ"),s=i("Valr");function l(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"wj-flex-grid-column",11),o["\u0275\u0275text"](1,"\n      "),o["\u0275\u0275elementEnd"]()),2&t){var i=e.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("header",i.fieldName)("binding",i.fieldName)("dataType",n.getColumnType(i.dataType))("format","dd/MM/yyyy HH:mm:ss")}}var h=function(){function t(){}return t.prototype.ngOnInit=function(){this.data=Object(r.v)({rows:this.config.data,fieldNames:this.config.fields.map((function(t){return t.fieldName}))})},t.prototype.getColumnType=function(t){return n.n[t]},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["app-preview-data"]],inputs:{modalRef:"modalRef",config:"config"},decls:30,vars:5,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column","h-100","overflow-hidden"],[1,"h-100",3,"itemsSource","allowDelete","allowAddNew","isReadOnly"],["grid",""],[3,"header","binding","dataType","format",4,"ngFor","ngForOf"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-light",3,"click"],[3,"header","binding","dataType","format"]],template:function(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1,"\n  "),o["\u0275\u0275elementStart"](2,"h4",1),o["\u0275\u0275text"](3,"Preview result table"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4,"\n  "),o["\u0275\u0275elementStart"](5,"button",2),o["\u0275\u0275listener"]("click",(function(t){return e.modalRef.hide()})),o["\u0275\u0275text"](6,"\n    "),o["\u0275\u0275elementStart"](7,"span",3),o["\u0275\u0275text"](8,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](9,"\n  "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](10,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](11,"\n"),o["\u0275\u0275elementStart"](12,"div",4),o["\u0275\u0275text"](13,"\n    "),o["\u0275\u0275elementStart"](14,"wj-flex-grid",5,6),o["\u0275\u0275text"](16,"\n    "),o["\u0275\u0275template"](17,l,2,4,"wj-flex-grid-column",7),o["\u0275\u0275text"](18,"\n  "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](19,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](20,"\n"),o["\u0275\u0275elementStart"](21,"div",8),o["\u0275\u0275text"](22,"\n  "),o["\u0275\u0275elementStart"](23,"div",9),o["\u0275\u0275text"](24,"\n    "),o["\u0275\u0275elementStart"](25,"button",10),o["\u0275\u0275listener"]("click",(function(t){return e.modalRef.hide()})),o["\u0275\u0275text"](26,"Close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](27,"\n  "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](28,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](29,"\n")),2&t&&(o["\u0275\u0275advance"](14),o["\u0275\u0275property"]("itemsSource",e.data)("allowDelete",!1)("allowAddNew",!1)("isReadOnly",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.config.fields))},directives:[a.WjFlexGrid,s.NgForOf,a.WjFlexGridColumn],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]}),t}()},LXVg:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("mrSG"),r=i("M0ag"),o=function(){function t(t,e){this.dataKey=t,this.gridId=e,this.initConfig()}return t.prototype.getColumn=function(t,e){if(void 0===e&&(e="root"),this.gridConfig[e]&&this.gridConfig[e][t]){var i=this.gridConfig[e][t];return{header:i.headerText||Object(r.i)(t),width:i.width,dataType:i.dataType?Number(i.dataType):null,displayFormat:i.displayFormat||null}}return{header:Object(r.i)(t),dataType:null}},t.prototype.saveColumn=function(t,e,i){var r,o;void 0===i&&(i="root"),this.gridConfig[i]?this.gridConfig[i][t]=Object(n.a)(Object(n.a)({},this.gridConfig[i][t]),e):this.gridConfig[i]=((r={})[t]=Object(n.a)({},e),r);var a=this.getConfigs();a[this.dataKey]?a[this.dataKey][this.gridId]=this.gridConfig:a[this.dataKey]=((o={})[this.gridId]=this.gridConfig,o),localStorage.setItem("grid-configs",JSON.stringify(a))},t.prototype.initConfig=function(){var t,e=this.getConfigs();e[this.dataKey]?e[this.dataKey][this.gridId]||(e[this.dataKey][this.gridId]={}):e[this.dataKey]=((t={})[this.gridId]={},t),this.gridConfig=e[this.dataKey][this.gridId]},t.prototype.getConfigs=function(){var t=localStorage.getItem("grid-configs"),e={};if(t)try{e=JSON.parse(t)||{}}catch(i){e={}}return e},t}()},OaQ9:function(t,e,i){"use strict";var n=i("Valr"),r=i("QJY3"),o=i("UkaQ"),a=i("EQPC"),s=i("xAFk"),l=i("E+9f"),h=i("RL4Z"),c=i("6Fs3"),u=i("DQr0"),d=i("g4vN"),p=i("efbX"),f=i("mrSG"),m=i("15JJ"),g=i("lMX+"),_=i("tcrU"),y=i("EPMZ"),b=i("M0ag"),v=i("vg9S"),x=i("26FU"),w=i("F/XL"),S=i("XlPw"),C=i("9Z1F"),O=(i("oW1M"),i("ZF+8")),j=i("TwVa"),T=i("OLrf"),A=i("iFvM"),M=i("8JMH"),N=i("HvV6"),P=i("j13F"),E=i("3cVM"),I=i("TYT/"),k=i("DUip"),F=i("1PnN"),D=i("uLXW"),L=i("b8dF"),R=["connectionEl"];function V(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"\n        "),I["\u0275\u0275elementStart"](2,"div",28),I["\u0275\u0275text"](3,"\n          "),I["\u0275\u0275elementStart"](4,"label",7),I["\u0275\u0275text"](5,"Owner"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6,"\n          "),I["\u0275\u0275elementStart"](7,"div",8),I["\u0275\u0275text"](8,"\n            "),I["\u0275\u0275elementStart"](9,"input",29),I["\u0275\u0275listener"]("ngModelChange",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().metaData.objectOwner=t})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](10,"\n          "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](11,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](12,"\n        "),I["\u0275\u0275elementStart"](13,"div",28),I["\u0275\u0275text"](14,"\n          "),I["\u0275\u0275elementStart"](15,"label",30),I["\u0275\u0275text"](16,"Object"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](17,"\n          "),I["\u0275\u0275elementStart"](18,"div",8),I["\u0275\u0275text"](19,"\n            "),I["\u0275\u0275elementStart"](20,"input",31),I["\u0275\u0275listener"]("ngModelChange",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().metaData.objectName=t})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](21,"\n          "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](22,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](23,"\n      "),I["\u0275\u0275elementContainerEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("ngModel",n.metaData.objectOwner),I["\u0275\u0275advance"](11),I["\u0275\u0275property"]("ngModel",n.metaData.objectName)}}function B(t,e){if(1&t&&I["\u0275\u0275text"](0),2&t){var i=e.item;I["\u0275\u0275textInterpolate2"]("",i.objectOwner,".",i.objectName,"")}}function z(t,e){if(1&t&&I["\u0275\u0275text"](0),2&t){var i=e.item;I["\u0275\u0275textInterpolate2"]("",i.objectOwner,".",i.objectName,"")}}function W(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"\n        "),I["\u0275\u0275elementStart"](2,"label",32),I["\u0275\u0275text"](3,"Import data into"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](4,"\n        "),I["\u0275\u0275elementStart"](5,"ng-select",33),I["\u0275\u0275listener"]("change",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().onTableSelect(t)})),I["\u0275\u0275text"](6,"\n          "),I["\u0275\u0275template"](7,B,1,2,"ng-template",34),I["\u0275\u0275text"](8,"\n          "),I["\u0275\u0275template"](9,z,1,2,"ng-template",35),I["\u0275\u0275text"](10,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](11,"\n      "),I["\u0275\u0275elementContainerEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("items",n.tables)("searchFn",n.customSearchFn)}}function H(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"span"),I["\u0275\u0275text"](1),I["\u0275\u0275pipe"](2,"number"),I["\u0275\u0275elementEnd"]()),2&t){var i=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"]("",I["\u0275\u0275pipeBind1"](2,1,i.rowsLoaded)," rows loaded")}}function G(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"div",36),I["\u0275\u0275text"](1,"\n      "),I["\u0275\u0275elementStart"](2,"div",37),I["\u0275\u0275text"](3,"\n        "),I["\u0275\u0275elementStart"](4,"span",38),I["\u0275\u0275text"](5,"Loading..."),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6,"\n      "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](7,"\n      "),I["\u0275\u0275elementStart"](8,"h5"),I["\u0275\u0275text"](9),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](10,"\n    "),I["\u0275\u0275elementEnd"]()),2&t){var i=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](9),I["\u0275\u0275textInterpolate"](i.progressMessage)}}function X(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"div",39),I["\u0275\u0275text"](1,"\n      "),I["\u0275\u0275elementStart"](2,"alert",40),I["\u0275\u0275text"](3,"\n        "),I["\u0275\u0275elementStart"](4,"strong"),I["\u0275\u0275text"](5,"Error:"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](7,"\n    "),I["\u0275\u0275elementEnd"]()),2&t){var i=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](6),I["\u0275\u0275textInterpolate1"](" Verify file format (",i.error,").\n      ")}}var Y=function(){function t(t,e,i,n,r,o,a){this.fileService=t,this.authService=e,this.sqlService=i,this.connectionsService=n,this.notificationService=r,this.router=o,this.dialogService=a,this.dataTypes=Object.values(j.l),this.createTable$=new x.a(!0),this.loading=!1,this.preprocessors=j.i}return t.prototype.ngOnInit=function(){var t=this;this.metaData={objectId:0,objectName:null,objectOwner:this.authService.user.userName,objectType:"Table",fields:[]},this.createTable$.subscribe((function(e){e?t.createNewTableColumns():t.createSelectedTableColumns()})),this.connections$=this.connectionsService.loadMyDbConnections(),this.connectionEl.changeEvent.pipe(Object(m.a)((function(){return t.sqlService.getSqlObjects(t.sqlConnectionUrl)}))).subscribe((function(e){t.tables=e})),this.setData()},Object.defineProperty(t.prototype,"isValid",{get:function(){return this.connection&&(this.metaData.objectOwner&&this.metaData.objectName&&this.createTable$.value||!this.createTable$.value)&&this.metaData.fields.length},enumerable:!0,configurable:!0}),t.prototype.onTableSelect=function(t){var e=this;this.loading=!0,this.sqlService.getObject(this.sqlConnectionUrl,t.objectOwner,t.objectName).subscribe((function(t){e.selectedTable=t,e.createSelectedTableColumns(),e.loading=!1}))},t.prototype.customSearchFn=function(t,e){return t=t.toLowerCase(),(e.objectOwner.toLowerCase()+"."+e.objectName.toLowerCase()).includes(t)},t.prototype.import=function(){var t=this,e=this.createTable$.value;this.loading=!0,this.progressMessage=e?j.j.Create:j.j.Importing;var i=this.mappings.getItems(),n=Object(f.a)(Object(f.a)({},e?this.metaData:this.selectedTable),{fields:Object(A.q)(i),primaryKeys:Object(A.t)(i)});(e?this.sqlService.generateObject(this.sqlConnectionUrl,n):Object(w.a)(null)).pipe(Object(C.a)((function(e){var i=Object(A.n)(e)||"Failed to create new table";return t.notificationService.open({message:i,type:j.f.DANGER}),Object(S.a)(i)})),Object(m.a)((function(){return t.saveData()}))).subscribe((function(e){return t.importHandler(n,e)}),(function(e){return t.importErrorHandler(e)}))},t.prototype.previewData=function(){var t=this.dialogService.open(N.a,{class:"modal-w-90 full-height d-flex flex-column"}),e=this.mappings.getItems();t.config={data:P.b.getValues(this.data,e,"json"),fields:e}},Object.defineProperty(t.prototype,"sqlConnectionUrl",{get:function(){return M.a.apiBaseUrl+"/sql/"+this.connection},enumerable:!0,configurable:!0}),t.prototype.setData=function(){this.data=Array.isArray(this.config)?this.config:[this.config],this.rowsLoaded=this.data.length;try{this.sourceFields=Object.keys(this.data[0]).map((function(t){return Object(A.i)(t)})),this.metaData.fields=Object(A.q)(this.sourceFields),this.createTable$.value?this.createNewTableColumns():this.createSelectedTableColumns()}catch(t){this.data=null,this.sourceFields=null,this.metaData.fields=null,this.error=t.message}finally{this.loading=!1}},t.prototype.getSelectedTableTitle=function(){return this.selectedTable?this.selectedTable.objectOwner+"."+this.selectedTable.objectName:"Select table"},t.prototype.importHandler=function(t,e){var i=this;if(e.savedItemsCount===e.itemsToSaveCount)this.notificationService.open({type:j.f.SUCCESS,message:"Successfully inserted: "+e.inserted.toLocaleString()+"\n        , updated: "+e.updated.toLocaleString()+"\n        , deleted: "+e.deleted.toLocaleString()}),setTimeout((function(){i.modalRef.hide(),i.loading=!1,i.progressMessage=null}),1e3);else{var n=e.savedItemsCount?"So far ":"";e.inserted&&(n+="Inserted: "+e.inserted.toLocaleString()+" "),e.updated&&(n+="Updated: "+e.updated.toLocaleString()+" "),e.deleted&&(n+="Deleted: "+e.deleted.toLocaleString()),this.progressMessage=j.j.Importing+" "+e.itemsToSaveCount.toLocaleString()+" rows. "+n}},t.prototype.importErrorHandler=function(t){this.loading=!1,this.progressMessage=null,console.error(t)},t.prototype.createSelectedTableColumns=function(){var t=this;if(this.selectedTable){var e=new Set(this.selectedTable.primaryKeys.map((function(t){return t.fieldName})));this.tableColumns=Object(A.d)(this.selectedTable.fields).map((function(i,n){var r=t.sourceFields?t.sourceFields.find((function(t){return t===i.fieldName})):null;return{fieldName:i.fieldName,dataType:i.dataType||j.l.NVARCHAR,size:i.size,sourceField:r,isKey:e.has(i.fieldName),preprocessFunc:null,preprocessParams:null}}))}else this.tableColumns=[]},t.prototype.createNewTableColumns=function(){if(this.sourceFields){var t=P.b.getTypes(this.data);this.tableColumns=Object(A.d)(this.sourceFields).map((function(e,i){var n=t["col"+i];return{fieldName:e.fieldName,dataType:e.dataType||n.type||j.l.NVARCHAR,size:e.size||n.size,sourceField:e.fieldName,isKey:e.isKey||Boolean(n.uniqueValues),preprocessFunc:null,preprocessParams:null}}))}},t.prototype.saveData=function(){var t=this;return this.sqlService.saveSqlObjectDataWithStatus(this.sqlConnectionUrl,this.createTable$.value?this.metaData:this.selectedTable,this.sendData).pipe(Object(C.a)((function(e){var i="string"==typeof e.error?e.error:"Failed to Import";return t.notificationService.open({message:i,type:j.f.DANGER}),Object(S.a)(i)})))},Object.defineProperty(t.prototype,"sendData",{get:function(){var t=this.mappings.getItems(),e=t.map((function(t){return t.fieldName})),i=e.map((function(t,e){return t?e:-1})).filter((function(t){return-1!==t}));return{tableData:{fieldNames:e.filter((function(t){return t})),rows:P.b.getValues(this.data,t,"json").map((function(t){return t.filter((function(t,e){return i.includes(e)}))})).map((function(t){return t.map((function(t){return t instanceof Date?Object(A.b)(t):t}))}))}}},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(I["\u0275\u0275directiveInject"](O.d),I["\u0275\u0275directiveInject"](T.b),I["\u0275\u0275directiveInject"](O.h),I["\u0275\u0275directiveInject"](O.b),I["\u0275\u0275directiveInject"](O.g),I["\u0275\u0275directiveInject"](k.f),I["\u0275\u0275directiveInject"](O.c))},t.\u0275cmp=I["\u0275\u0275defineComponent"]({type:t,selectors:[["app-save-object-explorer"]],viewQuery:function(t,e){var i;1&t&&(I["\u0275\u0275staticViewQuery"](E.a,!0),I["\u0275\u0275staticViewQuery"](R,!0)),2&t&&(I["\u0275\u0275queryRefresh"](i=I["\u0275\u0275loadQuery"]())&&(e.mappings=i.first),I["\u0275\u0275queryRefresh"](i=I["\u0275\u0275loadQuery"]())&&(e.connectionEl=i.first))},inputs:{modalRef:"modalRef",config:"config"},decls:86,vars:26,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column","h-100","overflow-hidden"],[1,"row","m-0"],[1,"form-group","row","m-0"],["for","owner-name",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["bindLabel","connectionName","bindValue","connectionName","placeholder","Select connection",3,"items","ngModel","ngModelChange"],["connectionEl",""],[1,"d-flex","w-50"],[4,"ngIf"],[1,"form-check","form-check-inline"],["type","checkbox","id","create-tabel",1,"form-check-input","mr-2",3,"checked","value","change"],["for","create-tabel",1,"form-check-label"],[1,"row","flex-fill","mx-0","flex-column","my-2","h-100","position-relative","overflow-hidden"],["fxLayout","row"],["fxFlex","",1,"table-title"],[1,"fields-container","d-flex","flex-fill","w-100"],[1,"fields-container","d-flex","flex-fill","w-100",3,"tableColumns","isNewTable","sourceFields"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],["class","d-flex positin-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-light",3,"disabled","click"],["type","button",1,"btn","btn-primary","ml-auto","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-light",3,"click"],[1,"form-group","row","m-0","w-50"],["type","text","id","owner-name","placeholder","Owner",1,"form-control",3,"ngModel","ngModelChange"],["for","object-name",1,"col-sm-4","col-form-label"],["type","text","id","object-name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["for","object-name",1,"col-sm-3","col-form-label"],["placeholder","Select table",1,"col-sm-7",3,"items","searchFn","change"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"d-flex","positin-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["type","danger"]],template:function(t,e){1&t&&(I["\u0275\u0275elementStart"](0,"div",0),I["\u0275\u0275text"](1,"\n  "),I["\u0275\u0275elementStart"](2,"h4",1),I["\u0275\u0275text"](3,"Save to Database"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](4,"\n  "),I["\u0275\u0275elementStart"](5,"button",2),I["\u0275\u0275listener"]("click",(function(t){return e.modalRef.hide()})),I["\u0275\u0275text"](6,"\n    "),I["\u0275\u0275elementStart"](7,"span",3),I["\u0275\u0275text"](8,"\xd7"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](9,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](10,"\n"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](11,"\n"),I["\u0275\u0275elementStart"](12,"div",4),I["\u0275\u0275text"](13,"\n  "),I["\u0275\u0275elementStart"](14,"div",5),I["\u0275\u0275text"](15,"\n    "),I["\u0275\u0275elementStart"](16,"div",6),I["\u0275\u0275text"](17,"\n      "),I["\u0275\u0275elementStart"](18,"label",7),I["\u0275\u0275text"](19,"Connection"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](20,"\n      "),I["\u0275\u0275elementStart"](21,"div",8),I["\u0275\u0275text"](22,"\n        "),I["\u0275\u0275elementStart"](23,"ng-select",9,10),I["\u0275\u0275listener"]("ngModelChange",(function(t){return e.connection=t})),I["\u0275\u0275pipe"](25,"async"),I["\u0275\u0275text"](26,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](27,"\n      "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](28,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](29,"\n    "),I["\u0275\u0275elementStart"](30,"div",11),I["\u0275\u0275text"](31,"\n      "),I["\u0275\u0275template"](32,V,24,2,"ng-container",12),I["\u0275\u0275pipe"](33,"async"),I["\u0275\u0275text"](34,"\n      "),I["\u0275\u0275template"](35,W,12,2,"ng-container",12),I["\u0275\u0275pipe"](36,"async"),I["\u0275\u0275text"](37,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](38,"\n    "),I["\u0275\u0275elementStart"](39,"div",13),I["\u0275\u0275text"](40,"\n      "),I["\u0275\u0275elementStart"](41,"input",14),I["\u0275\u0275listener"]("change",(function(t){return e.createTable$.next(t.target.checked)})),I["\u0275\u0275pipe"](42,"async"),I["\u0275\u0275pipe"](43,"async"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](44,"\n      "),I["\u0275\u0275elementStart"](45,"label",15),I["\u0275\u0275text"](46,"Create New Table"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](47,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](48,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](49,"\n  "),I["\u0275\u0275elementStart"](50,"div",16),I["\u0275\u0275text"](51,"\n    "),I["\u0275\u0275elementStart"](52,"div",17),I["\u0275\u0275text"](53,"\n      "),I["\u0275\u0275elementStart"](54,"h5",18),I["\u0275\u0275text"](55,"Fields Mappings"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](56,"\n      "),I["\u0275\u0275template"](57,H,3,3,"span",12),I["\u0275\u0275text"](58,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](59,"\n    "),I["\u0275\u0275elementStart"](60,"div",19),I["\u0275\u0275text"](61,"\n      "),I["\u0275\u0275element"](62,"app-fields-mappings",20),I["\u0275\u0275pipe"](63,"async"),I["\u0275\u0275text"](64,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](65,"\n    "),I["\u0275\u0275template"](66,G,11,1,"div",21),I["\u0275\u0275text"](67,"\n    "),I["\u0275\u0275template"](68,X,8,1,"div",22),I["\u0275\u0275text"](69,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](70,"\n"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](71,"\n"),I["\u0275\u0275elementStart"](72,"div",23),I["\u0275\u0275text"](73,"\n  "),I["\u0275\u0275elementStart"](74,"div",24),I["\u0275\u0275text"](75,"\n    "),I["\u0275\u0275elementStart"](76,"button",25),I["\u0275\u0275listener"]("click",(function(t){return e.previewData()})),I["\u0275\u0275text"](77,"Preview\n      Data"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](78,"\n    "),I["\u0275\u0275elementStart"](79,"button",26),I["\u0275\u0275listener"]("click",(function(t){return e.import()})),I["\u0275\u0275text"](80,"Import"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](81,"\n    "),I["\u0275\u0275elementStart"](82,"button",27),I["\u0275\u0275listener"]("click",(function(t){return e.modalRef.hide()})),I["\u0275\u0275text"](83,"Cancel"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](84,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](85,"\n"),I["\u0275\u0275elementEnd"]()),2&t&&(I["\u0275\u0275advance"](23),I["\u0275\u0275property"]("items",I["\u0275\u0275pipeBind1"](25,14,e.connections$))("ngModel",e.connection),I["\u0275\u0275advance"](9),I["\u0275\u0275property"]("ngIf",I["\u0275\u0275pipeBind1"](33,16,e.createTable$)&&e.connection),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",!I["\u0275\u0275pipeBind1"](36,18,e.createTable$)&&e.connection),I["\u0275\u0275advance"](6),I["\u0275\u0275property"]("checked",I["\u0275\u0275pipeBind1"](42,20,e.createTable$))("value",I["\u0275\u0275pipeBind1"](43,22,e.createTable$)),I["\u0275\u0275advance"](16),I["\u0275\u0275property"]("ngIf",e.rowsLoaded),I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("tableColumns",e.tableColumns)("isNewTable",I["\u0275\u0275pipeBind1"](63,24,e.createTable$))("sourceFields",e.sourceFields),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",e.loading),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",e.error),I["\u0275\u0275advance"](8),I["\u0275\u0275property"]("disabled",!e.data||!e.data.length),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("disabled",!e.isValid))},directives:[F.a,r.NgControlStatus,r.NgModel,n.NgIf,D.f,D.b,E.a,r.DefaultValueAccessor,F.d,F.c,L.a],pipes:[n.AsyncPipe,n.DecimalPipe],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.fields-container[_ngcontent-%COMP%]{height:calc(100% - 200px)}"]}),t}(),U=i("LXVg"),q=i("4CEX"),$=i("UfhM"),K=["grid"];function Z(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"a",18),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().selectPath(-1)})),I["\u0275\u0275text"](1,"root"),I["\u0275\u0275elementEnd"]()}}function Q(t,e){1&t&&(I["\u0275\u0275elementStart"](0,"a"),I["\u0275\u0275text"](1,"root"),I["\u0275\u0275elementEnd"]())}function J(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"a",18),I["\u0275\u0275listener"]("click",(function(t){I["\u0275\u0275restoreView"](i);var e=I["\u0275\u0275nextContext"]().index;return I["\u0275\u0275nextContext"]().selectPath(e)})),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.path)}}function tt(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"span"),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()),2&t){var i=I["\u0275\u0275nextContext"]().$implicit;I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](i.path)}}function et(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"li",1),I["\u0275\u0275text"](1,"\n    "),I["\u0275\u0275template"](2,J,2,1,"a",2),I["\u0275\u0275text"](3,"\n    "),I["\u0275\u0275template"](4,tt,2,1,"span",3),I["\u0275\u0275text"](5,"\n  "),I["\u0275\u0275elementEnd"]()),2&t){var i=e.last;I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",!i),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",i)}}function it(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"ul",19),I["\u0275\u0275text"](1,"\n        "),I["\u0275\u0275elementStart"](2,"li",20),I["\u0275\u0275text"](3,"\n          "),I["\u0275\u0275elementStart"](4,"a",21),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().exportToExcel()})),I["\u0275\u0275text"](5,"Export to Excel"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](7,"\n        "),I["\u0275\u0275elementStart"](8,"li",20),I["\u0275\u0275text"](9,"\n          "),I["\u0275\u0275elementStart"](10,"a",21),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().exportToCSV()})),I["\u0275\u0275text"](11,"Export to CSV"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](12,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](13,"\n        "),I["\u0275\u0275elementStart"](14,"li",20),I["\u0275\u0275text"](15,"\n          "),I["\u0275\u0275elementStart"](16,"a",21),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().saveToDatabase()})),I["\u0275\u0275text"](17,"Save To Database"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](18,"\n        "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](19,"\n      "),I["\u0275\u0275elementEnd"]()}}function nt(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275text"](0,"\n        "),I["\u0275\u0275elementStart"](1,"wj-input-date",25),I["\u0275\u0275listener"]("valueChange",(function(t){return I["\u0275\u0275restoreView"](i),e.cell.value=t})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](2,"\n      ")}if(2&t){var n=e.cell,r=I["\u0275\u0275nextContext"](2).$implicit;I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("value",n.value)("isRequired",!1)("format",r.displayFormat)}}function rt(t,e){1&t&&I["\u0275\u0275template"](0,nt,3,3,"ng-template",24),2&t&&I["\u0275\u0275property"]("cellType","CellEdit")}function ot(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"a",28),I["\u0275\u0275listener"]("click",(function(t){I["\u0275\u0275restoreView"](i);var e=I["\u0275\u0275nextContext"]().item,n=I["\u0275\u0275nextContext"]().$implicit;return I["\u0275\u0275nextContext"]().onDataSelect(e,n)})),I["\u0275\u0275text"](1),I["\u0275\u0275elementEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"]().item,r=I["\u0275\u0275nextContext"]().$implicit,o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](o.formatToStr(n[r.bindingName]))}}function at(t,e){if(1&t&&(I["\u0275\u0275text"](0,"\n          "),I["\u0275\u0275elementStart"](1,"span",29),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"]()),2&t){var i=I["\u0275\u0275nextContext"]().item,n=I["\u0275\u0275nextContext"]().$implicit,r=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275textInterpolate"](r.formatValue(i,n))}}function st(t,e){if(1&t&&(I["\u0275\u0275text"](0,"\n        "),I["\u0275\u0275template"](1,ot,2,1,"a",26),I["\u0275\u0275text"](2,"\n        "),I["\u0275\u0275template"](3,at,3,1,"ng-template",null,27,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275text"](5,"\n      ")),2&t){var i=e.item,n=I["\u0275\u0275reference"](4),r=I["\u0275\u0275nextContext"]().$implicit,o=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("ngIf",o.isObject(i[r.bindingName]))("ngIfElse",n)}}function lt(t,e){if(1&t&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"\n    "),I["\u0275\u0275elementStart"](2,"wj-flex-grid-column",22),I["\u0275\u0275text"](3,"\n      "),I["\u0275\u0275template"](4,rt,1,1,void 0,3),I["\u0275\u0275text"](5,"\n      "),I["\u0275\u0275template"](6,st,6,2,"ng-template",23),I["\u0275\u0275text"](7,"\n\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](8,"\n  "),I["\u0275\u0275elementContainerEnd"]()),2&t){var i=e.$implicit,n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("header",i.headerText||n.getDefaultHeader(i))("dataType",i.dataType)("binding",i.bindingName)("width",i.width)("format",i.displayFormat),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",4===i.dataType)}}var ht=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.fileService=e,o.dialogService=i,o.authService=n,o.loginService=r,o.flex=v.b.hide,o.viewData={},o.isVertical=!0,o.objectPath=[],o.collectionView=new _.CollectionView,o}return Object(f.d)(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){var t=this;return this.componentDataModel!==this.data&&(this.data=this.componentDataModel,this.renderData(this.data),window.requestAnimationFrame((function(){t.grid.selectionMode=g.SelectionMode.CellRange,t.objectPath=[];var e=t.data?v.b.show:v.b.hide;t.flex!==e&&(t.flex=e)}))),this.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldsCount",{get:function(){return this.collectionView.items.length},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){return Object(f.b)(this,void 0,void 0,(function(){var e=this;return Object(f.e)(this,(function(i){switch(i.label){case 0:return void 0===this.properties.isReadOnly&&(this.uiModel.itemProperties.isReadOnly=!0),this.gridIdentifier=this.properties.host,this.gridIdentifier&&(this.localGridConfig=new U.a(this.gridIdentifier,this.uiModel.id||"object-explorer"),this.grid.addEventListener(this.grid.hostElement,"contextmenu",(function(t){var i=e.grid.hitTest(t);e.columnsToEdit=e.columnsList.filter((function(t,n){var r=e.grid.selection;return r.col2-r.col>0?e.grid.selection.col2>=n&&e.grid.selection.col<=n||i.col===n:e.grid.selection.col>=n&&e.grid.selection.col2<=n||i.col===n}))}))),this.grid.onCellEditEnded=function(t){var i=e.data;if(e.isVertical){e.objectPath.forEach((function(t){i=i[t.path]}));var n=e.collectionView.sourceCollection[t.row];0===t.col&&t.data!==n.fieldName&&delete i[t.data],i[n.fieldName]=void 0===n.row0?"":n.row0}else{var r=e.collectionView.sourceCollection;r.length&&r[0].valueTypeKey&&(r=r.map((function(t){return t.valueTypeKey}))),d.j.setValue(e.data,e.getJSONUtilsPath(),r)}e.changedDataModel.emit(e.data)},this.grid.onDeletingRow=function(t){var i=e.objectPath.reduce((function(t,e){return t[e.path]}),e.data);return e.isVertical?e.grid.selectedItems.forEach((function(t){delete i[t.fieldName]})):i.splice(t.row,1),e.changedDataModel.emit(e.data),!0},[4,t.prototype.ngOnInit.call(this)];case 1:return i.sent(),[2]}}))}))},e.prototype.saveToDatabase=function(){this.authService.user?this.dialogService.open(Y,{class:"modal-xl full-height"}).config=this.data:this.loginService.openDialog()},e.prototype.renderData=function(t){var e=this,i=t;t||(i=[]),Array.isArray(i)?(this.isVertical=!1,this.columnsList=this.getColumns(i),i=this.formatData(i)):(this.isVertical=!0,this.columnsList=this.getVerticalColumns(),i=this.formatToArray(i)),this.grid.selectionMode=g.SelectionMode.None,this.viewData=t,this.collectionView.sourceCollection=i,window.requestAnimationFrame((function(){e.grid.selectionMode=g.SelectionMode.CellRange}))},e.prototype.onDataSelect=function(t,e){var i=t[e.bindingName];i&&"object"==typeof i&&(this.isVertical||this.objectPath.push({path:this.collectionView._idx,dataItem:this.grid.selectedRows[0]}),this.objectPath.push({path:this.isVertical?t.fieldName:e.bindingName,dataItem:this.grid.selectedRows[0].dataItem}),this.renderData(i))},e.prototype.onResizedColumn=function(t){this.localGridConfig&&this.localGridConfig.saveColumn(this.grid.columns[t.col].binding,{width:this.grid.columns[t.col].renderWidth},this.getPathStr())},e.prototype.onCtxMenuClicked=function(t){var e=this;if(this.localGridConfig){var i=this.dialogService.open(q.a,{class:"modal-lg"});i.config=this.columnsToEdit,i.init.pipe(Object(m.a)((function(){return i.component.save}))).subscribe((function(t){t.forEach((function(t){e.localGridConfig.saveColumn(t.bindingName,t,e.getPathStr())})),e.renderData(e.viewData)}))}else alert("Add host item property to UIModel")},e.prototype.getDefaultHeader=function(t){return Object(b.i)(t.bindingName)},e.prototype.getColumns=function(t){var e=this;if(void 0===t&&(t=[]),t.length){var i=t.reduce((function(t,e){return Object.assign(t,"object"==typeof e?e:{valueTypeKey:e}),t}),{});return Object.keys(i).map((function(t){return"valueTypeKey"===t?{headerText:"Value",bindingName:"valueTypeKey"}:{headerText:e.getColumnHeader(t)||t,bindingName:t,width:e.getColumnWidth(t),dataType:e.getColumnType(t),displayFormat:e.getColumnDisplayFormat(t)}}))}},e.prototype.getVerticalColumns=function(){return[{headerText:this.getColumnHeader("fieldName"),bindingName:"fieldName",width:this.getColumnWidth("fieldName",220),dataType:this.getColumnType("fieldName"),displayFormat:this.getColumnDisplayFormat("fieldName")},{headerText:"Field Value",bindingName:"row0",width:this.getColumnWidth("row0","*"),dataType:this.getColumnType("row0")||_.DataType.String,displayFormat:this.getColumnDisplayFormat("row0")}]},e.prototype.selectPath=function(t){this.objectPath=this.objectPath.slice(0,t+1);var e=this.objectPath.reduce((function(t,e){return t[e.path]}),this.data);if(!e){var i=this.objectPath.slice(-1);e=i.length?i[0].dataItem[i[0].path]:null}this.renderData(e)},e.prototype.isObject=function(t){return t&&"object"==typeof t&&Object.keys(t).length},e.prototype.formatToArray=function(t){return Object(b.s)([Object.entries(t).reduce((function(t,e){return t[e[0]]=e[1],t}),{})])},e.prototype.formatData=function(t){return void 0===t&&(t=[]),t.length?t.map((function(t){return"object"!=typeof t&&(t={valueTypeKey:t}),t})):t},e.prototype.formatToStr=function(t){var e=JSON.stringify(t);return e.length>250?e.slice(0,250)+"...":e},e.prototype.formatValue=function(t,e){var i=e.displayFormat,n=t[e.bindingName];switch(e.dataType){case _.DataType.Date:return null===n?"":i?Object(_.format)("{val:"+i+"}",{val:new Date(n)}):new Date(n).toDateString();case _.DataType.Number:return isNaN(n)||""===n?n:i?Object(_.format)("{val:"+i+"}",{val:Number(n)}):Number(n);case _.DataType.Boolean:return Boolean(n)}if("object"==typeof n&&!(n instanceof Date)){if(Array.isArray(n)&&!n.length)return"[]";if(n&&Object.keys(n).length)return this.formatToStr(n);if(n)return"{}";if(null===n)return""}return n},e.prototype.exportToCSV=function(){this.fileService.exportToFile(this.collectionView.sourceCollection,{fileType:j.e.CSV,fileName:this.objectPath.map((function(t){return t.path})).join("-")||"object-explorer"})},e.prototype.exportToExcel=function(){y.FlexGridXlsxConverter.saveAsync(this.grid,{includeColumnHeaders:!0},"object-explorer.xlsx")},e.prototype.getColumnWidth=function(t,e){return void 0===e&&(e=150),this.localGridConfig&&this.localGridConfig.getColumn(t,this.getPathStr()).width||e},e.prototype.getColumnHeader=function(t){return this.localGridConfig&&this.localGridConfig.getColumn(t,this.getPathStr()).header},e.prototype.getColumnType=function(t){return this.localGridConfig&&this.localGridConfig.getColumn(t,this.getPathStr()).dataType},e.prototype.getColumnDisplayFormat=function(t){return this.localGridConfig&&this.localGridConfig.getColumn(t,this.getPathStr()).displayFormat},e.prototype.getPathStr=function(){return this.objectPath.map((function(t){return t.path})).join("-")||"root"},e.prototype.getJSONUtilsPath=function(){return 0===this.objectPath.length?"$":"$."+this.objectPath.map((function(t){return"string"==typeof t.path?t.path.replace(/\//g,":"):t.path})).join("/")},e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](O.d),I["\u0275\u0275directiveInject"](O.c),I["\u0275\u0275directiveInject"]($.a),I["\u0275\u0275directiveInject"]($.b))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["dc-object-explorer"]],viewQuery:function(t,e){var i;1&t&&I["\u0275\u0275staticViewQuery"](K,!0),2&t&&I["\u0275\u0275queryRefresh"](i=I["\u0275\u0275loadQuery"]())&&(e.grid=i.first)},hostVars:2,hostBindings:function(t,e){2&t&&I["\u0275\u0275classMap"](e.flex)},features:[I["\u0275\u0275InheritDefinitionFeature"]],decls:47,vars:14,consts:[[1,"breadcrumb","px-0","py-2","mb-3"],[1,"breadcrumb-item"],[3,"click",4,"ngIf"],[4,"ngIf"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"ml-auto"],[1,"badge","badge-info","align-text-bottom"],["dropdown","","placement","top left",1,"position-relative","px-2"],["dropdownToggle","","type","button",1,"btn","py-0"],[1,"fa","fa-ellipsis-v"],["class","dropdown-menu export-menu","role","menu",4,"dropdownMenu"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],[3,"value"],[1,"h-100",3,"itemsSource","wjContextMenu","isReadOnly","headersVisibility","selectionMode","allowDelete","allowAddNew","resizedColumn"],["grid",""],[4,"ngFor","ngForOf"],["filter",""],[3,"click"],["role","menu",1,"dropdown-menu","export-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[3,"header","dataType","binding","width","format"],["wjFlexGridCellTemplate","","cellType","Cell"],["wjFlexGridCellTemplate","",3,"cellType"],[3,"value","isRequired","format","valueChange"],["class","object-type",3,"click",4,"ngIf","ngIfElse"],["valueType",""],[1,"object-type",3,"click"],[1,"value-type"]],template:function(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"ol",0),I["\u0275\u0275text"](1,"\n  "),I["\u0275\u0275elementStart"](2,"li",1),I["\u0275\u0275text"](3,"\n    "),I["\u0275\u0275template"](4,Z,2,0,"a",2),I["\u0275\u0275text"](5,"\n    "),I["\u0275\u0275template"](6,Q,2,0,"a",3),I["\u0275\u0275text"](7,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](8,"\n  "),I["\u0275\u0275template"](9,et,6,2,"li",4),I["\u0275\u0275text"](10,"\n  "),I["\u0275\u0275elementStart"](11,"li",5),I["\u0275\u0275text"](12,"\n    "),I["\u0275\u0275elementStart"](13,"span",6),I["\u0275\u0275text"](14),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](15,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](16,"\n  "),I["\u0275\u0275elementStart"](17,"li"),I["\u0275\u0275text"](18,"\n    "),I["\u0275\u0275elementStart"](19,"span",7),I["\u0275\u0275text"](20,"\n      "),I["\u0275\u0275elementStart"](21,"button",8),I["\u0275\u0275text"](22,"\n        "),I["\u0275\u0275element"](23,"i",9),I["\u0275\u0275text"](24,"\n      "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](25,"\n      "),I["\u0275\u0275template"](26,it,20,0,"ul",10),I["\u0275\u0275text"](27,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](28,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](29,"\n"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](30,"\n"),I["\u0275\u0275elementStart"](31,"wj-menu",11,12),I["\u0275\u0275listener"]("itemClicked",(function(t){I["\u0275\u0275restoreView"](i);var n=I["\u0275\u0275reference"](32);return e.onCtxMenuClicked(n)})),I["\u0275\u0275text"](33,"\n    "),I["\u0275\u0275elementStart"](34,"wj-menu-item",13),I["\u0275\u0275text"](35,"Edit Column"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](36,"\n"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](37,"\n"),I["\u0275\u0275elementStart"](38,"wj-flex-grid",14,15),I["\u0275\u0275listener"]("resizedColumn",(function(t){return e.onResizedColumn(t)})),I["\u0275\u0275text"](40,"\n  "),I["\u0275\u0275template"](41,lt,9,6,"ng-container",16),I["\u0275\u0275text"](42,"\n  "),I["\u0275\u0275element"](43,"wj-flex-grid-filter",null,17),I["\u0275\u0275text"](45,"\n"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](46,"\n")}if(2&t){var n=I["\u0275\u0275reference"](32);I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",e.objectPath.length),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",!e.objectPath.length),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngForOf",e.objectPath),I["\u0275\u0275advance"](5),I["\u0275\u0275textInterpolate1"]("",e.fieldsCount," rows"),I["\u0275\u0275advance"](17),I["\u0275\u0275property"]("isButton",!0),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("value","edit"),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("itemsSource",e.itemsSource)("wjContextMenu",n)("isReadOnly",e.properties.isReadOnly)("headersVisibility","All")("selectionMode",e.properties.selectionMode||0)("allowDelete",e.properties.allowDelete||!1)("allowAddNew",e.properties.allowAddNew||!1),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngForOf",e.columnsList)}},directives:[n.NgIf,n.NgForOf,c.a,c.d,c.b,a.WjMenu,a.WjMenuItem,o.WjFlexGrid,a.WjContextMenu,s.WjFlexGridFilter,o.WjFlexGridColumn,o.WjFlexGridCellTemplate,a.WjInputDate],styles:["a.object-type[_ngcontent-%COMP%], a.object-type[_ngcontent-%COMP%]:hover, ol[_ngcontent-%COMP%]   li.breadcrumb-item[_ngcontent-%COMP%]:not(:last-child)   a[_ngcontent-%COMP%]{color:#20a8d8;cursor:pointer}.value-type[_ngcontent-%COMP%], a.object-type[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}.export-menu[_ngcontent-%COMP%]{left:auto!important;right:0!important}"]}),e}(d.b),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(f.d)(e,t),Object(f.c)([Object(d.t)({description:"Determines whether the user can modify cell. Default true",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_grid.flexgrid.html#isreadonly"}),Object(f.f)("design:type",Boolean)],e.prototype,"isReadOnly",void 0),Object(f.c)([Object(d.t)({description:"Defines identifier for grid",example:"grid-id-1"}),Object(f.f)("design:type",String)],e.prototype,"host",void 0),Object(f.c)([Object(d.t)({description:"Specifies constants that define the selection behavior.",example:"5",link:"https://www.grapecity.com/wijmo/api/enums/wijmo_grid.selectionmode.html"}),Object(f.f)("design:type",Number)],e.prototype,"selectionMode",void 0),Object(f.c)([Object(d.t)({description:"Specifies if row can be deleted. Default false",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_grid.flexgrid.html#allowdelete"}),Object(f.f)("design:type",Boolean)],e.prototype,"allowDelete",void 0),Object(f.c)([Object(d.t)({description:"Specifies if new row can be added. Default false",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_grid.flexgrid.html#allowaddnew"}),Object(f.f)("design:type",Boolean)],e.prototype,"allowAddNew",void 0),e}(d.g),ut={name:"grid-object-explorer",packageName:"rest-client",label:"Object Explorer",category:"Data",description:"Data Grid Object Explorer component",itemProperties:ct,component:ht,example:{title:"Grid Object Explorer example",uiModel:{type:"rest-client:grid-object-explorer",containerProperties:{},itemProperties:{dataModelPath:"$.tableData"}},dataModel:{tableData:[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"}]}}},dt=i("DOl/"),pt=i("a5yf"),ft=i("s90X"),mt=i("qaSM"),gt=i("oksU");function _t(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"button",28),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"](2).saveData()})),I["\u0275\u0275text"](1,"Save"),I["\u0275\u0275elementEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275property"]("disabled",!(n.changedData&&n.changedData.length))}}function yt(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"ul",29),I["\u0275\u0275text"](1,"\n      "),I["\u0275\u0275elementStart"](2,"li",30),I["\u0275\u0275text"](3,"\n        "),I["\u0275\u0275elementStart"](4,"a",31),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"](2).exportToExcel()})),I["\u0275\u0275text"](5,"Export to Excel"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6,"\n      "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](7,"\n      "),I["\u0275\u0275elementStart"](8,"li",30),I["\u0275\u0275text"](9,"\n        "),I["\u0275\u0275elementStart"](10,"a",31),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"](2).exportToCSV()})),I["\u0275\u0275text"](11,"Export to CSV"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](12,"\n      "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](13,"\n    "),I["\u0275\u0275elementEnd"]()}}var bt=function(t){return{"ml-auto":t}};function vt(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementStart"](0,"div",21),I["\u0275\u0275text"](1,"\n  "),I["\u0275\u0275elementStart"](2,"app-filters",22),I["\u0275\u0275listener"]("changed",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().onFiltersChange(t)})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](3,"\n  "),I["\u0275\u0275template"](4,_t,2,1,"button",23),I["\u0275\u0275text"](5,"\n  "),I["\u0275\u0275elementStart"](6,"span",24),I["\u0275\u0275text"](7,"\n    "),I["\u0275\u0275elementStart"](8,"button",25),I["\u0275\u0275text"](9,"\n      "),I["\u0275\u0275element"](10,"i",26),I["\u0275\u0275text"](11,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](12,"\n    "),I["\u0275\u0275template"](13,yt,14,0,"ul",27),I["\u0275\u0275text"](14,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](15,"\n"),I["\u0275\u0275elementEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("fields",n.columnsList)("defaultFilters",n.defaultFilters)("currentFilters",n.filters)("dataObject",n.dataObject)("connection",n.properties.source.connection),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",!n.properties.isReadOnly),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngClass",I["\u0275\u0275pureFunction1"](7,bt,n.properties.isReadOnly))}}function xt(t,e){1&t&&(I["\u0275\u0275elementStart"](0,"div",32),I["\u0275\u0275text"](1,"\n    "),I["\u0275\u0275elementStart"](2,"div",33),I["\u0275\u0275text"](3,"\n      "),I["\u0275\u0275elementStart"](4,"span",34),I["\u0275\u0275text"](5,"Loading..."),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6,"\n    "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](7,"\n  "),I["\u0275\u0275elementEnd"]())}function wt(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275text"](0,"\n          "),I["\u0275\u0275elementStart"](1,"div",37),I["\u0275\u0275text"](2),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](3,"\n          "),I["\u0275\u0275elementStart"](4,"app-filter",38),I["\u0275\u0275listener"]("apply",(function(t){I["\u0275\u0275restoreView"](i);var e=I["\u0275\u0275nextContext"]().$implicit;return I["\u0275\u0275nextContext"]().onApply(t,e)})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](5,"\n        ")}if(2&t){var n=I["\u0275\u0275nextContext"]().$implicit,r=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("title",n.headerText),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate"](n.headerText),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("field",n)("icon",!0)("dataObject",r.dataObject)("connection",r.properties.source.connection)("currentFilters",r.filters)("defaultFilters",r.defaultFilters)}}function St(t,e){if(1&t&&(I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"\n      "),I["\u0275\u0275elementStart"](2,"wj-flex-grid-column",35),I["\u0275\u0275text"](3,"\n        "),I["\u0275\u0275template"](4,wt,6,8,"ng-template",36),I["\u0275\u0275text"](5,"\n      "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](6,"\n    "),I["\u0275\u0275elementContainerEnd"]()),2&t){var i=e.$implicit;I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("header",i.headerText)("binding",i.bindingName)("dataType",i.dataType)("width",i.width)("format",i.displayFormat),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("cellType","ColumnHeader")}}var Ct=function(t){return["../",t]};function Ot(t,e){if(1&t&&(I["\u0275\u0275text"](0,"\n        "),I["\u0275\u0275elementStart"](1,"a",41),I["\u0275\u0275text"](2,"Details"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](3,"\n      ")),2&t){var i=e.item,n=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](1),I["\u0275\u0275property"]("routerLink",I["\u0275\u0275pureFunction1"](2,Ct,n.properties.details.pageName))("queryParams",n.getQueryParams(i))}}function jt(t,e){1&t&&(I["\u0275\u0275elementStart"](0,"wj-flex-grid-column",39),I["\u0275\u0275text"](1,"\n      "),I["\u0275\u0275template"](2,Ot,4,4,"ng-template",40),I["\u0275\u0275text"](3,"\n    "),I["\u0275\u0275elementEnd"]())}function Tt(t,e){if(1&t&&I["\u0275\u0275element"](0,"i",42),2&t){I["\u0275\u0275nextContext"]();var i=I["\u0275\u0275reference"](46);I["\u0275\u0275property"]("popover",i)}}function At(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275elementContainerStart"](0),I["\u0275\u0275text"](1,"\n      |"),I["\u0275\u0275elementStart"](2,"i",43),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().onNextPage(-1)})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](3),I["\u0275\u0275elementStart"](4,"i",44),I["\u0275\u0275listener"]("click",(function(t){return I["\u0275\u0275restoreView"](i),I["\u0275\u0275nextContext"]().onNextPage(1)})),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](5,"\n    "),I["\u0275\u0275elementContainerEnd"]()}if(2&t){var n=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate1"]("\n      Page: ",n.currentPage,"")}}function Mt(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"li"),I["\u0275\u0275text"](1,"\n      "),I["\u0275\u0275elementStart"](2,"b"),I["\u0275\u0275text"](3),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](4),I["\u0275\u0275elementEnd"]()),2&t){var i=e.$implicit;I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate"](i.fieldName),I["\u0275\u0275advance"](1),I["\u0275\u0275textInterpolate1"](": ",i.value,"\n    ")}}function Nt(t,e){if(1&t&&(I["\u0275\u0275elementStart"](0,"ul",46),I["\u0275\u0275text"](1,"\n    "),I["\u0275\u0275template"](2,Mt,5,2,"li",14),I["\u0275\u0275text"](3,"\n  "),I["\u0275\u0275elementEnd"]()),2&t){var i=I["\u0275\u0275nextContext"](2);I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngForOf",i.filtersList)}}function Pt(t,e){if(1&t&&(I["\u0275\u0275text"](0,"\n  "),I["\u0275\u0275elementStart"](1,"h6"),I["\u0275\u0275text"](2,"Apply Filter"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](3,"\n  "),I["\u0275\u0275template"](4,Nt,4,1,"ul",45),I["\u0275\u0275text"](5,"\n")),2&t){var i=I["\u0275\u0275nextContext"]();I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",i.filters)}}var Et=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.fileService=e,r.dialogService=i,r.sqlService=n,r.data=[],r.loading=!0,r.filters={},r}return Object(f.d)(e,t),Object.defineProperty(e.prototype,"properties",{get:function(){return this.uiModel.itemProperties},enumerable:!0,configurable:!0}),e.prototype.saveData=function(){return Object(f.b)(this,void 0,void 0,(function(){return Object(f.e)(this,(function(t){switch(t.label){case 0:return[4,this.sqlService.saveSqlObjectData(this.properties.source.connection,this.dataObject,{tableData:Object(b.r)(this.changedData)}).toPromise()];case 1:return t.sent(),this.loadData(),[2]}}))}))},e.prototype.ngOnInit=function(){return Object(f.b)(this,void 0,void 0,(function(){var t,e,i,n;return Object(f.e)(this,(function(r){switch(r.label){case 0:return this.properties.source?(e=(t=this.properties.source).connection,this.dataObject={objectOwner:i=t.owner,objectName:n=t.name},this.localGridConfig=new U.a(e+"-"+i+"-"+n,this.uiModel.id||"data-grid"),this.flex=v.b.show,[4,this.loadData()]):[2];case 1:return r.sent(),[2]}}))}))},e.prototype.getColumns=function(e){var i=this;return this.properties.columns&&Array.isArray(this.properties.columns)?this.properties.columns.map((function(t){return t.headerText||(t.headerText=i.getColumnHeader(t.bindingName)),t.dataType=i.getColumnType(t.bindingName)||_.DataType[t.dataType],t.width=i.getColumnWidth(t.bindingName,t.width||150),t.displayFormat=[_.DataType.Date,_.DataType.Number].includes(t.dataType)?i.getColumnDisplayFormat(t.bindingName)||t.displayFormat:null,t})):t.prototype.getColumns.call(this,e)},e.prototype.getQueryParams=function(t){var e;return(e={})[this.properties.details.idField]=t[this.properties.details.idField],e},e.prototype.loadData=function(){var t=this;this.loading=!0;var e=this.properties.source,i=e.connection,n=e.owner,r=e.name,o=this.properties.source.query,a={},s=Object(b.n)(this.filters)||[];o?(o.filters&&(s=Object(f.i)(s,o.filters)),a=Object(f.a)(Object(f.a)({},o),{filters:s})):a={filters:s},this.sqlService.selectSqlObjectData(i,n,r,a).subscribe((function(e){t.changedData=null,Array.isArray(t.properties.columns)&&(e.dataTypes=e.fieldNames.map((function(e){var i=t.properties.columns.find((function(t){return t.bindingName===e}));if(i)return j.o[i.dataType]||null}))),t.renderData(Object(b.q)(e)),t.loading=!1}))},Object.defineProperty(e.prototype,"defaultFilters",{get:function(){var t=this.properties.source.query;return t&&t.filters},enumerable:!0,configurable:!0}),e.prototype.onCtxMenuClicked=function(t){switch(t.value){case"edit-column":this.editColumn();break;case"fill-all":this.fillRows("all");break;case"fill-empty":this.fillRows("empty")}},e.prototype.onFiltersChange=function(t){this.filters=Object(f.a)({},t),this.loadData()},e.prototype.onApply=function(t,e){var i;this.filters=Object(f.a)(Object(f.a)({},this.filters),((i={})[e.bindingName]=t,i)),this.loadData()},Object.defineProperty(e.prototype,"filtersList",{get:function(){var t=this;return Object.entries(this.filters).filter((function(t){return Boolean(t[1])})).map((function(e){var i=e[0];return{fieldName:i,value:e[1].map((function(e){if(t.localGridConfig.getColumn(i).dataType===_.DataType.Date){var n=t.localGridConfig.getColumn(i).displayFormat;return Object(b.j)(e,n)}return e instanceof Date?Object(b.g)(e):null===e?"[NULL]":e})).join(", ")}}))},enumerable:!0,configurable:!0}),e.prototype.editColumn=function(){var t=this,e=this.dialogService.open(q.a,{class:"modal-lg"});e.config=[this.columnToEdit],e.init.pipe(Object(m.a)((function(){return e.component.save}))).subscribe((function(e){e.forEach((function(e){t.localGridConfig.saveColumn(e.bindingName,e)}));var i=e[0],n=t.columnsList.findIndex((function(t){return t.bindingName===i.bindingName}));t.columnsList.splice(n,1,i)}))},e.prototype.fillRows=function(t){var e=this,i=!1;this.grid.collectionView.sourceCollection.forEach((function(n){var r=e.columnToEdit.bindingName,o=n[r];e.updateCondition(o,t)&&(n[r]=e.contextMenuValue,e.gridContext.setEditValue(n,r,o,e.contextMenuValue),i=!0)})),i&&(this.grid.refresh(!0),this.changeHandler())},e.prototype.updateCondition=function(t,e){switch(e){case"all":return t!==this.contextMenuValue;case"empty":return[null,void 0,""].includes(t);default:return!0}},e.prototype.initializedGrid=function(t){var e=this;this.gridContext=Object(pt.a)(t),t.cellEditEnded.addHandler((function(){return e.changeHandler()})),t.deletedRow.addHandler((function(){return e.changeHandler()})),t.addEventListener(t.hostElement,"contextmenu",(function(i){var n=t.hitTest(i);e.columnToEdit=e.columnsList.find((function(t,e){return n.col===e})),e.contextMenuValue=e.grid.collectionView.items[n.row][e.columnToEdit.bindingName]}));var i=t.itemFormatter;t.itemFormatter=function(e,n,r,o){i(e,n,r,o);var a=e.columns[r].binding;if(e.cellType===g.CellType.ColumnHeader&&o.firstChild instanceof HTMLElement){var s=o.firstChild.querySelector("#sort-icon");s&&o.firstChild.removeChild(s);var l=t.collectionView.sortDescriptions[0];if(l&&l.property===a){var h=document.createElement("SPAN");h.id="sort-icon",h.className=l.ascending?"wj-glyph-up":"wj-glyph-down",o.firstChild.appendChild(h)}}},t.sortingColumn.addHandler((function(t,e){e.data.target.classList.contains("fa-filter")&&(e.cancel=!0)})),t.resizingColumn.addHandler((function(i,n){e.localGridConfig&&e.localGridConfig.saveColumn(t.columns[n.col].binding,{width:t.columns[n.col].renderWidth})}))},e.prototype.changeHandler=function(){var t=this.gridContext.state,e=t.added,i=t.edited,n=[];i&&(n=Object(f.i)(n,i)),e&&(n=Object(f.i)(n,e)),this.changedData=n},e.\u0275fac=function(t){return new(t||e)(I["\u0275\u0275directiveInject"](O.d),I["\u0275\u0275directiveInject"](O.c),I["\u0275\u0275directiveInject"](O.h))},e.\u0275cmp=I["\u0275\u0275defineComponent"]({type:e,selectors:[["dc-data-grid"]],inputs:{uiModel:"uiModel"},features:[I["\u0275\u0275InheritDefinitionFeature"]],decls:48,vars:15,consts:[["class","row mx-0",4,"ngIf"],[1,"position-relative","h-100"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],["value","edit-column"],[1,"px-2"],[1,"fa","fa-columns","mr-1","my-2"],["value","fill-all"],[1,"fa","fa-file-o","mr-1","my-2"],["value","fill-empty"],[1,"fa","fa-files-o","mr-1","my-2"],[1,"data-grid","h-100",3,"wjContextMenu","itemsSource","allowAddNew","allowDelete","isReadOnly","itemsSourceChange","initialized"],["grid",""],[4,"ngFor","ngForOf"],["header","Actions",4,"ngIf"],[1,"row","m-0","align-items-center"],["class","fa fa-filter cursor-pointer px-1","triggers","mouseenter:mouseleave",3,"popover",4,"ngIf"],[1,"ml-auto","mr-1"],[4,"ngIf"],["popTemplate",""],[1,"row","mx-0"],[3,"fields","defaultFilters","currentFilters","dataObject","connection","changed"],["type","button","class","btn btn-primary ml-auto mr-0 align-self-baseline mb-2",3,"disabled","click",4,"ngIf"],["dropdown","","placement","top left",1,"d-flex","position-relative","px-2","mb-2",3,"ngClass"],["dropdownToggle","","type","button",1,"btn","py-0"],[1,"fa","fa-ellipsis-v"],["class","dropdown-menu left-menu","role","menu",4,"dropdownMenu"],["type","button",1,"btn","btn-primary","ml-auto","mr-0","align-self-baseline","mb-2",3,"disabled","click"],["role","menu",1,"dropdown-menu","left-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"header","binding","dataType","width","format"],["wjFlexGridCellTemplate","",3,"cellType"],[1,"text-normal",3,"title"],[3,"field","icon","dataObject","connection","currentFilters","defaultFilters","apply"],["header","Actions"],["wjFlexGridCellTemplate","","cellType","Cell"],[3,"routerLink","queryParams"],["triggers","mouseenter:mouseleave",1,"fa","fa-filter","cursor-pointer","px-1",3,"popover"],["aria-hidden","true",1,"fa","fa-angle-double-left","ml-1","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-right","cursor-pointer",3,"click"],["class","applied-filters-list px-0",4,"ngIf"],[1,"applied-filters-list","px-0"]],template:function(t,e){if(1&t){var i=I["\u0275\u0275getCurrentView"]();I["\u0275\u0275template"](0,vt,16,9,"div",0),I["\u0275\u0275text"](1,"\n"),I["\u0275\u0275elementStart"](2,"div",1),I["\u0275\u0275text"](3,"\n  "),I["\u0275\u0275template"](4,xt,8,0,"div",2),I["\u0275\u0275text"](5,"\n  "),I["\u0275\u0275elementStart"](6,"wj-menu",3,4),I["\u0275\u0275listener"]("itemClicked",(function(t){I["\u0275\u0275restoreView"](i);var n=I["\u0275\u0275reference"](7);return e.onCtxMenuClicked(n)})),I["\u0275\u0275text"](8,"\n    "),I["\u0275\u0275elementStart"](9,"wj-menu-item",5),I["\u0275\u0275elementStart"](10,"span",6),I["\u0275\u0275element"](11,"i",7),I["\u0275\u0275text"](12,"Format Column"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](13,"\n    "),I["\u0275\u0275elementStart"](14,"wj-menu-item",8),I["\u0275\u0275elementStart"](15,"span",6),I["\u0275\u0275element"](16,"i",9),I["\u0275\u0275text"](17,"Fill all rows"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](18,"\n    "),I["\u0275\u0275elementStart"](19,"wj-menu-item",10),I["\u0275\u0275elementStart"](20,"span",6),I["\u0275\u0275element"](21,"i",11),I["\u0275\u0275text"](22,"Fill empty rows"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](23,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](24,"\n  "),I["\u0275\u0275elementStart"](25,"wj-flex-grid",12,13),I["\u0275\u0275listener"]("itemsSourceChange",(function(t){return e.collectionView=t}))("initialized",(function(t){I["\u0275\u0275restoreView"](i);var n=I["\u0275\u0275reference"](26);return e.initializedGrid(n)})),I["\u0275\u0275text"](27,"\n    "),I["\u0275\u0275template"](28,St,7,6,"ng-container",14),I["\u0275\u0275text"](29,"\n    "),I["\u0275\u0275template"](30,jt,4,0,"wj-flex-grid-column",15),I["\u0275\u0275text"](31,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](32,"\n  "),I["\u0275\u0275elementStart"](33,"div",16),I["\u0275\u0275text"](34,"\n    "),I["\u0275\u0275template"](35,Tt,1,1,"i",17),I["\u0275\u0275text"](36,"\n    "),I["\u0275\u0275elementStart"](37,"span",18),I["\u0275\u0275text"](38),I["\u0275\u0275pipe"](39,"number"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](40,"\n    "),I["\u0275\u0275template"](41,At,6,1,"ng-container",19),I["\u0275\u0275text"](42,"\n  "),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](43,"\n"),I["\u0275\u0275elementEnd"](),I["\u0275\u0275text"](44,"\n\n"),I["\u0275\u0275template"](45,Pt,6,1,"ng-template",null,20,I["\u0275\u0275templateRefExtractor"]),I["\u0275\u0275text"](47,"\n")}if(2&t){var n=I["\u0275\u0275reference"](7);I["\u0275\u0275property"]("ngIf",e.properties.source),I["\u0275\u0275advance"](4),I["\u0275\u0275property"]("ngIf",e.loading),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("isButton",!0),I["\u0275\u0275advance"](19),I["\u0275\u0275property"]("wjContextMenu",n)("itemsSource",e.collectionView)("allowAddNew",!!e.properties.allowAddNew)("allowDelete",!!e.properties.allowDelete)("isReadOnly",!!e.properties.isReadOnly),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngForOf",e.columnsList),I["\u0275\u0275advance"](2),I["\u0275\u0275property"]("ngIf",e.properties.details),I["\u0275\u0275advance"](5),I["\u0275\u0275property"]("ngIf",e.filters),I["\u0275\u0275advance"](3),I["\u0275\u0275textInterpolate1"]("Rows: ",I["\u0275\u0275pipeBind1"](39,13,e.collectionView.items.length),""),I["\u0275\u0275advance"](3),I["\u0275\u0275property"]("ngIf",e.limitRows)}},directives:[n.NgIf,a.WjMenu,a.WjMenuItem,o.WjFlexGrid,a.WjContextMenu,n.NgForOf,ft.a,c.a,n.NgClass,mt.a,c.d,c.b,o.WjFlexGridColumn,o.WjFlexGridCellTemplate,gt.a,k.h,u.a],pipes:[n.DecimalPipe],styles:["[_nghost-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.data-grid[_ngcontent-%COMP%]{height:calc(100% - 25px);width:auto;margin:auto}.data-grid[_ngcontent-%COMP%]   app-filter[_ngcontent-%COMP%]{-webkit-box-ordinal-group:2;order:1}.data-grid[_ngcontent-%COMP%]     .wj-cell.wj-header>div{display:-webkit-box;display:flex;height:100%;-webkit-box-align:center;align-items:center;max-height:50px}.applied-filters-list[_ngcontent-%COMP%]{list-style-type:none}.text-normal[_ngcontent-%COMP%]{white-space:normal;word-break:break-word;width:100%;padding-right:5px;max-height:50px;text-overflow:ellipsis;overflow:hidden;text-align:center;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}"]}),e}(ht),It=[p.c,ut,dt.b,{name:"data-grid",packageName:"wijmo",label:"Data grid",category:"Data table",description:"Data Grid component",itemProperties:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(f.d)(e,t),Object(f.c)([Object(d.t)({description:"Source",example:'{connection: "conectionName", owner: "OwnerName", name: "TableName"}'}),Object(f.f)("design:type",Object)],e.prototype,"source",void 0),Object(f.c)([Object(d.t)({description:"Specifies list of columns to display.",example:"[{\n      headerText: 'Header title',\n      bindingName: 'propName',\n      dataType: 'Number'\n    }]"}),Object(f.f)("design:type",Array)],e.prototype,"columns",void 0),e}(ct),component:Et,example:{title:"Grid example",uiModel:{type:"wijmo:grid",containerProperties:{width:"100%"},itemProperties:{source:{connection:"sql-query",owner:"test1",name:"table1"}}},dataModel:null}}];i.d(e,"a",(function(){return kt}));var kt=function(){function t(){It.forEach((function(t){return d.f.registerComponent(t)}))}return t.\u0275mod=I["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=I["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[n.CommonModule,o.WjGridModule,a.WjInputModule,s.WjGridFilterModule,l.WjChartModule,h.WjChartAnimationModule,k.i,r.FormsModule,b.e,c.c.forRoot(),u.b.forRoot()]]}),t}()},RL4Z:function(t,e,i){"use strict";var n,r=i("TYT/"),o=(i("Valr"),this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})),a=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,i,a):r(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},s=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};Object.defineProperty(e,"__esModule",{value:!0});var l=i("TYT/"),h=i("Valr"),c=i("Efb2"),u=i("DkY2"),d={selector:"wj-flex-chart-animation",template:"",inputs:["wjProperty","animationMode","easing","duration","axisAnimation"],outputs:["initialized"],providers:[]};e.wjFlexChartAnimationMeta=d;var p=function(t){function e(e,i,n){var r=t.call(this,n)||this;return r.isInitialized=!1,r._wjBehaviour=c.WjDirectiveBehavior.attach(r,e,i,n),r.created(),r}var i;return o(e,t),i=e,e.prototype.created=function(){},e.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},e.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},e.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},e.meta={outputs:d.outputs},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(l.ElementRef),r.\u0275\u0275directiveInject(l.Injector),r.\u0275\u0275directiveInject("WjComponent",12))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["wj-flex-chart-animation"]],inputs:{wjProperty:"wjProperty",animationMode:"animationMode",easing:"easing",duration:"duration",axisAnimation:"axisAnimation"},outputs:{initialized:"initialized"},features:[r.\u0275\u0275ProvidersFeature([{provide:"WjComponent",useExisting:l.forwardRef((function(){return i}))}].concat(d.providers))],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e=i=a([,s(0,l.Inject(l.ElementRef)),s(1,l.Inject(l.Injector)),s(2,l.Inject("WjComponent")),s(2,l.SkipSelf()),s(2,l.Optional())],e)}(u.ChartAnimation);e.WjFlexChartAnimation=p;var f=function(){function t(){}return t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({factory:function(e){return new(e||t)},imports:[[h.CommonModule]]}),t}();e.WjChartAnimationModule=f},j13F:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("wd/R"),r=i("TwVa"),o=i("iFvM"),a=function(){function t(){}return t.prototype.getValues=function(t,e,i){return void 0===i&&(i="csv"),"json"===i?this.getValuesFromJson(t,e):this.getValuesFromCsv(t,e)},t.prototype.getTypes=function(t){for(var e=this,i=Object.keys(t[0]).reduce((function(t,e,i){return t["col"+i]={fieldName:e,index:i,type:null,size:null,uniqueValues:new Set},t}),{}),n=1;n<t.length;n++)Object.values(t[n]).forEach((function(t,n){i["col"+n]=e.getType(i["col"+n],t)}));var r=!1;return Object.values(i).forEach((function(t){t.uniqueValues=t.uniqueValues&&!r,t.uniqueValues&&(r=!0)})),i},t.prototype.getType=function(t,e){if(t.uniqueValues&&t.uniqueValues.has(e)?t.uniqueValues=!1:t.uniqueValues&&t.uniqueValues.add(e),!e||!String(e).length)return t;if(e instanceof Date)return t.type=r.l.DATE,t;switch(typeof e){case"number":return t.type=this.getSqlNumberType(e,t.type),t;case"string":if((null===t.type||t.type===r.l.DATE)&&Object(o.x)(e))return t.type=r.l.DATE,t;if([null,r.l.FLOAT,r.l.INT,r.l.BIGINT].includes(t.type)){var i=Object(o.y)(e);null!==i&&(t.type=this.getSqlNumberType(i,t.type))}t.type=r.l.NVARCHAR;var n=100*Math.ceil(e.length/100)||100;return(null===t.size||t.size<n)&&(t.size=n),t}return t},t.prototype.getSqlNumberType=function(t,e){return null!==e&&e!==r.l.INT&&e!==r.l.BIGINT&&e!==r.l.FLOAT?e:e===r.l.FLOAT?e:e===r.l.BIGINT&&Number.isInteger(t)?r.l.BIGINT:e===r.l.INT&&Number.isInteger(t)?this.intOrBigInt(t):null===e&&Number.isInteger(t)?this.intOrBigInt(t):r.l.FLOAT},t.prototype.intOrBigInt=function(t){return t>2147483647?r.l.BIGINT:r.l.INT},t.prototype.getValuesFromCsv=function(t,e){var i=this,n=t[0].reduce((function(t,e,i){return t[Object(o.i)(e)]=i,t}),{});return t.map((function(t,r){return 0===r?t:e.map((function(r,a){var s=null;return r.sourceField&&"number"==typeof n[r.sourceField]&&(s=t[n[r.sourceField]],s=Object(o.h)(s,r.dataType)),i.processValue(s,e[a],a)}))})).slice(1)},t.prototype.getValuesFromJson=function(t,e){for(var i=this,n=[],r=function(r,a){var s=t[r];n.push(e.map((function(t,n){var r=null;return t.sourceField&&(r=Object(o.h)(s[t.sourceField],t.dataType)),i.processValue(r,e[n],n)})))},a=0,s=t.length;a<s;a++)r(a);return n},t.prototype.processValue=function(t,e,i){var n=e.preprocessFunc;return n&&this[n]?this[n](t,e.preprocessParams,i):t},t.prototype.text=function(t,e){return e},t.prototype.parseNumber=function(t,e){if("number"==typeof t)return t;if("boolean"==typeof t)return+t;if("string"==typeof t){t=t.replace(/,/g,""),e&&e.split("").forEach((function(e){t=t.replace(e,"")}));var i=this.getKoef(t);try{return(t=parseFloat(t))*i}catch(n){return null}}return null},t.prototype.parseBoolean=function(t){var e=t.toString().toLowerCase();return!!["1","yes","true","on"].includes(e)||!["0","no","false","off"].includes(e)&&null},t.prototype.parseDate=function(t,e){if(!t)return null;var i=e?n(t,e.split(",")):n(t);return i.isValid()?i.toDate():null},t.prototype.autoid=function(t,e,i){var n=0;try{n=parseInt(e,10),isNaN(n)&&(n=0)}catch(r){}return n+i},t.prototype.getKoef=function(t){return t.includes("k")?1e3:t.includes("m")?1e6:t.includes("b")?1e9:1},t}(),s=function(t){return t.autoid="int",t.text="nvarchar",t.parseDate="datetime2",t.parseBoolean="bit",t.parseNumber="int",t}({});e.b=new a},lgZ4:function(t,e,i){"use strict";i.r(e),i.d(e,"_VolumeHelper",(function(){return h})),i.d(e,"_Spline",(function(){return c})),i.d(e,"Palettes",(function(){return u})),i.d(e,"PlotArea",(function(){return d})),i.d(e,"PlotAreaCollection",(function(){return p})),i.d(e,"_SvgRenderEngine",(function(){return b})),i.d(e,"Legend",(function(){return x})),i.d(e,"DataPoint",(function(){return w})),i.d(e,"RenderEventArgs",(function(){return S})),i.d(e,"SeriesRenderingEventArgs",(function(){return C})),i.d(e,"ImageFormat",(function(){return f})),i.d(e,"SelectionMode",(function(){return m})),i.d(e,"Position",(function(){return g})),i.d(e,"Orientation",(function(){return _})),i.d(e,"FlexChartBase",(function(){return T})),i.d(e,"_KeyWords",(function(){return A})),i.d(e,"ChartTooltip",(function(){return N})),i.d(e,"LabelPosition",(function(){return O})),i.d(e,"PieLabelPosition",(function(){return j})),i.d(e,"DataLabelRenderEventArgs",(function(){return k})),i.d(e,"DataLabelBase",(function(){return F})),i.d(e,"DataLabel",(function(){return D})),i.d(e,"PieDataLabel",(function(){return L})),i.d(e,"AxisType",(function(){return P})),i.d(e,"OverlappingLabels",(function(){return E})),i.d(e,"TickMark",(function(){return I})),i.d(e,"Axis",(function(){return V})),i.d(e,"AxisCollection",(function(){return B})),i.d(e,"_DataPoint",(function(){return G})),i.d(e,"_MeasureOption",(function(){return z})),i.d(e,"_RectArea",(function(){return Y})),i.d(e,"_CircleArea",(function(){return U})),i.d(e,"_LinesArea",(function(){return q})),i.d(e,"_HitResult",(function(){return $})),i.d(e,"_HitTester",(function(){return K})),i.d(e,"ChartElement",(function(){return X})),i.d(e,"HitTestInfo",(function(){return J})),i.d(e,"SeriesVisibility",(function(){return Z})),i.d(e,"Marker",(function(){return Q})),i.d(e,"DataArray",(function(){return it})),i.d(e,"SeriesEventArgs",(function(){return nt})),i.d(e,"SeriesBase",(function(){return rt})),i.d(e,"Series",(function(){return ot})),i.d(e,"FlexPie",(function(){return at})),i.d(e,"_PieSegment",(function(){return lt})),i.d(e,"_DonutSegment",(function(){return ht})),i.d(e,"_BasePlotter",(function(){return ct})),i.d(e,"ChartType",(function(){return tt})),i.d(e,"Stacking",(function(){return et})),i.d(e,"FlexChartCore",(function(){return ft})),i.d(e,"_DataInfo",(function(){return gt})),i.d(e,"LineMarkerLines",(function(){return ut})),i.d(e,"LineMarkerInteraction",(function(){return dt})),i.d(e,"LineMarkerAlignment",(function(){return pt})),i.d(e,"LineMarker",(function(){return yt})),i.d(e,"FlexChart",(function(){return bt})),i.d(e,"_AreaPlotter",(function(){return vt})),i.d(e,"_BarPlotter",(function(){return xt})),i.d(e,"_FunnelPlotter",(function(){return wt})),i.d(e,"_FunnelSegment",(function(){return St})),i.d(e,"_FinancePlotter",(function(){return Ct})),i.d(e,"_LinePlotter",(function(){return Ot})),i.d(e,"_BubblePlotter",(function(){return jt}));var n,r,o,a=i("tcrU"),s=i("lgZ4"),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=function(){function t(t,e,i,n,r){this._volumes=Object(a.asArray)(t),this._xVals=Object(a.asArray)(e),this._xDataMin=Object(a.asNumber)(i,!0,!1),this._xDataMax=Object(a.asNumber)(n,!0,!1),this._xDataType=Object(a.asEnum)(r,a.DataType,!0),this._calcData=[],this._init()}return t.prototype.convert=function(e,i,n){var r=void 0,o=this._calcData.length,s=-1;if(this._hasXs&&this._xDataType===a.DataType.Date){if(-1===(s=this._xVals.indexOf(e)))for(var l=0;l<this._xVals.length;l++){if(l<this._xVals.length-1&&this._xVals[l]<=e&&e<=this._xVals[l+1]){s=l;break}if(0===l&&e<=this._xVals[l]){s=l;break}if(l===this._xVals.length-1&&this._xVals[l]<=e){s=l;break}}-1===s&&(s=this._xVals.indexOf(Math.floor(e)),s=Object(a.clamp)(s,0,o-1))}else this._hasXs?-1===(s=this._xVals.indexOf(e))&&(s=this._xVals.indexOf(Math.floor(e)),s=Object(a.clamp)(s,0,o-1)):s=Object(a.clamp)(Math.round(e),0,o-1);return 0<=s&&s<o&&(this._hasXs&&(e=t.convertToRange(e,0,o-1,this._xDataMin,this._xDataMax)),r=((r=this._calcData[s].value+(e-s)*this._calcData[s].width-.5*this._calcData[s].width)-(i=this._getXVolume(i)))/((n=this._getXVolume(n))-i)),r},t.prototype.convertBack=function(e,i,n){var r,o=void 0,a=this._calcData.length,s=-1;for(r=0;r<a;r++)if(this._calcData[r].x1<=e&&e<=this._calcData[r].x2||0===r&&e<=this._calcData[r].x2||r===a-1&&this._calcData[r].x1<=e){s=r;break}return 0<=s&&s<a&&(o=e/this._calcData[s].width-this._calcData[s].value/this._calcData[s].width+.5+r,this._hasXs&&(o=t.convertToRange(o,this._xDataMin,this._xDataMax,0,a-1))),o},t.prototype._init=function(){this._hasXs=null!==this._xVals&&this._xVals.length>0,this._hasXs&&!Object(a.isNumber)(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals)),this._hasXs&&!Object(a.isNumber)(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals)),this._hasXs&&(this._hasXs=Object(a.isNumber)(this._xDataMin)&&Object(a.isNumber)(this._xDataMax)),this._hasXs&&this._xDataType===a.DataType.Date&&this._fillGaps();var t=0,e=0,i=null!==this._volumes&&this._volumes.length>0?this._volumes.length:0;for(e=0;e<i;e++)t+=this._volumes[e]||0;var n,r,o=0;for(e=0;e<i;e++)n=o+(r=(this._volumes[e]||0)/t),this._calcData.push({value:n,width:r,x1:o,x2:n}),o=this._calcData[e].value},t.prototype._getXVolume=function(e){var i=this._calcData.length,n=-1;if(this._hasXs){n=this._xVals.indexOf(e);for(var r=0;r<this._xVals.length;r++){if(r<this._xVals.length-1&&this._xVals[r]<=e&&e<=this._xVals[r+1]){n=r;break}if(0===r&&e<=this._xVals[r]){n=r;break}if(r===this._xVals.length-1&&this._xVals[r]<=e){n=r;break}}}return this._hasXs&&(e=t.convertToRange(e,0,i-1,this._xDataMin,this._xDataMax)),-1===n&&(n=Object(a.clamp)(Math.round(e),0,i-1)),this._calcData[n].value+(e-n)*this._calcData[n].width-.5*this._calcData[n].width},t.convertToRange=function(t,e,i,n,r){return e===i||n===r?0:(t-n)*(i-e)/(r-n)+e},t.prototype._fillGaps=function(){if(!(this._xDataType!==a.DataType.Date||null===this._xVals||this._xVals.length<=0)){var t,e=this._xDataMin,i=this._xDataMax;for(t=1;e<i;t++)(e=new Date(e)).setDate(e.getDate()+1),(e=e.valueOf())!==this._xVals[t]&&(this._xVals.splice(t,0,e),this._volumes.splice(t,0,0))}},t}(),c=function(){function t(t,e){this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]],this._x=t,this._y=e;var i=this._len=Math.min(t.length,e.length);if(i>3)for(var n=0;n<i-1;n++){var r=0==n?new a.Point(t[n],e[n]):new a.Point(t[n-1],e[n-1]),o=new a.Point(t[n],e[n]),s=new a.Point(t[n+1],e[n+1]),l=n==i-2?new a.Point(t[n+1],e[n+1]):new a.Point(t[n+2],e[n+2]),h=new a.Point,c=new a.Point,u=new a.Point,d=new a.Point;h.x=r.x*this.m[0][0]+o.x*this.m[0][1]+s.x*this.m[0][2]+l.x*this.m[0][3],c.x=r.x*this.m[1][0]+o.x*this.m[1][1]+s.x*this.m[1][2]+l.x*this.m[1][3],u.x=r.x*this.m[2][0]+o.x*this.m[2][1]+s.x*this.m[2][2]+l.x*this.m[2][3],d.x=r.x*this.m[3][0]+o.x*this.m[3][1]+s.x*this.m[3][2]+l.x*this.m[3][3],h.y=r.y*this.m[0][0]+o.y*this.m[0][1]+s.y*this.m[0][2]+l.y*this.m[0][3],c.y=r.y*this.m[1][0]+o.y*this.m[1][1]+s.y*this.m[1][2]+l.y*this.m[1][3],u.y=r.y*this.m[2][0]+o.y*this.m[2][1]+s.y*this.m[2][2]+l.y*this.m[2][3],d.y=r.y*this.m[3][0]+o.y*this.m[3][1]+s.y*this.m[3][2]+l.y*this.m[3][3],this._a.push(h),this._b.push(c),this._c.push(u),this._d.push(d)}}return t.prototype.calculatePoint=function(t){var e=Math.floor(t);e<0&&(e=0),e>this._len-2&&(e=this._len-2);var i=t-e;return{x:((this._a[e].x*i+this._b[e].x)*i+this._c[e].x)*i+this._d[e].x,y:((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y}},t.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};var t=[],e=[],i=this.calculatePoint(0);t.push(i.x),e.push(i.y);for(var n=this._len*this.k,r=n;r<=this._len-1;r+=n){var o=this.calculatePoint(r);(Math.abs(i.x-o.x)>=3||Math.abs(i.y-o.y)>=3)&&(t.push(o.x),e.push(o.y),i=o)}return{xs:t,ys:e}},t}(),u=function(){function t(){}return t.standard=["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"],t.cocoa=["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872","#73b22b","#b87320","#141414"],t.coral=["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2","#ede9d0","#e96b7d","#888888"],t.dark=["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c","#d5a211","#dc0127","#000000"],t.highcontrast=["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a","#607efd","#1b7700","#000000"],t.light=["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7","#9e95c7","#95b0c7","#9b9b9b"],t.midnight=["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7","#d89c54","#e86996","#2c343b"],t.modern=["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6","#d0c041","#e35855","#68706a"],t.organic=["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0","#61bbd8","#e2d76f","#80715a"],t.slate=["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4","#bacc5c","#e5746a","#505d65"],t.zen=["#7bb5ae","#e2d287","#92b8da","#eac4cb","#7b8bbd","#c7d189","#b9a0c8","#dfb397","#a9a9a9"],t.cyborg=["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3","#3d6dcc","#525252","#000000"],t.superhero=["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c","#b6b86e","#4e5d6c","#2b3e4b"],t.flatly=["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5","#e74c3c","#8a9899","#2c3e50"],t.darkly=["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3","#b08725","#4a4949","#000000"],t.cerulan=["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323","#e3bb00","#cccccc","#222222"],t}(),d=function(){function t(t){this._row=0,this._col=0,this._rect=new a.Rect(0,0,0,0),t&&Object(a.copy)(this,t)}return Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){t!=this._row&&(this._row=Object(a.asInt)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},set:function(t){t!=this._col&&(this._col=Object(a.asInt)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=Object(a.asString)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._render=function(t){t.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},t.prototype._setPlotX=function(t,e){this._rect.left=t,this._rect.width=e},t.prototype._setPlotY=function(t,e){this._rect.top=t,this._rect.height=e},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.getPlotArea=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e.prototype._getWidth=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.column==t&&0==i.row)return i.width}},e.prototype._getHeight=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.row==t&&0==i.column)return i.height}},e.prototype._calculateWidths=function(t,e){if(e<=0)throw"ncols";for(var i=[],n=0;n<e;n++){var r=this._getWidth(n);i[n]=new y(r)}return this._calculateLengths(t,e,i)},e.prototype._calculateHeights=function(t,e){if(e<=0)throw"nrows";for(var i=[],n=0;n<e;n++){var r=this._getHeight(n);i[n]=new y(r)}return this._calculateLengths(t,e,i)},e.prototype._calculateLengths=function(t,e,i){for(var n=[e],r=0,o=0,a=0;a<e;a++)i[a].isAbsolute?(n[a]=i[a].value,r+=n[a]):i[a].isStar?o+=i[a].value:i[a].isAuto&&o++;var s=(t-r)/o;for(a=0;a<e;a++)i[a].isStar?n[a]=s*i[a].value:i[a].isAuto&&(n[a]=s),n[a]<0&&(n[a]=0);return n},e}(a.ObservableArray);(o=r||(r={}))[o.Auto=0]="Auto",o[o.Pixel=1]="Pixel",o[o.Star=2]="Star";var f,m,g,_,y=function(){function t(t){void 0===t&&(t=null),this._unitType=r.Auto,t&&((t=t.toString()).indexOf("*")>=0?(this._unitType=r.Star,t=t.replace("*",""),this._value=parseFloat(t),isNaN(this._value)&&(this._value=1)):(this._unitType=r.Pixel,this._value=parseFloat(t),isNaN(this._value)&&(this._unitType=r.Auto,this._value=1)))}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return this._unitType==r.Star},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAbsolute",{get:function(){return this._unitType==r.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuto",{get:function(){return this._unitType==r.Auto},enumerable:!0,configurable:!0}),t}(),b=function(){function t(e){this._strokeWidth=1,this._fontSize=null,this._fontFamily=null,this._savedGradient={},this._bbCache={},this._baseUrl="",this._cssPriority=!0,this._readOnly=!1,this._element=e,this._create(),this._element.appendChild(this._svg);var i=navigator.userAgent.toLowerCase();void 0===t._isff&&(t._isff=i.indexOf("firefox")>=0),void 0===t._isSafari&&(t._isSafari=i.indexOf("safari")>-1&&-1==i.indexOf("chrome")),this._baseUrl=window.location.pathname.replace(window.location.hash,"")}return t.prototype.beginRender=function(){for(;this._svg.firstChild;)Object(a.removeChild)(this._svg.firstChild);this._savedGradient={},this._bbCache={},this._svg.appendChild(this._defs),this._svg.appendChild(this._textGroup)},t.prototype.endRender=function(){Object(a.removeChild)(this._textGroup)},t.prototype.setViewportSize=function(t,e){this._svg.setAttribute("width",t.toString()),this._svg.setAttribute("height",e.toString())},Object.defineProperty(t.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFill",{get:function(){return this._textFill},set:function(t){this._textFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssPriority",{get:function(){return this._cssPriority},set:function(t){this._cssPriority=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=t},enumerable:!0,configurable:!0}),t.prototype.addClipRect=function(e,i){if(e&&i){var n=document.createElementNS(t.svgNS,"clipPath"),r=document.createElementNS(t.svgNS,"rect");r.setAttribute("x",(e.left-1).toFixed()),r.setAttribute("y",(e.top-1).toFixed()),r.setAttribute("width",(e.width+2).toFixed()),r.setAttribute("height",(e.height+2).toFixed()),n.appendChild(r),n.setAttribute("id",i),this._svg.appendChild(n)}},t.prototype.drawEllipse=function(e,i,n,r,o,a){var s=document.createElementNS(t.svgNS,"ellipse");return this._applyColor(s,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(s,"stroke-width",this._strokeWidth.toString()),this._applyColor(s,"fill",this._fill),s.setAttribute("cx",e.toFixed(1)),s.setAttribute("cy",i.toFixed(1)),s.setAttribute("rx",n.toFixed(1)),s.setAttribute("ry",r.toFixed(1)),o&&s.setAttribute("class",o),this._applyStyle(s,a),this._appendChild(s),s},t.prototype.drawRect=function(e,i,n,r,o,a,s){var l=document.createElementNS(t.svgNS,"rect");return this._applyColor(l,"fill",this._fill),this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(l,"stroke-width",this._strokeWidth.toString()),l.setAttribute("x",e.toFixed(1)),l.setAttribute("y",i.toFixed(1)),l.setAttribute("width",n>0&&n<.05?"0.1":n.toFixed(1)),l.setAttribute("height",r>0&&r<.05?"0.1":r.toFixed(1)),s&&this._setClipPath(l,s),o&&l.setAttribute("class",o),this._applyStyle(l,a),this._appendChild(l),l},t.prototype.drawLine=function(e,i,n,r,o,a){var s=document.createElementNS(t.svgNS,"line");return this._applyColor(s,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(s,"stroke-width",this._strokeWidth.toString()),s.setAttribute("x1",e.toFixed(1)),s.setAttribute("x2",n.toFixed(1)),s.setAttribute("y1",i.toFixed(1)),s.setAttribute("y2",r.toFixed(1)),o&&s.setAttribute("class",o),this._applyStyle(s,a),this._appendChild(s),s},t.prototype.drawLines=function(e,i,n,r,o){if(e&&i){var a=Math.min(e.length,i.length);if(a>0){var s=document.createElementNS(t.svgNS,"polyline");this._applyColor(s,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(s,"stroke-width",this._strokeWidth.toString()),s.setAttribute("fill","none");for(var l="",h=0;h<a;h++)l+=e[h].toFixed(1)+","+i[h].toFixed(1)+" ";return s.setAttribute("points",l),n&&s.setAttribute("class",n),o&&this._setClipPath(s,o),this._applyStyle(s,r),this._appendChild(s),s}}return null},t.prototype.drawSplines=function(e,i,n,r,o){if(e&&i){var a=new c(e,i).calculate(),s=a.xs,l=a.ys,h=Math.min(s.length,l.length);if(h>0){var u=document.createElementNS(t.svgNS,"polyline");this._applyColor(u,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(u,"stroke-width",this._strokeWidth.toString()),u.setAttribute("fill","none");for(var d="",p=0;p<h;p++)d+=s[p].toFixed(1)+","+l[p].toFixed(1)+" ";return u.setAttribute("points",d),n&&u.setAttribute("class",n),o&&this._setClipPath(u,o),this._applyStyle(u,r),this._appendChild(u),u}}return null},t.prototype.drawPolygon=function(e,i,n,r,o){if(e&&i){var a=Math.min(e.length,i.length);if(a>0){var s=document.createElementNS(t.svgNS,"polygon");this._applyColor(s,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(s,"stroke-width",this._strokeWidth.toString()),this._applyColor(s,"fill",this._fill);for(var l="",h=0;h<a;h++)l+=e[h].toFixed(1)+","+i[h].toFixed(1)+" ";return s.setAttribute("points",l),n&&s.setAttribute("class",n),o&&this._setClipPath(s,o),this._applyStyle(s,r),this._appendChild(s),s}}return null},t.prototype.drawPieSegment=function(e,i,n,r,o,s,l,h){if(o>=2*Math.PI)return this.drawEllipse(e,i,n,n,s,l);var c=document.createElementNS(t.svgNS,"path");this._applyColor(c,"fill",this._fill),this._applyColor(c,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(c,"stroke-width",this._strokeWidth.toString());var u=new a.Point(e,i);u.x+=n*Math.cos(r),u.y+=n*Math.sin(r);var d=r+o,p=new a.Point(e,i);p.x+=n*Math.cos(d),p.y+=n*Math.sin(d);var f=" 0 0,1 ";Math.abs(o)>Math.PI&&(f=" 0 1,1 ");var m="M "+u.x.toFixed(1)+","+u.y.toFixed(1);return m+=" A "+n.toFixed(1)+","+n.toFixed(1)+f,m+=p.x.toFixed(1)+","+p.y.toFixed(1),m+=" L "+e.toFixed(1)+","+i.toFixed(1)+" z",c.setAttribute("d",m),h&&this._setClipPath(c,h),s&&c.setAttribute("class",s),this._applyStyle(c,l),this._appendChild(c),c},t.prototype.drawDonutSegment=function(e,i,n,r,o,s,l,h,c){var u=!1;s>=2*Math.PI&&(u=!0,s-=.001);var d=document.createElementNS(t.svgNS,"path");this._applyColor(d,"fill",this._fill),this._applyColor(d,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(d,"stroke-width",this._strokeWidth.toString());var p=new a.Point(e,i);p.x+=n*Math.cos(o),p.y+=n*Math.sin(o);var f=o+s,m=new a.Point(e,i);m.x+=n*Math.cos(f),m.y+=n*Math.sin(f);var g=new a.Point(e,i);g.x+=r*Math.cos(f),g.y+=r*Math.sin(f);var _=new a.Point(e,i);_.x+=r*Math.cos(o),_.y+=r*Math.sin(o);var y=" 0 0,1 ",b=" 0 0,0 ";Math.abs(s)>Math.PI&&(y=" 0 1,1 ",b=" 0 1,0 ");var v="M "+p.x.toFixed(3)+","+p.y.toFixed(3);return v+=" A "+n.toFixed(3)+","+n.toFixed(3)+y,v+=m.x.toFixed(3)+","+m.y.toFixed(3),v+=u?" M "+g.x.toFixed(3)+","+g.y.toFixed(3):" L "+g.x.toFixed(3)+","+g.y.toFixed(3),v+=" A "+r.toFixed(3)+","+r.toFixed(3)+b,v+=_.x.toFixed(3)+","+_.y.toFixed(3),u||(v+=" z"),d.setAttribute("d",v),c&&this._setClipPath(d,c),l&&d.setAttribute("class",l),this._applyStyle(d,h),this._appendChild(d),d},t.prototype.drawString=function(t,e,i,n){var r=this._createText(e,t);i&&r.setAttribute("class",i),this._applyStyle(r,n),this._appendChild(r);var o,a=this._getKey(t,i,this._groupCls);return this._bbCache[a]?r.setAttribute("y",(e.y-((o=this._bbCache[a]).y+o.height)).toFixed(1)):(o=this._getBBox(r),r.setAttribute("y",(e.y-(o.y+o.height-e.y)).toFixed(1))),r},t.prototype.drawStringRotated=function(e,i,n,r,o,a){var s=this._createText(i,e);o&&s.setAttribute("class",o),this._applyStyle(s,a);var l=document.createElementNS(t.svgNS,"g");l.setAttribute("transform","rotate("+r.toFixed(1)+","+n.x.toFixed(1)+","+n.y.toFixed(1)+")"),l.appendChild(s),this._appendChild(l);var h=this._getBBox(s);return s.setAttribute("y",(i.y-(h.y+h.height-i.y)).toFixed(1)),s},t.prototype.measureString=function(t,e,i,n){var r=new a.Size(0,0);if(!this._fontFamily&&!this._fontSize){var o=this._getKey(t,e,i);if(this._bbCache[o])return this._bbCache[o]}if(this.cssPriority)this._fontSize&&this._text.setAttribute("font-size",this._fontSize),this._fontFamily&&this._text.setAttribute("font-family",this._fontFamily);else{var s="";this._fontSize&&(s+="font-size:"+this._fontSize+";"),this._fontFamily&&(s+="font-family:"+this._fontFamily+";"),s.length>0&&this._text.setAttribute("style",s)}e&&this._text.setAttribute("class",e),i&&this._textGroup.setAttribute("class",i),this._applyStyle(this._text,n),this._setText(this._text,t);var l=this._getBBox(this._text);if(r.width=l.width,r.height=l.height,this._text.removeAttribute("font-size"),this._text.removeAttribute("font-family"),this._text.removeAttribute("class"),this._text.removeAttribute("style"),n)for(var h in n)this._text.removeAttribute(this._deCase(h));if(this._textGroup.removeAttribute("class"),this._text.textContent=null,!this._fontFamily&&!this._fontSize){var c=this._getKey(t,e,i);this._bbCache[c]={x:l.x,y:l.y+1e3,width:l.width,height:l.height}}return r},t.prototype.startGroup=function(e,i,n){void 0===n&&(n=!1);var r=document.createElementNS(t.svgNS,"g");return e&&(r.setAttribute("class",e),this._groupCls=e),i&&this._setClipPath(r,i),this._appendChild(r),n&&r.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=r,r},t.prototype.endGroup=function(){if(this._group){var t=this._group.parentNode;t==this._svg?(this._group=null,this._groupCls=null):(this._group=t,this._groupCls=this._getClass(this._group))}},t.prototype.drawImage=function(e,i,n,r,o){var a=document.createElementNS(t.svgNS,"image");return a.setAttributeNS(t.xlinkNS,"href",e),a.setAttribute("x",i.toFixed(1)),a.setAttribute("y",n.toFixed(1)),a.setAttribute("width",r.toFixed(1)),a.setAttribute("height",o.toFixed(1)),this._appendChild(a),a},t.prototype._setClipPath=function(e,i){e.setAttribute("clip-path","url(#"+i+")"),t._isSafari&&Object(a.setCss)(e,{"-webkit-clip-path":"url(#"+i+")"})},t.prototype._appendChild=function(t){if(!this.readOnly){var e=this._group;e||(e=this._svg),e.appendChild(t)}},t.prototype._create=function(){this._svg=document.createElementNS(t.svgNS,"svg"),this._defs=document.createElementNS(t.svgNS,"defs"),this._svg.appendChild(this._defs),this._text=this._createText(new a.Point(-1e3,-1e3),""),this._textGroup=document.createElementNS(t.svgNS,"g"),this._textGroup.appendChild(this._text),this._svg.appendChild(this._textGroup)},t.prototype._setText=function(t,e){var i=e?e.toString():null;if(i&&i.indexOf("tspan")>=0)try{t.textContent=null;for(var n=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">'+i+"</svg>","text/xml").documentElement.firstChild;n;)t.appendChild(t.ownerDocument.importNode(n,!0)),n=n.nextSibling}catch(t){throw new Error("Error parsing XML string.")}else t.textContent=i},t.prototype._getKey=function(t,e,i){return t+(e||"")+(i||"")},t.prototype._createText=function(e,i){var n=document.createElementNS(t.svgNS,"text");if(this._setText(n,i),n.setAttribute("x",e.x.toFixed(1)),n.setAttribute("y",e.y.toFixed(1)),this.cssPriority)null!=this._textFill&&n.setAttribute("fill",this._textFill),this._fontSize&&n.setAttribute("font-size",this._fontSize),this._fontFamily&&n.setAttribute("font-family",this._fontFamily);else{var r="";null!=this._textFill&&(r+="fill:"+this._textFill+";"),this._fontSize&&(r+="font-size:"+this._fontSize+";"),this._fontFamily&&(r+="font-family:"+this._fontFamily+";"),r.length>0&&n.setAttribute("style",r)}return n},t.prototype._applyStyle=function(t,e){if(e)for(var i in e)"fill"===i||"stroke"===i?this._applyColor(t,i,e[i]):t.setAttribute(this._deCase(i),e[i])},t.prototype._deCase=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))},t.prototype._getClass=function(t){var e;if(t)for(var i=t;i&&!(e=i.getAttribute("class"));i=i.parentNode);return e},t.prototype._getBBox=function(e){if(!t._isff)return e.getBBox();try{return e.getBBox()}catch(e){return{x:0,y:0,width:0,height:0}}},t.prototype._applyColor=function(e,i,n){var r=v.tryParse(n);if(null!=r){if(!Object(a.isString)(r)){if(null==this._savedGradient[n]){var o,s="gc"+(1e6*Math.random()).toFixed();null!=r.x1?(o=document.createElementNS(t.svgNS,"linearGradient"),["x1","y1","x2","y2","gradientUnits"].forEach((function(t){null!=r[t]&&o.setAttribute(t,r[t])}))):null!=r.r&&(o=document.createElementNS(t.svgNS,"radialGradient"),["cx","cy","r","fx","fy","fr","gradientUnits"].forEach((function(t){null!=r[t]&&o.setAttribute(t,r[t])}))),r.colors&&r.colors&&r.colors.length>0&&r.colors.forEach((function(e){var i=document.createElementNS(t.svgNS,"stop");null!=e.color&&i.setAttribute("stop-color",e.color),null!=e.offset&&i.setAttribute("offset",e.offset),null!=e.opacity&&i.setAttribute("stop-opacity",e.opacity),o.appendChild(i)})),o.setAttribute("id",s),this._defs.appendChild(o),this._savedGradient[n]=s}r="url("+this._baseUrl+"#"+this._savedGradient[n]+")"}this.cssPriority?e.setAttribute(i,r):this._addInlineStyle(e,i,r)}},t.prototype._addInlineStyle=function(t,e,i){var n=t.getAttribute("style");t.setAttribute("style",n?n+e+":"+i+";":e+":"+i+";")},t.prototype._setAttribute=function(t,e,i){this.cssPriority?t.setAttribute(e,i):this._addInlineStyle(t,e,i)},t.svgNS="http://www.w3.org/2000/svg",t.xlinkNS="http://www.w3.org/1999/xlink",t}(),v=function(){function t(){}return t.tryParse=function(e){if(t.parsedColor[e])return t.parsedColor[e];if(null==e||-1===e.indexOf("-"))return e;var i,n=e.replace(/\s+/g,"").split(/\-/g),r=n[0][0],o=!1,a=n[0].match(/\(\S+\)/)[0].replace(/[\(\\)]/g,"").split(/\,/g);"l"===r||"L"===r?(i={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]},"l"===r&&(o=!0),["x1","y1","x2","y2"].forEach((function(t,e){null!=a[e]&&(i[t]=o?100*+a[e]+"%":a[e]+"")}))):"r"!==r&&"R"!==r||(i={cx:"0",cy:"0",r:"0",colors:[]},"r"===r&&(o=!0),["cx","cy","r","fx","fy","fr"].forEach((function(t,e){null!=a[e]&&""!==a[e]&&(i[t]=o?100*+a[e]+"%":a[e]+"")}))),o||(i.gradientUnits="userSpaceOnUse"),t.parsedColor[e]=i;var s=n.length-1;return n.forEach((function(t,e){t.indexOf(")")>-1&&(t=t.match(/\)\S+/)[0].replace(")",""));var n=t.split(":"),r={color:"black"};null!=n[0]&&(r.color=n[0]),r.offset=null!=n[1]?o?100*+n[1]+"%":n[1]+"":e/s*100+"%",null!=n[2]&&(r.opacity=n[2]),i.colors.push(r)})),i},t.parsedColor={},t}(),x=function(){function t(t){this._position=g.Right,this._title="",this._titleAlign="left",this._titlePadding=5,this._areas=new Array,this._sz=new a.Size,this._colRowLens=[],this._orient=_.Auto,this._chart=t}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=Object(a.asEnum)(t,g))!=this._position&&(this._position=t,this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=Object(a.asString)(t,!1),this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleAlign",{get:function(){return this._titleAlign},set:function(t){if(t!=this._titleAlign){var e=Object(a.asString)(t,!1);this._titleAlign="right"===e?"right":"center"===e?"center":"left",this._chart&&this._chart.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orient},set:function(t){(t=Object(a.asEnum)(t,_))!=this._orient&&(this._orient=t,this._chart.invalidate())},enumerable:!0,configurable:!0}),t.prototype._getDesiredSize=function(t,e,i,n){if(e==g.None)return null;var r=this._chart._getDesiredLegendSize(t,this.orientation==_.Auto?e==g.Right||e==g.Left:this.orientation==_.Vertical,i,n);if(null!=r){if(this.title.length>0){var o=t.measureString(this.title,"wj-title","wj-legend");r.height+=o.height+this._titlePadding,o.width>r.width&&(r.width=o.width)}this._sz=r}return r},t.prototype._getPosition=function(t,e){return this.position==g.Auto?t>=e?g.Right:g.Bottom:this.position},t.prototype._render=function(t,e,i,n,r){this._areas=[];var o=this.orientation==_.Auto?i==g.Right||i==g.Left:this.orientation==_.Vertical;if(t.fill="transparent",t.stroke=null,t.drawRect(e.x,e.y,this._sz.width,this._sz.height),this.title.length){var a=t.drawString(this.title,e,"wj-title"),s=a.getBBox();a.setAttribute("y",Number(a.getAttribute("y"))+s.height),"right"===this.titleAlign?a.setAttribute("x",e.x+n-s.width):"center"===this.titleAlign&&a.setAttribute("x",e.x+n/2-s.width/2);var l=s.height+this._titlePadding;e.y+=l,r-=l}this._chart._renderLegend(t,e,this._areas,o,n,r)},t.prototype._hitTest=function(t){for(var e=this._areas,i=0;i<e.length;i++)if(e[i]&&T._contains(e[i],t))return i;return null},t}(),w=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},S=function(t){function e(e){var i=t.call(this)||this;return i._engine=e,i}return l(e,t),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e}(a.CancelEventArgs),C=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r._index=i,r._count=n,r}return l(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e}(S);!function(t){t[t.Png=0]="Png",t[t.Jpeg=1]="Jpeg",t[t.Svg=2]="Svg"}(f||(f={})),function(t){t[t.None=0]="None",t[t.Series=1]="Series",t[t.Point=2]="Point"}(m||(m={})),function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Auto=5]="Auto"}(g||(g={})),function(t){t[t.Auto=0]="Auto",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"}(_||(_={}));var O,j,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._palette=null,e._selectionMode=m.None,e._defPalette=u.standard,e._notifyCurrentChanged=!0,e._legendHost=null,e._needBind=!1,e.rendering=new a.Event,e.rendered=new a.Event,e.itemsSourceChanging=new a.Event,e.itemsSourceChanged=new a.Event,e.selectionChanged=new a.Event,e}return l(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){if(this._items!=t){var e=new a.CancelEventArgs;if(!this.onItemsSourceChanging(e))return;this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=Object(a.asCollectionView)(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this.onItemsSourceChanged(e),this._bindChart()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._palette},set:function(t){t!=this._palette&&(this._palette=Object(a.asArray)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(t){t!=this._plotMargin&&(this._plotMargin=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend},set:function(t){t!=this._legend&&(this._legend=Object(a.asType)(t,x),null!=this._legend&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=Object(a.asString)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},set:function(t){t!=this._footer&&(this._footer=Object(a.asString)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(t){t!=this._headerStyle&&(this._headerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(t){t!=this._footerStyle&&(this._footerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){(t=Object(a.asEnum)(t,m))!=this._selectionMode&&(this._selectionMode=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=Object(a.asFunction)(t),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onRendering=function(t){this.rendering.raise(this,t)},e.prototype.onRendered=function(t){this.rendered.raise(this,t)},e.prototype.onItemsSourceChanging=function(t){return this.itemsSourceChanging.raise(this,t),!t.cancel},e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},e.prototype.saveImageToFile=function(t){var e,i,n,r;t&&0!==t.length&&-1!==t.indexOf(".")||(t="image.png"),r=t.split("."),e=r[0],i=r[1].toLowerCase(),n=f[i[0].toUpperCase()+i.substring(1)],this.saveImageToDataUrl(n,(function(t){M.downloadImage(t,e,i)}))},e.prototype.saveImageToDataUrl=function(t,e){var i=Object(a.asEnum)(t,f,!1),n=f[i].toLowerCase();n&&n.length&&this._exportToImage(n,(function(t){e.call(e,t)}))},e.prototype._exportToImage=function(t,e){var i,n=this,r=new Image,o=this._currentRenderEngine.element;i=M.getDataUri(o,this),"svg"===t?e.call(null,i):(r.onload=function(){var i,s=document.createElement("canvas"),l=o.parentNode||o,h=Object(a.getElementRect)(l);s.width=h.width,s.height=h.height;var c=s.getContext("2d"),u=n._bgColor(n.hostElement);n._isTransparent(u)&&(u="#ffffff"),c.fillStyle=u,c.fillRect(0,0,h.width,h.height);var d=window.getComputedStyle(l,null).getPropertyValue("padding-left").replace("px",""),p=window.getComputedStyle(l,null).getPropertyValue("padding-top").replace("px","");c.drawImage(r,+d||0,+p||0),i=s.toDataURL("image/"+t),e.call(null,i),s=null},r.src=i)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isUpdating||this._refreshChart()},e.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)},e.prototype.onLostFocus=function(e){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide(),t.prototype.onLostFocus.call(this,e)},e.prototype._cvCollectionChanged=function(t,e){this._clearCachedValues(),this._bindChart()},e.prototype._cvCurrentChanged=function(t,e){this._notifyCurrentChanged&&this._bindChart()},e.prototype._bgColor=function(t){if(!t)return"transparent";var e=getComputedStyle(t).backgroundColor;return this._isTransparent(e)?this._bgColor(t.parentElement):e},e.prototype._isTransparent=function(t){var e=new a.Color(t);return 0==e.a&&0==e.b&&0==e.g&&0==e.r},e.prototype._getColor=function(t){var e=this._defPalette;return null!=this._palette&&this._palette.length>0&&(e=this._palette),e[t%e.length]},e.prototype._getColorLight=function(t){var e=this._getColor(t);return this._getLightColor(e)},e.prototype._getLightColor=function(t){var e=new a.Color(t);return null!=e&&-1===t.indexOf("-")&&(1==e.a&&-1==t.indexOf("rgba")&&(e.a*=.7),t=e.toString()),t},e.prototype._bindChart=function(){this._needBind=!0,this.invalidate()},e.prototype._clearCachedValues=function(){},e.prototype._renderEls=function(t,i,n,r,o){void 0===n&&(n=!0),void 0===r&&(r=null),void 0===o&&(o=!1);var s=i.width,l=i.height;if(0!=s){if((isNaN(s)||s<0)&&(s=e._WIDTH),(l<=0||isNaN(l))&&(l=e._HEIGHT),t.beginRender(),t.cssPriority=!0,s>0&&l>0){if(t.setViewportSize(s,l),this._rectChart=new a.Rect(0,0,s,l),this._prepareRender(),r){var h=t.stroke,c=t.fill;t.fill=r,t.stroke=null,t.drawRect(0,0,s,l),t.fill=c,t.stroke=h}var u=new a.Rect(0,0,s,l);this._chartRectId="chartRect"+(1e6*Math.random()).toFixed(),t.addClipRect(u,this._chartRectId),this._renderHeader(t,u),this._renderFooter(t,u),this._renderLegends(t,u),this._renderChart(t,u,n)}t.endRender()}},e.prototype._render=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=null);var n=this._getHostSize();this._renderEls(t,n,e,i)},e.prototype._renderHidden=function(t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=document.createElement("div");Object(a.addClass)(n,this.hostElement.getAttribute("class")||""),n.style.visibility="hidden";var r=new b(n);if(document.body.appendChild(n),!t){var o=this._getHostComputedStyle(),s=0,l=0;o&&(s=this._parsePx(o.width),l=this._parsePx(o.height),0==s&&(s=e._WIDTH),0==l&&(l=e._HEIGHT),s-=this._parsePx(o.paddingLeft),s-=this._parsePx(o.paddingRight),l-=this._parsePx(o.paddingTop),l-=this._parsePx(o.paddingBottom),s-=this._parsePx(o.borderLeftWidth),s-=this._parsePx(o.borderRightWidth),l-=this._parsePx(o.borderTopWidth),l-=this._parsePx(o.borderBottomWidth)),0==s&&(s=e._WIDTH),0==l&&(l=e._HEIGHT),t=new a.Size(s,l)}return this._renderEls(r,t,!0,i,!0),Object(a.removeChild)(n),r.element},e.prototype._renderHeader=function(t,i){t.startGroup(e._CSS_HEADER,this._chartRectId),i=this._drawTitle(t,i,this.header,this.headerStyle,!1),t.endGroup()},e.prototype._renderFooter=function(t,i){t.startGroup(e._CSS_FOOTER,this._chartRectId),i=this._drawTitle(t,i,this.footer,this.footerStyle,!0),t.endGroup()},e.prototype._renderLegends=function(t,i){var n,r,o=this.legend,s=i.width,l=i.height,h=o._getPosition(s,l);switch(n=o._getDesiredSize(t,h,s,l),h){case g.Right:r=new a.Point(s-=n.width,i.top+.5*(l-n.height));break;case g.Left:i.left+=n.width,s-=n.width,r=new a.Point(0,i.top+.5*(l-n.height));break;case g.Top:l-=n.height,r=new a.Point(.5*(s-n.width),i.top),i.top+=n.height;break;case g.Bottom:r=new a.Point(.5*(s-n.width),i.top+(l-=n.height))}if(i.width=s,i.height=l,n){this._rectLegend=new a.Rect(r.x,r.y,n.width,n.height);var c="legRect"+(1e6*Math.random()).toFixed();t.addClipRect(this._rectLegend,c),this._legendHost=t.startGroup(e._CSS_LEGEND,c),this.legend._render(t,r,h,n.width,n.height),t.endGroup()}else this._legendHost=null,this._rectLegend=null},e.prototype._prepareRender=function(){},e.prototype._renderChart=function(t,e,i){},e.prototype._performBind=function(){},e.prototype._getDesiredLegendSize=function(t,e,i,n){return null},e.prototype._renderLegend=function(t,e,i,n,r,o){},e.prototype._getHitTestItem=function(t){return null},e.prototype._getHitTestValue=function(t,e){return null},e.prototype._getHitTestLabel=function(t){return null},e.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind()),this.hostElement&&this._render(this._currentRenderEngine)},e.prototype._drawTitle=function(t,i,n,r,o){var s=e._CSS_TITLE,l=o?e._CSS_FOOTER:e._CSS_HEADER,h=null;if(o?this._rectFooter=null:this._rectHeader=null,null!=n){var c=null,u=null,d=null,p=null;r&&(r.fontSize&&(c=r.fontSize),r.foreground&&(u=r.foreground),r.fill&&(u=r.fill),r.fontFamily&&(d=r.fontFamily),r.halign&&(p=r.halign)),t.fontSize=c,t.fontFamily=d,h=t.measureString(n,s,l,r),i.height-=h.height,u||(u=e._FG),t.textFill=u,o?("left"==p?e._renderText(t,n,new a.Point(i.left,i.bottom),0,0,s,l,r):"right"==p?e._renderText(t,n,new a.Point(i.left+i.width,i.bottom),2,0,s,l,r):e._renderText(t,n,new a.Point(i.left+.5*i.width,i.bottom),1,0,s,l,r),this._rectFooter=new a.Rect(i.left,i.bottom,i.width,h.height)):(this._rectHeader=new a.Rect(i.left,i.top,i.width,h.height),i.top+=h.height,"left"==p?e._renderText(t,n,new a.Point(i.left,0),0,0,s,l,r):"right"==p?e._renderText(t,n,new a.Point(i.left+i.width,0),2,0,s,l,r):e._renderText(t,n,new a.Point(i.left+.5*i.width,0),1,0,s,l,r)),t.textFill=null,t.fontSize=null,t.fontFamily=null}return i},e.prototype.pageToControl=function(t,e){return this._toControl(t,e)},e.prototype._toControl=function(t,e){Object(a.isNumber)(t)&&Object(a.isNumber)(e)?t=new a.Point(t,e):t instanceof MouseEvent&&(t=Object(a.mouseToPage)(t)),Object(a.asType)(t,a.Point);var i=t.clone(),n=this._getHostOffset();i.x-=n.x,i.y-=n.y;var r=this._getHostComputedStyle();if(r){var o=parseInt(r.paddingLeft.replace("px",""));o&&!isNaN(o)&&(i.x-=o);var s=parseInt(r.paddingTop.replace("px",""));s&&!isNaN(s)&&(i.y-=s)}return i},e.prototype._highlightItems=function(t,e,i){if(i)for(var n=0;n<t.length;n++)Object(a.addClass)(t[n],e);else for(n=0;n<t.length;n++)Object(a.removeClass)(t[n],e)},e.prototype._parseMargin=function(t){var e={};if(Object(a.isNumber)(t)&&!isNaN(t))e.top=e.bottom=e.left=e.right=Object(a.asNumber)(t);else if(Object(a.isString)(t)){var i=Object(a.asString)(t).split(" ",4),n=NaN,r=NaN,o=NaN,s=NaN;i&&(4==i.length?(n=parseFloat(i[0]),s=parseFloat(i[1]),r=parseFloat(i[2]),o=parseFloat(i[3])):2==i.length?(n=r=parseFloat(i[0]),o=s=parseFloat(i[1])):1==i.length&&(n=r=o=s=parseFloat(i[1])),isNaN(n)||(e.top=n),isNaN(r)||(e.bottom=r),isNaN(o)||(e.left=o),isNaN(s)||(e.right=s))}return e},e.prototype._showToolTip=function(t,e){var i=this,n=this._tooltip.showDelay;i._clearTimeouts(),i.isDisabled||(n>0?i._toShow=setTimeout((function(){i._tooltip.show(i.hostElement,t,e),i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))}),n):(i._tooltip.show(i.hostElement,t,e),i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))))},e.prototype._hideToolTip=function(){this._clearTimeouts(),this._tooltip.hide()},e.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},e.prototype._getHostOffset=function(){var t=Object(a.getElementRect)(this.hostElement);return new a.Point(t.left,t.top)},e.prototype._getHostSize=function(){var t=new a.Size,e=this.hostElement,i=this._getHostComputedStyle(),n=e.offsetWidth,r=e.offsetHeight;return i&&(n-=this._parsePx(i.paddingLeft),n-=this._parsePx(i.paddingRight),r-=this._parsePx(i.paddingTop),r-=this._parsePx(i.paddingBottom),n-=this._parsePx(i.borderLeftWidth),n-=this._parsePx(i.borderRightWidth),r-=this._parsePx(i.borderTopWidth),r-=this._parsePx(i.borderBottomWidth),t.width=n,t.height=r),t},e.prototype._parsePx=function(t){var e=parseFloat(t.replace("px",""));return isNaN(e)?0:e},e.prototype._getHostComputedStyle=function(){var t=this.hostElement;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},e.prototype._find=function(t,e){for(var i=[],n=0;n<t.childElementCount;n++){var r=t.childNodes.item(n);if(e.indexOf(r.nodeName)>=0)i.push(r);else{var o=this._find(r,e);if(o.length>0)for(var a=0;a<o.length;a++)i.push(o[a])}}return i},e._contains=function(t,e){return!(!t||!e)&&e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom},e._intersects=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e._toOADate=function(t){return t.valueOf()},e._fromOADate=function(t){return new Date(t)},e._renderText=function(t,e,i,n,r,o,s,l,h){var c=t.measureString(e,o,s,l),u=i.x,d=i.y;switch(n){case 1:u-=.5*c.width;break;case 2:u-=c.width}switch(r){case 1:d+=.5*c.height;break;case 0:d+=c.height}var p=new a.Rect(u,d-c.height,c.width,c.height);return h?h(p)?(t.drawString(e,new a.Point(u,d),o,l),p):null:(t.drawString(e,new a.Point(u,d),o,l),p)},e._renderRotatedText=function(t,e,i,n,r,o,s,l,h,c){var u=t.measureString(e,l,h,c),d=i.x,p=i.y;switch(n){case 1:d-=.5*u.width;break;case 2:d-=u.width}switch(r){case 1:p+=.5*u.height;break;case 0:p+=u.height}return t.drawStringRotated(e,new a.Point(d,p),o,s,l,c)},e._WIDTH=300,e._HEIGHT=200,e._SELECTION_THRESHOLD=15,e._CSS_LEGEND="wj-legend",e._CSS_HEADER="wj-header",e._CSS_FOOTER="wj-footer",e._CSS_TITLE="wj-title",e._CSS_LABEL="wj-label",e._CSS_SELECTION="wj-state-selected",e._CSS_PLOT_AREA="wj-plot-area",e._FG="#666",e._epoch=new Date(1899,11,30).getTime(),e._msPerDay=864e5,e}(a.Control),A=function(){function t(){this._keys={},this._keys.seriesName=null,this._keys.pointIndex=null,this._keys.x=null,this._keys.y=null,this._keys.value=null,this._keys.name=null}return t.prototype.replace=function(t,e){var i=this;return Object(a.format)(t,{},(function(t,n,r,o){return i.getValue(n,e,r)}))},t.prototype.getValue=function(t,e,i){switch(t){case"seriesName":return e.series?e.series.name:"";case"pointIndex":return null!=e.pointIndex?e.pointIndex.toFixed():"";case"x":return i?a.Globalize.format(e.x,i):e._xfmt;case"y":return i?a.Globalize.format(e.y,i):e._yfmt;case"value":return i?a.Globalize.format(e.value,i):e._getValueFmt();case"name":return e.name}return e.item&&(0==t.indexOf("item.")&&(t=t.substr(5)),t in e.item)?i?a.Globalize.format(e.item[t],i):e.item[t]:""},t}(),M=function(){function t(){}return t.downloadImage=function(t,e,i){var n=document.createElement("a"),r="image/"+i;if(navigator.msSaveOrOpenBlob){t=t.substring(t.indexOf(",")+1);var o,s,l,h=atob(t),c=[];for(o=0;o<h.length;o+=512){s=h.slice(o,o+512);for(var u=new Array(s.length),d=0;d<s.length;d++)u[d]=s.charCodeAt(d);var p=new Uint8Array(u);c.push(p)}l=new Blob(c,{type:r}),navigator.msSaveOrOpenBlob(l,e+"."+i)}else n.download=e+"."+i,n.href=t,document.body.appendChild(n),n.addEventListener("click",(function(t){Object(a.removeChild)(n)})),n.click()},t.getDataUri=function(e,i){var n,r,o,s,l,h,c,u,d,p,f=document.createElement("div"),m=e.cloneNode(!0),g=!1;if("svg"==e.tagName?(r=(n=Object(a.getElementRect)(e.parentNode||e)).width||0,o=n.height||0,0==r&&(g=!0),s=e.viewBox.baseVal&&0!==e.viewBox.baseVal.width?e.viewBox.baseVal.width:r,l=e.viewBox.baseVal&&0!==e.viewBox.baseVal.height?e.viewBox.baseVal.height:o):(r=(h=e.getBBox()).x+h.width,o=h.y+h.height,m.setAttribute("transform",m.getAttribute("transform").replace(/translate\(.*?\)/,"")),s=r,l=o,(u=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(m),m=u),g){var _=i._renderHidden(),y=i._getHostComputedStyle(),b=0,v=0;y&&(b=i._parsePx(y.width),v=i._parsePx(y.height)),0==b&&(b=T._WIDTH),0==v&&(v=T._HEIGHT),s=r=b,l=o=v,m=_.cloneNode(!0)}return m.setAttribute("version","1.1"),m.setAttributeNS(t.xmlns,"xmlns","http://www.w3.org/2000/svg"),m.setAttributeNS(t.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink"),m.setAttribute("width",r),m.setAttribute("height",o),m.setAttribute("viewBox","0 0 "+s+" "+l),Object(a.addClass)(m,e.parentNode&&e.parentNode.getAttribute("class")||""),f.appendChild(m),c=t.getStyles(e),(d=document.createElement("style")).setAttribute("type","text/css"),d.innerHTML="<![CDATA[\n"+c+"\n]]>",(p=document.createElement("defs")).appendChild(d),m.insertBefore(p,m.firstChild),"data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(t.doctype+f.innerHTML)))},t.getStyles=function(t){var e="",i=document.styleSheets;return null==i||0===i.length?null:([].forEach.call(i,(function(i){try{if(null==i.cssRules||0===i.cssRules.length)return!0}catch(t){if("SecurityError"==t.name)return console.log("SecurityError. Can't read: "+i.href),!0}[].forEach.call(i.cssRules,(function(i){var n,r=i.style;if(null==r)return!0;try{n=t.querySelector(i.selectorText)}catch(t){console.warn('Invalid CSS selector "'+i.selectorText+'"',t)}n?e+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(e+=i.cssText+"\n")}))})),e)},t.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t.xmlns="http://www.w3.org/2000/xmlns/",t}(),N=function(t){function e(){var e=t.call(this)||this;return e._content="<b>{seriesName}</b><br/>{x} {y}",e._threshold=15,e}return l(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._threshold},set:function(t){t!=this._threshold&&(this._threshold=Object(a.asNumber)(t))},enumerable:!0,configurable:!0}),e.prototype.show=function(i,n,r){t.prototype.show.call(this,i,n,r);var o=e._eTip;o&&o.style&&(o.style.pointerEvents="none")},e}(a.Tooltip);!function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Center=5]="Center"}(O||(O={})),function(t){t[t.None=0]="None",t[t.Inside=1]="Inside",t[t.Center=2]="Center",t[t.Outside=3]="Outside",t[t.Radial=4]="Radial",t[t.Circular=5]="Circular"}(j||(j={}));var P,E,I,k=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.cancel=!1,o._ht=i,o._pt=n,o._text=r,o}return l(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=Object(a.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),e}(S),F=function(){function t(){this.rendering=new a.Event}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._bdr},set:function(t){t!=this._bdr&&(this._bdr=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._off},set:function(t){t!=this._off&&(this._off=Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectingLine",{get:function(){return this._line},set:function(t){t!=this._line&&(this._line=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendering=function(t){return this.rendering.raise(this,t),!t.cancel},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t}(),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=O.Top,e}return l(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=Object(a.asEnum)(t,O))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(F),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=j.Center,e}return l(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=Object(a.asEnum)(t,j))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(F);!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(P||(P={})),function(t){t[t.Auto=0]="Auto",t[t.Show=1]="Show"}(E||(E={})),function(t){t[t.None=0]="None",t[t.Outside=1]="Outside",t[t.Inside=2]="Inside",t[t.Cross=3]="Cross"}(I||(I={}));var R,V=function(){function t(e){this._GRIDLINE_WIDTH=1,this._LINE_WIDTH=1,this._TICK_WIDTH=1,this._TICK_HEIGHT=4,this._TICK_OVERLAP=1,this._TICK_LABEL_DISTANCE=4,this._minorGrid=!1,this._labels=!0,this._isTimeAxis=!1,this._labelPadding=5,this.rangeChanged=new a.Event,this._customConvert=null,this._customConvertBack=null,this.__uniqueId=t._id++,this._position=e,this._axisType=e==g.Bottom||e==g.Top?P.X:P.Y,this._minorTickMarks=I.None,this._overlap=E.Auto}return Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){t!=this._min&&(this._min=Object(a.isDate)(t)?Object(a.asDate)(t,!0):Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){t!=this._max&&(this._max=Object(a.isDate)(t)?Object(a.asDate)(t,!0):Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(t){this._reversed!=t&&(this._reversed=Object(a.asBoolean)(t),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=Object(a.asEnum)(t,g,!1))!=this._position&&(this._position=t,this._position==g.Bottom||this._position==g.Top?this._axisType=P.X:this._position!=g.Left&&this._position!=g.Right||(this._axisType=P.Y),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(t){t!=this._majorUnit&&(this._majorUnit=Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(t){t!=this._minorUnit&&(this._minorUnit=Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=Object(a.asString)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=Object(a.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=Object(a.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(t){t!=this._majorGrid&&(this._majorGrid=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(t){(t=Object(a.asEnum)(t,I,!0))!=this._majorTickMarks&&(this._majorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(t){t!=this._minorGrid&&(this._minorGrid=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(t){(t=Object(a.asEnum)(t,I,!0))!=this._minorTickMarks&&(this._minorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisLine",{get:function(){return void 0===this._axisLine?this.axisType==P.X:this._axisLine},set:function(t){t!=this._axisLine&&(this._axisLine=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(t){t!=this._labelAlign&&(this._labelAlign=Object(a.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(t){t!=this._labelAngle&&(this._labelAngle=Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=Object(a.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(t){(t=Object(a.asEnum)(t,E,!0))!=this._overlap&&(this._overlap=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=Object(a.asCollectionView)(t),null!=this._cv&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=Object(a.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){this._ifmt!=t&&(this._ifmt=Object(a.asFunction)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logBase",{get:function(){return this._logBase},set:function(t){t!=this._logBase&&(this._logBase=Object(a.asNumber)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._getLogBase=function(){return this._chart&&this._chart._stacking===et.Stacked100pc?0:this.logBase},t.prototype._isLogAxis=function(){var t=this._getLogBase();return null!=t&&t>0},Object.defineProperty(t.prototype,"plotArea",{get:function(){return this._parea},set:function(t){t!=this._parea&&(this._parea=Object(a.asType)(t,d,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(t){t!=this._labelPadding&&(this._labelPadding=Object(a.asNumber)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_groupClass",{get:function(){return this.axisType===P.X?ft._CSS_AXIS_X:ft._CSS_AXIS_Y},enumerable:!0,configurable:!0}),t.prototype.onRangeChanged=function(t){this.rangeChanged.raise(this,t)},t.prototype._getPosition=function(){if(this.axisType==P.X){if(this.position==g.Auto)return g.Bottom}else if(this.axisType==P.Y&&this.position==g.Auto)return g.Left;return this.position},t.prototype._isOverlapped=function(t,e,i,n){var r=this._lbls;if(null!=r&&r.length>1)for(var o=r.length,a=this._values&&this._values.length==o?this._values:null,s=0,l=0,h=0;h<o;h++){var c=a?a[h]:h;if(c>=this._actualMin&&c<=this._actualMax){var u=e*(c-this._actualMin)/(this._actualMax-this._actualMin),d=t.measureString(r[h],i,this._groupClass);if(this.axisType==P.X){if(h>0&&Math.abs(u-s)<Math.max(d.width,l)+12)return!0;s=u,l=d.width}}}return!1},t.prototype._getHeight=function(t,e){this._actualAngle=null;var i=ft._CSS_LABEL,n=ft._CSS_TITLE,r=this._actualMax-this._actualMin,o=this._nicePrecision(r);(o<0||o>15)&&(o=0);var s=.1*r,l=this._lbls,h=this.labelAngle;if(this.labels&&this._chart._getChartType()!==tt.Funnel){if(s=this._updateAutoFormat(s),null!=l&&l.length>0){var c=l.length,u=this._values&&this._values.length==c?this._values:null;this._annoSize=new a.Size;for(var d=0;d<c;d++)if((_=u?u[d]:d)>=this._actualMin&&_<=this._actualMax){var p=l[d],f=i;this.itemFormatter&&(p=(g=this._getFormattedItem(t,_,p,new a.Point,i,!0)).text,f=g.cls);var m=t.measureString(p,f,this._groupClass);m.width>this._annoSize.width&&(this._annoSize.width=m.width),m.height>this._annoSize.height&&(this._annoSize.height=m.height)}null==h&&this.axisType==P.X&&(this._isOverlapped(t,e,i,this.axisType)?h=this._actualAngle=-45:this._actualAngle=0)}else{var g,_=this._actualMin-s;p=this._formatValue(_),f=i,this.itemFormatter&&(p=(g=this._getFormattedItem(t,_,p,new a.Point,i,!0)).text,f=i),m=t.measureString(p,f,this._groupClass),this._annoSize=m,p=this._formatValue(_=this._actualMax+s),f=i,this.itemFormatter&&(p=(g=this._getFormattedItem(t,_,p,new a.Point,i,!0)).text,f=i),(m=t.measureString(p,f,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=m.width),m.height>this._annoSize.height&&(this._annoSize.height=m.height)}if(h){h>90?h=90:h<-90&&(h=-90);var y=h*Math.PI/180,b=this._annoSize.width,v=this._annoSize.height;this._annoSize.width=b*Math.abs(Math.cos(y))+v*Math.abs(Math.sin(y)),this._annoSize.height=b*Math.abs(Math.sin(y))+v*Math.abs(Math.cos(y))}}else this._annoSize=new a.Size;var x=2*(this._labelPadding||5);x+=this._axisType==P.X?this._annoSize.height:this._annoSize.width+this._TICK_LABEL_DISTANCE+2;var w=this._TICK_OVERLAP,S=this.majorTickMarks;return S==I.Outside?w=1:S==I.Inside?w=-1:S==I.Cross&&(w=0),null==S&&(S=I.Outside),S!=I.None&&(x+=.5*(1+w)*this._TICK_HEIGHT),this._title&&(this._szTitle=t.measureString(p=this._title,n,this._groupClass),x+=this._szTitle.height),t.fontSize=null,x},t.prototype._updateAutoFormat=function(t){if(this._isTimeAxis){var e=this.format,i=.001*this._getActualRange()/10,n=new W(i*W.TicksPerSecond),r=Object(a.isNumber)(this._majorUnit)?W.fromDays(this._majorUnit):H.NiceTimeSpan(n,e);e||(this._tfmt=H.GetTimeDefaultFormat(1e3*r.TotalSeconds,0)),t=r.TotalSeconds}return t},t.prototype._getActualRange=function(){return this._actualMax-this._actualMin},t.prototype._updateActualLimitsByChartType=function(t,e,i){if(t&&t.length>0&&!this._isTimeAxis){var n=this._chart._getChartType();n!=tt.Column&&n!=tt.Bar&&(e-=.5,i+=.5)}return{min:e,max:i}},t.prototype._updateActualLimits=function(t,e,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var o=this._actualMin,s=this._actualMax;this._isTimeAxis=t==a.DataType.Date;var l=this._updateActualLimitsByChartType(n,e,i);e=l.min,i=l.max;var h=this._min,c=this._max;Object(a.isDate)(h)&&(h=h.valueOf()),Object(a.isDate)(c)&&(c=c.valueOf());var u=this._chart&&this._chart._stacking!==et.Stacked100pc;if(u||(u=this._chart._isRotated()?this.axisType==P.Y:this.axisType==P.X),this._actualMin=null!=h&&u?h:e,this._actualMax=null!=c&&u?c:i,this._actualMin==this._actualMax&&(void 0!==h&&void 0===c?this._actualMax+=1:void 0===h&&void 0!==c?this._actualMin-=1:(this._actualMin-=.5,this._actualMax+=.5)),this._getLogBase()>0){var d=this.logBase,p=Math.log(d);if(!this._max){var f=Math.ceil(Math.log(this._actualMax)/p);this._actualMax=Math.pow(d,f)}if(!this._min){var m=Math.floor(Math.log(this._actualMin)/p);this._actualMin=Math.pow(d,m)}(this._actualMin<=0||!Object(a.isNumber)(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)}if((o!=this._actualMin&&(Object(a.isNumber)(o)||Object(a.isNumber)(this._actualMin))||s!=this._actualMax&&(Object(a.isNumber)(s)||Object(a.isNumber)(this._actualMax)))&&this.onRangeChanged(),this._items){this._values=[],this._lbls=[];var g=this._items.length,_="value",y="text";if(this.binding){var b=this.binding.split(",");2==b.length&&(_=b[0],y=b[1])}for(var v=0;v<g;v++){var x=this._items[v],w=x[_];Object(a.isNumber)(w)?(this._values.push(w),this._lbls.push(x[y])):Object(a.isDate)(w)&&(this._values.push(w.getTime()),this._lbls.push(x[y]))}}else this._lbls=n,this._values=r},t.prototype._layout=function(t,e){var i=this.axisType==P.Y;this._plotrect=e,this._axrect=i?new a.Rect(t.left,t.top,t.height,t.width):t},t.prototype._hasVisibileSeries=function(){for(var t,e=this._chart.series,i=0,n=e.length;i<n;i++)if((t=e[i].visibility)==Z.Plot||t==Z.Visible)return!0;return!1},t.prototype._render=function(e){if(this.position!=g.None&&this._hasVisibileSeries()){this._vals={};var i=0;this.labelAngle&&((i=this.labelAngle)>90?i=90:i<-90&&(i=-90)),null==this.labelAngle&&null!=this._actualAngle&&(i=this._actualAngle);var n=ft._FG,r=this._actualMax-this._actualMin;if(Object(a.isNumber)(r)){var o=this._calcMajorUnit();0==o&&(o=.1*this._niceTickNumber(r));var s=Math.min(t.MAX_MAJOR,Math.floor(r/o)+1),l=[],h=[];this._rects=[],this._vals.major=l,this._vals.hasLbls=[];var c=Math.floor(this._actualMin/o)*o;c<this._actualMin&&(c+=o);var u=!1;if(this._lbls&&this._lbls.length>0)if(h=this._lbls,0==this._values.length){u=!0;for(var d=0;d<h.length;d++)l.push(d)}else l=this._values;else this._isTimeAxis?this._createTimeLabels(c,s,l,h):this._getLogBase()?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,l,h,!0):this._createLabels(c,s,o,l,h);s=Math.min(l.length,h.length),e.textFill=n;var p=this._TICK_HEIGHT,f=this._TICK_OVERLAP,m=this.majorTickMarks;null==m&&(m=I.Outside),m==I.Outside?f=1:m==I.Inside?f=-1:m==I.Cross&&(f=0);var _=.5*(f-1)*p,y=.5*(1+f)*p;for(d=0;d<s;d++){var b=!0,v=l[d],x=this.labels;if(x&&(u||this.itemsSource)&&this.majorUnit&&d%this.majorUnit!=0&&(x=!1),v>=this._actualMin&&v<=this._actualMax){var w=e.textFill;b=this._renderLabelsAndTicks(e,d,v,h[d],i,m,x,_,y),e.textFill=w}this._vals.hasLbls.push(b)}}(this.minorGrid||this.minorTickMarks!=I.None)&&this._renderMinor(e,l,u),e.stroke=n,e.fontSize=null,this._renderLineAndTitle(e),e.stroke=null,e.fontSize=null,e.textFill=null,e.strokeWidth=null}},t.prototype._renderLineAndTitle=function(t){var e=this._getPosition(),i=e!=g.Top&&e!=g.Right,n=ft._CSS_TITLE,r=ft._CSS_LINE;if(this.axisType==P.Y)if(i){if(this._title){var o=new a.Point(this._axrect.left+.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);ft._renderRotatedText(t,this._title,o,1,1,o,-90,n,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,r)}else this._title&&(o=new a.Point(this._axrect.right-.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height),ft._renderRotatedText(t,this._title,o,1,1,o,90,n,this._groupClass)),this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,r);else i?(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,r),this._title&&ft._renderText(t,this._title,new a.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,n)):(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,r),this._title&&ft._renderText(t,this._title,new a.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,n))},t.prototype._renderMinor=function(t,e,i){var n=this._getPosition(),r=this.axisType==P.Y,o=n!=g.Top&&n!=g.Right;if(this._getLogBase()){if(this.minorUnit>0){var a=[];this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,a,null,!1);for(var s=[],l=0;l<a.length;l++){var h=a[l];-1==e.indexOf(h)&&h>this._actualMin&&s.push(h)}this._renderMinors(t,s,r,o)}}else this._createMinors(t,e,r,o,i)},t.prototype._renderRotatedText=function(t,e,i,n,r,o,a,s,l,h,c){if(this.itemFormatter){var u=this._getFormattedItem(t,e,i,n,l);u?(i=u.text,l=u.cls):i=null}ft._renderRotatedText(t,i,n,r,o,a,s,l,h,c)},t.prototype._getFormattedItem=function(t,e,i,n,r,o){if(void 0===o&&(o=!1),this.itemFormatter){var a=n.clone();this._plotrect&&(this.axisType==P.X?a.y=this.position==g.Top?this._plotrect.top:this._plotrect.bottom:a.x=this.position==g.Right?this._plotrect.right:this._plotrect.left);var s={val:e,text:i,pos:a,cls:r};return o&&(t.readOnly=!0),s=this.itemFormatter(t,s),o&&(t.readOnly=!1),s}},t.prototype._renderLabelsAndTicks=function(t,e,i,n,r,o,s,l,h){var c=this._getPosition(),u=!1,d=this.axisType==P.Y,p=c!=g.Top&&c!=g.Right,f=this.labelPadding||5,m=this._TICK_WIDTH,_=this._getLabelAlign(d),y=ft._CSS_LABEL,b=ft._CSS_GRIDLINE,v=ft._CSS_TICK,x=ft._FG,w=ft._FG,S=this._GRIDLINE_WIDTH,C=i!=this._actualMin&&this.majorGrid;if(d){var O=this.convert(i);if(C&&(t.stroke=x,t.strokeWidth=S,t.drawLine(this._plotrect.left,O,this._plotrect.right,O,b)),t.stroke=w,t.strokeWidth=m,p){if(s){u=!0;var j=new a.Point(this._axrect.right-h-this._TICK_LABEL_DISTANCE-f,O);r>0?90==r?this._renderRotatedText(t,i,n,j,1,0,j,r,y,this._groupClass):this._renderRotatedText(t,i,n,j,2,1,j,r,y,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,j,1,2,j,r,y,this._groupClass):this._renderRotatedText(t,i,n,j,2,1,j,r,y,this._groupClass):u=this._renderLabel(t,i,n,j,2,_,y)}o!=I.None&&u&&t.drawLine(this._axrect.right-l,O,this._axrect.right-h,O,v)}else s&&(u=!0,j=new a.Point(this._axrect.left+h+this._TICK_LABEL_DISTANCE+f,O),r>0?90==r?this._renderRotatedText(t,i,n,j,1,2,j,r,y,this._groupClass):this._renderRotatedText(t,i,n,j,0,1,j,r,y,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,j,1,0,j,r,y,this._groupClass):this._renderRotatedText(t,i,n,j,0,1,j,r,y,this._groupClass):u=this._renderLabel(t,i,n,j,0,_,y)),o!=I.None&&u&&t.drawLine(this._axrect.left+l,O,this._axrect.left+h,O,v)}else{var T=this.convert(i);this.overlappingLabels==E.Auto&&this._xCross(T)&&(s=!1),C&&s&&(t.stroke=x,t.strokeWidth=S,t.drawLine(T,this._plotrect.top,T,this._plotrect.bottom,b)),t.stroke=w,t.strokeWidth=m,p?(s&&(j=new a.Point(T,this._axrect.top+h+f),u=0!=r?this._renderRotatedLabel(t,i,n,j,_,r,y,p):this._renderLabel(t,i,n,j,_,0,y)),o!=I.None&&u&&(T=this.convert(i),t.drawLine(T,this._axrect.top+l,T,this._axrect.top+h,v))):(s&&(j=new a.Point(T,this._axrect.bottom-h-f),u=0!=r?this._renderRotatedLabel(t,i,n,j,_,r,y,p):this._renderLabel(t,i,n,j,_,2,y)),o!=I.None&&u&&(T=this.convert(i),t.drawLine(T,this._axrect.bottom-l,T,this._axrect.bottom-h,v)))}return u},t.prototype._xCross=function(t){for(var e=this._rects.length,i=0;i<e;i++){var n=this._rects[i];if(t>=n.left&&t<=n.right)return!0}return!1},t.prototype._createMinors=function(e,i,n,r,o){if(i&&i.length>1){for(var s=this.majorUnit?this._isTimeAxis?24*this.majorUnit*3600*1e3:this.majorUnit:i[1]-i[0],l=Object(a.isNumber)(this.minorUnit)?this._isTimeAxis?24*this.minorUnit*3600*1e3:this.minorUnit:.5*s,h=[],c=i[0];c>this._actualMin&&h.length<t.MAX_MINOR;c-=l)-1==i.indexOf(c)&&h.push(c);for(c=i[0]+l;c<this._actualMax&&h.length<t.MAX_MINOR;c+=l)-1==i.indexOf(c)?h.push(c):o&&this.majorUnit&&c%this.majorUnit!=0&&h.push(c);this._renderMinors(e,h,n,r)}},t.prototype._renderMinors=function(t,e,i,n){var r=this._TICK_HEIGHT,o=this._TICK_WIDTH,a=this._TICK_OVERLAP,s=ft._FG,l=this.minorTickMarks,h=!0;this._vals.minor=e,l==I.Outside?a=1:l==I.Inside?a=-1:l==I.Cross?a=0:h=!1;for(var c=.5*(a-1)*r,u=.5*(1+a)*r,d=e?e.length:0,p=this.minorGrid,f=this._plotrect,m=this._GRIDLINE_WIDTH,g=ft._FG,_=ft._CSS_GRIDLINE_MINOR,y=ft._CSS_TICK_MINOR,b=0;b<d;b++)if(e[b]>=this.actualMin&&e[b]<=this.actualMax)if(i){var v=this.convert(e[b]);h&&(t.stroke=s,t.strokeWidth=o,n?t.drawLine(this._axrect.right-c,v,this._axrect.right-u,v,y):t.drawLine(this._axrect.left+c,v,this._axrect.left+u,v,y)),p&&(t.stroke=g,t.strokeWidth=m,t.drawLine(f.left,v,f.right,v,_))}else{var x=this.convert(e[b]);h&&(t.stroke=s,t.strokeWidth=o,n?t.drawLine(x,this._axrect.top+c,x,this._axrect.top+u,y):t.drawLine(x,this._axrect.bottom-c,x,this._axrect.bottom-u,y)),p&&(t.stroke=g,t.strokeWidth=m,t.drawLine(x,f.top,x,f.bottom,_))}},t.prototype._renderLabel=function(t,e,i,n,r,o,s){var l=!1;if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,s);h?(i=h.text,s=h.cls):i=null}if(i){var c=this._rects,u=this.overlappingLabels==E.Auto&&!Object(a.isNumber)(this._actualAngle),d=ft._renderText(t,i,n,r,o,s,this._groupClass,null,(function(t){if(u)for(var e=c.length,i=0;i<e;i++)if(ft._intersects(c[i],t))return!1;return!0}));d&&(d.left+=4,d.width+=8,c.push(d),l=!0)}return l},t.prototype._renderRotatedLabel=function(t,e,i,n,r,o,s,l){if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,s);h?(i=h.text,s=h.cls):i=null}if(i){var c=t.measureString(i,s,this._groupClass),u=.5*c.height,d=.5*c.width*Math.abs(Math.sin(o*Math.PI/180)),p=.5*c.width,f=.5*(c.width*Math.abs(Math.cos(o*Math.PI/180))+c.height*Math.abs(Math.sin(o*Math.PI/180))),m=new a.Point(n.x,n.y),g=new a.Point(n.x,n.y);this.labelAlign||(r=90==o||-90==o?1:l?o>0?0:2:o>0?2:0),l?(n.y+=u+d,m.y+=u+d-.5*c.height):(n.y-=u+d-c.height,m.y-=u+d-.5*c.height);var _=0;2===r?(m.x-=f,n.x-=p+f,_=m.x+f-c.height-2):0===r?(m.x+=f,n.x-=p-f,_=m.x-f):(n.x-=p,_=m.x-c.height/2);var y=new a.Rect(_,g.y,c.height+2,c.width),b=this._rects;if(this.overlappingLabels==E.Auto)for(var v=b.length,x=0;x<v;x++)if(ft._intersects(b[x],y))return!1;return ft._renderRotatedText(t,i,n,0,2,m,o,s,this._groupClass),this._rects.push(y),!0}return!1},t.prototype._getLabelAlign=function(t){var e=1;if(this.labelAlign){var i=this.labelAlign.toLowerCase();t?"top"==i?e=0:"bottom"==i&&(e=2):"left"==i?e=0:"right"==i&&(e=2)}return e},t.prototype.convert=function(t,e,i){var n=null==e?this._actualMax:e,r=null==i?this._actualMin:i;if(n==r||!this._axrect)return 0;var o=this._axrect.left,a=this._axrect.width,s=this._axrect.top,l=this._axrect.height;if(null!=this._customConvert){var h=this._customConvert(t,r,n);return this.axisType==P.Y?s+h*l:o+h*a}if(this._getLogBase()){if(t<=0)return NaN;var c=Math.log(n/r);return this._reversed?this.axisType==P.Y?s+Math.log(t/r)/c*l:o+a-Math.log(t/r)/c*a:this.axisType==P.Y?s+l-Math.log(t/r)/c*l:o+Math.log(t/r)/c*a}return this._reversed?this.axisType==P.Y?s+(t-r)/(n-r)*l:o+a-(t-r)/(n-r)*a:this.axisType==P.Y?s+l-(t-r)/(n-r)*l:o+(t-r)/(n-r)*a},t.prototype.convertBack=function(t){if(this._actualMax==this._actualMin)return 0;var e,i=this._plotrect.left,n=this._plotrect.width,r=this._plotrect.top,o=this._plotrect.height,a=this._actualMax-this._actualMin,s=this._getLogBase();return null!=this._customConvertBack?this._customConvertBack(this.axisType==P.Y?(t-r)/o:(t-i)/n,this._actualMin,this._actualMax):s?(e=this._reversed?this.axisType==P.Y?(t-r)/o:1-(t-i)/n:this.axisType==P.Y?1-(t-r)/o:(t-i)/n,Math.pow(s,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*e)/Math.log(s))):this._reversed?this.axisType==P.Y?this._actualMin+(t-r)*a/o:this._actualMin+(i+n-t)*a/n:this.axisType==P.Y?this._actualMax-(t-r)*a/o:this._actualMin+(t-i)*a/n},Object.defineProperty(t.prototype,"axisType",{get:function(){var t=this._chart;if(t){if(t.axisX==this)return P.X;if(t.axisY==this)return P.Y}return this._axisType},enumerable:!0,configurable:!0}),t.prototype._getMinNum=function(){return this._actualMin},t.prototype._getMaxNum=function(){return this._actualMax},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._cvCollectionChanged=function(t,e){this._invalidate()},t.prototype._createLabels=function(t,e,i,n,r){for(var o=0;o<e;o++){var a=(t+i*o).toFixed(14),s=parseFloat(a),l=this._formatValue(s);n.push(s),r.push(l)}},t.prototype._createLogarithmicLabels=function(t,e,i,n,r,o){var a=this._getLogBase(),s=Math.log(a),l=Math.floor(Math.log(t)/s),h=Math.ceil(Math.log(e)/s),c=a,u=!0;i>0&&(u=!1,c=i),c<a&&(c=a);var d=(h-l+1)*a/c,p=1;if(o){var f=this._getPosition(),m=this._getAnnoNumber(f==g.Left||f==g.Right);d>m?p=Math.floor(d/m+1):u&&(d<=.2*m?c=.2*a:d<=.1*m&&(c=.1*a))}for(var _=l;_<=h;_+=p)if(u)for(var y=Math.pow(a,_),b=0;b*c<a-1;b++)(v=y*(1+b*c))>=t&&v<=e&&(0==b?(n.unshift(v),r&&r.unshift(this._formatValue(v))):(n.push(v),r&&r.push(this._formatValue(v))));else{var v;(v=Math.pow(c,_))>=t&&v<=e&&(n.push(v),r&&r.push(this._formatValue(v)))}},t.prototype._createTimeLabels=function(t,e,i,n){var r=this._actualMin,o=this._actualMax,s=new Date(r),l=new Date(o),h=this._format,c=this._getAnnoNumber(this._axisType==P.Y);c>12&&(c=12);var u=new W(.001*(this._actualMax-this._actualMin)/c*W.TicksPerSecond),d=Object(a.isNumber)(this._majorUnit)?W.fromDays(this._majorUnit):H.NiceTimeSpan(u,h);h||(this._tfmt=h=H.GetTimeDefaultFormat(1e3*d.TotalSeconds,0));var p=d.Ticks,f=H.RoundTime(r,d.TotalDays,!1);isFinite(f)&&(r=f);var m=H.RoundTime(o,d.TotalDays,!0);isFinite(m)&&(o=m);var g=new Date(r);if(new Date(o),d.TotalDays>=365&&!Object(a.isNumber)(this._majorUnit)){(g=new Date(s.getFullYear(),1,1))<s&&g.setFullYear(g.getFullYear()+1);var _=d.TotalDays/365;_-=_%1;for(var y=g;y<=l&&_;y.setFullYear(y.getFullYear()+_)){var b=y.valueOf();i.push(b),n.push(this._formatValue(b))}}else if(d.TotalDays>=30&&!Object(a.isNumber)(this._majorUnit)){(g=new Date(s.getFullYear(),s.getMonth(),1))<s&&g.setMonth(g.getMonth()+1);var v=d.TotalDays/30;for(v-=v%1,y=g;y<=l;y.setMonth(y.getMonth()+v))b=y.valueOf(),i.push(b),n.push(this._formatValue(b))}else{var x=1e3*p/W.TicksPerSecond,w=(y=g,s.getTime()-y.getTime());for(w>x&&(y=new Date(y.getTime()+Math.floor(w/x)*x));y<=l&&x;y=new Date(y.getTime()+x))y>=s&&(b=y.valueOf(),i.push(b),n.push(this._formatValue(b)))}},t.prototype._formatValue=function(t){if(this._isTimeAxis)return a.Globalize.format(new Date(t),this._format?this._format:this._tfmt);if(this._format)return a.Globalize.format(t,this._format);var e=t==Math.round(t)?"n0":"n";return a.Globalize.format(t,e)},t.prototype._calcMajorUnit=function(){var t=this._majorUnit;if(!Object(a.isNumber)(t)){var e=this._actualMax-this._actualMin,i=this._nicePrecision(e),n=e/this._getAnnoNumber(this.axisType==P.Y);(t=this._niceNumber(2*n,-i,!0))<n&&(t=this._niceNumber(n,1-i,!1)),t<n&&(t=this._niceTickNumber(n))}return t},t.prototype._getAnnoNumber=function(t){var e=t?this._annoSize.height:this._annoSize.width,i=t?this._axrect.height:this._axrect.width;if(e>0&&i>0){var n=Math.floor(i/(e+6));return n<=0&&(n=1),n}return 10},t.prototype._nicePrecision=function(t){if(!Object(a.isNumber)(t)||t<=0)return 0;var e,i=Math.log(t)/Math.LN10;e=i>=0?Math.floor(i):Math.ceil(i);var n=t/Math.pow(10,e);return n<3&&(e=1-e,(n=t/Math.pow(10,e))<3&&(e+=1)),e},t.prototype._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),n=t/Math.pow(10,i),r=10;return n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,i)},t.prototype._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var n=t/Math.pow(10,e),r=10;return i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,e)},Object.defineProperty(t.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),t.MAX_MAJOR=1e3,t.MAX_MINOR=2e3,t._id=0,t}(),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.getAxis=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e}(a.ObservableArray);!function(t){t[t.tickf7=-7]="tickf7",t[t.tickf6=-6]="tickf6",t[t.tickf5=-5]="tickf5",t[t.tickf4=-4]="tickf4",t[t.tickf3=-3]="tickf3",t[t.tickf2=-2]="tickf2",t[t.tickf1=-1]="tickf1",t[t.second=1]="second",t[t.minute=60]="minute",t[t.hour=3600]="hour",t[t.day=86400]="day",t[t.week=604800]="week",t[t.month=2678400]="month",t[t.year=31536e3]="year",t[t.maxtime=Number.MAX_VALUE]="maxtime"}(R||(R={}));var z,W=function(){function t(t){this.ticks=t}return Object.defineProperty(t.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalDays",{get:function(){return this.ticks/1e7/86400},enumerable:!0,configurable:!0}),t.fromSeconds=function(e){return new t(1e7*e)},t.fromDays=function(e){return new t(1e7*e*24*60*60)},t.TicksPerSecond=1e7,t}(),H=function(){function t(t){Object(a.isDate)(t)?this.init(t):Object(a.isNumber)(t)&&this.init(ft._fromOADate(t))}return t.prototype.init=function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds()},t.prototype.getTimeAsDateTime=function(){return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?this.month=1:this.month>11&&(this.month=12),this.day<1?this.day=1:this.day>28&&2==this.month?this.day=28:this.day>30&&(4==this.month||4==this.month||6==this.month||9==this.month||11==this.month)?this.day=30:this.day>31&&(this.day=31),this.second>59&&(this.second=59),this.minute>59&&(this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},t.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},t.tround=function(t,e,i){var n=t/e*e;return n-=n%1,i&&n!=t&&(n+=e-=e%1),n},t.RoundTime=function(e,i,n){var r=24*i*60*60;if(r>0){var o=new t(e);return r<R.minute?(o.second=this.tround(o.second,r,n),o.getTimeAsDouble()):(o.second=0,r<R.hour?(o.minute=this.tround(o.minute,r/=R.minute,n),o.getTimeAsDouble()):(o.minute=0,r<R.day?(o.hour=this.tround(o.hour,r/=R.hour,n),o.getTimeAsDouble()):(o.hour=0,r<R.month?(o.day=this.tround(o.day,r/=R.day,n),o.getTimeAsDouble()):(o.day=1,r<R.year?(r/=R.month,1!=o.month&&(o.month=this.tround(o.month,r,n)),o.getTimeAsDouble()):(o.month=1,o.year=this.tround(o.year,r/=R.year,n),o.getTimeAsDouble())))))}var a=e-r,s=a/i*i;return n&&s!=a&&(s+=i),r+s},t.TimeSpanFromTmInc=function(t){var e=W.fromSeconds(1);if(t!=R.maxtime)if(t>R.tickf1)e=W.fromSeconds(t);else{var i=t,n=1;for(i+=7;i>0;)n*=10,i--;e=new W(n)}return e},t.manualTimeInc=function(t){var e=R.second;if(null==t||0==t.length)return e;var i=t.indexOf("f");if(i>=0){var n=-1;if(i>0&&"%"==t.substr(i-1,1))n=-1;else for(var r=1;r<6&&!(i+r>=t.length)&&"f"==t.substr(i+r,1);r++)n--;e=n}else t.indexOf("s")>=0?e=R.second:t.indexOf("m")>=0?e=R.minute:t.indexOf("h")>=0||t.indexOf("H")?e=R.hour:t.indexOf("d")>=0?e=R.day:t.indexOf("M")>=0?e=R.month:t.indexOf("y")>=0&&(e=R.year);return e},t.getNiceInc=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n]*i;if(e<=r)return r}return 0},t.NiceTimeSpan=function(e,i){var n=R.second;null!=i&&i.length>0&&(n=t.manualTimeInc(i));var r=0,o=0;if(n<R.second&&e.TotalSeconds<10){for(r=e.Ticks,o=t.TimeSpanFromTmInc(n).Ticks;r>10*o;)o*=10;var a=o;return r>a&&(a*=2),r>a&&(a=5*o),r>a&&(a=10*o),new W(a)}if(0==(r=Math.ceil(e.TotalSeconds)))return t.TimeSpanFromTmInc(n);if(o=1,n<R.minute){if(r<R.minute&&0!=(o=t.getNiceInc([1,2,5,10,15,30],r,n)))return W.fromSeconds(o);n=R.minute}if(n<R.hour){if(r<R.hour&&0!=(o=t.getNiceInc([1,2,5,10,15,30],r,n)))return W.fromSeconds(o);n=R.hour}if(n<R.day){if(r<R.day&&0!=(o=t.getNiceInc([1,3,6,12],r,n)))return W.fromSeconds(o);n=R.day}if(n<R.month){if(r<R.month&&0!=(o=t.getNiceInc([1,2,7,14],r,n)))return W.fromSeconds(o);n=R.month}if(n<R.year){if(r<R.year&&0!=(o=t.getNiceInc([1,2,3,4,6],r,n)))return W.fromSeconds(o);n=R.year}return r<(o=100*R.year)&&0==(o=t.getNiceInc([1,2,5,10,20,50],r,n))&&(o=100*R.year),W.fromSeconds(o)},t.NiceTimeUnit=function(e,i){var n=W.fromDays(e);return(n=t.NiceTimeSpan(n,i)).TotalDays},t.GetTimeDefaultFormat=function(t,e){if(!Object(a.isNumber)(t)||!Object(a.isNumber)(e))return"";var i="s",n=W.fromSeconds(.001*(t-e)),r=n.TotalSeconds;if(r>=R.year)i="yyyy";else if(r>=R.month)i="MMM yyyy";else if(r>=R.day)i="MMM d";else if(r>=R.hour)i="ddd H:mm";else if(r>=.5*R.hour)i="H:mm";else if(r>=1)i="H:mm:ss";else if(r>0){var o=n.Ticks;for(i="s.";o<W.TicksPerSecond;)o*=10,i+="f"}return i},t.secInYear=86400,t}(),G=function(){function t(t,e,i,n){this._seriesIndex=t,this._pointIndex=e,this._dataX=i,this._dataY=n}return Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataX",{get:function(){return this._dataX},set:function(t){t!==this._dataX&&(this._dataX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataY",{get:function(){return this._dataY},set:function(t){t!==this._dataY&&(this._dataY=t)},enumerable:!0,configurable:!0}),t}();!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.XY=2]="XY"}(z||(z={}));var X,Y=function(){function t(t){this._rect=t}return Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._rect;return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},t.prototype.pointDistance=function(t,e,i){var n=e.x-t.x,r=e.y-t.y;return i==z.X?Math.abs(n):i==z.Y?Math.abs(r):Math.sqrt(n*n+r*r)},t.prototype.distance=function(t){var e=z.XY;null===t.x?e=z.Y:null===t.y&&(e=z.X);var i=this._rect;return t.x<i.left?t.y<i.top?this.pointDistance(t,new a.Point(i.left,i.top),e):t.y>i.bottom?this.pointDistance(t,new a.Point(i.left,i.bottom),e):e==z.Y?0:i.left-t.x:t.x>i.right?t.y<i.top?this.pointDistance(t,new a.Point(i.right,i.top),e):t.y>i.bottom?this.pointDistance(t,new a.Point(i.right,i.bottom),e):e==z.Y?0:t.x-i.right:e==z.X?0:t.y<i.top?i.top-t.y:t.y>i.bottom?t.y-i.bottom:0},t}(),U=function(){function t(t,e){this._center=t,this.setRadius(e)}return t.prototype.setRadius=function(t){this._rad=t,this._rad2=t*t},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._center.x-t.x,i=this._center.y-t.y;return e*e+i*i<=this._rad2},t.prototype.distance=function(t){var e=isNaN(t.x)?0:this._center.x-t.x,i=isNaN(t.y)?0:this._center.y-t.y,n=e*e+i*i;return n<=this._rad2?0:Math.sqrt(n)-this._rad},t}(),q=function(){function t(t,e){this._x=[],this._y=[],this._x=t,this._y=e}return t.prototype.contains=function(t){return!1},t.prototype.distance=function(t){for(var e=NaN,i=0;i<this._x.length-1;i++){var n=ft._dist(t,new a.Point(this._x[i],this._y[i]),new a.Point(this._x[i+1],this._y[i+1]));(isNaN(e)||n<e)&&(e=n)}return e},t}(),$=function(){},K=function(){function t(t){this._map={},this._chart=t}return t.prototype.add=function(t,e){this._map[e]&&(t.tag||(t.tag=new G(e,NaN,NaN,NaN)),this._map[e].push(t))},t.prototype.clear=function(){this._map={};for(var t=this._chart.series,e=0;e<t.length;e++)t[e].hitTest===ot.prototype.hitTest&&(this._map[e]=new Array)},t.prototype.hitTest=function(t,e){void 0===e&&(e=!1);for(var i=null,n=Number.MAX_VALUE,r=this._chart.series.length-1;r>=0;r--){var o=this._map[r];if(o){for(var s=o.length-1;s>=0;s--){var l=o[s];if(!Object(a.tryCast)(l,q)||e){var h=l.distance(t);if(h<n&&(i=l,0==(n=h)))break}}if(0==n)break}}if(i){var c=new $;return c.area=i,c.distance=n,c}return null},t.prototype.hitTestSeries=function(t,e){var i=null,n=Number.MAX_VALUE,r=this._map[e];if(r)for(var o=r.length-1;o>=0;o--){var a=r[o],s=a.distance(t);if(s<n&&(i=a,0==(n=s)))break}if(i){var l=new $;return l.area=i,l.distance=n,l}return null},t}();!function(t){t[t.PlotArea=0]="PlotArea",t[t.AxisX=1]="AxisX",t[t.AxisY=2]="AxisY",t[t.ChartArea=3]="ChartArea",t[t.Legend=4]="Legend",t[t.Header=5]="Header",t[t.Footer=6]="Footer",t[t.Series=7]="Series",t[t.SeriesSymbol=8]="SeriesSymbol",t[t.DataLabel=9]="DataLabel",t[t.None=10]="None"}(X||(X={}));var Z,Q,J=function(){function t(t,e,i){this._pointIndex=null,this._chartElement=X.None,this._chart=t,this._pt=e,this._chartElement=i}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){if(null==this._item&&null!==this.pointIndex)if(null!=this.series)this._item=this.series._getItem(this.pointIndex);else{var t=this._chart._getHitTestItem(this.pointIndex);t&&(this._item=t)}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return void 0===this._x&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return void 0===this._y&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this._chart._getHitTestValue(this.pointIndex,this._groupIndex);return null!=t?t:this.series&&null!=this.series._getValue?this.series._getValue(this.pointIndex):this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){if(void 0===this._name){var t=this._chart._getHitTestLabel(this.pointIndex);return null==t?this.series.name:t.toString()}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupIndex",{get:function(){return this._groupIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_xfmt",{get:function(){return void 0===this.__xfmt&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_yfmt",{get:function(){return void 0===this.__yfmt&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),t.prototype._setData=function(t,e){this._series=t,this._pointIndex=e},t.prototype._setDataGroup=function(t,e){this._groupIndex=t,this._pointIndex=e},t.prototype._setDataPoint=function(t){if(t=Object(a.asType)(t,G,!0)){this._pointIndex=t.pointIndex;var e=Object(a.asType)(this._chart,ft,!0),i=t.seriesIndex;null!==i&&i>=0&&i<e.series.length&&(this._series=e.series[i]),null!=t.item&&(this._item=t.item),null!=t.x&&(this._x=t.x),null!=t.y&&(this._y=t.y),null!=t.xfmt&&(this.__xfmt=t.xfmt),null!=t.yfmt&&(this.__yfmt=t.yfmt),null!=t.name&&(this._name=t.name)}},t.prototype._getValueFmt=function(){var t=this.value;if(null!=t){if(null==this.series){var e=t==Math.round(t)?"{val:n0}":"{val:n}";return Object(a.format)(e,{val:t})}t=this._chart._isRotated()?this.ax._formatValue(t):this.ay._formatValue(t)}return t},t.prototype._getValue=function(t,e){var i=this._chart._getHitTestValue(this.pointIndex,this.groupIndex);if(null!==i)return i;var n=null,r=this._chart,o=this.pointIndex,s=r._isRotated();if(null!==this.series&&null!==o){var l=this.series.getValues(t),h=this.series.getDataType(t);l&&this.pointIndex<l.length?(n=l[this.pointIndex],h!=a.DataType.Date||e||(n=new Date(n))):1==t&&(r._xlabels&&r._xlabels.length>0&&o<r._xlabels.length?n=r._xlabels[o]:r._xvals&&o<r._xvals.length&&(n=r._xvals[o],r._xDataType!=a.DataType.Date||e||(n=new Date(n))))}return null!==n&&e&&(s?0==t?n=this.ax._formatValue(n):1==t&&(n=this.ay._formatValue(n)):0==t?n=this.ay._formatValue(n):1==t&&(n=this.ax._formatValue(n))),n},Object.defineProperty(t.prototype,"ax",{get:function(){return this.series.axisX?this.series.axisX:this._chart.axisX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ay",{get:function(){return this.series.axisY?this.series.axisY:this._chart.axisY},enumerable:!0,configurable:!0}),t}();!function(t){t[t.Visible=0]="Visible",t[t.Plot=1]="Plot",t[t.Legend=2]="Legend",t[t.Hidden=3]="Hidden"}(Z||(Z={})),function(t){t[t.Dot=0]="Dot",t[t.Box=1]="Box"}(Q||(Q={}));var tt,et,it=function(){},nt=function(t){function e(e){var i=t.call(this)||this;return i._series=Object(a.asType)(e,rt),i}return l(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),e}(a.EventArgs),rt=function(){function t(t){this._altStyle=null,this._symbolMarker=Q.Dot,this._visibility=Z.Visible,this._interpolateNulls=null,this._cache={},this.rendering=new a.Event,this.rendered=new a.Event,t&&this.initialize(t)}return Object.defineProperty(t.prototype,"interpolateNulls",{get:function(){return null==this._interpolateNulls?this._chart&&this._chart.interpolateNulls:this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=Object(a.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altStyle",{get:function(){return this._altStyle},set:function(t){t!=this._altStyle&&(this._altStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(t){t!=this._symbolStyle&&(this._symbolStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=Object(a.asNumber)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(t){(t=Object(a.asEnum)(t,Q,!0))!=this._symbolMarker&&(this._symbolMarker=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(t){t!=this._binding&&(this._binding=Object(a.asString)(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(t){t!=this._bindingX&&(this._bindingX=Object(a.asString)(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){t!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=t,this._cv=Object(a.asCollectionView)(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=Object(a.asString)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},set:function(t){(t=Object(a.asEnum)(t,Z))!=this._visibility&&(this._visibility=t,this._clearValues(),this._invalidate(),this._chart&&this._chart.onSeriesVisibilityChanged(new nt(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipContent",{get:function(){return this._tooltipContent},set:function(t){t!=this._tooltipContent&&(this._tooltipContent=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=Object(a.asFunction)(t),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(t,e){return Object(a.isNumber)(t)&&Object(a.isNumber)(e)?t=new a.Point(t,e):t instanceof MouseEvent&&(t=new a.Point(t.pageX,t.pageY)),Object(a.asType)(t,a.Point),this._chart?this._chart._hitTestSeries(t,this._chart.series.indexOf(this)):null},t.prototype.getPlotElement=function(t){if(this.hostElement&&t<this._pointIndexes.length){var e=this._pointIndexes[t];if(e<this.hostElement.childNodes.length)return this.hostElement.childNodes[e]}return null},Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){if(this._axisX=Object(a.asType)(t,V,!0),this._axisX){var e=this._axisX._chart=this._chart;e&&-1==e.axes.indexOf(this._axisX)&&e.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){if(this._axisY=Object(a.asType)(t,V,!0),this._axisY){var e=this._axisY._chart=this._chart;e&&-1==e.axes.indexOf(this._axisY)&&e.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){t&&Object(a.copy)(this,t)},t.prototype.pointToData=function(t){return Object(a.asType)(t,a.Point),(t=t.clone()).x=this._getAxisX().convertBack(t.x),t.y=this._getAxisY().convertBack(t.y),t},t.prototype.dataToPoint=function(t){return Object(a.asType)(t,a.Point),(t=t.clone()).x=this._getAxisX().convert(t.x),t.y=this._getAxisY().convert(t.y),t},t.prototype.onRendering=function(t,e,i){var n=new C(t,e,i);return this.rendering.raise(this,n),n.cancel},t.prototype.onRendered=function(t){this.rendered.raise(this,new S(t))},Object.defineProperty(t.prototype,"_chart",{get:function(){return this.__chart},set:function(t){t!==this.__chart&&(this.__chart=t)},enumerable:!0,configurable:!0}),t.prototype._getSymbolSize=function(){return null!=this.symbolSize?this.symbolSize:this.chart.symbolSize},Object.defineProperty(t.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(t){t!=this.__plotter&&(this.__plotter=t)},enumerable:!0,configurable:!0}),t.prototype.getDataType=function(t){return 0==t?this._valueDataType:1==t?this._xvalueDataType:null},t.prototype.getValues=function(t){if(0==t){if(null==this._values)if(this._valueDataType=null,null!=this._cv){var e=this._bindValues(this._cv.items,this._getBinding(0));this._values=e.values,this._valueDataType=e.dataType}else null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView&&(e=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=e.values,this._valueDataType=e.dataType);return this._values}if(1==t){if(null==this._xvalues&&(this._xvalueDataType=null,null!=this.bindingX))if(null!=this._cv)e=this._bindValues(this._cv.items,this.bindingX,!0),this._xvalueDataType=e.dataType,this._xvalues=e.values;else{if(null==this._bindingX)return null;null!=this._chart&&null!=this._chart.collectionView&&(e=this._bindValues(this._chart.collectionView.items,this.bindingX,!0),this._xvalueDataType=e.dataType,this._xvalues=e.values)}return this._xvalues}return null},t.prototype.drawLegendItem=function(t,e,i){var n=this._getChartType();null==n&&(n=this._chart._getChartType());var r=this._getLegendStyle(this.style);n===tt.Funnel?this._drawFunnelLegendItem(t,e,i,r,this.symbolStyle):this._drawLegendItem(t,e,n,this.name,r,this.symbolStyle)},t.prototype._getLegendStyle=function(t){if(t){var e={};return t.fill&&(e.fill=t.fill),t.stroke&&(e.stroke=t.stroke),e}},t.prototype.measureLegendItem=function(t,e){var i=this._getChartType();return null==i&&(i=this._chart._getChartType()),this._measureLegendItem(t,i===tt.Funnel?this._getFunnelLegendName(e):this.name)},t.prototype.legendItemLength=function(){var t=this._getChartType();return null==t&&(t=this._chart._getChartType()),t===tt.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:this._chart._xvals&&this._chart._xvals.length?this._chart._xvals.length:1:1},t.prototype.getDataRect=function(t,e){return null},t.prototype._getChartType=function(){return this._chartType},t.prototype._clearValues=function(){this._values=null,this._xvalues=null,this.__plotter=null,this._cache={}},t.prototype._getBinding=function(t){var e=this.binding;if(e){var i=this.chart?this.chart._bindingSeparator:",";if(i){var n=e.split(i);n&&n.length>t&&(e=n[t].trim())}}return e},t.prototype._getBindingValues=function(t){if(this._cache[t])return this._cache[t];var e;null!=this._cv?e=this._cv.items:null!=this._chart&&null!=this._chart.collectionView&&(e=this._chart.collectionView.items);var i=this._bindValues(e,this._getBinding(t));return this._cache[t]=i.values},t.prototype._getItem=function(t){var e=null,i=null;return null!=this.itemsSource?i=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(i=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=i&&(e=i[t]),e},t.prototype._getLength=function(){var t=0,e=null;return null!=this.itemsSource?e=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(e=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=e&&(t=e.length),t},t.prototype._setPointIndex=function(t,e){this._pointIndexes[t]=e},t.prototype._getDataRect=function(){var t=this.getValues(0),e=this.getValues(1);if(t){for(var i=NaN,n=NaN,r=NaN,o=NaN,s=t.length,l=0;l<s;l++){var h=t[l];if(isFinite(h)&&(isNaN(n)?n=o=h:h<n?n=h:h>o&&(o=h)),e){var c=e[l];isFinite(c)&&(isNaN(i)?i=r=c:c<i?i=c:h>o&&(r=c))}}if(e||(i=0,r=s-1),!isNaN(n))return new a.Rect(i,n,r-i,o-n)}return null},t.prototype._isCustomAxisX=function(){return!(!this._axisX||this._chart&&this._axisX==this.chart.axisX)},t.prototype._isCustomAxisY=function(){return!(!this._axisY||this._chart&&this._axisY==this.chart.axisY)},t.prototype._getAxisX=function(){var t=null;return this.axisX?t=this.axisX:this.chart&&(t=this.chart.axisX),t},t.prototype._getAxisY=function(){var t=null;return this.axisY?t=this.axisY:this.chart&&(t=this.chart.axisY),t},t.prototype._measureLegendItem=function(e,i){var n=new a.Size;if(n.width=t._LEGEND_ITEM_WIDTH,n.height=t._LEGEND_ITEM_HEIGHT,this._name){var r=e.measureString(i,ft._CSS_LABEL,ft._CSS_LEGEND);n.width+=r.width,n.height<r.height&&(n.height=r.height)}return n.width+=3*t._LEGEND_ITEM_MARGIN,n.height+=2*t._LEGEND_ITEM_MARGIN,n},t.prototype._drawFunnelLegendItem=function(e,i,n,r,o){e.strokeWidth=1;var s=t._LEGEND_ITEM_MARGIN,l=null,h=null;null===l&&(l=this._chart._getColorLight(n)),null===h&&(h=this._chart._getColor(n)),e.fill=l,e.stroke=h;var c=i.top+.5*i.height,u=t._LEGEND_ITEM_WIDTH,d=t._LEGEND_ITEM_HEIGHT,p=this._getFunnelLegendName(n);e.drawRect(i.left+s,c-.5*d,u,d,null,o||r),null!=p&&ft._renderText(e,p,new a.Point(i.left+d+2*s,c),0,1,ft._CSS_LABEL,ft._CSS_LEGEND)},t.prototype._getFunnelLegendName=function(t){var e,i=this._chart;return i._xlabels&&i._xlabels.length&&t<i._xlabels.length?e=i._xlabels[t]:i._xvals&&i._xvals.length&&t<i._xvals.length&&(e=i._xvals[t],i._xDataType===a.DataType.Date&&(e=ft._fromOADate(e))),null==e&&(e=this.name),e.toString()},t.prototype._drawLegendItem=function(e,i,n,r,o,s){e.strokeWidth=1;var l=t._LEGEND_ITEM_MARGIN,h=null,c=null;null===h&&(h=this._chart._getColorLight(this._chart.series.indexOf(this))),null===c&&(c=this._chart._getColor(this._chart.series.indexOf(this))),e.fill=h,e.stroke=c;var u=i.top+.5*i.height,d=t._LEGEND_ITEM_WIDTH,p=t._LEGEND_ITEM_HEIGHT;switch(n){case tt.Area:case tt.SplineArea:case tt.StepArea:e.drawRect(i.left+l,u-.5*p,d,p,null,o);break;case tt.Bar:case tt.Column:e.drawRect(i.left+l,u-.5*p,d,p,null,s||o);break;case tt.Scatter:case tt.Bubble:var f=.3*d,m=.3*p;this.symbolMarker==Q.Box?e.drawRect(i.left+l+.5*d-f,u-m,2*f,2*m,null,s||o):e.drawEllipse(i.left+.5*d+l,u,f,m,null,s||o);break;case tt.Line:case tt.Spline:case tt.Step:e.drawLine(i.left+l,u,i.left+d+l,u,null,o);break;case tt.LineSymbols:case tt.SplineSymbols:case tt.StepSymbols:f=.3*d,m=.3*p,this.symbolMarker==Q.Box?e.drawRect(i.left+l+.5*d-f,u-m,2*f,2*m,null,s||o):e.drawEllipse(i.left+.5*d+l,u,f,m,null,s||o),e.drawLine(i.left+l,u,i.left+d+l,u,null,o);break;case tt.Candlestick:case tt.HighLowOpenClose:e.drawLine(i.left+l,u,i.left+d+l,u,null,s||o)}this._name&&ft._renderText(e,r,new a.Point(i.left+p+2*l,u),0,1,ft._CSS_LABEL,ft._CSS_LEGEND)},t.prototype._cvCollectionChanged=function(t,e){this._clearValues(),this._invalidate()},t.prototype._cvCurrentChanged=function(t,e){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},t.prototype._bindValues=function(t,e,i){var n,r,o;if(void 0===i&&(i=!1),null!=t){var s=t.length;n=new Array(t.length);for(var l=e?new a.Binding(e):null,h=0;h<s;h++){o=null;var c=t[h];null!=l&&(c=l.getValue(c)),Object(a.isArray)(c)&&c.length>0&&(o=c,c=c[0]),Object(a.isNumber)(c)?(n[h]=c,r=a.DataType.Number):Object(a.isDate)(c)?(n[h]=c.valueOf(),r=a.DataType.Date):i&&c&&(n[h]=h,r=a.DataType.Number),Object(a.isArray)(o)&&o.length>0&&(n[h]=o)}}var u=new it;return u.values=n,u.dataType=r,u},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._indexToPoint=function(t){return t>=0&&t<this._values.length?new a.Point(this._xvalues?this._xvalues[t]:t,this._values[t]):null},t.prototype._getSymbolFill=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.fill),!e&&this.style&&(e=this.style.fill),!e&&this.chart&&(e=this.chart._getColorLight(t)),e},t.prototype._getSymbolStroke=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.stroke),!e&&this.style&&(e=this.style.stroke),!e&&this.chart&&(e=this.chart._getColor(t)),e},t.prototype._getAltSymbolStroke=function(t){var e=null;return this.altStyle&&(e=this.altStyle.stroke),e},t.prototype._getAltSymbolFill=function(t){var e=null;return this.altStyle&&(e=this.altStyle.fill),e},t.prototype._renderLabels=function(t,e,i,n){this._plotter&&this._plotter._renderLabels(t,this,e,i,n)},t._LEGEND_ITEM_WIDTH=10,t._LEGEND_ITEM_HEIGHT=10,t._LEGEND_ITEM_MARGIN=4,t._DEFAULT_SYM_SIZE=10,t}(),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=Object(a.asEnum)(t,tt,!0))!=this._chartType&&(this._chartType=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(rt),at=function(t){function e(e,i){var n=t.call(this,e,null,!0)||this;n._areas=[],n._keywords=new A,n._startAngle=0,n._innerRadius=0,n._offset=0,n._reversed=!1,n._isAnimated=!1,n._selectedItemPosition=g.None,n._selectedItemOffset=0,n._pieGroups=[],n._rotationAngles=[],n._centers=[new a.Point],n._selectedOffset=new a.Point,n._selectedIndex=-1,n._angles=[],n._colRowLens=[],n._titles=void 0,n._values=[],n._labels=[],n._pels=[],n._sum=0,n._sums=[],n._bindingSeparator=",",n.applyTemplate("wj-control wj-flexchart wj-flexpie",null,null),n._currentRenderEngine=new b(n.hostElement),n._legend=new x(n),n._tooltip=new N,n._tooltip.content="<b>{name}</b><br/>{value}",n._tooltip.showDelay=0,n._lbl=new L,n._lbl._chart=n;var r=n;return n.hostElement.addEventListener("mousemove",(function(t){var e=r._tooltip;if(e.content&&!r.isTouching){var i=r.hitTest(t);if(i.distance<=e.threshold){var n=r._getLabelContent(i,r.tooltip.content);r._showToolTip(n,new a.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}})),n.hostElement.addEventListener("click",(function(t){var e=!0;if(r.selectionMode==m.Point){var i=r.hitTest(t),n=T._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(n=r.tooltip.threshold),i.distance<=n?(i.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=g.None&&(e=!1),i.pointIndex!=r._selectionIndex&&r._select(i.pointIndex,!0)):r._selectedIndex>=0&&r._select(null)}if(e&&r.isTouching){var o=r._tooltip;if(o.content)if((i=r.hitTest(t)).distance<=o.threshold){var s=r._getLabelContent(i,r.tooltip.content);r._showToolTip(s,new a.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}})),n.hostElement.addEventListener("mouseleave",(function(t){r._hideToolTip()})),n.initialize(i),n.refresh(),n}return l(e,t),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=Object(a.asString)(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){t!=this._bindingName&&(this._bindingName=Object(a.asString)(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){t!=this._startAngle&&(this._startAngle=Object(a.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){t!=this._offset&&(this._offset=Object(a.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){t!=this._innerRadius&&(this._innerRadius=Object(a.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerTextStyle",{get:function(){return this._innerTextStyle},set:function(t){t!=this._innerText&&(this._innerTextStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerText",{get:function(){return this._innerText},set:function(t){t!=this._innerText&&(this._innerText=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(t){t!=this._reversed&&(this._reversed=Object(a.asBoolean)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(t){(t=Object(a.asEnum)(t,g,!0))!=this._selectedItemPosition&&(this._selectedItemPosition=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(t){t!=this._selectedItemOffset&&(this._selectedItemOffset=Object(a.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){t!=this._isAnimated&&(this._isAnimated=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=t,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t!=this._selectedIndex){var e=Object(a.asNumber)(t,!0);this._select(e,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titles",{get:function(){return this._titles},set:function(t){t!==this._titles&&(this._titles=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype._getLabelsForLegend=function(){return this._labels},e.prototype.hitTest=function(t,e){var i=this._toControl(t,e),n=new J(this,i),r=null;if(T._contains(this._rectHeader,i))n._chartElement=X.Header;else if(T._contains(this._rectFooter,i))n._chartElement=X.Footer;else if(T._contains(this._rectLegend,i))n._chartElement=X.Legend,null!==(r=this.legend._hitTest(i))&&r>=0&&r<this._areas.length&&n._setData(null,r);else if(T._contains(this._rectChart,i)){for(var o,a=this._areas.length,s=NaN,l=0;l<a;l++){var h=i.clone(),c=this._areas[l],u=this._rotationAngles[c.gi];if(0!=u){var d=this._centers[c.gi],p=d.x,f=d.y,m=-p+h.x,g=-f+h.y,_=Math.sqrt(m*m+g*g),y=Math.atan2(g,m)-u*Math.PI/180;h.x=p+_*Math.cos(y),h.y=f+_*Math.sin(y)}l==this._selectedIndex&&(h.x-=this._selectedOffset.x,h.y-=this._selectedOffset.y);var b=this._areas[l];if(b.contains(h)&&(n._setDataGroup(c.gi,b.tag),n._dist=0,l!=this._selectedIndex))break;var v=b.distance(h);void 0!==v&&(isNaN(s)||v<s)&&(s=v,o=b)}0!==n._dist&&null!=o&&(n._setDataGroup(o.gi,o.tag),n._dist=s),n._chartElement=X.ChartArea}else n._chartElement=X.None;return n},e.prototype._performBind=function(){if(this._initData(),this._cv){this._selectionIndex=this._cv.currentPosition;var t=this._cv.items;if(t){for(var e=t.length,i=this._getBindings(),n=0;n<i.length;n++)this._values[n]=[],this._sums[n]=0;for(var r=0;r<e;r++){var o=t[r];for(n=0;n<i.length;n++)this._sums[n]+=Math.abs(this._getBindData(o,this._values[n],0==n?this._labels:null,i[n],this.bindingName))}}}},e.prototype._getBindings=function(){var t=[],e=this.binding;if(e){var i=this._bindingSeparator;i&&(t=e.split(i))}return t},e.prototype._initData=function(){this._sum=0,this._sums=[],this._values=[],this._labels=[]},e.prototype._getBindData=function(t,e,i,n,r){var o,s=0,l=n?new a.Binding(n):null;l&&(o=l.getValue(t)),s=0,Object(a.isNumber)(o)?s=Object(a.asNumber)(o):o&&(s=parseFloat(o.toString())),!isNaN(s)&&isFinite(s)?e.push(s):e.push(s=0);var h=r?new a.Binding(r):null;if(i)if(h&&t){var c=h.getValue(t);c&&(c=c.toString()),i.push(c)}else i.push(s.toString());return s},e.prototype._render=function(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=null),this._selectionAnimationID&&clearInterval(this._selectionAnimationID),this.onRendering(new S(e)),t.prototype._render.call(this,e,i,n)},e.prototype._prepareRender=function(){this._areas=[]},e.prototype._renderChart=function(t,i,n){var r,o=this._rectChart.clone(),s=new a.Size(o.width,o.height),l=this._parseMargin(this.plotMargin),h=this.dataLabel,c=h.content&&h.position==j.Outside,u=c?(Object(a.isNumber)(h.offset)?h.offset:0)+24:0;isNaN(l.left)&&(l.left=c?u:e._MARGIN),isNaN(l.right)&&(l.right=c?u:e._MARGIN),isNaN(l.top)&&(l.top=c?u:e._MARGIN),isNaN(l.bottom)&&(l.bottom=c?u:e._MARGIN),i.top+=l.top,i.height=(r=i.height-(l.top+l.bottom))>0?r:24,i.left+=l.left,i.width=(s=i.width-(l.left+l.right))>0?s:24;var d=this._getBindings(),p=this.titles;void 0===p&&d.length>1&&(p=d);var f=this._layout(t,i,p,d.length);this._angles=[],this._pels=[],this._pieGroups=[],this._rotationAngles=[];for(var m=0;m<d.length;m++){var g=f[m];p&&m<p.length&&p[m]&&T._renderText(t,p[m],new a.Point(g.left+.5*g.width,g.top),1,2,e._CSS_GROUP_TITLE);var _=t.startGroup("wj-slice-group",null,!0);this._pieGroups.push(_),this._renderData(t,g,m,_),t.endGroup(),this._rotationAngles.push(0)}this._highlightCurrent(),this.innerText&&this._renderInnerText(t),this.dataLabel.content&&this.dataLabel.position!=j.None&&this._renderLabels(t),this.onRendered(new S(t))},e.prototype._layout=function(t,i,n,r){var o=0,s=r,l=1,h=0;if(n)for(var c=0;c<n.length;c++)h=Math.max(h,t.measureString(n[c],e._CSS_GROUP_TITLE).height);for(var u=1;u<=r;u++){var d=Math.floor((r+(u-1))/u),p=Math.floor(i.width/u),f=Math.floor(i.height/d);(f-=h)<p&&(p=f),p>o&&(o=p,s=u,l=d)}for(var m=[],g=.5*(i.width-o*s),_=.5*(i.height-(o+h)*l),y=0;y<l;y++)for(var b=0;b<s;b++)m.push(new a.Rect(i.left+o*b+8+g,i.top+(o+h)*y+8+_+h,o-16,o-16));return m},e.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new a.Size,o=new a.Size(i,n),s=this._getLabelsForLegend(),l=s.length,h=0,c=0;this._colRowLens=[];for(var u=0;u<l;u++){var d=this._measureLegendItem(t,s[u]);e?(c+d.height>n&&(r.height=n,this._colRowLens.push(h),h=0,c=0),h<d.width&&(h=d.width),c+=d.height):(h+d.width>i&&(r.width=i,this._colRowLens.push(c),c=0,h=0),c<d.height&&(c=d.height),h+=d.width)}return e?(r.height<c&&(r.height=c),this._colRowLens.push(h),r.width=this._colRowLens.reduce((function(t,e){return t+e}),0),r.width>o.width/2&&(r.width=o.width/2)):(r.width<h&&(r.width=h),this._colRowLens.push(c),r.height=this._colRowLens.reduce((function(t,e){return t+e}),0),r.height>o.height/2&&(r.height=o.height/2)),r},e.prototype._renderLegend=function(t,e,i,n,r,o){for(var s=this._rectLegend,l=this._getLabelsForLegend(),h=l.length,c=0,u=e.clone(),d=0;d<h;d++){var p=this._measureLegendItem(t,l[d]);n?u.y+p.height>s.top+s.height+1&&(u.x+=this._colRowLens[c],c++,u.y=e.y):u.x+p.width>s.left+s.width+1&&(u.y+=this._colRowLens[c],c++,u.x=e.x);var f=new a.Rect(u.x,u.y,p.width,p.height);this._drawLegendItem(t,f,d,l[d]),i.push(f),n?u.y+=p.height:u.x+=p.width}},e.prototype._renderData=function(t,e,i,n){var r=this.innerRadius,o=this.offset;if(this._sums[i]>0){var s=(this.startAngle+180)*Math.PI/180,l=e.left+.5*e.width,h=e.top+.5*e.height,c=Math.min(.5*e.width,.5*e.height);this._centers[i]=new a.Point(l,h);var u=Math.max(o,this.selectedItemOffset);u>0&&(o*=c/=1+u),this._radius=c,this._renderPie(t,i,c,r*c,s,o)}},e.prototype._renderPie=function(t,e,i,n,r,o){this._renderSlices(t,this._values[e],this._sums[e],e,i,n,r,2*Math.PI,o)},e.prototype._getCenter=function(){return this._centers[0]},e.prototype._renderSlices=function(t,e,i,n,r,o,a,s,l){for(var h,c,u,d=e.length,p=0,f=a,m=1==this.reversed,g=this._centers[n],_=0;_<d;_++)e[_]>0&&p++;var y=1===p?360:359.9/360;for(_=0;_<d;_++){c=g.x,u=g.y,h=t.startGroup("wj-slice"),t.fill=this._getColorLight(_),t.stroke=this._getColor(_);var b=Math.abs(e[_]),v=Math.abs(b-i)<1e-10?s:s*b/i;v=Math.min(v,s*y);var x=m?f-.5*v:f+.5*v;l>0&&v<s&&(c+=l*Math.cos(x),u+=l*Math.sin(x)),this._renderSlice(t,c,u,x,n,_,r,o,f,v,s),m?f-=v:f+=v,t.endGroup(),this._pels.push(h)}},e.prototype._renderSlice=function(t,e,i,n,r,o,s,l,h,c,u){var d=this,p=!!this.reversed;if(this._angles.push(n),this.itemFormatter){var f=new J(this,new a.Point(e+s*Math.cos(n),i+s*Math.sin(n)),X.SeriesSymbol);f._setData(null,o),this.itemFormatter(t,f,(function(){d._drawSlice(t,r,o,p,e,i,s,l,h,c)})),t.cssPriority=!0}else this._drawSlice(t,r,o,p,e,i,s,l,h,c)},e.prototype._getSelectedItemOffset=function(t,e){var i=0,n=0,r=0;return t==this._selectedIndex&&this.selectedItemOffset>0&&(r=this.selectedItemOffset),r>0&&(i=Math.cos(e)*r*this._radius,n=Math.sin(e)*r*this._radius),{x:i,y:n}},e.prototype._renderInnerText=function(t){for(var i=this.innerText,n=this.innerTextStyle,r=0;r<this._centers.length;r++){var o=this._centers[r],s=void 0;(s=Object(a.isFunction)(i)?i(r):Object(a.isArray)(i)?Object(a.asString)(i[r]):Object(a.asString)(i))&&(s=Object(a.format)(s,{total:this._sums[r],binding:this._getBindings()[r]}),n&&(t.cssPriority=!1),e._renderText(t,s,o,1,1,T._CSS_TITLE,null,n),t.cssPriority=!0)}},e.prototype._renderLabels=function(t){var e=this._areas.length,i=this.dataLabel,n=i.position,r="wj-data-label",o=this._rotationAngles,s=i.connectingLine,l=i.offset?i.offset:0;t.stroke="null",t.fill="transparent",t.strokeWidth=1,t.startGroup("wj-data-labels");for(var h=0;h<e;h++){var c=this._areas[h];if(c){var u=c.radius,d=c.langle+o[c.gi],p=1,f=1;n==j.Center||n===j.Radial||n===j.Circular?u*=.5*(1+(c.innerRadius||0)/c.radius):((d=st.clampAngle(d))<=-170||d>=170?(p=2,f=1):d>=-100&&d<=-80?(p=1,f=2):d>=-10&&d<=10?(p=0,f=1):d>=80&&d<=100?(p=1,f=0):-180<d&&d<-90?(p=2,f=2):-90<=d&&d<0?(p=0,f=2):0<d&&d<90?(p=0,f=0):90<d&&d<180&&(p=2,f=0),n==j.Inside&&(p=2-p,f=2-f)),d*=Math.PI/180;var m=this._getSelectedItemOffset(c.gi?h-c.gi*this._values[0].length:h,d),g=m.x,_=m.y,y=u;n==j.Outside?y+=l:n==j.Inside&&(y-=l);var b=c.center.x,v=c.center.y,x=this._centers[c.gi],w=b-x.x,S=v-x.y;if(0!=this._rotationAngles[c.gi]){var C=Math.sqrt(w*w+S*S),O=Math.atan2(S,w)+this._rotationAngles[c.gi]*Math.PI/180;b=x.x+C*Math.cos(O),v=x.y+C*Math.sin(O)}var A=new a.Point(b+g+y*Math.cos(d),v+_+y*Math.sin(d));i.border&&n!=j.Center&&(0==p?A.x+=2:2==p&&(A.x-=2),0==f?A.y+=2:2==f&&(A.y-=2));var M=new J(this,A);M._setDataGroup(c.gi,c.tag);var N=this._getLabelContent(M,i.content),P=new k(t,M,A,N);if(i.onRendering&&(i.onRendering(P)?(N=P.text,A=P.point):N=null),N){var E,I=180*Math.atan2(v-A.y,b-A.x)/Math.PI;if(I=(I+360)%360,n===j.Radial||n===j.Circular?(n===j.Radial?I>90&&I<270&&(I+=180):(I>180&&I<360&&(I+=180),I-=90),(E=T._renderRotatedText(t,N,A,p,f,A,I,r).getBBox()).left=E.x,E.top=E.y):E=T._renderText(t,N,A,p,f,r),i.border&&t.drawRect(E.left-2,E.top-2,E.width+4,E.height+4,"wj-data-label-border"),s){var F=new a.Point(b+g+u*Math.cos(d),v+_+u*Math.sin(d));t.drawLine(A.x,A.y,F.x,F.y,"wj-data-label-line")}}t.cssPriority=!0}}t.endGroup()},e.prototype._drawSlice=function(t,e,i,n,r,o,s,l,h,c){var u;n?l>0?(0!=c&&t.drawDonutSegment(r,o,s,l,h-c,c),(u=new ht(new a.Point(r,o),s,l,h-c,c,this.startAngle)).tag=i,this._areas.push(u)):(0!=c&&t.drawPieSegment(r,o,s,h-c,c),(u=new lt(new a.Point(r,o),s,h-c,c,this.startAngle)).tag=i,this._areas.push(u)):(l>0?(0!=c&&t.drawDonutSegment(r,o,s,l,h,c),(u=new ht(new a.Point(r,o),s,l,h,c,this.startAngle)).tag=i,this._areas.push(u)):(0!=c&&t.drawPieSegment(r,o,s,h,c),(u=new lt(new a.Point(r,o),s,h,c,this.startAngle)).tag=i,this._areas.push(u)),h+=c),u&&(u.gi=e)},e.prototype._measureLegendItem=function(t,e){var i=new a.Size;if(i.width=ot._LEGEND_ITEM_WIDTH,i.height=ot._LEGEND_ITEM_HEIGHT,e){var n=t.measureString(e,T._CSS_LABEL,T._CSS_LEGEND);i.width+=n.width,i.height<n.height&&(i.height=n.height)}return i.width+=3*ot._LEGEND_ITEM_MARGIN,i.height+=2*ot._LEGEND_ITEM_MARGIN,i},e.prototype._drawLegendItem=function(t,e,i,n){t.strokeWidth=1;var r=ot._LEGEND_ITEM_MARGIN,o=null,s=null;null===o&&(o=this._getColorLight(i)),null===s&&(s=this._getColor(i)),t.fill=o,t.stroke=s;var l=e.top+.5*e.height,h=ot._LEGEND_ITEM_HEIGHT;t.drawRect(e.left+r,l-.5*h,ot._LEGEND_ITEM_WIDTH,h,null),null!=n&&T._renderText(t,n.toString(),new a.Point(e.left+h+2*r,l),0,1,T._CSS_LABEL)},e.prototype._getLabelContent=function(t,e){return Object(a.isString)(e)?this._keywords.replace(e,t):Object(a.isFunction)(e)?e(t):null},e.prototype._select=function(t,e){if(void 0===e&&(e=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=t,this.selectionMode==m.Point){var i=this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(t),this._notifyCurrentChanged=!0)}null==t?(this._selectedIndex=-1,this.invalidate()):this.isAnimated&&this.selectedItemPosition!=g.None||!(this.selectedItemOffset>0||this.selectedItemPosition!=g.None)?this._highlight(!0,this._selectionIndex,e):(this._selectedIndex=t,this.invalidate()),this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=m.None){var t=-1,e=this._cv;e&&(t=e.currentPosition),this._highlight(!0,t)}},e.prototype._highlight=function(t,e,i){if(void 0===i&&(i=!1),this.selectionMode==m.Point&&null!=e&&e>=0)if(t){for(var n=[],r=0;r<this._pieGroups.length;r++){if(d=this._pels[e+r*this._values[0].length]){d.parentNode.appendChild(d);var o=this._find(d,["ellipse"]);this._highlightItems(this._find(d,["path","ellipse"]),T._CSS_SELECTION,t)}var a=this._angles[e+r*this._values[0].length];if(this.selectedItemPosition!=g.None&&0!=a){var s=0;this.selectedItemPosition==g.Left?s=180:this.selectedItemPosition==g.Top?s=-90:this.selectedItemPosition==g.Bottom&&(s=90);var l=s*Math.PI/180-a;l*=180/Math.PI,i&&this.isAnimated?n.push(l):(this._rotationAngles[r]=l,this._pieGroups[r].transform.baseVal.getItem(0).setRotate(l,this._centers[r].x,this._centers[r].y))}var h=this.selectedItemOffset;if(h>0&&o&&0==o.length){var c=this._selectedOffset.x=Math.cos(a)*h*this._radius,u=this._selectedOffset.y=Math.sin(a)*h*this._radius;d&&d.setAttribute("transform","translate("+c.toFixed()+","+u.toFixed()+")")}this._selectedIndex=e}n.length>0&&this._animateSelectionAngle(n,.5)}else{for(r=0;r<this._pieGroups.length;r++){var d;(d=this._pels[e+r*this._values[0].length])&&(d.parentNode.insertBefore(d,d.parentNode.childNodes.item(e)),d.removeAttribute("transform"),this._highlightItems(this._find(d,["path","ellipse"]),T._CSS_SELECTION,t))}this._selectedIndex==e&&(this._selectedIndex=-1)}},e.prototype._animateSelectionAngle=function(t,e){var i=this,n=i._pieGroups;i._selectionAnimationID&&clearInterval(this._selectionAnimationID),this._selectionAnimationID=Object(a.animate)((function(e){if(n==i._pieGroups){for(var r=0;r<n.length;r++){var o=st.clampAngle(i._rotationAngles[r]),a=st.clampAngle(t[r])-o;i._rotationAngles[r]=o+=a*e,n[r].transform.baseVal.getItem(0).setRotate(o,i._centers[r].x,i._centers[r].y)}1==e&&clearInterval(i._selectionAnimationID),e>.99&&(i.selectedItemOffset>0||i.selectedItemPosition!=g.None)&&i.invalidate()}}),1e3*e)},e.prototype._getHitTestItem=function(t){var e,i=null;return(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(i=e[t]),i},e.prototype._getHitTestValue=function(t,e){return null==e&&(e=0),this._values[e][t]},e.prototype._getHitTestLabel=function(t){return this._labels[t]},e._MARGIN=4,e._CSS_GROUP_TITLE="wj-label",e}(T),st=function(){function t(){}return t.clampAngle=function(t,e){void 0===e&&(e=0);var i=(t+180)%360-180;return i<-180+(e<0?e+360:e)&&(i+=360),i},t}(),lt=function(){function t(t,e,i,n,r){void 0===r&&(r=0),this._isFull=!1,this._center=t,this._radius=e,this._originAngle=i,this._originSweep=n,n>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*n*180/Math.PI,this._angle=st.clampAngle(180*i/Math.PI+this._sweep),this._radius2=e*e,this._startAngle=r}return t.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y;if(e*e+i*i<=this._radius2){var n=180*Math.atan2(i,e)/Math.PI,r=st.clampAngle(this._angle,this._startAngle)-st.clampAngle(n,this._startAngle);if(this._isFull||Math.abs(r)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i,r=180*Math.atan2(i,e)/Math.PI,o=st.clampAngle(this._angle,this._startAngle)-st.clampAngle(r,this._startAngle);return this._isFull||Math.abs(o)<=this._sweep?Math.sqrt(n)-this._radius:void 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),t}(),ht=function(){function t(t,e,i,n,r,o){void 0===o&&(o=0),this._isFull=!1,this._center=t,this._radius=e,this._iradius=i,this._originAngle=n,this._originSweep=r,r>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*r*180/Math.PI,this._angle=st.clampAngle(180*n/Math.PI+this._sweep),this._radius2=e*e,this._iradius2=i*i,this._startAngle=o}return t.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i;if(n>=this._iradius2&&n<=this._radius2){var r=180*Math.atan2(i,e)/Math.PI,o=st.clampAngle(this._angle,this._startAngle)-st.clampAngle(r,this._startAngle);if(this._isFull||Math.abs(o)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),t}(),ct=function(){function t(){this._DEFAULT_WIDTH=2,this._DEFAULT_SYM_SIZE=10,this.clipping=!0}return t.prototype.clear=function(){this.seriesCount=0,this.seriesIndex=0},t.prototype._renderLabels=function(t,e,i,n,r){var o=i.length,s=n.dataLabel,l=s.offset;void 0===l&&(l=s.connectingLine?16:0),s.border&&(l-=2);for(var h=0;h<o;h++){var c=i[h],u=Object(a.asType)(c.tag,G,!0);u&&!c.ignoreLabel&&this._renderLabel(t,c,u,n,s,e,l,r)}},t.prototype._renderLabel=function(t,e,i,n,r,o,a,s){var l=null==r.position?O.Top:r.position,h=r.border,c=r.connectingLine,u=new J(n,p);u._setDataPoint(i);var d=n._getLabelContent(u,r.content),p=this._getLabelPoint(o,i);if(this._getPointAndPosition(p,l,e,n),n._plotRect.contains(p)){var f=new k(t,u,p,d);if(r.onRendering&&(r.onRendering(f)?(d=f.text,p=f.point):d=null),d){var m=this._renderLabelAndBorder(t,d,l,a,p,c,2,h);if(m){var g=new Y(m);g.tag=i,s.push(g)}}t.cssPriority=!0}},t.prototype._getPointAndPosition=function(t,e,i,n){if(i instanceof Y){var r=i;n._isRotated()?t.y=r.rect.top+.5*r.rect.height:t.x=r.rect.left+.5*r.rect.width}},t.prototype._getLabelPoint=function(t,e){var i=t._getAxisX(),n=t._getAxisY();return new a.Point(i.convert(e.dataX),n.convert(e.dataY))},t.prototype._renderLabelAndBorder=function(t,e,i,n,r,o,a,s){var l,h="wj-data-label",c="wj-data-label-line",u=ft._CSS_DATA_LABELS;switch(i){case O.Top:o&&t.drawLine(r.x,r.y,r.x,r.y-n,c),r.y-=a+n,l=ft._renderText(t,e,r,1,2,h,u);break;case O.Bottom:o&&t.drawLine(r.x,r.y,r.x,r.y+n,c),r.y+=a+n,l=ft._renderText(t,e,r,1,0,h,u);break;case O.Left:o&&t.drawLine(r.x,r.y,r.x-n,r.y,c),r.x-=a+n,l=ft._renderText(t,e,r,2,1,h,u);break;case O.Right:o&&t.drawLine(r.x,r.y,r.x+n,r.y,c),r.x+=a+n,l=ft._renderText(t,e,r,0,1,h,u);break;case O.Center:l=ft._renderText(t,e,r,1,1,h,u)}return s&&l&&t.drawRect(l.left-a,l.top-a,l.width+2*a,l.height+2*a,"wj-data-label-border"),l},t.prototype.getOption=function(t,e){var i=this.chart._options;if(e&&(i=i?i[e]:null),i&&!Object(a.isUndefined)(i[t])&&null!==i[t])return i[t]},t.prototype.getNumOption=function(t,e){var i=this.chart._options;if(e&&(i=i?i[e]:null),i&&i[t])return Object(a.asNumber)(i[t],!0)},t.prototype.getItemFormatter=function(t){return t instanceof rt&&t.itemFormatter?t.itemFormatter:this.chart.itemFormatter},t.cloneStyle=function(t,e){if(!t)return t;var i={};for(var n in t)e&&e.indexOf(n)>=0||(i[n]=t[n]);return i},t.prototype.isValid=function(t,e,i,n){return gt.isValid(t)&&gt.isValid(e)&&ft._contains(this.chart._plotRect,new a.Point(t,e))},t.prototype.load=function(){},t.prototype.unload=function(){},t.prototype._createSteps=function(t,e){var i=this.getOption("position","step"),n=t.length,r=[],o=[],a=this.chart._isRotated();if("center"==i)if(a)for(var s=0;s<n;s++){var l=0==s?e[s+1]-e[s]:e[s]-e[s-1],h=s==n-1?e[s]-e[s-1]:e[s+1]-e[s];r.push(t[s]),o.push(e[s]-.5*l),r.push(t[s]),o.push(e[s]+.5*h)}else for(s=0;s<n;s++){var c=s==n-1?t[s]-t[s-1]:t[s+1]-t[s];r.push(t[s]-.5*(0==s?t[s+1]-t[s]:t[s]-t[s-1])),o.push(e[s]),r.push(t[s]+.5*c),o.push(e[s])}else if("end"==i)for(s=0;s<n;s++)s>0&&(a?(r.push(t[s]),o.push(e[s-1])):(r.push(t[s-1]),o.push(e[s]))),r.push(t[s]),o.push(e[s]);else for(s=0;s<n;s++)r.push(t[s]),o.push(e[s]),s<n-1&&(a?(r.push(t[s]),o.push(e[s+1])):(r.push(t[s+1]),o.push(e[s])));return{x:r,y:o}},t}();!function(t){t[t.Column=0]="Column",t[t.Bar=1]="Bar",t[t.Scatter=2]="Scatter",t[t.Line=3]="Line",t[t.LineSymbols=4]="LineSymbols",t[t.Area=5]="Area",t[t.Bubble=6]="Bubble",t[t.Candlestick=7]="Candlestick",t[t.HighLowOpenClose=8]="HighLowOpenClose",t[t.Spline=9]="Spline",t[t.SplineSymbols=10]="SplineSymbols",t[t.SplineArea=11]="SplineArea",t[t.Funnel=12]="Funnel",t[t.Step=13]="Step",t[t.StepSymbols=14]="StepSymbols",t[t.StepArea=15]="StepArea"}(tt||(tt={})),function(t){t[t.None=0]="None",t[t.Stacked=1]="Stacked",t[t.Stacked100pc=2]="Stacked100pc"}(et||(et={}));var ut,dt,pt,ft=function(t){function e(i,n){var r=t.call(this,i,null,!0)||this;r._series=new a.ObservableArray,r._axes=new B,r._pareas=new p,r._interpolateNulls=!1,r._legendToggle=!1,r._symbolSize=10,r._dataInfo=new gt,r.__barPlotter=null,r.__linePlotter=null,r.__areaPlotter=null,r.__bubblePlotter=null,r.__financePlotter=null,r.__funnelPlotter=null,r._plotters=[],r._rotated=!1,r._stacking=et.None,r._xlabels=[],r._xvals=[],r._lblAreas=[],r._colRowLens=[],r._bindingSeparator=",",r.seriesVisibilityChanged=new a.Event,r.applyTemplate("wj-control wj-flexchart",null,null);var o=r;return o._series.collectionChanged.addHandler((function(){for(var t=o._series,e=0;e<t.length;e++){var i=Object(a.tryCast)(t[e],rt);if(!i)throw"chartSeries array must contain SeriesBase objects.";i._chart=o,i.axisX&&null==i.axisX._chart&&(i.axisX._chart=o,o.axes.push(i.axisX)),i.axisY&&null==i.axisY._chart&&(i.axisY._chart=o,o.axes.push(i.axisY))}o.invalidate()})),r._currentRenderEngine=new b(r.hostElement),r._hitTester=new K(r),r._legend=new x(r),r._tooltip=new N,r._tooltip.showDelay=0,r._lbl=new D,r._lbl._chart=r,r._initAxes(),o._axes.collectionChanged.addHandler((function(){for(var t=o._axes,e=0;e<t.length;e++){var i=Object(a.tryCast)(t[e],V);if(!i)throw"axes array must contain Axis objects.";i._chart=o}o.invalidate()})),o._pareas.collectionChanged.addHandler((function(){for(var t=o._pareas,e=0;e<t.length;e++){var i=Object(a.tryCast)(t[e],d);if(!i)throw"plotAreas array must contain PlotArea objects.";i._chart=o}o.invalidate()})),r._keywords=new A,r.hostElement.addEventListener("click",(function(t){var e=o._tooltip;e.content&&o.isTouching&&o._updateTooltip(e,t)})),r.hostElement.addEventListener("mousemove",(function(t){var e=o._tooltip;e.content&&!o.isTouching&&o._updateTooltip(e,t)})),r.hostElement.addEventListener("mouseleave",(function(t){o._hideToolTip()})),r.hostElement.addEventListener("click",(function(t){if(o.selectionMode!=m.None){var i=o._hitTestData(t),n=e._SELECTION_THRESHOLD;o.tooltip&&o.tooltip.threshold&&(n=o.tooltip.threshold),i.distance<=n&&i.series?o._select(i.series,i.pointIndex):o.selectionMode==m.Series&&(i=o.hitTest(t)).chartElement==X.Legend&&i.series?o._select(i.series,null):o._select(null,null)}!0===o.legendToggle&&(i=o.hitTest(t)).chartElement==X.Legend&&i.series&&(i.series.visibility==Z.Legend?i.series.visibility=Z.Visible:i.series.visibility==Z.Visible&&(i.series.visibility=Z.Legend),o.focus())})),r.initialize(n),r}return l(e,t),e.prototype._initAxes=function(){this._axisX=new V(g.Bottom),this._axisY=new V(g.Left),this._axisX.majorGrid=!1,this._axisX.name="axisX",this._axisY.majorGrid=!0,this._axisY.majorTickMarks=I.None,this._axisY.name="axisY",this._axisX._chart=this,this._axisY._chart=this,this._axes.push(this._axisX),this._axes.push(this._axisY)},Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){var e=this._axisX=Object(a.asType)(t,V);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!1),void 0===e.name&&(e.name="axisX"),null==e.position&&(e.position=g.Bottom),e._axisType=P.X,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){var e=this._axisY=Object(a.asType)(t,V);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!0),void 0===e.name&&(e.name="axisY"),e.majorTickMarks=I.None,null==e.position&&(e.position=g.Left),e._axisType=P.Y,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=Object(a.asString)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingX",{get:function(){return this._bindingX},set:function(t){t!=this._bindingX&&(this._bindingX=Object(a.asString)(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=Object(a.asNumber)(t,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=Object(a.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(t){t!=this._legendToggle&&(this._legendToggle=Object(a.asBoolean)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=Object(a.asType)(t,D),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){t!=this._selection&&(this._selection=Object(a.asType)(t,rt,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onSeriesVisibilityChanged=function(t){this.seriesVisibilityChanged.raise(this,t)},e.prototype.hitTest=function(t,i){var n=this._toControl(t,i),r=new J(this,n),o=null;if(e._contains(this._rectHeader,n))r._chartElement=X.Header;else if(e._contains(this._rectFooter,n))r._chartElement=X.Footer;else if(e._contains(this._rectLegend,n))r._chartElement=X.Legend,null!==(o=this.legend._hitTest(n))&&o>=0&&o<this.series.length&&(this._getChartType()===tt.Bar?r._setData(this.series[this.series.length-1-o]):r._setData(this.series[o]));else if(e._contains(this._rectChart,n)){var a=this._hitTestLabels(n);if(a)r._chartElement=X.DataLabel,r._dist=0,r._setDataPoint(a.tag);else{for(var s=this._hitTester.hitTest(n),l=null,h=null,c=this.series.length-1;c>=0;c--)if(this.series[c].hitTest!==ot.prototype.hitTest){var u=this.series[c].hitTest(t);if(u&&((!l||u.distance<l.distance)&&(l=u,h=c),0===u.distance))break}s&&s.area?l&&l.distance<s.distance?r=l:l&&l.distance==s.distance&&h>s.area.tag.seriesIndex?r=l:(r._setDataPoint(s.area.tag),r._dist=s.distance):l&&(r=l);var d=!1;this.axes.some((function(t){if(e._contains(t._axrect,n))return r._chartElement=t.axisType===P.X?X.AxisX:X.AxisY,d=!0,!0})),d||(e._contains(this._plotRect,n)?r._chartElement=X.PlotArea:e._contains(this._rectChart,n)&&(r._chartElement=X.ChartArea))}}else r._chartElement=X.None;return r},e.prototype.pointToData=function(t,e){return Object(a.isNumber)(t)&&Object(a.isNumber)(e)&&(t=new a.Point(t,e)),t instanceof MouseEvent?(t=new a.Point(t.pageX,t.pageY),t=this._toControl(t)):t=t.clone(),t.x=this.axisX.convertBack(t.x),t.y=this.axisY.convertBack(t.y),t},e.prototype.dataToPoint=function(t,e){Object(a.isNumber)(t)&&Object(a.isNumber)(e)&&(t=new a.Point(t,e)),Object(a.asType)(t,a.Point);var i=t.clone();return i.x=this.axisX.convert(i.x),i.y=this.axisY.convert(i.y),i},e.prototype._copy=function(t,e){if("series"==t){this.series.clear();for(var i=Object(a.asArray)(e),n=0;n<i.length;n++){var r=this._createSeries();Object(a.copy)(r,i[n]),this.series.push(r)}return!0}return!1},e.prototype._createSeries=function(){return new ot},e.prototype._clearCachedValues=function(){for(var t=0;t<this._series.length;t++){var e=this._series[t];null==e.itemsSource&&e._clearValues()}},e.prototype._performBind=function(){if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv){var t=this._cv.items;if(t){for(var e=t.length,i=this.bindingX?new a.Binding(this.bindingX):null,n=0;n<e;n++)if(i){var r=i.getValue(t[n]);Object(a.isNumber)(r)?(this._xvals.push(Object(a.asNumber)(r)),this._xDataType=a.DataType.Number):Object(a.isDate)(r)&&(this._xvals.push(Object(a.asDate)(r).valueOf()),this._xDataType=a.DataType.Date),this._xlabels.push(r)}this._xvals.length==e?this._xlabels.splice(0):this._xvals.splice(0)}}},e.prototype._hitTestSeries=function(t,e){var i=this._toControl(t),n=new J(this,i),r=this._hitTester.hitTestSeries(i,e);return r&&r.area&&(n._setDataPoint(r.area.tag),n._chartElement=X.PlotArea,n._dist=r.distance),n},e.prototype._hitTestData=function(t){var e=this._toControl(t),i=new J(this,e),n=this._hitTester.hitTest(e,!0);return n&&n.area&&(i._setDataPoint(n.area.tag),i._dist=n.distance),i},e.prototype._hitTestLabels=function(t){for(var e=null,i=this._lblAreas.length,n=0;n<i;n++)if(this._lblAreas[n].contains(t)){e=this._lblAreas[n];break}return e},e._dist2=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},e._dist=function(t,i,n){return Math.sqrt(e._distToSegmentSquared(t,i,n))},e._distToSegmentSquared=function(t,i,n){var r=e._dist2(i,n);if(0==r)return e._dist2(t,i);var o=((t.x-i.x)*(n.x-i.x)+(t.y-i.y)*(n.y-i.y))/r;return e._dist2(t,o<0?i:o>1?n:new a.Point(i.x+o*(n.x-i.x),i.y+o*(n.y-i.y)))},e.prototype._isRotated=function(){return this._getChartType()==tt.Bar?!this._rotated:this._rotated},e.prototype._getChartType=function(){return null},e.prototype._prepareRender=function(){this._hitTester.clear()},e.prototype._renderChart=function(t,i,n){var r=this._rectChart.clone(),o=new a.Size(r.width,r.height);(y=this._getPlotter(null)).stacking=this._stacking,this._curPlotter!=y&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=y),y.load();var s=this._isRotated();this._dataInfo.analyse(this._series,s,y.stacking,this._xvals.length>0?this._xvals:null,this.axisX._getLogBase()>0,this.axisY._getLogBase()>0);var l=y.adjustLimits(this._dataInfo,i.clone());if(s){var h=this._dataInfo.getDataTypeX();h||(h=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),l.left,l.right),this.axisY._updateActualLimits(h,l.top,l.bottom,this._xlabels,this._xvals)}else{var c=this._dataInfo.getDataTypeX();c||(c=this._xDataType),this.axisX._updateActualLimits(c,l.left,l.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),l.top,l.bottom)}var u=this._getAxes();if(this._updateAuxAxes(u,s),this._layout(i,o,t),t.startGroup(e._CSS_PLOT_AREA),t.fill="transparent",t.stroke=null,this.plotAreas.length>0)for(var d=0;d<this.plotAreas.length;d++)this.plotAreas[d]._render(t);else{var p=this._plotRect;t.drawRect(p.left,p.top,p.width,p.height)}t.endGroup();var f=this._series.length;this._clearPlotters();var m={};for(d=0;d<f;d++){var g=this._series[d];if(((C=g.visibility)==Z.Visible||C==Z.Plot)&&g.getValues(0)){var _=g._getAxisY(),y=this._getPlotter(g);if(!_||_==this.axisY||y instanceof xt)y.seriesCount++;else{var b=_._uniqueId;m[b]?m[b].count+=1:m[b]={count:1,index:0}}}}if(this.onRendering(new S(t)),this._getChartType()!==tt.Funnel)for(d=0;d<u.length;d++){var v=u[d];w=t.startGroup(v.axisType==P.X?e._CSS_AXIS_X:e._CSS_AXIS_Y,this._chartRectId),v._hostElement=n?w:v._hostElement,v._render(t),t.endGroup()}for(t.startGroup("wj-series-group"),this._plotrectId="plotRect"+(1e6*Math.random()).toFixed(),t.addClipRect(this._plotRect,this._plotrectId),d=0;d<f;d++){var x=this._series[d];x._pointIndexes=[],y=this._getPlotter(x),x._plotter=y;var w=t.startGroup(x.cssClass,y.clipping?this._plotrectId:null);x._hostElement=n?w:x._hostElement;var C=x.visibility,j=x.axisX,T=x.axisY;if(j||(j=this.axisX),T||(T=this.axisY),C==Z.Visible||C==Z.Plot){var A,M,N=m[T._uniqueId];!N||y instanceof xt?(A=y.seriesIndex,M=y.seriesCount,y.seriesIndex++,x.onRendering(t,A,M)||y.plotSeries(t,j,T,x,this,A,M)):(A=N.index,M=N.count,N.index++,x.onRendering(t,A,M)||y.plotSeries(t,j,T,x,this,A,M)),x.onRendered(t)}t.endGroup()}t.endGroup(),this._lblAreas=[],this.dataLabel.content&&this.dataLabel.position!=O.None&&this._renderLabels(t),this._highlightCurrent(),this.onRendered(new S(t))},e.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new a.Size,o=this.series,s=o.length,l=0,h=0;this._colRowLens=[];for(var c=0;c<s;c++){var u=Object(a.tryCast)(o[c],rt),d=u.visibility;if(u.name&&d!=Z.Hidden&&d!=Z.Plot)for(var p=u.legendItemLength(),f=0;f<p;f++){var m=u.measureLegendItem(t,f);e?(l+m.height>n&&(r.height=n,this._colRowLens.push(h),h=0,l=0),h<m.width&&(h=m.width),l+=m.height):(h+m.width>i&&(r.width=i,this._colRowLens.push(l),l=0,h=0),l<m.height&&(l=m.height),h+=m.width)}}return e?(r.height<l&&(r.height=l),this._colRowLens.push(h),r.width=this._colRowLens.reduce((function(t,e){return t+e}),0),r.width>i/2&&(r.width=i/2)):(r.width<h&&(r.width=h),this._colRowLens.push(l),r.height=this._colRowLens.reduce((function(t,e){return t+e}),0),r.height>n/2&&(r.height=n/2)),r},e.prototype._renderLegend=function(t,e,i,n,r,o){var s,l=this.series,h=l.length,c=e.clone(),u=0;if(this._getChartType()===tt.Bar)for(var d=h-1;d>=0;d--)s=Object(a.tryCast)(l[d],rt),u=this._renderLegendElements(t,s,e,c,i,n,r,o,u);else for(d=0;d<h;d++)s=Object(a.tryCast)(l[d],rt),u=this._renderLegendElements(t,s,e,c,i,n,r,o,u)},e.prototype._renderLegendElements=function(t,e,i,n,r,o,s,l,h){var c=this._rectLegend,u=h;if(!e)return u;var d=e.visibility;if(!e.name||d==Z.Hidden||d==Z.Plot)return e._legendElement=null,r.push(null),u;var p=e.legendItemLength(),f=t.startGroup(e.cssClass);d==Z.Legend?(f.setAttribute("opacity","0.5"),e._legendElement=f):e._legendElement=d==Z.Visible?f:null;for(var m=0;m<p;m++){var g=e.measureLegendItem(t,m);o?n.y+g.height>c.top+c.height+1&&(n.x+=this._colRowLens[u],u++,n.y=i.y):n.x+g.width>c.left+c.width+1&&(n.y+=this._colRowLens[u],u++,n.x=i.x);var _=new a.Rect(n.x,n.y,g.width,g.height);d!=Z.Legend&&d!=Z.Visible||e.drawLegendItem(t,_,m),r.push(_),o?n.y+=g.height:n.x+=g.width}return t.endGroup(),u},e.prototype._renderLabels=function(t){var i=this.series,n=i.length;t.stroke="null",t.fill="transparent",t.strokeWidth=1,t.startGroup(e._CSS_DATA_LABELS);for(var r=0;r<n;r++){var o=this._hitTester._map[r];o&&i[r]._renderLabels(t,o,this,this._lblAreas)}t.endGroup()},e.prototype._getAxes=function(){for(var t=[this.axisX,this.axisY],e=this.series.length,i=0;i<e;i++){var n=this.series[i],r=n.axisX;r&&-1===t.indexOf(r)&&t.push(r);var o=n.axisY;o&&-1===t.indexOf(o)&&t.push(o)}return t},e.prototype._clearPlotters=function(){for(var t=this._plotters.length,e=0;e<t;e++)this._plotters[e].clear()},e.prototype._initPlotter=function(t){t.chart=this,t.dataInfo=this._dataInfo,t.hitTester=this._hitTester,this._plotters.push(t)},Object.defineProperty(e.prototype,"_barPlotter",{get:function(){return null===this.__barPlotter&&(this.__barPlotter=new xt,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_linePlotter",{get:function(){return null===this.__linePlotter&&(this.__linePlotter=new Ot,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_areaPlotter",{get:function(){return null===this.__areaPlotter&&(this.__areaPlotter=new vt,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_bubblePlotter",{get:function(){return null===this.__bubblePlotter&&(this.__bubblePlotter=new jt,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_financePlotter",{get:function(){return null===this.__financePlotter&&(this.__financePlotter=new Ct,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_funnelPlotter",{get:function(){return null===this.__funnelPlotter&&(this.__funnelPlotter=new wt,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),e.prototype._getPlotter=function(t){var e,i=this._getChartType(),n=!1;if(t){var r=t._getChartType();null!=r&&r!=i&&(i=r,n=!0)}switch(i){case tt.Column:this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case tt.Bar:this._barPlotter.rotated=!this._rotated,this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case tt.Line:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,e=this._linePlotter;break;case tt.Scatter:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!1,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,e=this._linePlotter;break;case tt.LineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,e=this._linePlotter;break;case tt.Area:this._areaPlotter.isSpline=!1,this._areaPlotter.isStep=!1,e=this._areaPlotter;break;case tt.Bubble:e=this._bubblePlotter;break;case tt.Candlestick:(o=this._financePlotter).isCandle=!0,o.isEqui=!1,o.isArms=!1,o.isVolume=!1,e=o;break;case tt.HighLowOpenClose:var o;(o=this._financePlotter).isCandle=!1,o.isEqui=!1,o.isArms=!1,o.isVolume=!1,e=o;break;case tt.Spline:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,this._linePlotter.isStep=!1,e=this._linePlotter;break;case tt.SplineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,this._linePlotter.isStep=!1,e=this._linePlotter;break;case tt.SplineArea:this._areaPlotter.isSpline=!0,this._areaPlotter.isStep=!1,e=this._areaPlotter;break;case tt.Funnel:e=this._funnelPlotter;break;case tt.Step:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!0,e=this._linePlotter;break;case tt.StepSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!0,e=this._linePlotter;break;case tt.StepArea:this._areaPlotter.isSpline=!1,this._areaPlotter.isStep=!0,e=this._areaPlotter;break;default:throw"Invalid chart type."}return e.rotated=this._rotated,i==tt.Bar&&(e.rotated=!e.rotated),n&&(e.rotated=this._isRotated()),e},e.prototype._layout=function(t,e,i){this.plotAreas.length>0?this._layoutMultiple(t,e,i):this._layoutSingle(t,e,i)},e.prototype._layoutSingle=function(t,e,i){for(var n=t.width,r=t.height,o=new a.Size(n,.75*r),s=new a.Size(r,.75*n),l=0,h=0,c=n,u=r,d=0,p=0,f=n,m=r,_=this._getAxes(),y=0;y<_.length;y++){var b=(T=_[y]).origin,v=T._getPosition();if(T.axisType==P.X){(C=T._getHeight(i,n))>o.height&&(C=o.height),T._desiredSize=new a.Size(o.width,C);var x=T._hasOrigin=Object(a.isNumber)(b)&&b>this.axisY._getMinNum()&&b<this.axisY._getMaxNum(),w=Math.min(.25*n,T._annoSize.width);if(v==g.Bottom)if(l=Math.max(l,.5*w),c=Math.min(c,n-.5*w),x){var S=this._convertY(b,p,m);m-=Math.max(0,S+C-m)}else m-=C;else v==g.Top&&(l=Math.max(l,.5*w),c=Math.min(c,n-.5*w),x?(S=this._convertY(b,p,m),p+=Math.max(0,p-(S-C))):p+=C)}else if(T.axisType==P.Y){var C;if((C=T._getHeight(i,r))>s.height&&(C=s.height),T._desiredSize=new a.Size(s.width,C),x=T._hasOrigin=Object(a.isNumber)(b)&&b>this.axisX._getMinNum()&&b<this.axisX._getMaxNum(),v==g.Left)if(T._actualAngle<0?u=Math.min(u,r-T._annoSize.height):T._actualAngle>0?h=Math.max(h,T._annoSize.height):(h=Math.max(h,T._annoSize.height),u=Math.min(u,r-T._annoSize.height)),x){var O=this._convertX(b,d,f);d+=Math.max(0,d-(O-C))}else d+=C;else v==g.Right&&(T._actualAngle>0?u=Math.min(u,r-T._annoSize.height):T._actualAngle<0?h=Math.max(h,T._annoSize.height):(h=Math.max(h,T._annoSize.height),u=Math.min(u,r-T._annoSize.height)),x?(O=this._convertX(b,d,f),f-=Math.max(0,O+C-f)):f-=C)}}var j=this._parseMargin(this.plotMargin);for(l=d=isNaN(j.left)?Math.max(l,d)+t.left:j.left,c=f=isNaN(j.right)?Math.min(c,f)+t.left:e.width-j.right,h=p=isNaN(j.top)?Math.max(h,p)+t.top:j.top,u=m=isNaN(j.bottom)?Math.min(u,m)+t.top:e.height-j.bottom,n=Math.max(1,c-l),r=Math.max(1,u-h),this._plotRect=new a.Rect(l,h,n,r),u<=h&&(m=p+1),i.stroke=null,y=0;y<_.length;y++){var T,A;if(b=(T=_[y]).origin,v=T._getPosition(),T.axisType==P.X)T._hasOrigin?(S=this._convertY(b,this._plotRect.top,this._plotRect.bottom),v==g.Bottom?(A=new a.Rect(l,S,n,T._desiredSize.height),m+=Math.max(0,A.bottom-this._plotRect.bottom)):v==g.Top?(A=new a.Rect(l,S-T._desiredSize.height,n,T._desiredSize.height),p-=Math.max(0,this._plotRect.top-A.top)):A=new a.Rect(l,S,n,1)):v==g.Bottom?(A=new a.Rect(l,m,n,T._desiredSize.height),m+=T._desiredSize.height):v==g.Top?(A=new a.Rect(l,p-T._desiredSize.height,n,T._desiredSize.height),p-=T._desiredSize.height):A=new a.Rect(l,p,n,1),T._layout(A,this._plotRect);else if(T.axisType==P.Y){var M;T._hasOrigin?(O=this._convertX(b,this._plotRect.left,this._plotRect.right),v==g.Left?(M=new a.Rect(O-T._desiredSize.height,h,r,T._desiredSize.height),d-=T._desiredSize.height):v==g.Right?(M=new a.Rect(O,h,r,T._desiredSize.height),f+=T._desiredSize.height):M=new a.Rect(O,h,r,1)):v==g.Left?(M=new a.Rect(d-T._desiredSize.height,h,r,T._desiredSize.height),d-=T._desiredSize.height):v==g.Right?(M=new a.Rect(f,h,r,T._desiredSize.height),f+=T._desiredSize.height):M=new a.Rect(d,h,r,1),T._layout(M,this._plotRect)}}},e.prototype._layoutMultiple=function(t,e,i){for(var n=t.width,r=t.height,o=[],s=[],l=this._getAxes(),h=l.length,c=0;c<h;c++)if((j=l[c])._plotrect=null,j.axisType==P.X){for(var u=j.plotArea?j.plotArea.column:0;o.length<=u;)o.push(new mt);o[u].axes.push(j)}else if(j.axisType==P.Y){for(var d=j.plotArea?j.plotArea.row:0;s.length<=d;)s.push(new mt);s[d].axes.push(j)}for(var p=o.length,f=s.length,m=new a.Size(n,.3*r),_=new a.Size(r,.3*n),y=0,b=0,v=n,x=r,w=0;w<p;w++)for((I=o[w]).right=n,I.bottom=r,c=0;c<I.axes.length;c++){var S=(j=I.axes[c])._getHeight(i,j.axisType==P.X?n:r);S>m.height&&(S=m.height);var C=new a.Size(m.width,S);j._desiredSize=C,0==w&&(I.left=Math.max(I.left,.5*j._annoSize.width)),w==p-1&&(I.right=Math.min(I.right,n-.5*j._annoSize.width)),(V=j._getPosition())==g.Bottom?I.bottom-=C.height:V==g.Top&&(I.top+=C.height)}for(var O=0;O<f;O++)for((I=s[O]).right=n,I.bottom=r,c=0;c<I.axes.length;c++){var j=I.axes[c],T=new a.Size(_.width,j._getHeight(i,j.axisType==P.X?n:r));T.height>_.height&&(T.height=_.height),j._desiredSize=T,0==O&&(I.top=Math.max(I.top,.5*j._annoSize.width)),O==f-1&&(I.bottom=Math.min(I.bottom,r-.5*j._annoSize.width)),(V=j._getPosition())==g.Left?I.left+=T.height:V==g.Right&&(I.right-=T.height)}var A=0,M=0,N=n,E=r;for(w=0;w<p;w++){var I=o[w];A=Math.max(A,I.left),M=Math.max(M,I.top),N=Math.min(N,I.right),E=Math.min(E,I.bottom)}for(O=0;O<f;O++)I=s[O],A=Math.max(A,I.left),M=Math.max(M,I.top),N=Math.min(N,I.right),E=Math.min(E,I.bottom);A=y=Math.max(y,A),N=v=Math.min(v,N),M=b=Math.max(b,M),E=x=Math.min(x,E),this._plotRect=new a.Rect(y,b,v-y,x-b);var k=this._plotRect.clone(),F=y,D=this.plotAreas._calculateWidths(this._plotRect.width,p);for(w=0;w<p;w++){E=x,M=b,I=o[w];var L=D[w];for(c=0;c<I.axes.length;c++){var R,V=(j=I.axes[c])._getPosition(),B=new a.Rect(F,k.top,L,k.height);V==g.Bottom?(R=new a.Rect(F,E,L,j._desiredSize.height),E+=j._desiredSize.height):V==g.Top&&(R=new a.Rect(F,M-j._desiredSize.height,L,j._desiredSize.height),M-=j._desiredSize.height),j._layout(R,B)}for(c=0;c<this.plotAreas.length;c++)(X=this.plotAreas[c]).column==w&&X._setPlotX(F,L);F+=L}var z=b,W=this.plotAreas._calculateHeights(this._plotRect.height,f);for(O=0;O<f;O++){A=y,N=v,I=s[O];var H=W[O];for(c=0;c<I.axes.length;c++){var G;V=(j=I.axes[c])._getPosition(),B=new a.Rect(k.left,z,k.width,H),j._plotrect?(B.left=j._plotrect.left,B.width=j._plotrect.width):D&&D.length>0&&(B.width=D[0]),V==g.Left?(G=new a.Rect(A-j._desiredSize.height,z,H,j._desiredSize.height),A-=j._desiredSize.height):V==g.Right&&(G=new a.Rect(N,z,H,j._desiredSize.height),N+=j._desiredSize.height),j._layout(G,B)}for(c=0;c<this.plotAreas.length;c++){var X;(X=this.plotAreas[c]).row==O&&X._setPlotY(z,H)}z+=H}},e.prototype._convertX=function(t,e,i){var n=this.axisX;return n.reversed?i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},e.prototype._convertY=function(t,e,i){var n=this.axisY;return n.reversed?e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},e.prototype._getLabelContent=function(t,e){return Object(a.isString)(e)?this._keywords.replace(e,t):Object(a.isFunction)(e)?e(t):null},e.prototype._select=function(t,e){var i=!1;if(t==this._selection&&e==this._selectionIndex||(i=!0),this._selection&&this._highlight(this._selection,!1,this._selectionIndex),this._selection=t,this._selectionIndex=e,this._selection&&this._highlight(this._selection,!0,this._selectionIndex),this.selectionMode==m.Point){var n=t?t.collectionView:this._cv;n&&(this._notifyCurrentChanged=!1,n.moveCurrentToPosition(t?e:-1),this._notifyCurrentChanged=!0)}i&&this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=m.None){var t=this._selection,e=-1;if(t){var i=t.collectionView;i||(i=this._cv),i&&(e=i.currentPosition),this._highlight(t,!0,e)}}},e.prototype._highlight=function(t,i,n){if(t=Object(a.asType)(t,rt,!0),this.selectionMode==m.Series){var r=this.series.indexOf(t),o=t.hostElement;i?o.parentNode.appendChild(o):o.parentNode.insertBefore(o,o.parentNode.childNodes.item(r));var s=this._find(o,["rect","ellipse","polyline","polygon","line","path"]);this._highlightItems(s,e._CSS_SELECTION,i),t.legendElement&&this._highlightItems(this._find(t.legendElement,["rect","ellipse","line"]),e._CSS_SELECTION,i)}else if(this.selectionMode==m.Point)if(r=this.series.indexOf(t),o=t.hostElement,i){o.parentNode.appendChild(o);var l=t.getPlotElement(n);l&&(l instanceof SVGElement?("g"!=l.nodeName&&this._highlightItems([l],e._CSS_SELECTION,i),s=this._find(l,["line","rect","ellipse","path","polygon"]),this._highlightItems(s,e._CSS_SELECTION,i)):Array.isArray(l)&&this._highlightItems(l,e._CSS_SELECTION,i))}else o.parentNode.insertBefore(o,o.parentNode.childNodes.item(r)),s=this._find(o,["rect","ellipse","line","path","polygon"]),this._highlightItems(s,e._CSS_SELECTION,i)},e.prototype._updateTooltip=function(t,e){var i,n=this.hitTest(e);if(n.distance<=t.threshold){var r=t.content;if(n.series){var o=n.series.tooltipContent;(o||""===o)&&(r=o)}i=this._getLabelContent(n,r)}i?this._showToolTip(i,new a.Rect(e.clientX,e.clientY,5,5)):this._hideToolTip()},e.prototype._updateAuxAxes=function(t,e){for(var i=2;i<t.length;i++){var n=t[i];n._chart=this;for(var r,o,s=[],l=0;l<this.series.length;l++){var h=this.series[l];h.axisX!=n&&h.axisY!=n||s.push(h)}for(l=0;l<s.length;l++){var c=s[l].getDataRect()||s[l]._getDataRect();c&&(n.axisType==P.X&&!e||n.axisType==P.Y&&e?((void 0===r||c.left<r)&&(r=c.left),(void 0===o||c.right>o)&&(o=c.right)):((void 0===r||c.top<r)&&(r=c.top),(void 0===o||c.bottom>o)&&(o=c.bottom)))}var u=s[0].getDataType(0);null==u&&(u=a.DataType.Number),t[i]._updateActualLimits(u,r,o)}},e._CSS_AXIS_X="wj-axis-x",e._CSS_AXIS_Y="wj-axis-y",e._CSS_LINE="wj-line",e._CSS_GRIDLINE="wj-gridline",e._CSS_TICK="wj-tick",e._CSS_GRIDLINE_MINOR="wj-gridline-minor",e._CSS_TICK_MINOR="wj-tick-minor",e._CSS_DATA_LABELS="wj-data-labels",e}(T),mt=function(){function t(){this._axes=new Array,this.left=0,this.right=0,this.top=0,this.bottom=0}return Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),t}(),gt=function(){function t(){this.stackAbs={},this._xvals=null}return t.prototype.analyse=function(e,i,n,r,o,s){var l=this;this.minY=NaN,this.maxY=NaN,this.minX=NaN,this.maxX=NaN,this.minXp=NaN,this.minYp=NaN,this.dx=0;var h={},c={},u={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=r,null!=r)for(var d=r.length,p=0;p<d;p++){var f=r[p];if((isNaN(this.minX)||this.minX>f)&&(this.minX=f),(isNaN(this.maxX)||this.maxX<f)&&(this.maxX=f),f>0&&(isNaN(this.minXp)||this.minXp>f)&&(this.minXp=f),p>0){var m=Math.abs(f-r[p-1]);!isNaN(m)&&(m<this.dx||0==this.dx)&&(this.dx=m)}}for(p=0;p<e.length;p++){var g=e[p],_=g._getChartType(),y=void 0!==g.chartType,b=g.visibility;if(b!=Z.Hidden&&b!=Z.Legend){var v,x=g.getDataRect();x&&(!isNaN(this.minX)&&this.minX<x.left&&(v=x.right,x.left=this.minX,x.width=v-this.minX),!isNaN(this.maxX)&&this.maxX>x.right&&(x.width=this.maxX-x.left),!isNaN(this.minY)&&this.minY<x.top&&(v=x.bottom,x.top=this.minY,x.height=v-this.minY),!isNaN(this.maxY)&&this.maxY>x.bottom&&(x.height=this.maxY-x.top));var w=null;if(i?g._isCustomAxisY()||(w=g.getValues(1)):g._isCustomAxisX()||(w=g.getValues(1)),w){this.dataTypeX||(this.dataTypeX=g.getDataType(1));for(var S=0;S<w.length;S++){var C=w[S];t.isValid(C)&&((isNaN(this.minX)||this.minX>C)&&(this.minX=C),(isNaN(this.maxX)||this.maxX<C)&&(this.maxX=C),S>0&&(!_||_==tt.Column||_==tt.Bar)&&(m=Math.abs(C-w[S-1]),!isNaN(m)&&m>0&&(m<this.dx||0==this.dx)&&(this.dx=m)))}}var O=null,j=!1;if(i?(j=g._isCustomAxisX(),O=g.getValues(0)):(j=g._isCustomAxisY(),O=g.getValues(0)),O&&(this.dataTypeY||j||(this.dataTypeY=g.getDataType(0)),isNaN(this.minX)?this.minX=0:w||r||(this.minX=Math.min(this.minX,0)),isNaN(this.maxX)?this.maxX=O.length-1:w||r||(this.maxX=Math.max(this.maxX,O.length-1)),!j))for(S=0;S<O.length;S++)C=O[S],f=w?Object(a.asNumber)(w[S],!0):r?Object(a.asNumber)(r[S],!0):S,Object(a.isArray)(C)?C.forEach((function(t){l._parseYVal(t,f,y,u,h,c)})):this._parseYVal(C,f,y,u,h,c);var T=g.getDataRect(new a.Rect(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY),x);T&&(this.minX=T.left,this.maxX=T.right,this.minY=T.top,this.maxY=T.bottom)}}if(n==et.Stacked){for(var A in h)h[A]>this.maxY&&(this.maxY=h[A]);for(var A in c)c[A]<this.minY&&(this.minY=c[A])}else if(n==et.Stacked100pc){for(var A in this.minY=0,this.maxY=0,u){var M=u[A];if(isFinite(M)&&0!=M){var N=h[A],P=c[A];isFinite(N)&&(N=Math.max(N/M,this.maxY))>this.maxY&&(this.maxY=N),isFinite(P)&&(P=Math.min(P/M,this.minY))<this.minY&&(this.minY=P)}}this.minY==this.maxY&&(this.minY=0,this.maxY=1)}this.stackAbs=u,o&&(i?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp),s&&(i?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},t.prototype._parseYVal=function(e,i,n,r,o,a){t.isValid(e)&&(null!=e&&(isNaN(this.minY)||this.minY>e)&&(this.minY=e),null!=e&&(isNaN(this.maxY)||this.maxY<e)&&(this.maxY=e),e>0&&(isNaN(this.minYp)||this.minYp>e)&&(this.minYp=e),n||(e>0?isNaN(o[i])?o[i]=e:o[i]+=e:isNaN(a[i])?a[i]=e:a[i]+=e,isNaN(r[i])?r[i]=Math.abs(e):r[i]+=Math.abs(e)))},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinXp=function(){return this.minXp},t.prototype.getMinYp=function(){return this.minYp},t.prototype.getDeltaX=function(){return this.dx},t.prototype.getDataTypeX=function(){return this.dataTypeX},t.prototype.getDataTypeY=function(){return this.dataTypeY},t.prototype.getStackedAbsSum=function(t){var e=this.stackAbs[t];return isFinite(e)?e:0},t.prototype.getXVals=function(){return this._xvals},t.isValid=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,n=0;n<i;n++)if(!isFinite(t[n]))return!1;return!0},t}(),_t=new(function(){function t(){this._moveMarker=function(t){var e=this._markers,i=t.currentTarget.getAttribute("data-markerIndex");null!=i&&e[i].forEach((function(e){e._moveMarker(t)}))},this._markers=[],this._bindMoveMarker=this._moveMarker.bind(this)}return t.prototype.attach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,o=n.getAttribute("data-markerIndex");null!=o?(i=r[o])&&Object(a.isArray)(i)?i.push(t):(r[o]=[t],this._bindMoveEvent(n)):(e=r.length,r.push(i=[t]),n.setAttribute("data-markerIndex",e),this._bindMoveEvent(n))},t.prototype.detach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,o=n.getAttribute("data-markerIndex");null!=o&&((e=(i=r[o]).indexOf(t))>-1&&i.splice(e,1),0===i.length&&((e=r.indexOf(i))>-1&&(r[e]=void 0),this._unbindMoveEvent(n)))},t.prototype._unbindMoveEvent=function(t){var e=this._bindMoveMarker;t.removeEventListener("mousemove",e),"ontouchstart"in window&&t.removeEventListener("touchmove",e)},t.prototype._bindMoveEvent=function(t){var e=this._bindMoveMarker;t.addEventListener("mousemove",e),"ontouchstart"in window&&t.addEventListener("touchmove",e)},t}());!function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal",t[t.Both=3]="Both"}(ut||(ut={})),function(t){t[t.None=0]="None",t[t.Move=1]="Move",t[t.Drag=2]="Drag"}(dt||(dt={})),function(t){t[t.Auto=2]="Auto",t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Bottom=4]="Bottom",t[t.Top=6]="Top"}(pt||(pt={}));var yt=function(){function t(t,e){this._wrapperMousedown=null,this._wrapperMouseup=null,this.positionChanged=new a.Event,this._chart=t,t.rendered.addHandler(this._initialize,this),this._resetDefaultValue(),Object(a.copy)(this,e),this._initialize()}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){t!==this._isVisible&&(this._isVisible=Object(a.asBoolean)(t),this._marker&&this._toggleVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(t){t!==this._seriesIndex&&(this._seriesIndex=Object(a.asNumber)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(t){if(t!==this._horizontalPosition){if(this._horizontalPosition=Object(a.asNumber)(t,!0),this._horizontalPosition<0||this._horizontalPosition>1)throw"horizontalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._chart.axisX.convertBack(this._targetPoint.x-this._plotRect.left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._chart.axisY.convertBack(this._targetPoint.y-this._plotRect.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!==this._content&&(this._content=Object(a.asFunction)(t),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(t){if(t!==this._verticalPosition){if(this._verticalPosition=Object(a.asNumber)(t,!0),this._verticalPosition<0||this._verticalPosition>1)throw"verticalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(t){t!==this._alignment&&(this._alignment=t,this._marker&&this._updatePositionByAlignment())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lines",{get:function(){return this._lines},set:function(t){(t=Object(a.asEnum)(t,ut))!=this._lines&&(this._lines=t,this._marker&&this._resetLinesVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interaction",{get:function(){return this._interaction},set:function(t){(t=Object(a.asEnum)(t,dt))!=this._interaction&&(this._marker&&this._detach(),this._interaction=t,this._marker&&this._attach(),this._toggleElesDraggableClass(this._interaction==dt.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){t!=this._dragThreshold&&(this._dragThreshold=Object(a.asNumber)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragContent",{get:function(){return this._dragContent},set:function(e){e!==this._dragContent&&(this._dragContent=Object(a.asBoolean)(e)),Object(a.toggleClass)(this._dragEle,t._CSS_LINE_DRAGGABLE,this._interaction===dt.Drag&&this._dragContent&&this._lines!==ut.None)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragLines",{get:function(){return this._dragLines},set:function(t){t!=this._dragLines&&(this._dragLines=Object(a.asBoolean)(t))},enumerable:!0,configurable:!0}),t.prototype.onPositionChanged=function(t){this.positionChanged.raise(this,t)},t.prototype.remove=function(){this._marker&&(this._chart.rendered.removeHandler(this._initialize,this),this._detach(),this._removeMarker(),this._wrapperMoveMarker=null,this._wrapperMousedown=null,this._wrapperMouseup=null)},t.prototype._attach=function(){var e=this._chart.hostElement;this._interaction!==dt.None?Object(a.addClass)(e,t._CSS_TOUCH_DISABLED):Object(a.removeClass)(e,t._CSS_TOUCH_DISABLED),_t.attach(this),this._attachDrag()},t.prototype._attachDrag=function(){this._interaction===dt.Drag&&(this._wrapperMousedown||(this._wrapperMousedown=this._onMousedown.bind(this)),this._wrapperMouseup||(this._wrapperMouseup=this._onMouseup.bind(this)),this._toggleDragEventAttach(!0))},t.prototype._detach=function(){Object(a.removeClass)(this._chart.hostElement,t._CSS_TOUCH_DISABLED),_t.detach(this),this._detachDrag()},t.prototype._detachDrag=function(){this._interaction===dt.Drag&&this._toggleDragEventAttach(!1)},t.prototype._toggleDragEventAttach=function(t){var e=this._chart.hostElement,i=t?"addEventListener":"removeEventListener";e[i]("mousedown",this._wrapperMousedown),document[i]("mouseup",this._wrapperMouseup),"ontouchstart"in window&&e[i]("touchstart",this._wrapperMousedown),"ontouchend"in window&&document[i]("touchend",this._wrapperMouseup)},t.prototype._onMousedown=function(e){var i,n,r,o,s,l=this._getEventPoint(e);this._interaction===dt.Drag&&(o=!(0===(i=Object(a.getElementRect)(this._hLine)).width||0===i.height),s=!(0===(n=Object(a.getElementRect)(this._vLine)).width||0===n.height),r=Object(a.getElementRect)(this._markerContent),this._dragContent&&this._pointInRect(l,r)?(this._capturedEle=this._markerContent,this._contentDragStartPoint=new a.Point(l.x,l.y),this._mouseDownCrossPoint=new a.Point(this._targetPoint.x,this._targetPoint.y)):o&&(Math.abs(i.top-l.y)<=this._dragThreshold||Math.abs(l.y-i.top-i.height)<=this._dragThreshold||l.y>=i.top&&l.y<=i.top+i.height)?(this._capturedEle=this._hLine,this._contentDragStartPoint=void 0,Object(a.addClass)(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)):s&&(Math.abs(n.left-l.x)<=this._dragThreshold||Math.abs(l.x-n.left-n.width)<=this._dragThreshold||l.x>=n.left&&l.x<=n.left+n.width)&&(this._capturedEle=this._vLine,this._contentDragStartPoint=void 0,Object(a.addClass)(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)),e.preventDefault())},t.prototype._onMouseup=function(e){var i=this._alignment===pt.Auto&&this._capturedEle===this._markerContent&&this._lines!==ut.None;this._capturedEle=void 0,this._contentDragStartPoint=void 0,this._mouseDownCrossPoint=void 0,i&&(this._updatePositionByAlignment(),this._updatePositionByAlignment()),Object(a.removeClass)(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)},t.prototype._moveMarker=function(t){var e,i,n,r,o,s,l=this._chart,h=this._getEventPoint(t),c=this._plotRect,u=this._interaction===dt.Drag,d=this._lines===ut.Horizontal,p=this._lines===ut.Vertical,f=this._seriesIndex,m=Object(a.getElementRect)(l.hostElement);if(c&&this._isVisible&&this._interaction!==dt.None&&(this._interaction!==dt.Drag||this._capturedEle&&this._lines!==ut.None)){if(u&&(this._contentDragStartPoint?(h.x=d?this._targetPoint.x:this._mouseDownCrossPoint.x+h.x-this._contentDragStartPoint.x,h.y=p?this._targetPoint.y:this._mouseDownCrossPoint.y+h.y-this._contentDragStartPoint.y):d||!this._dragLines&&this._capturedEle===this._hLine?h.x=this._targetPoint.x:(p||!this._dragLines&&this._capturedEle===this._vLine)&&(h.y=this._targetPoint.y)),u&&this._lines===ut.Horizontal||!this._dragLines&&this._capturedEle===this._hLine){if(h.y<=c.top||h.y>=c.top+c.height)return}else if(u&&this._lines===ut.Vertical||!this._dragLines&&this._capturedEle===this._vLine){if(h.x<=c.left||h.x>=c.left+c.width)return}else if(h.x<=c.left||h.y<=c.top||h.x>=c.left+c.width||h.y>=c.top+c.height)return;if(null!=f&&f>=0&&f<l.series.length){if(null==(i=(e=l.series[f]).hitTest(new a.Point(h.x,NaN)))||null==i.x||null==i.y)return;n=e.axisX||l.axisX,r=e._getAxisY(),o=Object(a.isDate)(i.x)?ft._toOADate(i.x):i.x,o=Object(a.isString)(o)?i.pointIndex:o,s=Object(a.isDate)(i.y)?ft._toOADate(i.y):i.y;var g=this._getElementPaddingValuee(l.hostElement,"padding-left"),_=this._getElementPaddingValuee(l.hostElement,"padding-top");h.x=n.convert(o)+g+m.left,h.y=r.convert(s)+_+m.top}this._updateMarkerPosition(h),t.preventDefault()}},t.prototype._getElementPaddingValuee=function(t,e){return+window.getComputedStyle(t,null).getPropertyValue(e).replace("px","")},t.prototype._show=function(t){(t||this._marker).style.display="block"},t.prototype._hide=function(t){(t||this._marker).style.display="none"},t.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},t.prototype._resetDefaultValue=function(){this._isVisible=!0,this._alignment=pt.Auto,this._lines=ut.None,this._interaction=dt.None,this._horizontalPosition=null,this._verticalPosition=null,this._content=null,this._seriesIndex=null,this._dragThreshold=15,this._dragContent=!1,this._dragLines=!1,this._targetPoint=new a.Point},t.prototype._initialize=function(){var t,e=this._chart.hostElement.querySelector("."+ft._CSS_PLOT_AREA);this._plot=e,this._marker||this._createMarker(),e&&(this._plotRect=Object(a.getElementRect)(e),t=e.getBBox(),this._plotRect.width=t.width,this._plotRect.height=t.height,this._updateMarkerSize(),this._updateLinesSize()),this._updateMarkerPosition(),this._wrapperMoveMarker=this._moveMarker.bind(this),this._attach()},t.prototype._createMarker=function(){var e,i;e=document.createElement("div"),Object(a.addClass)(e,t._CSS_MARKER),(i=this._getContainer()).appendChild(e),this._markerContainer=i,this._marker=e,this._createChildren()},t.prototype._removeMarker=function(){var t=this._markerContainer;t.removeChild(this._marker),this._content=null,this._hLine=null,this._vLine=null,t.hasChildNodes()||(this._chart.hostElement.removeChild(this._markerContainer),this._markerContainer=null),this._marker=null},t.prototype._getContainer=function(){var e=this._chart.hostElement.querySelector(t._CSS_MARKER_CONTAINER);return e||(e=this._createContainer()),e},t.prototype._createContainer=function(){var e=document.createElement("div"),i=this._chart.hostElement;return Object(a.addClass)(e,t._CSS_MARKER_CONTAINER),i.insertBefore(e,i.firstChild),e},t.prototype._createChildren=function(){var e,i,n,r,o=this._marker;(r=document.createElement("div")).style.position="absolute",r.style.height="100%",r.style.width="100%",o.appendChild(r),this._dragEle=r,e=document.createElement("div"),Object(a.addClass)(e,t._CSS_MARKER_CONTENT),o.appendChild(e),this._markerContent=e,i=document.createElement("div"),Object(a.addClass)(i,t._CSS_MARKER_HLINE),o.appendChild(i),this._hLine=i,n=document.createElement("div"),Object(a.addClass)(n,t._CSS_MARKER_VLINE),o.appendChild(n),this._vLine=n,this._toggleElesDraggableClass(this._interaction===dt.Drag),this._resetLinesVisibility()},t.prototype._toggleElesDraggableClass=function(e){Object(a.toggleClass)(this._hLine,t._CSS_LINE_DRAGGABLE,e),Object(a.toggleClass)(this._vLine,t._CSS_LINE_DRAGGABLE,e),Object(a.toggleClass)(this._dragEle,t._CSS_LINE_DRAGGABLE,e&&this._dragContent&&this._lines!==ut.None)},t.prototype._updateMarkerSize=function(){var t=this._plotRect,e=this._chart.hostElement,i=window.getComputedStyle(e,null),n=Object(a.getElementRect)(e);this._marker&&(this._marker.style.marginTop=t.top-n.top-(parseFloat(i.getPropertyValue("padding-top"))||0)+"px",this._marker.style.marginLeft=t.left-n.left-(parseFloat(i.getPropertyValue("padding-left"))||0)+"px")},t.prototype._updateLinesSize=function(){var t=this._plotRect;this._hLine&&this._vLine&&(this._hLine.style.width=t.width+"px",this._vLine.style.height=t.height+"px")},t.prototype._resetLinesVisibility=function(){this._hLine&&this._vLine&&(this._hide(this._hLine),this._hide(this._vLine),this._lines!==ut.Horizontal&&this._lines!==ut.Both||this._show(this._hLine),this._lines!==ut.Vertical&&this._lines!==ut.Both||this._show(this._vLine))},t.prototype._updateMarkerPosition=function(t){var e,i,n=this._plotRect,r=this._targetPoint,o=!1;this._plot&&(e=n.left+n.width*(this._horizontalPosition||0),i=n.top+n.height*(this._verticalPosition||0),null==this._horizontalPosition&&t&&(e=t.x),null==this._verticalPosition&&t&&(i=t.y),e===r.x&&i===r.y||(o=!0),r.x=e,r.y=i,this._toggleVisibility(),this._content&&this._updateContent(),o&&this._raisePositionChanged(e,i),this._updatePositionByAlignment(!!t))},t.prototype._updateContent=function(){var t,e=this._targetPoint,i=this._chart.hitTest(e);t=this._content.call(null,i,e),this._markerContent.innerHTML=t||""},t.prototype._raisePositionChanged=function(t,e){this.onPositionChanged(new a.Point(t,e))},t.prototype._updatePositionByAlignment=function(t){var e=this._alignment,i=this._targetPoint,n=this._marker,r=0,o=0,a=n.clientWidth,s=n.clientHeight,l=this._plotRect;this._plot&&(!this._capturedEle||this._capturedEle&&this._capturedEle!==this._markerContent?(e===pt.Auto?(i.x+a+12>l.left+l.width&&i.x-a>=0&&(o=a),r=s,i.y-s<l.top&&(r=0)):(1==(1&e)&&(o=a),2==(2&e)&&(r=s)),this._interaction===dt.Move&&0===r&&0===o&&null==this.verticalPosition&&(o=-12)):(parseInt(this._hLine.style.top)>0&&(r=s),parseInt(this._vLine.style.left)>0&&(o=a)),n.style.left=i.x-o-l.left+"px",n.style.top=i.y-r-l.top+"px",this._hLine.style.top=r+"px",this._hLine.style.left=l.left-i.x+o+"px",this._vLine.style.top=l.top-i.y+r+"px",this._vLine.style.left=o+"px")},t.prototype._getEventPoint=function(t){return t instanceof MouseEvent?new a.Point(t.pageX,t.pageY):new a.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},t.prototype._pointInRect=function(t,e){return!(!t||!e)&&t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height},t._CSS_MARKER="wj-chart-linemarker",t._CSS_MARKER_HLINE="wj-chart-linemarker-hline",t._CSS_MARKER_VLINE="wj-chart-linemarker-vline",t._CSS_MARKER_CONTENT="wj-chart-linemarker-content",t._CSS_MARKER_CONTAINER="wj-chart-linemarker-container",t._CSS_LINE_DRAGGABLE="wj-chart-linemarker-draggable",t._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled",t}(),bt=function(t){function e(e,i){var n=t.call(this,e,null)||this;return n._chartType=tt.Column,n.initialize(i),n}return l(e,t),e.prototype._getChartType=function(){return this._chartType},Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=Object(a.asEnum)(t,tt))!=this._chartType&&(this._chartType=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotated",{get:function(){return this._rotated},set:function(t){t!=this._rotated&&(this._rotated=Object(a.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stacking",{get:function(){return this._stacking},set:function(t){(t=Object(a.asEnum)(t,et))!=this._stacking&&(this._stacking=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(t){t!=this._options&&(this._options=t,this.invalidate())},enumerable:!0,configurable:!0}),e}(ft),vt=function(t){function e(){var e=t.call(this)||this;return e.stacking=et.None,e.isSpline=!1,e.isStep=!1,e.stackPos={},e.stackNeg={},e}return l(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;for(var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY(),s=0;s<this.chart.series.length;s++){var l=this.chart.series[s];if(this._isRange(l)){var h=l._getChartType();if(!h||h==tt.Area)for(var c=l._getBindingValues(1),u=0;u<c.length;u++)c[u]>o?o=c[u]:c[u]<n&&(n=c[u])}}if(this.isSpline){var d=.1*(o-n);this.chart.axisY._getLogBase()||(n-=d),o+=d}return this.rotated?new a.Rect(n,i,o-n,r-i):new a.Rect(i,n,r-i,o-n)},e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.plotSeries=function(t,e,i,n,r,o,s,l){var h=n;if(this._isRange(h))this.plotSeriesRanged(t,e,i,n,r,o,s,l);else{var c=[],u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1);if(d){var f=d.length;if(f){p||(p=this.dataInfo.getXVals());var m=!0;p?p.length<f&&(f=p.length):(m=!1,p=new Array(f));var g=new Array,_=new Array,y=new Array,b=new Array,v=this.stacking!=et.None&&!h._isCustomAxisY(),x=this.stacking==et.Stacked100pc&&!h._isCustomAxisY();void 0!==h._getChartType()&&(v=x=!1);for(var w=this.rotated,S=!1,C=h.interpolateNulls,O=null,j=null,T=this.chart._plotRect,A=0;A<f;A++){var M=m?p[A]:A,N=d[A];if((null===O||M>O)&&(O=M),(null===j||M<j)&&(j=M),gt.isValid(M,N)){var P=w?i.convert(M):e.convert(M);if(v){x&&(N/=this.dataInfo.getStackedAbsSum(M));var E=0;N>=0?(E=isNaN(this.stackPos[M])?0:this.stackPos[M],N=this.stackPos[M]=E+N):(E=isNaN(this.stackNeg[M])?0:this.stackNeg[M],N=this.stackNeg[M]=E+N),w?(E<e.actualMin&&(E=e.actualMin),y.push(e.convert(E)),b.push(P)):(y.push(P),E<i.actualMin&&(E=i.actualMin),b.push(i.convert(E)))}if(w){var I=e.convert(N);isNaN(P)||isNaN(I)?(S=!0,v||!0===C||(g.push(void 0),_.push(void 0))):(g.push(I),_.push(P),ft._contains(T,new a.Point(I,P))&&((k=new U(new a.Point(I,P),this._DEFAULT_SYM_SIZE)).tag=new G(u,A,N,M),this.hitTester.add(k,u)))}else{var k;I=i.convert(N),isNaN(P)||isNaN(I)?(S=!0,v||!0===C||(g.push(void 0),_.push(void 0))):(g.push(P),_.push(I),ft._contains(T,new a.Point(P,I))&&((k=new U(new a.Point(P,I),this._DEFAULT_SYM_SIZE)).tag=new G(u,A,M,N),this.hitTester.add(k,u)))}}else S=!0,v||!0===C||(g.push(void 0),_.push(void 0))}l&&g.forEach((function(t,e){null!=t&&c.push(new a.Point(t,_[e]))}));var F=this._DEFAULT_WIDTH,D=r._getColorLight(u),L=r._getColor(u),R=ct.cloneStyle(n.style,["fill"]),V=ct.cloneStyle(n.style,["stroke"]);if(!v&&!0!==C&&S){var B=[],z=[];for(A=0;A<f;A++)void 0===g[A]?(B.length>1&&(B=(W=this._modifyPoints(B,z)).x,z=W.y,t.stroke=L,t.strokeWidth=F,t.fill="none",t.drawLines(B,z,null,R),this.hitTester.add(new q(B,z),u),w?(B.push(e.convert(e.actualMin),e.convert(e.actualMin)),z.push(i.convert(i.actualMax),i.convert(i.actualMin))):(B.push(B[B.length-1],B[0]),z.push(i.convert(i.actualMin),i.convert(i.actualMin))),t.fill=D,t.stroke="none",t.drawPolygon(B,z,null,V)),B=[],z=[]):(B.push(g[A]),z.push(_[A]));B.length>1&&(B=(W=this._modifyPoints(B,z)).x,z=W.y,t.stroke=L,t.strokeWidth=F,t.fill="none",t.drawLines(B,z,null,R),this.hitTester.add(new q(B,z),u),w?(B.push(e.convert(e.actualMin),e.convert(e.actualMin)),z.push(i.convert(i.actualMax),i.convert(i.actualMin))):(B.push(B[B.length-1],B[0]),z.push(i.convert(i.actualMin),i.convert(i.actualMin))),t.fill=D,t.stroke="none",t.drawPolygon(B,z,null,V))}else{var W;if(g=(W=this._modifyPoints(g,_)).x,_=W.y,v){var H=this._modifyPoints(y,b);b=H.y,g=g.concat((y=H.x).reverse()),_=_.concat(b.reverse())}else w?(g.push(e.convert(e.actualMin),e.convert(e.actualMin)),_[0]>_[_.length-1]?_.push(_[_.length-1],_[0]):_.push(_[0],_[_.length-1])):(g[0]>g[g.length-1]?g.push(g[0],g[g.length-1]):g.push(g[g.length-1],g[0]),_.push(i.convert(i.actualMin),i.convert(i.actualMin)));t.fill=D,t.stroke="none",t.drawPolygon(g,_,null,V),v?(g=g.slice(0,g.length-y.length),_=_.slice(0,_.length-b.length)):(g=g.slice(0,g.length-2),_=_.slice(0,_.length-2)),t.stroke=L,t.strokeWidth=F,t.fill="none",t.drawLines(g,_,null,R),this.hitTester.add(new q(g,_),u)}this._drawSymbols(t,n,u),l&&c&&c.length&&l(c)}}}},e.prototype._isRange=function(t){var e=null==t.binding?null:t.binding.split(this.chart?this.chart._bindingSeparator:",");return null!=e&&2==e.length},e.prototype._modifyPoints=function(t,e){var i={x:t,y:e};if(this.isSpline){var n=this._convertToSpline(t,e);i.x=n.xs,i.y=n.ys}else if(this.isStep){var r=this._createSteps(t,e);i.x=r.x,i.y=r.y}return i},e.prototype.plotSeriesRanged=function(t,e,i,n,r,o,s,l){var h=[],c=this.chart.series.indexOf(n),u=n,d=n.getValues(0),p=n.getValues(1),f=u._getBindingValues(1);if(d){var m=d.length;if(m){p||(p=this.dataInfo.getXVals());var g=!0;p?p.length<m&&(m=p.length):(g=!1,p=new Array(m));for(var _=new Array,y=new Array,b=new Array,v=this.rotated,x=!1,w=u.interpolateNulls,S=this.chart._plotRect,C=0;C<m;C++){var O=g?p[C]:C,j=d[C],T=f[C];if(gt.isValid(O,j,T)){var A=v?i.convert(O):e.convert(O);if(v){var M=e.convert(j),N=e.convert(T);isNaN(A)||isNaN(M)?(x=!0,!0!==w&&(_.push(void 0),y.push(void 0),b.push(void 0))):(_.push(M),y.push(A),b.push(N),ft._contains(S,new a.Point(M,A))&&((P=new U(new a.Point(M,A),this._DEFAULT_SYM_SIZE)).tag=new G(c,C,j,O),this.hitTester.add(P,c)),ft._contains(S,new a.Point(N,A))&&((P=new U(new a.Point(N,A),this._DEFAULT_SYM_SIZE)).tag=new G(c,C,T,O),this.hitTester.add(P,c)))}else{var P;M=i.convert(j),N=i.convert(T),isNaN(A)||isNaN(M)?(x=!0,!0!==w&&(_.push(void 0),y.push(void 0),b.push(void 0))):(_.push(A),y.push(M),b.push(N),ft._contains(S,new a.Point(A,M))&&((P=new U(new a.Point(A,M),this._DEFAULT_SYM_SIZE)).tag=new G(c,C,O,j),this.hitTester.add(P,c)),ft._contains(S,new a.Point(A,N))&&((P=new U(new a.Point(A,N),this._DEFAULT_SYM_SIZE)).tag=new G(c,C,O,T),this.hitTester.add(P,c)))}}else x=!0,!0!==w&&(_.push(void 0),y.push(void 0),b.push(void 0))}l&&_.forEach((function(t,e){null!=t&&h.push(new a.Point(t,y[e]))}));var E=this._DEFAULT_WIDTH,I=r._getColorLight(c),k=r._getColor(c),F=ct.cloneStyle(n.style,["fill"]),D=ct.cloneStyle(n.style,["stroke"]);if(!0!==w&&x){var L=[],R=[],V=[];for(C=0;C<m;C++)if(void 0===_[C]){if(L.length>1){var B=v?V.slice(0).reverse():L.slice(0).reverse(),z=v?R.slice(0).reverse():V.slice(0).reverse();this._drawRangedArea(t,L,R,B,z,I,k,E,D,F),this.hitTester.add(new q(L,R),c),this.hitTester.add(new q(B,z),c)}L=[],R=[],V=[]}else L.push(_[C]),R.push(y[C]),V.push(b[C]);L.length>1&&(B=v?V.slice(0).reverse():L.slice(0).reverse(),z=v?R.slice(0).reverse():V.slice(0).reverse(),this._drawRangedArea(t,L,R,B,z,I,k,E,D,F),this.hitTester.add(new q(L,R),c),this.hitTester.add(new q(B,z),c))}else{var W=v?b.slice(0).reverse():_.slice(0).reverse(),H=v?y.slice(0).reverse():b.slice(0).reverse();this._drawRangedArea(t,_,y,W,H,I,k,E,D,F),this.hitTester.add(new q(_,y),c),this.hitTester.add(new q(W,H),c)}this._drawSymbols(t,n,c),l&&h&&h.length&&l(h)}}},e.prototype._drawRangedArea=function(t,e,i,n,r,o,a,s,l,h){if(this.isSpline){var c=this._convertToSpline(e,i),u=this._convertToSpline(n,r);e=c.xs,i=c.ys,n=u.xs,r=u.ys}e=e.concat(n),i=i.concat(r),t.fill=o,t.stroke="none",t.drawPolygon(e,i,null,l),e=e.slice(0,e.length-n.length),i=i.slice(0,i.length-r.length),t.stroke=a,t.strokeWidth=s,t.fill="none",t.drawLines(e,i,null,h),t.drawLines(n,r,null,h)},e.prototype._convertToSpline=function(t,e){if(t&&e){var i=new c(t,e).calculate();return{xs:i.xs,ys:i.ys}}return{xs:t,ys:e}},e.prototype._drawSymbols=function(t,e,i){var n=this.getItemFormatter(e);if(null!=n){for(var r=this.hitTester._map[i],o=0;o<r.length;o++){var s=Object(a.tryCast)(r[o],U);if(s){var l=s.tag;t.startGroup();var h=new J(this.chart,s.center,X.SeriesSymbol);h._setDataPoint(l),n(t,h,(function(){})),t.endGroup()}}t.cssPriority=!0}},e}(ct),xt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.origin=0,e.width=.7,e.isVolume=!1,e._volHelper=null,e.stackPosMap={},e.stackNegMap={},e.stacking=et.None,e}return l(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNegMap[this.chart.axisY._uniqueId]={},this.stackPosMap[this.chart.axisY._uniqueId]={},this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,i,n,r,o,s,l,c,u=null,d=null;for(s=0;s<this.chart.series.length;s++){if(o=(e=this.chart.series[s]).getDataType(1)||e.chart._xDataType,i=e._getAxisX(),(n=null===(n=e._getChartType())||Object(a.isUndefined)(n)?this.chart._getChartType():n)===tt.Column){var p=e.binding.split(this.chart?this.chart._bindingSeparator:",").length-1;r=e._getBindingValues(p)}else r=n===tt.Candlestick?e._getBindingValues(4):null;var f;if(o===a.DataType.Date)for(l=[],c=[],s=0;s<e._getLength();s++)f=e._getItem(s)[e.bindingX].valueOf(),l.push(f),c.push({value:f,text:a.Globalize.format(new Date(f),i.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),d=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new h(r,l,u,d,o),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),c&&c.length>0&&(this._itemsSource=i.itemsSource=c);break}}}},e.prototype.unload=function(){t.prototype.unload.call(this);for(var e,i=0;i<this.chart.series.length;i++)(e=this.chart.series[i]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),o=t.getMaxY(),s=t.getDeltaX();s<=0&&(s=1),!this.isVolume||this.chart._getChartType()!==tt.Column&&this.chart._getChartType()!==tt.Candlestick?this.unload():this.load();for(var l=0;l<this.chart.series.length;l++){var h=this.chart.series[l],c=h._getChartType();(c=null===c||Object(a.isUndefined)(c)?this.chart._getChartType():c)!==tt.Column&&c!==tt.Bar||this._isRange(h)&&h._getBindingValues(1).forEach((function(t){t<r?r=t:t>o&&(o=t)}))}return this.rotated?(this.chart.axisY._getLogBase()||t.getDataTypeY()===a.DataType.Date||(this.origin>o?o=this.origin:this.origin<r&&(r=this.origin)),new a.Rect(r,i-.5*s,o-r,n-i+s)):(this.chart.axisY._getLogBase()||t.getDataTypeY()===a.DataType.Date||(this.origin>o?o=this.origin:this.origin<r&&(r=this.origin)),new a.Rect(i-.5*s,r,n-i+s,o-r))},e.prototype._isRange=function(t){var e=(null==t.binding?"":t.binding.split(this.chart?this.chart._bindingSeparator:",")).length-1;return this.isVolume?2===e:1===e},e.prototype.plotSeries=function(t,e,i,n,r,o,s,l){var h=[],c=this.chart.series.indexOf(n),u=Object(a.asType)(n,rt),d=this.chart._options,p=this.width,f=0;if(o=o||0,s=s||1,d&&d.groupWidth){var m=d.groupWidth;if(Object(a.isNumber)(m)){var g=Object(a.asNumber)(m);isFinite(g)&&g>0&&(f=g,p=1)}else if(Object(a.isString)(m)){var _=Object(a.asString)(m);_&&_.indexOf("%")>=0?(_=_.replace("%",""),g=parseFloat(_),isFinite(g)&&(g<0?g=0:g>100&&(g=100),f=0,p=g/100)):(g=parseFloat(_),isFinite(g)&&g>0&&(f=g,p=1))}}var y=p/s,b=u._getAxisY()._uniqueId,v=this.stackNegMap[b],x=this.stackPosMap[b],w=n.getValues(0),S=n.getValues(1),C=this._isRange(u),O=u._bindValues(null==u._cv?null==this.chart.collectionView?null:this.chart.collectionView.items:u._cv.items,u._getBinding(1)).values;if(w){if(S||(S=this.dataInfo.getXVals()),S){var j=this.dataInfo.getDeltaX();j>0&&(p*=j,y*=j)}var T=u._getSymbolFill(c),A=u._getAltSymbolFill(c)||T,M=u._getSymbolStroke(c),N=u._getAltSymbolStroke(c)||M,P=w.length;null!=S&&(P=Math.min(P,S.length));var E,I=this.origin,k=0,F=this.stacking!=et.None,D=this.stacking==et.Stacked100pc;void 0!==u._getChartType()&&(F=D=!1);var L=this.getItemFormatter(n);if(this.rotated){I<e.actualMin?I=e.actualMin:I>e.actualMax&&(I=e.actualMax),u._isCustomAxisY()&&(F=D=!1),H=e.convert(I);var R=i.actualMin,V=i.actualMax;for(q=0;q<P;q++)if(Z=S?S[q]:q,Q=w[q],K=H,this._getSymbolOrigin&&(K=i.convert(this._getSymbolOrigin(I,q))),C&&O&&O.length&&gt.isValid(J=O[q])&&(K=e.convert(J)),this._getSymbolStyles&&(T=($=this._getSymbolStyles(q))&&$.fill?$.fill:T,A=$&&$.fill?$.fill:A,M=$&&$.stroke?$.fill:M,N=$&&$.stroke?$.fill:N),E=Q>0?M:N,t.fill=Q>0?T:A,t.stroke=E,gt.isValid(Z,Q))if(F){if(it=Z+.5*p,(tt=Z-.5*p)<R&&it<R||tt>V&&it>V)continue;if(tt=i.convert(Math.max(tt,R)),it=i.convert(Math.min(it,V)),D&&(Q/=this.dataInfo.getStackedAbsSum(Z)),ot=0,Q>=0?(ot=isNaN(x[Z])?0:x[Z],ht=e.convert(ot),nt=e.convert(ot+Q),x[Z]=ot+Q):(ot=isNaN(v[Z])?0:v[Z],ht=e.convert(ot),nt=e.convert(ot+Q),v[Z]=ot+Q),l&&h.push(new a.Point(nt,i.convert(Z))),!gt.isValid(ht,nt))continue;if(at=new a.Rect(Math.min(ht,nt),Math.min(tt,it),Math.abs(nt-ht),Math.abs(it-tt)),f>0){(dt=1-f/at.height)<0&&(dt=0);var B=at.top+.5*at.height;at.top+=(B-at.top)*dt,at.height=Math.min(f,at.height)}lt=new Y(at),this.drawSymbol(t,at,n,q,new a.Point(nt,at.top+.5*at.height),L),n._setPointIndex(q,k),k++,lt.tag=new G(c,q,ot+Q,Z),this.hitTester.add(lt,c)}else{if(it=Z-.5*p+(o+1)*y,(tt=Z-.5*p+o*y)<R&&it<R||tt>V&&it>V)continue;tt=i.convert(Math.max(tt,R)),it=i.convert(Math.min(it,V));var z=e.convert(Q);if(!gt.isValid(z,tt,it))continue;var W=new a.Rect(Math.min(z,K),Math.min(tt,it),Math.abs(K-z),Math.abs(it-tt));l&&h.push(new a.Point(z,(tt+it)/2)),f>0&&((dt=1-(ut=f/s)/W.height)<0&&(dt=0),B=i.convert(Z),W.top+=(B-W.top)*dt,W.height=Math.min(ut,W.height)),lt=new Y(W),this.drawSymbol(t,W,n,q,new a.Point(z,W.top+.5*W.height),L),n._setPointIndex(q,k),k++,lt.tag=new G(c,q,Q,Z),this.hitTester.add(lt,c)}else l&&h.push(null)}else{I<i.actualMin?I=i.actualMin:I>i.actualMax&&(I=i.actualMax);var H=i.convert(I),X=e.actualMin,U=e.actualMax;u._isCustomAxisY()&&(F=D=!1);for(var q=0;q<P;q++){var $,K=H,Z=S?S[q]:q,Q=w[q];if(this._getSymbolOrigin&&(K=i.convert(this._getSymbolOrigin(I,q,P))),C&&O&&O.length){var J=O[q];gt.isValid(J)&&(K=i.convert(J))}if(this._getSymbolStyles&&(T=($=this._getSymbolStyles(q,P))&&$.fill?$.fill:T,A=$&&$.fill?$.fill:A,M=$&&$.stroke?$.stroke:M,N=$&&$.stroke?$.stroke:N),E=Q>0?M:N,t.fill=Q>0?T:A,t.stroke=E,t.strokeWidth=null,gt.isValid(Z,Q))if(F){var tt,it,nt=Z+.5*p;if((ht=Z-.5*p)<X&&nt<X||ht>U&&nt>U)continue;if(ht=e.convert(ht),nt=e.convert(nt),!gt.isValid(ht,nt))continue;D&&(Q/=this.dataInfo.getStackedAbsSum(Z));var ot=0;if(Q>=0?(ot=isNaN(x[Z])?0:x[Z],tt=i.convert(Math.max(ot,i.actualMin)),it=i.convert(Math.max(ot+Q,i.actualMin)),x[Z]=ot+Q):(ot=isNaN(v[Z])?0:v[Z],tt=i.convert(ot),it=i.convert(ot+Q),v[Z]=ot+Q),l&&h.push(new a.Point(e.convert(Z),it)),!gt.isValid(tt,it))continue;var at=new a.Rect(Math.min(ht,nt),Math.min(tt,it),Math.abs(nt-ht),Math.abs(it-tt));if(f>0){(dt=1-f/at.width)<0&&(dt=0);var st=at.left+.5*at.width;at.left+=(st-at.left)*dt,at.width=Math.min(f,at.width)}var lt=new Y(at);this.drawSymbol(t,at,n,q,new a.Point(at.left+.5*at.width,it),L),n._setPointIndex(q,k),k++,lt.tag=new G(c,q,Z,ot+Q),this.hitTester.add(lt,c)}else{var ht;if(nt=Z-.5*p+(o+1)*y,(ht=Z-.5*p+o*y)<X&&nt<X||ht>U&&nt>U)continue;ht=e.convert(ht),nt=e.convert(nt);var ct=i.convert(Q);if(!gt.isValid(ct,ht,nt))continue;var ut,dt,pt=new a.Rect(Math.min(ht,nt),Math.min(ct,K),Math.abs(nt-ht),Math.abs(K-ct));l&&h.push(new a.Point((ht+nt)/2,ct)),f>0&&((dt=1-(ut=f/s)/pt.width)<0&&(dt=0),st=e.convert(Z),pt.left+=(st-pt.left)*dt,pt.width=Math.min(ut,pt.width)),lt=new Y(pt),this.drawSymbol(t,pt,n,q,new a.Point(pt.left+.5*pt.width,ct),L),n._setPointIndex(q,k),k++,lt.tag=new G(c,q,Z,Q),this.hitTester.add(lt,c)}else l&&h.push(null)}}l&&h&&h.length&&l(h)}},e.prototype.drawSymbol=function(t,e,i,n,r,o){var a=this;if(o){t.startGroup();var s=new J(this.chart,r,X.SeriesSymbol);s._setData(i,n),o(t,s,(function(){a.drawDefaultSymbol(t,e,i)})),t.cssPriority=!0,t.endGroup()}else this.drawDefaultSymbol(t,e,i)},e.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)},e}(ct),wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stacking=et.None,e}return l(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY();return new a.Rect(i,n,r-i,o-n)},e.prototype.plotSeries=function(t,e,i,n,r,o,s,l){var h=this.chart.series.indexOf(n);if(!(h>0)){var c,u,d,p,f,m=Object(a.asType)(n,rt),g=this.chart._options,_=n.getValues(0),y=n.getValues(1),b=this.chart._plotRect,v=g&&g.funnel&&null!=g.funnel.neckWidth?g.funnel.neckWidth:.2,x=g&&g.funnel&&null!=g.funnel.neckHeight?g.funnel.neckHeight:0,w=v*b.width,S=0,C=0,O=0,j=0,T=b.left,A=b.top,M=b.width,N=b.height;if(_){this.rotated&&(A+=b.height),w=w||1,y||(y=this.dataInfo.getXVals());var P=_.length;for(null!=y&&(P=Math.min(P,y.length)),S=0;S<P;S++)gt.isValid(_[S])&&(C+=_[S]);var E,I,k=0;if(g&&g.funnel&&"rectangle"===g.funnel.type)for(x=N/P,v=M,S=0;S<P;S++){var F=y?y[S]:S,D=_[S],L=m._getSymbolFill(S),R=m._getAltSymbolFill(S)||L,V=m._getSymbolStroke(S),B=m._getAltSymbolStroke(S)||V;if(this._getSymbolStyles&&(L=(H=this._getSymbolStyles(S,P))&&H.fill?H.fill:L,R=H&&H.fill?H.fill:R,V=H&&H.stroke?H.stroke:V,B=H&&H.stroke?H.stroke:B),E=D>0?V:B,t.fill=D>0?L:R,t.stroke=E,gt.isValid(F)&&gt.isValid(D)){I||(I=M/D);var z=I*D;this.rotated&&(A-=x),t.drawRect(T+=(v-z)/2,A,z,x),W=new St(new a.Point(T,A),z,x,z,x),this.rotated||(A+=x),v=z,W.tag=new G(h,S,F,D),this.hitTester.add(W,h),n._setPointIndex(S,k),k++}}else for(O=b.left+b.width*(1-v)/2,j=b.top+b.height*(this.rotated?x:1-x),u=(1-v)*b.width/2/(b.height*(1-x)),!isNaN(u)&&isFinite(u)||(M=w,T=O,A=j),c=b.width*v*b.height+b.width*(1-v)/2*b.height*(1-x),S=0;S<P;S++){F=y?y[S]:S,D=_[S];var W,H,X=[],Y=[];if(L=m._getSymbolFill(S),R=m._getAltSymbolFill(S)||L,V=m._getSymbolStroke(S),B=m._getAltSymbolStroke(S)||V,this._getSymbolStyles&&(L=(H=this._getSymbolStyles(S,P))&&H.fill?H.fill:L,R=H&&H.fill?H.fill:R,V=H&&H.stroke?H.stroke:V,B=H&&H.stroke?H.stroke:B),E=D>0?V:B,t.fill=D>0?L:R,t.stroke=E,gt.isValid(F)&&gt.isValid(D)){var U=c*D/C;M>w?(p=this._getTrapezoidOffsetY(M,U,u),this.rotated?A-p>j?(X=[T,T+(d=u*p),T+M-d,T+M],Y=[A,A-p,A-p,A],W=new St(new a.Point(T,A-p),M,p,M-2*d,0,!0),M-=2*d,T+=d,A-=p):(d=u*(p=A-j),f=(U-=this._getTrapezoidArea(M,u,p))/w,X.push(T,T+d,T+d,T+d+w,T+d+w,T+M),Y.push(A,A-p,A-p-f,A-p-f,A-p,A),W=new St(new a.Point(T,A-p-f),M,p+f,w,f,!0),M=w,T+=d,A=A-p-f):A+p<j?(X=[T,T+(d=u*p),T+M-d,T+M],Y=[A,A+p,A+p,A],W=new St(new a.Point(T,A),M,p,M-2*d,0),M-=2*d,T+=d,A+=p):(d=u*(p=j-A),f=(U-=this._getTrapezoidArea(M,u,p))/w,X.push(T,T+d,T+d,T+d+w,T+d+w,T+M),Y.push(A,A+p,A+p+f,A+p+f,A+p,A),W=new St(new a.Point(T,A),M,p+f,w,f),M=w,T+=d,A=A+p+f),t.drawPolygon(X,Y)):(f=U/w,this.rotated&&(A-=f),t.drawRect(T,A,M,f),W=new St(new a.Point(T,A),w,f,w,f),this.rotated||(A+=f)),W.tag=new G(h,S,F,D),this.hitTester.add(W,h),n._setPointIndex(S,k),k++}}}}},e.prototype._getTrapezoidArea=function(t,e,i){var n=i*e;return n*i+(t-2*n)*i},e.prototype._getTrapezoidOffsetY=function(t,e,i){var n=Math.pow(t/2/i,2)-e/i;return t/2/i-Math.sqrt(n>=0?n:0)},e.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)},e.prototype._getPointAndPosition=function(t,e,i,n){var r=i;t.x=r.center.x,t.y=r.center.y,e=null==e?O.Center:e},e}(ct),St=function(){function t(t,e,i,n,r,o){void 0===o&&(o=!1),this._startPoint=t,this._width=e,this._height=i,this._neckWidth=n,this._neckHeight=r,this._center=new a.Point(this._startPoint.x+e/2,this._startPoint.y+i/2),this._offsetX=(e-n)/2,this._offsetY=i-r,this._rotated=o}return t.prototype.contains=function(t){var e=this._startPoint,i=this._offsetX,n=this._offsetY;if(this._rotated){if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y<e.y+this._neckHeight)return!1;if(t.x<this._center.x)return(e.y+this._height-t.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(e.y+this._height-t.y)/(e.x+this._width-t.x)<n/i}}else if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y>e.y+n)return!1;if(t.x<this._center.x)return(t.y-e.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(t.y-e.y)/(e.x+this._width-t.x)<n/i}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=this._startPoint,i=this._width,n=this._height,r=this._offsetX,o=this._offsetY;if(this._rotated){if(t.y>e.y+n)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y+n-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y+n-t.y,2)):t.y-e.y-n;if(t.y<e.y)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):e.y-t.y;if(!(t.y<e.y+n-o))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y-n,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-n+o/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-n+o-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-n-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-n+o/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-n+o-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}else{if(t.y<e.y)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y-t.y,2)):e.y-t.y;if(t.y>e.y+n)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):t.y-e.y-n;if(!(t.y>e.y+o))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-o/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-o-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-o/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-o-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t}(),Ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCandle=!0,e.isArms=!1,e.isEqui=!1,e.isVolume=!1,e._volHelper=null,e._symWidth=.7,e}return l(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,i,n,r,o,s,l,c,u=null,d=null;for(s=0;s<this.chart.series.length;s++){var p;if(o=(e=this.chart.series[s]).getDataType(1)||e.chart._xDataType,i=e._getAxisX(),r=(n=null===(n=e._getChartType())||Object(a.isUndefined)(n)?this.chart._getChartType():n)===tt.Column?e._getBindingValues(1):n===tt.Candlestick?e._getBindingValues(4):null,o===a.DataType.Date)for(l=[],c=[],s=0;s<e._getLength();s++)p=e._getItem(s)[e.bindingX].valueOf(),l.push(p),c.push({value:p,text:a.Globalize.format(new Date(p),i.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),d=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new h(r,l,u,d,o),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),c&&c.length>0&&(this._itemsSource=i.itemsSource=c);break}}}},e.prototype.unload=function(){t.prototype.unload.call(this);for(var e,i=0;i<this.chart.series.length;i++)(e=this.chart.series[i]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.parseSymbolWidth=function(t){if(this._isPixel=void 0,t)if(Object(a.isNumber)(t)){var e=Object(a.asNumber)(t);isFinite(e)&&e>0&&(this._symWidth=e,this._isPixel=!0)}else if(Object(a.isString)(t)){var i=Object(a.asString)(t);if(i&&i.indexOf("%")>=0){i=i.replace("%","");var n=parseFloat(i);isFinite(n)&&(n<0?n=0:n>100&&(n=100),this._symWidth=n/100,this._isPixel=!1)}else n=parseFloat(t),isFinite(n)&&n>0&&(this._symWidth=n,this._isPixel=!0)}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY(),s=t.getDeltaX(),l=this.chart._xDataType;s<=0&&(s=1);var h=this.chart.series,c=h.length,u=0;this.parseSymbolWidth(this.symbolWidth),!this.isVolume||this.chart._getChartType()!==tt.Column&&this.chart._getChartType()!==tt.Candlestick?this.unload():this.load();for(var d=0;d<c;d++){var p=h[d];if(!p._isCustomAxisY()){var f=p._getBinding(1),m=p._getBinding(2),g=p._getBinding(3),_=p._getLength();if(_){var y=p._getSymbolSize();y>u&&(u=y);for(var b=0;b<_;b++){var v=p._getItem(b);v&&[f?v[f]:null,m?v[m]:null,g?v[g]:null].forEach((function(t){gt.isValid(t)&&null!==t&&((isNaN(n)||t<n)&&(n=t),(isNaN(o)||t>o)&&(o=t))}))}}}}var x=r-i,w=this.chart._plotRect;if(w&&w.width&&!this.isVolume){isNaN(y)&&(y=p._getSymbolSize());var S=w.width/(w.width-(y+=2))*x;i-=.5*(S-x),x=S}return!(l===a.DataType.Date&&this.isVolume||l===a.DataType.Number)||this.chart._getChartType()!==tt.Column&&this.chart._getChartType()!==tt.Candlestick?this.chart._isRotated()?new a.Rect(n,i,o-n,x):new a.Rect(i,n,x,o-n):new a.Rect(i-.5*s,n,r-i+s,o-n)},e.prototype.plotSeries=function(t,e,i,n,r,o,s,l){var h=this,c=Object(a.asType)(n,rt),u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1),f=this._symWidth,m=this.chart._isRotated();if(d){if(p||(p=this.dataInfo.getXVals()),p){var g=this.dataInfo.getDeltaX();g>0&&!1===this._isPixel&&(f*=g)}var _=d.length,y=!0;p?_=Math.min(_,p.length):(y=!1,p=new Array(_));var b=this._DEFAULT_WIDTH,v=c._getSymbolFill(u),x=c._getAltSymbolFill(u)||"transparent",w=c._getSymbolStroke(u),S=c._getAltSymbolStroke(u)||w,C=void 0===this._isPixel?c._getSymbolSize():f;t.stroke=w,t.strokeWidth=b,t.fill=v;for(var O,j,T=c._getBinding(1),A=c._getBinding(2),M=c._getBinding(3),N=m?i.actualMin:e.actualMin,P=m?i.actualMax:e.actualMax,E=0,I=null,k=null,F=this.getItemFormatter(n),D=0;D<_;D++)if(I=c._getItem(D)){var L=y?p[D]:D;if(gt.isValid(L)&&N<=L&&L<=P){var R=d[D],V=T?I[T]:null,B=A?I[A]:null,z=M?I[M]:null;if(t.startGroup(),this.isEqui&&null!==k?k[M]!==I[M]&&(O=k[M]<I[M]?x:v,j=k[M]<I[M]?S:w):(O=B<z?x:v,j=B<z?S:w),t.fill=O,t.stroke=j,t.strokeWidth=b,F){var W=new J(this.chart,new a.Point(e.convert(L),i.convert(R)),X.SeriesSymbol);W._setData(c,D),F(t,W,(function(){h._drawSymbol(t,e,i,u,D,O,C,L,R,V,B,z)})),t.cssPriority=!0}else this._drawSymbol(t,e,i,u,D,O,C,L,R,V,B,z);t.endGroup(),n._setPointIndex(D,E),E++}k=I}}},e.prototype._drawSymbol=function(t,e,i,n,r,o,s,l,h,c,u,d){var p,f=null,m=null,g=null,_=null,y=this.chart._isRotated(),b=y?new G(n,r,h,l):new G(n,r,l,h);if(y){var v=i;i=e,e=v}if(!1===this._isPixel&&(g=e.convert(l-.5*s))>(_=e.convert(l+.5*s))){var x=g;g=_,_=x}l=e.convert(l),!1!==this._isPixel&&(g=l-.5*s,_=l+.5*s),this.isCandle?(gt.isValid(u)&&gt.isValid(d)&&(u=i.convert(u),d=i.convert(d),m=(f=Math.min(u,d))+Math.abs(u-d),y?(t.drawRect(f,g,m-f||1,_-g||1),p=new Y(new a.Rect(f,g,m-f||1,_-g||1))):(t.drawRect(g,f,_-g||1,m-f||1),p=new Y(new a.Rect(g,f,_-g||1,m-f||1))),p.tag=b,this.hitTester.add(p,n)),gt.isValid(h)&&(h=i.convert(h),null!==f&&(y?(t.drawLine(m,l,h,l),p.rect.width=p.rect.width+h):(t.drawLine(l,f,l,h),p.rect.top=h,p.rect.height=p.rect.height+h))),gt.isValid(c)&&(c=i.convert(c),null!==m&&(y?(t.drawLine(f,l,c,l),p.rect.left=c,p.rect.width=p.rect.width+c):(t.drawLine(l,m,l,c),p.rect.height=p.rect.height+c)))):this.isEqui?gt.isValid(h)&&gt.isValid(c)&&(h=i.convert(h),c=i.convert(c),m=(f=Math.min(h,c))+Math.abs(h-c),t.drawRect(g,f,_-g||1,m-f||1),(p=new Y(new a.Rect(g,f,_-g||1,m-f||1))).tag=b,this.hitTester.add(p,n)):this.isArms?(gt.isValid(u)&&gt.isValid(d)&&(u=i.convert(u),d=i.convert(d),m=(f=Math.min(u,d))+Math.abs(u-d),t.drawRect(g,f,_-g||1,m-f||1)),gt.isValid(h)&&null!==f&&(h=i.convert(h),t.drawLine(l,f,l,h)),gt.isValid(c)&&null!==m&&(c=i.convert(c),t.drawLine(l,m,l,c)),gt.isValid(h)&&gt.isValid(c)&&(t.fill="transparent",m=(f=Math.min(h,c))+Math.abs(h-c),t.drawRect(g,f,_-g||1,m-f||1),(p=new Y(new a.Rect(g,f,_-g||1,m-f||1))).tag=b,this.hitTester.add(p,n))):(gt.isValid(h)&&gt.isValid(c)&&(h=i.convert(h),c=i.convert(c),m=(f=Math.min(h,c))+Math.abs(h-c),y?(t.drawLine(c,l,h,l),p=new Y(new a.Rect(f,g,m-f||1,_-g||1))):(t.drawLine(l,c,l,h),p=new Y(new a.Rect(g,f,_-g||1,m-f||1))),p.tag=b,this.hitTester.add(p,n)),gt.isValid(u)&&(u=i.convert(u),y?t.drawLine(u,g,u,l):t.drawLine(g,u,l,u)),gt.isValid(d)&&(d=i.convert(d),y?t.drawLine(d,l,d,_):t.drawLine(l,d,_,d)))},e}(ct),Ot=function(t){function e(){var e=t.call(this)||this;return e.hasSymbols=!1,e.hasLines=!0,e.isSpline=!1,e.isStep=!1,e.stacking=et.None,e.stackPos={},e.stackNeg={},e.clipping=!1,e}return l(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY();if(this.isSpline&&!this.chart.axisY._getLogBase()){var s=.1*(o-n);n-=s,o+=s}return this.rotated?new a.Rect(n,i,o-n,r-i):new a.Rect(i,n,r-i,o-n)},e.prototype.plotSeries=function(t,e,i,n,r,o,s,l){var h=[],c=Object(a.asType)(n,rt),u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1);if(d){p||(p=this.dataInfo.getXVals());var f=ct.cloneStyle(n.style,["fill"]),m=d.length,g=!0;p?m=Math.min(m,p.length):(g=!1,p=new Array(m));var _=this._DEFAULT_WIDTH,y=c._getSymbolFill(u),b=c._getAltSymbolFill(u)||y,v=c._getSymbolStroke(u),x=c._getAltSymbolStroke(u)||v,w=c._getSymbolSize();t.stroke=v,t.strokeWidth=_,t.fill=y;var S=new Array,C=new Array,O=new Array,j=this.rotated,T=this.stacking!=et.None&&!c._isCustomAxisY(),A=this.stacking==et.Stacked100pc&&!c._isCustomAxisY();void 0!==c._getChartType()&&(T=A=!1);for(var M=c.interpolateNulls,N=!1,P=this.getItemFormatter(n),E=0;E<m;E++){var I=g?p[E]:E,k=d[E];if(gt.isValid(I)&&gt.isValid(k)){if(T)if(A&&(k/=this.dataInfo.getStackedAbsSum(I)),k>=0){var F=isNaN(this.stackPos[I])?0:this.stackPos[I];k=this.stackPos[I]=F+k}else F=isNaN(this.stackNeg[I])?0:this.stackNeg[I],k=this.stackNeg[I]=F+k;var D;if(j){D=new G(u,E,k,I);var L=e.convert(k);k=i.convert(I),I=L}else D=new G(u,E,I,k),I=e.convert(I),k=i.convert(k);if(isNaN(I)||isNaN(k))N=!0,!0!==M&&(S.push(void 0),C.push(void 0)),O.push(!0),l&&h.push(null);else{S.push(I),C.push(k),O.push(!1),l&&h.push(new a.Point(I,k));var R=new U(new a.Point(I,k),.5*w);R.tag=D,this.hitTester.add(R,u)}}else N=!0,!0!==M&&(S.push(void 0),C.push(void 0)),O.push(!0),l&&h.push(null)}var V=0;if(this.hasLines)if(t.fill=null,N&&!0!==M){var B=[],z=[];for(E=0;E<m;E++)void 0===S[E]?(B.length>1&&(this._drawLines(t,B,z,null,f,this.chart._plotrectId),this.hitTester.add(new q(B,z),u),V++),B=[],z=[]):(B.push(S[E]),z.push(C[E]));B.length>1&&(this._drawLines(t,B,z,null,f,this.chart._plotrectId),this.hitTester.add(new q(B,z),u),V++)}else this._drawLines(t,S,C,null,f,this.chart._plotrectId),this.hitTester.add(new q(S,C),u),V++;if((this.hasSymbols||P)&&w>0){t.fill=y;var W=0;for(E=0;E<m;E++)M&&O[E]||(I=S[W],k=C[W],(!1===this.hasLines||P)&&(t.fill=d[E]>0?y:b,t.stroke=d[E]>0?v:x,t.strokeWidth=_),this.isValid(I,k,e,i)&&(this._drawSymbol(t,I,k,w,c,E,P),n._setPointIndex(E,V),V++),W++)}l&&h&&h.length&&l(h)}},e.prototype._drawLines=function(t,e,i,n,r,o){if(this.isSpline)t.drawSplines(e,i,n,r,o);else if(this.isStep){var a=this._createSteps(e,i);t.drawLines(e=a.x,i=a.y,n,r,o)}else t.drawLines(e,i,n,r,o)},e.prototype._drawSymbol=function(t,e,i,n,r,o,s){var l=this;if(s){t.startGroup();var h=new J(this.chart,new a.Point(e,i),X.SeriesSymbol);h._setData(r,o),s(t,h,(function(){l.hasSymbols&&l._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)})),t.cssPriority=!0,t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)},e.prototype._drawDefaultSymbol=function(t,e,i,n,r,o){r==Q.Dot?t.drawEllipse(e,i,.5*n,.5*n,null,o):r==Q.Box&&t.drawRect(e-.5*n,i-.5*n,n,n,null,o)},e}(ct),jt=function(t){function e(){var e=t.call(this)||this;return e._MIN_SIZE=5,e._MAX_SIZE=30,e.hasLines=!1,e.hasSymbols=!0,e.clipping=!0,e}return l(e,t),e.prototype.adjustLimits=function(e,i){var n=this.getNumOption("minSize","bubble");this._minSize=n||this._MIN_SIZE;var r=this.getNumOption("maxSize","bubble");this._maxSize=r||this._MAX_SIZE;for(var o=this.chart.series,a=o.length,s=NaN,l=NaN,h=0;h<a;h++)if(((_=o[h])._getChartType()==tt.Bubble||null==_._getChartType()&&_._chart._getChartType()==tt.Bubble)&&(y=_._getBindingValues(1)))for(var c=y.length,u=0;u<c;u++)gt.isValid(y[u])&&((isNaN(s)||y[u]<s)&&(s=y[u]),(isNaN(l)||y[u]>l)&&(l=y[u]));this._minValue=s,this._maxValue=l;var d=t.prototype.adjustLimits.call(this,e,i),p=i.left,f=i.right,m=i.top,g=i.bottom;for(h=0;h<a;h++){var _;if((_=o[h])._getChartType()==tt.Bubble||null==_._getChartType()&&_._chart._getChartType()==tt.Bubble){var y=_._getBindingValues(1),b=_.getValues(1),v=_.getValues(0);if(y&&b&&v){var x=y.length;for(u=0;u<x;u++){var w=b?b[u]:u,S=v[u],C=y[u];gt.isValid(w,S,C)&&((w=i.left+i.width*(w-d.left)/d.width)-(C=this._minSize+(this._maxSize-this._minSize)*(C-s)/(l-s))<p&&(p=w-C),w+C>f&&(f=w+C),(S=i.top+i.height*(S-d.top)/d.height)-C<m&&(m=S-C),S+C>g&&(g=S+C))}}}}p=i.left-p+5,f=f-i.right+5,m=i.top-m+5,g=g-i.bottom+5;var O=this.chart.axisY;if(!this.chart.axisX._isLogAxis()){var j=(i.width-(p+f))/d.width;d.left-=p/j,d.width+=(p+f)/j}if(!O._isLogAxis()){var T=(i.height-(m+g))/d.height;d.top-=m/T,d.height+=(m+g)/T}return d},e.prototype._drawSymbol=function(t,e,i,n,r,o,s){var l=this;if(null==this._minSize){var h=this.getNumOption("minSize","bubble");this._minSize=h||this._MIN_SIZE}if(null==this._maxSize){var c=this.getNumOption("maxSize","bubble");this._maxSize=c||this._MAX_SIZE}var u=r._getItem(o);if(u){var d=r._getBinding(1);if(d&&gt.isValid(n=u[d])){null==n&&(n=this._minValue);var p=this._minValue==this._maxValue?1:Math.sqrt((n-this._minValue)/(this._maxValue-this._minValue));if(n=this._minSize+(this._maxSize-this._minSize)*p,s){var f=new J(this.chart,new a.Point(e,i),X.SeriesSymbol);f._setData(r,o),t.startGroup(),s(t,f,(function(){l._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)})),t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle);var m=this.hitTester._map[this.chart.series.indexOf(r)];if(null!=m)for(var g=m.length-1;g>=0;g--){var _=m[g];if(_.tag&&_.tag.pointIndex==o){var y=Object(a.tryCast)(_,U);y&&y.setRadius(.5*n)}}}}},e}(Ot);Object(a._registerModule)("wijmo.chart",s)},oksU:function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var n=i("mrSG"),r=i("TYT/"),o=i("tcrU"),a=i("DQr0"),s=i("lMX+"),l=i("67Y/"),h=(i("TwVa"),i("ZF+8")),c=i("iFvM"),u=i("Valr"),d=i("qaSM"),p=i("UkaQ"),f=["grid"],m=["pop"];function g(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",3),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"div",4,5),r["\u0275\u0275listener"]("onHidden",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onHidden()}))("onShown",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onShown()})),r["\u0275\u0275text"](4,"\n    "),r["\u0275\u0275elementStart"](5,"label",6),r["\u0275\u0275text"](6),r["\u0275\u0275element"](7,"i",7),r["\u0275\u0275text"](8,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n"),r["\u0275\u0275elementEnd"]()}if(2&t){var n=r["\u0275\u0275nextContext"](),o=r["\u0275\u0275reference"](6);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("popover",o)("outsideClick",!0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("title",n.title),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.label,"\n      ")}}var _=function(t){return{selected:t}};function y(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"i",8,5),r["\u0275\u0275listener"]("onHidden",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onHidden()}))("onShown",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onShown()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3,"\n")}if(2&t){var n=r["\u0275\u0275nextContext"](),o=r["\u0275\u0275reference"](6);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](3,_,n.selected&&n.selected.length))("popover",o)("outsideClick",!0)}}function b(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",27),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275elementStart"](2,"div",28),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementStart"](4,"span",29),r["\u0275\u0275text"](5,"Loading..."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n    "),r["\u0275\u0275elementEnd"]())}function v(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"div",9),r["\u0275\u0275text"](2,"\n    "),r["\u0275\u0275template"](3,b,8,0,"div",10),r["\u0275\u0275text"](4,"\n    "),r["\u0275\u0275elementStart"](5,"div",11),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementStart"](7,"div",12),r["\u0275\u0275text"](8,"\n        "),r["\u0275\u0275elementStart"](9,"div",13),r["\u0275\u0275element"](10,"i",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n      "),r["\u0275\u0275elementStart"](13,"input",15),r["\u0275\u0275listener"]("input",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onSearch(t.target.value)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n    "),r["\u0275\u0275elementStart"](16,"wj-flex-grid",16,17),r["\u0275\u0275listener"]("sortingColumn",(function(t){r["\u0275\u0275restoreView"](i);var e=r["\u0275\u0275reference"](17);return r["\u0275\u0275nextContext"]().sortingHandler(e,t)}))("initialized",(function(t){r["\u0275\u0275restoreView"](i);var e=r["\u0275\u0275reference"](17);return r["\u0275\u0275nextContext"]().onGridInit(e)})),r["\u0275\u0275text"](18,"\n      "),r["\u0275\u0275elementStart"](19,"wj-flex-grid-column",18),r["\u0275\u0275text"](20,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n      "),r["\u0275\u0275elementStart"](22,"wj-flex-grid-column",19),r["\u0275\u0275text"](23,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n      "),r["\u0275\u0275elementStart"](25,"wj-flex-grid-column",20),r["\u0275\u0275text"](26,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n    "),r["\u0275\u0275elementStart"](29,"div",21),r["\u0275\u0275text"](30,"\n      "),r["\u0275\u0275elementStart"](31,"div",22),r["\u0275\u0275text"](32,"\n        "),r["\u0275\u0275elementStart"](33,"span"),r["\u0275\u0275text"](34,"Used Filter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"span"),r["\u0275\u0275text"](36),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](37,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](38,"\n      "),r["\u0275\u0275element"](39,"input",23),r["\u0275\u0275text"](40,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](41,"\n    "),r["\u0275\u0275elementStart"](42,"div",24),r["\u0275\u0275text"](43,"\n      "),r["\u0275\u0275elementStart"](44,"button",25),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onClear()})),r["\u0275\u0275text"](45,"Clear"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](46,"\n      "),r["\u0275\u0275elementStart"](47,"button",26),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().onApply()})),r["\u0275\u0275text"](48,"Apply"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](49,"\n      "),r["\u0275\u0275elementStart"](50,"button",25),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"]().pop.hide()})),r["\u0275\u0275text"](51,"Close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](52,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](53,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](54,"\n")}if(2&t){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",n.loading),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("allowDelete",!1)("allowAddNew",!1)("selectionMode",3)("itemsSource",n.collectionView),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("isReadOnly",!1)("width",50),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("isReadOnly",!0)("dataType",n.field.dataType)("format",n.field.displayFormat),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("isReadOnly",!0)("width",80),r["\u0275\u0275advance"](11),r["\u0275\u0275textInterpolate1"]("Rows: ",n.collectionView.items.length,""),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("value",n.usedFilters)}}var x=function(){function t(t){this.sql=t,this.delete=new r.EventEmitter,this.apply=new r.EventEmitter,this.collectionView=new o.CollectionView,this.loading=!0}return t.prototype.ngOnInit=function(){var t=this;this.collectionView.sourceCollection=[],this.collectionView.filter=function(e){return!t.search||-1!==e.value.toLowerCase().indexOf(t.search.trim().toLowerCase())},this.setSelected(this.currentFilters);var e=new o.PropertyGroupDescription("applied",(function(e,i){return t.isSelected(e.value)?"Applied items":"Select items"}));this.collectionView.groupDescriptions.push(e),this.collectionView.sortConverter=function(e,i,n){return"applied"===e.property&&t.selected?t.isSelected(i.value):n},this.setLabel()},t.prototype.onShown=function(){return Object(n.b)(this,void 0,void 0,(function(){var t,e;return Object(n.e)(this,(function(i){switch(i.label){case 0:this.loading=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.getItems()];case 2:return t=i.sent(),this.collectionView.sourceCollection=t,this.setFooter(this.grid),[3,5];case 3:return e=i.sent(),console.error(e),[3,5];case 4:return this.loading=!1,[7];case 5:return[2]}}))}))},t.prototype.getItems=function(){var t=this,e=Object(c.o)(this.currentFilters,this.field.bindingName)||[];return this.defaultFilters&&(e=Object(n.i)(e,this.defaultFilters)),this.sql.selectSqlObjectData(this.connection,this.dataObject.objectOwner,this.dataObject.objectName,{fields:[this.field.bindingName,"Count|1"],filters:e}).pipe(Object(l.a)((function(e){return t.usedFilters=t.getUsedFiltersStr(),e.rows&&e.rows.map((function(e){var i=e[0],n=e[1];return t.field.dataType===o.DataType.Date&&(i=new Date(Date.parse(i))),{selected:t.isSelected(i),value:i,count:n}}))}))).toPromise()},t.prototype.setSelected=function(t){t&&(this.selected=t[this.field.bindingName])},t.prototype.ngOnChanges=function(t){var e=t.currentFilters;e&&!e.firstChange&&(this.setSelected(e.currentValue),this.setLabel())},t.prototype.sortingHandler=function(t,e){var i=t.columns[e.col],n=this.collectionView.sortDescriptions,r=new o.SortDescription(i.binding,"+"!==i.currentSort);this.collectionView.deferUpdate((function(){n.clear(),n.push(new o.SortDescription("applied",!1)),n.push(r)})),e.cancel=!0},t.prototype.onGridInit=function(t){t.columnFooters.rows.push(new s.Row({count:0})),t.groupHeaderFormat="<b>{value}</b>",t.formatItem.addHandler((function(t,e){var i=e.panel,n=i.rows[e.row].dataItem,r=i.columns[e.col].binding;i.cellType===s.CellType.Cell&&n&&"value"===r&&null===n[r]&&(e.cell.innerHTML="[NULL]")})),this.selected&&this.collectionView.sortDescriptions.push(new o.SortDescription("applied",!1))},t.prototype.onSearch=function(t){this.search=t,this.collectionView.refresh()},t.prototype.onHidden=function(){this.currentFilters&&(this.collectionView.sourceCollection=[])},t.prototype.onApply=function(){this.selected=this.collectionView.items.filter((function(t){return t.selected})).map((function(t){return t.value})),this.selected.length||(this.selected=null),this.pop.hide(),this.apply.emit(this.selected),this.setLabel()},t.prototype.onClear=function(){this.selected=null,this.onHidden(),this.pop.hide(),this.apply.emit(this.selected),this.setLabel()},t.prototype.onDelete=function(){this.selected=null,this.delete.emit(),this.setLabel()},t.prototype.setFooter=function(t){t&&t.columnFooters.setCellData(0,2,this.collectionView.sourceCollection.reduce((function(t,e){return t+e.count}),0))},t.prototype.setLabel=function(){var t=this,e=this.field.bindingName,i=e;this.selected&&this.selected.length&&(e=(i=e+": "+this.selected.map((function(e){return t.field.dataType===o.DataType.Date?Object(c.j)(e,t.field.displayFormat):e})).join(", ")).length>50?i.substring(0,47)+"...":i),this.label=e,this.title=i},t.prototype.isSelected=function(t){return!!this.selected&&(t instanceof Date?this.selected.some((function(e){return e.getTime()===t.getTime()})):this.selected.includes(t))},t.prototype.getUsedFiltersStr=function(){var t=Object(c.o)(this.currentFilters,this.field.bindingName);return t&&t.map((function(t){return t.fieldName+" IN ("+t.value.map((function(t){return t instanceof Date?Object(c.b)(t):t})).join(",")+"})"})).join(" AND ")},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](h.h))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-filter"]],viewQuery:function(t,e){var i;1&t&&(r["\u0275\u0275viewQuery"](f,!0),r["\u0275\u0275viewQuery"](m,!0)),2&t&&(r["\u0275\u0275queryRefresh"](i=r["\u0275\u0275loadQuery"]())&&(e.grid=i.first),r["\u0275\u0275queryRefresh"](i=r["\u0275\u0275loadQuery"]())&&(e.pop=i.first))},inputs:{icon:"icon",field:"field",currentFilters:"currentFilters",dataObject:"dataObject",connection:"connection",defaultFilters:"defaultFilters"},outputs:{delete:"delete",apply:"apply"},features:[r["\u0275\u0275NgOnChangesFeature"]()],decls:8,vars:2,consts:[["class","d-flex border border-secondary rounded",4,"ngIf","ngIfElse"],["iconTemplate",""],["popTemplate",""],[1,"d-flex","border","border-secondary","rounded"],["containerClass","filter-component","placement","bottom",1,"d-flex",3,"popover","outsideClick","onHidden","onShown"],["pop","bs-popover"],[1,"col-form-label","px-1","cursor-pointer",3,"title"],[1,"fa","fa-angle-down"],["containerClass","filter-component","placement","bottom","container","body",1,"fa","fa-filter","cursor-pointer",3,"ngClass","popover","outsideClick","onHidden","onShown"],[1,"container","p-0","h-100","d-flex","flex-column"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","placeholder","Search",1,"form-control","form-control-sm",3,"input"],["headersVisibility","Column",1,"h-100","flex-fill",3,"allowDelete","allowAddNew","selectionMode","itemsSource","sortingColumn","initialized"],["grid",""],["header","?","binding","selected","dataType","Boolean",3,"isReadOnly","width"],["header","Value","binding","value","width","*",3,"isReadOnly","dataType","format"],["header","Count","binding","count","dataType","Number",3,"isReadOnly","width"],[1,"row","flex-column","m-0","my-2"],[1,"d-flex","justify-content-between","mb-2"],["type","text","disabled","disabled",1,"form-control","form-control-sm",3,"value"],[1,"d-flex"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","ml-auto","mr-2",3,"click"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(t,e){if(1&t&&(r["\u0275\u0275template"](0,g,11,4,"div",0),r["\u0275\u0275text"](1,"\n"),r["\u0275\u0275template"](2,y,4,5,"ng-template",null,1,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](4,"\n\n"),r["\u0275\u0275template"](5,v,55,14,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](7,"\n")),2&t){var i=r["\u0275\u0275reference"](3);r["\u0275\u0275property"]("ngIf",!e.icon)("ngIfElse",i)}},directives:[u.NgIf,a.a,u.NgClass,d.a,p.WjFlexGrid,p.WjFlexGridColumn],styles:[".filter-component{height:450px;min-width:450px}  .filter-component .popover-content.popover-body{height:100%;padding:.5rem;background-color:var(--bg);color:var(--color)}.fa-filter[_ngcontent-%COMP%]{color:#73818f}.fa-filter.selected[_ngcontent-%COMP%]{color:#2f353a}"]}),t}()},s90X:function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i("mrSG"),r=i("TYT/"),o=i("67Y/"),a=i("15JJ"),s=i("K9Ia"),l=i("26FU"),h=(i("TwVa"),i("ZF+8")),c=i("1ua0"),u=i("Valr"),d=i("6Fs3"),p=i("oksU");function f(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",8),r["\u0275\u0275elementStart"](1,"a",9),r["\u0275\u0275listener"]("click",(function(t){r["\u0275\u0275restoreView"](i);var n=e.$implicit;return r["\u0275\u0275nextContext"](3).addFilter(n)})),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){var n=e.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.bindingName)}}function m(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ul",7),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275elementStart"](2,"li",8),r["\u0275\u0275elementStart"](3,"a",9),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](i),r["\u0275\u0275nextContext"](2).manageFilter()})),r["\u0275\u0275element"](4,"i",10),r["\u0275\u0275text"](5," Manage Filter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275element"](7,"li",11),r["\u0275\u0275text"](8,"\n      "),r["\u0275\u0275template"](9,f,3,1,"li",12),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11,"\n    "),r["\u0275\u0275elementEnd"]()}if(2&t){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](10,1,n.fields$))}}function g(t,e){if(1&t){var i=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",13),r["\u0275\u0275text"](1,"\n    "),r["\u0275\u0275elementStart"](2,"app-filter",14),r["\u0275\u0275listener"]("apply",(function(t){r["\u0275\u0275restoreView"](i);var n=e.index,o=e.$implicit;return r["\u0275\u0275nextContext"](2).onFilterChange(n,t,o)}))("delete",(function(t){r["\u0275\u0275restoreView"](i);var n=e.index,o=e.$implicit;return r["\u0275\u0275nextContext"](2).removeFilter(n,o)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3,"\n  "),r["\u0275\u0275elementEnd"]()}if(2&t){var n=e.$implicit,o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("field",n)("currentFilters",o.currentFilters)("connection",o.connection)("dataObject",o.dataObject)("defaultFilters",o.defaultFilters)}}function _(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementStart"](4,"button",3),r["\u0275\u0275pipe"](5,"async"),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275element"](7,"i",4),r["\u0275\u0275text"](8,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n    "),r["\u0275\u0275template"](10,m,12,3,"ul",5),r["\u0275\u0275text"](11,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n  "),r["\u0275\u0275template"](13,g,4,5,"div",6),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15,"\n"),r["\u0275\u0275elementEnd"]()),2&t){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("disabled",!r["\u0275\u0275pipeBind1"](5,2,i.fields$).length),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](14,4,i.columnInfo$))}}var y=function(){function t(t){this.dialogService=t,this.changed=new r.EventEmitter,this.destroy$=new s.a,this.filters$=new l.a([]),this.filtersState=null}return t.prototype.ngOnInit=function(){var t=this;this.fields$=this.filters$.pipe(Object(o.a)((function(e){var i=e.map((function(t){return t.bindingName}));return t.fields.filter((function(t){return!i.includes(t.bindingName)}))}))),this.columnInfo$=this.filters$.pipe(Object(o.a)((function(e){return e.map((function(e){return t.fields.find((function(t){return e.bindingName===t.bindingName}))}))}))),this.selectedFilters$=this.filters$.pipe(Object(o.a)((function(t){return t.filter((function(t){return t.selected&&t.selected.length}))})))},t.prototype.ngOnChanges=function(t){var e=t.fields;e&&!e.firstChange&&this.filters$.next(this.getSavedFilters())},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.addFilter=function(t){var e=Object(n.a)(Object(n.a)({},t),{selected:null,items:[]});this.filters$.next(Object(n.i)(this.filters$.value,[e])),this.saveFilters()},t.prototype.onFilterChange=function(t,e,i){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(t){return this.currentFilters[i.bindingName]=e,this.changed.emit(this.currentFilters),[2]}))}))},t.prototype.removeFilter=function(t,e){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(i){switch(i.label){case 0:return[4,this.onFilterChange(t,null,e)];case 1:return i.sent(),this.currentFilters[e.bindingName]=null,this.filters$.value.splice(t,1),this.filters$.next(Object(n.i)(this.filters$.value)),this.saveFilters(),[2]}}))}))},t.prototype.manageFilter=function(){var t=this,e=this.dialogService.open(c.d);e.config={filters:this.filters$.value,fields:this.fields},e.init.pipe(Object(a.a)((function(){return e.component.change}))).subscribe((function(e){return Object(n.b)(t,void 0,void 0,(function(){var t,i=this;return Object(n.e)(this,(function(n){return t=e,this.filters$.value.filter((function(e){return!t.map((function(t){return t.bindingName})).includes(e.bindingName)})).forEach((function(t){i.currentFilters[t.bindingName]=null})),-1===this.filters$.value.findIndex((function(e,i){return!t[i]||e.bindingName!==t[i].bindingName}))&&t.length===this.filters$.value.length||this.changed.emit(this.currentFilters),this.filters$.next(t),this.saveFilters(),[2]}))}))}))},Object.defineProperty(t.prototype,"filtersKey",{get:function(){return"db-table-filters-"+this.dataObject.objectOwner+"-"+this.dataObject.objectName},enumerable:!0,configurable:!0}),t.prototype.saveFilters=function(){var t=this.filters$.value.map((function(t){return t.bindingName}));t.length?localStorage.setItem(this.filtersKey,JSON.stringify(t)):localStorage.removeItem(this.filtersKey)},t.prototype.getSavedFilters=function(){var t=this;try{var e=localStorage.getItem(this.filtersKey);return e?JSON.parse(e).map((function(e){var i=t.fields.find((function(t){return t.bindingName===e}));if(i)return Object(n.a)(Object(n.a)({},i),{selected:null,items:[]})})).filter((function(t){return t})):[]}catch(i){return[]}},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](h.c))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-filters"]],inputs:{fields:"fields",currentFilters:"currentFilters",connection:"connection",dataObject:"dataObject",defaultFilters:"defaultFilters"},outputs:{changed:"changed"},features:[r["\u0275\u0275NgOnChangesFeature"]()],decls:2,vars:1,consts:[["class","row m-0",4,"ngIf"],[1,"row","m-0"],["dropdown","",1,"btn-group","mr-2","mb-2","border"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic","triggers","mouseenter:mouseleave","containerClass","applied-popover",1,"btn","btn-primary","dropdown-toggle","align-self-baseline",3,"disabled"],[1,"fa","fa-filter"],["id","dropdown-basic","class","dropdown-menu overflow-auto","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["class","pr-2 mb-2",4,"ngFor","ngForOf"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu","overflow-auto"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"fa","fa-cogs"],[1,"divider","dropdown-divider"],["role","menuitem",4,"ngFor","ngForOf"],[1,"pr-2","mb-2"],[3,"field","currentFilters","connection","dataObject","defaultFilters","apply","delete"]],template:function(t,e){1&t&&(r["\u0275\u0275template"](0,_,16,6,"div",0),r["\u0275\u0275text"](1,"\n")),2&t&&r["\u0275\u0275property"]("ngIf",e.fields&&e.fields.length)},directives:[u.NgIf,d.a,d.d,d.b,u.NgForOf,p.a],pipes:[u.AsyncPipe],styles:[".border[dropdown][_ngcontent-%COMP%]{border-color:transparent}.dropdown-menu[_ngcontent-%COMP%]{max-height:500px}.fa.fa-cogs[_ngcontent-%COMP%]{color:#2f353a}  .applied-popover{min-width:100px}"]}),t}()},vg9S:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r}));var n=function(t){return t.Input="input",t.Text="text",t}({}),r=function(t){return t.show="d-flex flex-column h-100 w-100",t.hide="d-none",t}({})}}]);
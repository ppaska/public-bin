(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{BnMy:function(e,t){},Zdod:function(e,t,n){"use strict";n.r(t);var r=n("Valr"),o=n("QJY3"),i=n("b8dF"),a=n("6Fs3"),l=n("g4vN"),c=n("Hph+"),s=n("j/lb"),d=n("OaQ9"),m=n("M0ag"),f=n("ZF+8"),u=n("DUip"),p=n("K9Ia"),v=n("ny24"),x=n("VnD/"),g=n("mrSG"),h=n("26FU"),b=n("XlPw"),w=n("AytR"),y=n("ad02"),S=n("15JJ"),I=n("xMyE"),E=n("9Z1F"),j=n("67Y/"),M=n("OLrf"),O=n("TwVa"),F=n("TYT/");function C(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"Form title is required."),F["\u0275\u0275elementEnd"]())}function N(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n              "),F["\u0275\u0275template"](2,C,2,0,"div",44),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](27);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}function _(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"From name is required."),F["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n              "),F["\u0275\u0275template"](2,_,2,0,"div",44),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](41);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}function P(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"From folder is required."),F["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n                "),F["\u0275\u0275template"](2,P,2,0,"div",44),F["\u0275\u0275text"](3,"\n              "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](55);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}function A(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"ownerName is required."),F["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n              "),F["\u0275\u0275template"](2,A,2,0,"div",44),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](94);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}function U(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"tableName is required."),F["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n              "),F["\u0275\u0275template"](2,U,2,0,"div",44),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](108);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}function V(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"base_api_url is required."),F["\u0275\u0275elementEnd"]())}function R(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n              "),F["\u0275\u0275template"](2,V,2,0,"div",44),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](122);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}function $(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div"),F["\u0275\u0275text"](1,"userPublicAccessCode is required."),F["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",43),F["\u0275\u0275text"](1,"\n              "),F["\u0275\u0275template"](2,$,2,0,"div",44),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementEnd"]()),2&e){F["\u0275\u0275nextContext"]();var n=F["\u0275\u0275reference"](136);F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",n.errors.required)}}n("oW1M"),n("BnMy");var B=function(){function e(){this.save=new F.EventEmitter}return e.prototype.ngOnInit=function(){this.formInfo=Object(m.h)(this.config)},e.prototype.saveForm=function(){this.save.emit(this.formInfo)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=F["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-info"]],inputs:{config:"config",modalRef:"modalRef"},outputs:{save:"save"},decls:157,vars:18,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column"],[1,"position-relative","h-100"],["formInfoForm","ngForm"],[1,"form-group","row","mx-0","mb-2","flex-nowrap"],["for","form-title",1,"col-form-label","px-0"],[1,"flex-fill","ml-2"],["type","text","placeholder","Enter form-title title","name","title","required","","id","form-title",1,"form-control",3,"ngModel","ngModelChange"],["title","ngModel"],["class","alert alert-danger py-1 px-2 m-0",4,"ngIf"],["for","form-name",1,"col-form-label","px-0"],["type","text","placeholder","Enter form name","name","name","required","","id","form-name",1,"form-control",3,"ngModel","ngModelChange"],["formName","ngModel"],["for","form-folder",1,"col-form-label","px-0"],["type","text","placeholder","Enter form folder","name","folder","required","","id","form-folder",1,"form-control",3,"ngModel","ngModelChange"],["formFolder","ngModel"],["for","form-description",1,"col-form-label","px-0"],["rows","5","placeholder","Enter form description","id","form-description","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","row","mx-0","mb-1","flex-nowrap"],["for","form-is-public",1,"col-form-label","px-0"],["type","checkbox","name","is-public","id","form-is-public",1,"mt-0","h-100",3,"ngModel","ngModelChange"],[1,"mt-3"],[1,"form-group","row","mx-0","mb-2","flex-nowrap","var-import"],["for","form-object-owner",1,"col-form-label","px-0"],["type","text","placeholder","Enter objectOwner","name","object-owner","required","","id","form-object-owner",1,"form-control",3,"ngModel","ngModelChange"],["ownerName","ngModel"],["for","form-object-name",1,"col-form-label","px-0"],["type","text","placeholder","Enter tableName","name","object-name","required","","id","form-object-name",1,"form-control",3,"ngModel","ngModelChange"],["tableName","ngModel"],["for","form-base-api-url",1,"col-form-label","px-0"],["type","text","placeholder","Enter base_api_url","name","base_api_url","required","","id","form-base-api-url",1,"form-control",3,"ngModel","ngModelChange"],["baseUrl","ngModel"],[1,"form-group","row","mx-0","mb-1","flex-nowrap","var-import"],["for","form-public-code",1,"col-form-label","px-0"],["type","text","placeholder","Enter userPublicAccessCode","name","public-code","required","","id","form-public-code",1,"form-control",3,"ngModel","ngModelChange"],["userPublicAccessCode","ngModel"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-primary","ml-auto","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-light",3,"click"],[1,"alert","alert-danger","py-1","px-2","m-0"],[4,"ngIf"]],template:function(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",0),F["\u0275\u0275text"](1,"\n    "),F["\u0275\u0275elementStart"](2,"h4",1),F["\u0275\u0275text"](3),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](4,"\n    "),F["\u0275\u0275elementStart"](5,"button",2),F["\u0275\u0275listener"]("click",(function(e){return t.modalRef.hide()})),F["\u0275\u0275text"](6,"\n      "),F["\u0275\u0275elementStart"](7,"span",3),F["\u0275\u0275text"](8,"\xd7"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](9,"\n    "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](10,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](11,"\n  "),F["\u0275\u0275elementStart"](12,"div",4),F["\u0275\u0275text"](13,"\n    "),F["\u0275\u0275elementStart"](14,"div",5),F["\u0275\u0275text"](15,"\n      "),F["\u0275\u0275elementStart"](16,"form",null,6),F["\u0275\u0275text"](18,"\n        "),F["\u0275\u0275elementStart"](19,"div",7),F["\u0275\u0275text"](20,"\n          "),F["\u0275\u0275elementStart"](21,"label",8),F["\u0275\u0275text"](22,"Form title"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](23,"\n          "),F["\u0275\u0275elementStart"](24,"div",9),F["\u0275\u0275text"](25,"\n            "),F["\u0275\u0275elementStart"](26,"input",10,11),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.title=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](28,"\n            "),F["\u0275\u0275template"](29,N,4,1,"div",12),F["\u0275\u0275text"](30,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](31,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](32,"\n        "),F["\u0275\u0275elementStart"](33,"div",7),F["\u0275\u0275text"](34,"\n          "),F["\u0275\u0275elementStart"](35,"label",13),F["\u0275\u0275text"](36,"Form name"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](37,"\n          "),F["\u0275\u0275elementStart"](38,"div",9),F["\u0275\u0275text"](39,"\n            "),F["\u0275\u0275elementStart"](40,"input",14,15),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.formName=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](42,"\n            "),F["\u0275\u0275template"](43,k,4,1,"div",12),F["\u0275\u0275text"](44,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](45,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](46,"\n        "),F["\u0275\u0275elementStart"](47,"div",7),F["\u0275\u0275text"](48,"\n            "),F["\u0275\u0275elementStart"](49,"label",16),F["\u0275\u0275text"](50,"Form folder"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](51,"\n            "),F["\u0275\u0275elementStart"](52,"div",9),F["\u0275\u0275text"](53,"\n              "),F["\u0275\u0275elementStart"](54,"input",17,18),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.folder=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](56,"\n              "),F["\u0275\u0275template"](57,q,4,1,"div",12),F["\u0275\u0275text"](58,"\n            "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](59,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](60,"\n        "),F["\u0275\u0275elementStart"](61,"div",7),F["\u0275\u0275text"](62,"\n          "),F["\u0275\u0275elementStart"](63,"label",19),F["\u0275\u0275text"](64,"Description"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](65,"\n          "),F["\u0275\u0275elementStart"](66,"div",9),F["\u0275\u0275text"](67,"\n            "),F["\u0275\u0275elementStart"](68,"textarea",20),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.description=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](69,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](70,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](71,"\n        "),F["\u0275\u0275elementStart"](72,"div",21),F["\u0275\u0275text"](73,"\n          "),F["\u0275\u0275elementStart"](74,"label",22),F["\u0275\u0275text"](75,"Is Public"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](76,"\n          "),F["\u0275\u0275elementStart"](77,"div",9),F["\u0275\u0275text"](78,"\n            "),F["\u0275\u0275elementStart"](79,"input",23),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.isPublic=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](80,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](81,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](82,"\n        "),F["\u0275\u0275elementStart"](83,"h4",24),F["\u0275\u0275text"](84,"_var_import_overrides"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](85,"\n        "),F["\u0275\u0275elementStart"](86,"div",25),F["\u0275\u0275text"](87,"\n          "),F["\u0275\u0275elementStart"](88,"label",26),F["\u0275\u0275text"](89,"ownerName"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](90,"\n          "),F["\u0275\u0275elementStart"](91,"div",9),F["\u0275\u0275text"](92,"\n            "),F["\u0275\u0275elementStart"](93,"input",27,28),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.workflowsMap._var_import_overrides.ownerName=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](95,"\n            "),F["\u0275\u0275template"](96,D,4,1,"div",12),F["\u0275\u0275text"](97,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](98,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](99,"\n        "),F["\u0275\u0275elementStart"](100,"div",25),F["\u0275\u0275text"](101,"\n          "),F["\u0275\u0275elementStart"](102,"label",29),F["\u0275\u0275text"](103,"tableName"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](104,"\n          "),F["\u0275\u0275elementStart"](105,"div",9),F["\u0275\u0275text"](106,"\n            "),F["\u0275\u0275elementStart"](107,"input",30,31),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.workflowsMap._var_import_overrides.tableName=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](109,"\n            "),F["\u0275\u0275template"](110,L,4,1,"div",12),F["\u0275\u0275text"](111,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](112,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](113,"\n        "),F["\u0275\u0275elementStart"](114,"div",25),F["\u0275\u0275text"](115,"\n          "),F["\u0275\u0275elementStart"](116,"label",32),F["\u0275\u0275text"](117,"base_api_url"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](118,"\n          "),F["\u0275\u0275elementStart"](119,"div",9),F["\u0275\u0275text"](120,"\n            "),F["\u0275\u0275elementStart"](121,"input",33,34),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.workflowsMap._var_import_overrides.base_api_url=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](123,"\n            "),F["\u0275\u0275template"](124,R,4,1,"div",12),F["\u0275\u0275text"](125,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](126,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](127,"\n        "),F["\u0275\u0275elementStart"](128,"div",35),F["\u0275\u0275text"](129,"\n          "),F["\u0275\u0275elementStart"](130,"label",36),F["\u0275\u0275text"](131,"userPublicAccessCode"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](132,"\n          "),F["\u0275\u0275elementStart"](133,"div",9),F["\u0275\u0275text"](134,"\n            "),F["\u0275\u0275elementStart"](135,"input",37,38),F["\u0275\u0275listener"]("ngModelChange",(function(e){return t.formInfo.workflowsMap._var_import_overrides.userPublicAccessCode=e})),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](137,"\n            "),F["\u0275\u0275template"](138,T,4,1,"div",12),F["\u0275\u0275text"](139,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](140,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](141,"\n      "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](142,"\n    "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](143,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](144,"\n  "),F["\u0275\u0275elementStart"](145,"div",39),F["\u0275\u0275text"](146,"\n    "),F["\u0275\u0275elementStart"](147,"div",40),F["\u0275\u0275text"](148,"\n      "),F["\u0275\u0275elementStart"](149,"button",41),F["\u0275\u0275listener"]("click",(function(e){return t.saveForm()})),F["\u0275\u0275text"](150,"Save"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](151,"\n      "),F["\u0275\u0275elementStart"](152,"button",42),F["\u0275\u0275listener"]("click",(function(e){return t.modalRef.hide()})),F["\u0275\u0275text"](153,"Cancel"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](154,"\n    "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](155,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](156,"\n")),2&e){var n=F["\u0275\u0275reference"](17),r=F["\u0275\u0275reference"](27),o=F["\u0275\u0275reference"](41),i=F["\u0275\u0275reference"](55),a=F["\u0275\u0275reference"](94),l=F["\u0275\u0275reference"](108),c=F["\u0275\u0275reference"](122),s=F["\u0275\u0275reference"](136);F["\u0275\u0275advance"](3),F["\u0275\u0275textInterpolate1"]("",t.config.title||t.config.formName," configuration"),F["\u0275\u0275advance"](23),F["\u0275\u0275property"]("ngModel",t.formInfo.title),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",r.invalid&&(r.dirty||r.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.formName),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",o.invalid&&(o.dirty||o.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.folder),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",i.invalid&&(i.dirty||i.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.description),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.isPublic),F["\u0275\u0275advance"](14),F["\u0275\u0275property"]("ngModel",t.formInfo.workflowsMap._var_import_overrides.ownerName),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",a.invalid&&(a.dirty||a.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.workflowsMap._var_import_overrides.tableName),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",l.invalid&&(l.dirty||l.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.workflowsMap._var_import_overrides.base_api_url),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",c.invalid&&(c.dirty||c.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("ngModel",t.formInfo.workflowsMap._var_import_overrides.userPublicAccessCode),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",s.invalid&&(s.dirty||s.touched)),F["\u0275\u0275advance"](11),F["\u0275\u0275property"]("disabled",!n.valid)}},directives:[o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.NgForm,o.DefaultValueAccessor,o.RequiredValidator,o.NgControlStatus,o.NgModel,r.NgIf,o.CheckboxControlValueAccessor],styles:[".form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{flex:0 0 100px;-webkit-box-flex:0;flex:0 0 150px}"]}),e}(),H=n("cUzu"),G=function(){function e(e,t,n,r,o){var i=this;this.httpClient=e,this.authService=t,this.notificationService=n,this.sqlDb=r,this.dialogService=o,this.formInfoList=new h.a(null),this.forms$=this.formInfoList.asObservable(),this.selectedForm=new h.a(null),this.selectedForm$=this.selectedForm.asObservable().pipe(Object(y.a)((function(e,t){return i.areFormsEqual(e,t)}))),this.isLoading=new h.a(!1),this.isLoading$=this.isLoading.asObservable()}return e.prototype.getForms=function(){var e=this;return this.loadForms().pipe(Object(S.a)((function(){return e.forms$})))},e.prototype.getForm=function(e){var t=this;return this.isLoading.next(!0),this.httpClient.get(w.a.apiBaseUrl+"/forms/form/"+e.ownerName+"/"+e.formName,this.authService.getHttpHeaders()).pipe(Object(I.a)((function(n){if(!n)throw Error("No form or no access to form "+e.ownerName+"/"+e.formName);var r=t.selectedForm.value;t.areFormsEqual(n,r)&&!r.hasOwnProperty("formId")&&t.selectedForm.next(n),t.stopLoading()})),Object(E.a)((function(e){return t.stopLoading(),Object(b.a)(e)})))},e.prototype.saveForm=function(e){var t=this,n=w.a.apiBaseUrl+"/forms/form";return this.isLoading.next(!0),this.httpClient.post(n,e,this.authService.getHttpHeaders()).pipe(Object(S.a)((function(e){return t.loadForms().pipe(Object(j.a)((function(){return e})))})),Object(E.a)((function(e){return t.notificationService.open({type:O.f.DANGER,message:e.error}),Object(b.a)(e)})))},e.prototype.deleteForm=function(e){var t=this;return this.httpClient.delete(w.a.apiBaseUrl+"/forms/form/"+e,this.authService.getHttpHeaders()).pipe(Object(S.a)((function(){return t.loadForms()})),Object(E.a)((function(e){return t.notificationService.open({type:O.f.DANGER,message:e.error}),Object(b.a)(e)})))},e.prototype.deleteObject=function(e,t,n){var r=this;return this.sqlDb.getObject(e,t,n).pipe(Object(S.a)((function(o){return o?r.sqlDb.deleteObject(e,o):Object(b.a)("Table not found for "+t+", "+n)})))},e.prototype.selectForm=function(e){var t=this;if(!this.areFormsEqual(e,this.selectedForm.value)){this.selectedFormOwner=e;var n=this.formInfoList.value&&this.formInfoList.value.find((function(n){return t.areFormsEqual(e,n)}));this.selectedForm.next(n||(e.formName&&e.ownerName?e:null))}},e.prototype.loadForms=function(){var e=this,t=w.a.apiBaseUrl+"/forms/my-forms";return this.isLoading.next(!0),this.httpClient.get(t,this.authService.getHttpHeaders()).pipe(Object(I.a)((function(t){e.formInfoList.next(t),e.selectedFormOwner&&e.selectForm(e.selectedFormOwner),e.stopLoading()})),Object(E.a)((function(t){return e.isLoading.next(!1),e.notificationService.open({type:O.f.DANGER,message:t.message}),Object(b.a)(t)})))},e.prototype.areFormsEqual=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>1){var n=e[0];return!e.slice(1).some((function(e){return!(n&&e&&n.ownerName===e.ownerName&&n.formName===e.formName)}))}return!0},e.prototype.saveFormDialog=function(e,t){var n=this;return t||((t=this.dialogService.open(B,{class:"modal-lg"})).config=e,t.modal.onHide.subscribe((function(){t.component.save.next(),t.component.save.complete()}))),t.init.pipe(Object(S.a)((function(){return t.component.save})),Object(S.a)((function(r){if(!r)return n.saveFormDialog(e,t);var o=r,i=n.authService.user.userName,a=i===e.ownerName?e.formId:0,l=Object(g.a)(Object(g.a)(Object(g.a)({},e),o),{ownerName:i,formId:a});return n.saveForm(l).pipe(Object(j.a)((function(e){return setTimeout((function(){t.modal.hide()})),l.formId=e,l})),Object(E.a)((function(){return n.saveFormDialog(l,t)})))})))},e.prototype.stopLoading=function(){var e=this;setTimeout((function(){e.isLoading.next(!1)}),10)},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275inject"](H.a),F["\u0275\u0275inject"](M.b),F["\u0275\u0275inject"](f.g),F["\u0275\u0275inject"](f.h),F["\u0275\u0275inject"](f.c))},e.\u0275prov=F["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Q=n("E1rE"),J=n("Xn/w"),z=n("UfhM"),W=n("fQZA"),Y=["listView"];function Z(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"alert",3),F["\u0275\u0275text"](1,"\n  "),F["\u0275\u0275elementStart"](2,"strong"),F["\u0275\u0275text"](3,"Error:"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](4),F["\u0275\u0275elementEnd"]()),2&e){var n=F["\u0275\u0275nextContext"]();F["\u0275\u0275advance"](4),F["\u0275\u0275textInterpolate1"](" ",n.error,"\n")}}function X(e,t){if(1&e){var n=F["\u0275\u0275getCurrentView"]();F["\u0275\u0275elementStart"](0,"alert",4),F["\u0275\u0275text"](1,"\n  Please "),F["\u0275\u0275elementStart"](2,"a",5),F["\u0275\u0275listener"]("click",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().loginService.openDialog()})),F["\u0275\u0275text"](3,"Login"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](4," to be able to save & load forms.\n"),F["\u0275\u0275elementEnd"]()}}function K(e,t){if(1&e&&(F["\u0275\u0275text"](0,"\n    "),F["\u0275\u0275elementStart"](1,"div",8),F["\u0275\u0275text"](2),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](3,"\n  ")),2&e){var n=t.$implicit;F["\u0275\u0275advance"](1),F["\u0275\u0275propertyInterpolate"]("title",n.description),F["\u0275\u0275advance"](1),F["\u0275\u0275textInterpolate1"]("\n      ",n.title||n.formName,"\n    ")}}function ee(e,t){if(1&e){var n=F["\u0275\u0275getCurrentView"]();F["\u0275\u0275elementStart"](0,"app-list-view",6,7),F["\u0275\u0275listener"]("select",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().onSelect(e)})),F["\u0275\u0275text"](2,"\n  "),F["\u0275\u0275template"](3,K,4,2,"ng-template"),F["\u0275\u0275text"](4,"\n"),F["\u0275\u0275elementEnd"]()}if(2&e){var r=F["\u0275\u0275nextContext"]();F["\u0275\u0275property"]("comparator",r.dataService.areFormsEqual)("list",r.forms)}}var te=function(){function e(e,t,n,r,o){this.dataService=e,this.router=t,this.route=n,this.authService=r,this.loginService=o,this.isAuthenticated=!1}return e.prototype.ngOnInit=function(){var e=this;this.authService.isAuthenticated$.pipe(Object(I.a)((function(t){return e.isAuthenticated=t})),Object(x.a)((function(e){return e})),Object(S.a)((function(){return e.dataService.getForms()})),Object(I.a)((function(t){return e.forms=t})),Object(S.a)((function(){return e.dataService.selectedForm$}))).subscribe((function(t){e.listView&&e.listView.selectItem(t)}))},e.prototype.onSelect=function(e){if(e){var t=e.ownerName,n=e.formName;t&&n&&this.router.navigate([t,n],{relativeTo:this.route})}else this.router.navigate([],{relativeTo:this.route})},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275directiveInject"](G),F["\u0275\u0275directiveInject"](u.f),F["\u0275\u0275directiveInject"](u.a),F["\u0275\u0275directiveInject"](z.a),F["\u0275\u0275directiveInject"](z.b))},e.\u0275cmp=F["\u0275\u0275defineComponent"]({type:e,selectors:[["app-saved-forms"]],viewQuery:function(e,t){var n;1&e&&F["\u0275\u0275viewQuery"](Y,!0),2&e&&F["\u0275\u0275queryRefresh"](n=F["\u0275\u0275loadQuery"]())&&(t.listView=n.first)},decls:6,vars:3,consts:[["type","danger",4,"ngIf"],["type","info",4,"ngIf"],["class","d-flex h-100 overflow-auto","group","folder","orderBy","id",3,"comparator","list","select",4,"ngIf"],["type","danger"],["type","info"],[1,"link","cursor-pointer",3,"click"],["group","folder","orderBy","id",1,"d-flex","h-100","overflow-auto",3,"comparator","list","select"],["listView",""],[1,"m-1","pl-3",3,"title"]],template:function(e,t){1&e&&(F["\u0275\u0275template"](0,Z,5,1,"alert",0),F["\u0275\u0275text"](1,"\n"),F["\u0275\u0275template"](2,X,5,0,"alert",1),F["\u0275\u0275text"](3,"\n"),F["\u0275\u0275template"](4,ee,5,2,"app-list-view",2),F["\u0275\u0275text"](5,"\n")),2&e&&(F["\u0275\u0275property"]("ngIf",t.error),F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",!t.isAuthenticated),F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",t.isAuthenticated&&!t.error))},directives:[r.NgIf,i.a,W.a],styles:["app-list-view[_ngcontent-%COMP%]{background-color:var(--bg)}"]}),e}(),ne=n("F/XL"),re=n("Czp8"),oe=n("UShy");function ie(e,t){if(1&e){var n=F["\u0275\u0275getCurrentView"]();F["\u0275\u0275elementStart"](0,"li",16),F["\u0275\u0275text"](1,"\n            "),F["\u0275\u0275elementStart"](2,"a",17),F["\u0275\u0275listener"]("click",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"](2).onDeleteForm()})),F["\u0275\u0275text"](3,"Delete form"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](4,"\n          "),F["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e){var n=F["\u0275\u0275getCurrentView"]();F["\u0275\u0275elementStart"](0,"ul",15),F["\u0275\u0275text"](1,"\n          "),F["\u0275\u0275elementStart"](2,"li",16),F["\u0275\u0275text"](3,"\n            "),F["\u0275\u0275elementStart"](4,"a",17),F["\u0275\u0275listener"]("click",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().onNewForm()})),F["\u0275\u0275text"](5,"New Form"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](6,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](7,"\n          "),F["\u0275\u0275elementStart"](8,"li",16),F["\u0275\u0275text"](9,"\n            "),F["\u0275\u0275elementStart"](10,"a",17),F["\u0275\u0275listener"]("click",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().onFileExport()})),F["\u0275\u0275text"](11,"Export to File"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](12,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](13,"\n          "),F["\u0275\u0275elementStart"](14,"li",16),F["\u0275\u0275text"](15,"\n            "),F["\u0275\u0275elementStart"](16,"a",17),F["\u0275\u0275listener"]("click",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().onFileImport()})),F["\u0275\u0275text"](17,"Import from File"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](18,"\n          "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](19,"\n          "),F["\u0275\u0275template"](20,ie,5,0,"li",18),F["\u0275\u0275text"](21,"\n        "),F["\u0275\u0275elementEnd"]()}if(2&e){var r=F["\u0275\u0275nextContext"]();F["\u0275\u0275advance"](20),F["\u0275\u0275property"]("ngIf",r.isFormSelected)}}var le=function(){return{}};function ce(e,t){if(1&e&&F["\u0275\u0275element"](0,"ngx-dynamic-component",19),2&e){var n=F["\u0275\u0275nextContext"]();F["\u0275\u0275property"]("uiModel",n.formInfo.uiModel)("dataModel",F["\u0275\u0275pureFunction0"](4,le))("interpreter",n.interpreter)("scripts",n.scripts)}}function se(e,t){if(1&e){var n=F["\u0275\u0275getCurrentView"]();F["\u0275\u0275elementStart"](0,"ngx-designer-component",20),F["\u0275\u0275listener"]("scriptUpdate",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().onScriptUpdate(e)}))("uiModelUpdated",(function(e){return F["\u0275\u0275restoreView"](n),F["\u0275\u0275nextContext"]().onUIModelUpdate(e)})),F["\u0275\u0275text"](1,"\n    "),F["\u0275\u0275elementEnd"]()}if(2&e){var r=F["\u0275\u0275nextContext"]();F["\u0275\u0275property"]("interpreter",r.interpreter)("scripts",r.scripts)("uiModel",r.formInfo.uiModel)}}function de(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div",21),F["\u0275\u0275text"](1,"\n  "),F["\u0275\u0275elementStart"](2,"div",22),F["\u0275\u0275text"](3,"\n    "),F["\u0275\u0275elementStart"](4,"span",23),F["\u0275\u0275text"](5,"Loading..."),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](6,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](7,"\n"),F["\u0275\u0275elementEnd"]())}var me=function(){function e(e,t,n,r,o,i,a){this.fileManager=e,this.dataService=t,this.router=n,this.authService=r,this.loginService=o,this.notification=i,this.localSettings=a,this.designerMode=!0,this.isAuthenticated=!1,this.scripts="",this.defaultFormInfo={formId:0,formName:"newForm",title:"New From",folder:"forms-folder",description:"",ownerName:null,uiModel:m.c.uiModel,workflowsMap:m.c.workflowsMap,tags:[],attributes:{},isPublic:!1,scripts:""}}return e.prototype.ngOnInit=function(){var e=this;this.interpreter=Object(oe.a)(),this.formInfo=Object(g.a)({},this.defaultFormInfo),this.loading$=this.dataService.isLoading$,this.authService.isAuthenticated$.subscribe((function(t){e.isAuthenticated=t,e.defaultFormInfo.ownerName=t?e.authService.user.userName:null,e.formInfo.ownerName=e.defaultFormInfo.ownerName,e.formInfo.workflowsMap._var_import_overrides.ownerName=e.formInfo.ownerName})),this.dataService.selectedForm$.pipe(Object(S.a)((function(t){return e.isFormSelected=Boolean(t),t?e.dataService.getForm(t).pipe(Object(E.a)((function(t){return e.notification.open({type:O.f.DANGER,message:t.message}),e.router.navigate(["/forms/builder"]),Object(ne.a)(Object(g.a)({},e.defaultFormInfo))}))):Object(ne.a)(Object(g.a)({},e.defaultFormInfo))}))).subscribe((function(t){e.scripts=t.scripts||"",e.renderForm(t)})),this.loading$.subscribe((function(){e.localSettings.setEditorsTheme()}))},e.prototype.onUIModelUpdate=function(e){this.formInfo.uiModel=e},e.prototype.onScriptUpdate=function(e){this.formInfo.scripts=e},e.prototype.onFileExport=function(){this.fileManager.exportToFile(this.formInfo,{fileName:"rc-"+this.formInfo.formName})},e.prototype.onFileImport=function(){var e=this;this.fileManager.importFromFile().subscribe((function(t){e.renderForm(t.result)}))},e.prototype.onDeleteForm=function(){var e=this;this.dataService.deleteForm(this.formInfo.formId).pipe(Object(S.a)((function(){var t=e.getObjectProperties();return e.dataService.deleteObject(t.sqlConnectionUrl,t.ownerName,t.tableName)})),Object(E.a)((function(t){return e.notification.open({type:O.f.DANGER,message:t.error||t.message}),Object(ne.a)(t)}))).subscribe((function(t){e.onNewForm()}))},e.prototype.toggleMode=function(){this.designerMode=!this.designerMode},e.prototype.getObjectProperties=function(){var e=re.a.resolve(this.formInfo.workflowsMap._var,this.formInfo.workflowsMap._var_import_overrides);return{tableName:e.tableName,ownerName:e.ownerName,sqlConnectionUrl:e.sql_api_url}},Object.defineProperty(e.prototype,"modeTitle",{get:function(){return this.designerMode?"Preview":"Designer"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPreviewDisabled",{get:function(){return this.designerMode&&!this.formInfo},enumerable:!0,configurable:!0}),e.prototype.openConfig=function(){var e=this;this.isAuthenticated?this.dataService.saveFormDialog(this.formInfo).subscribe((function(t){return Object(g.b)(e,void 0,void 0,(function(){return Object(g.e)(this,(function(e){switch(e.label){case 0:return this.scripts=t.scripts,[4,this.interpreter.evaluate(this.scripts,null,"design_time")];case 1:return e.sent(),this.renderForm(t),this.router.navigate(["/forms/builder",t.ownerName,t.formName]),[2]}}))}))})):this.loginService.openDialog()},e.prototype.onNewForm=function(){this.router.navigate(["/forms/builder"])},e.prototype.renderForm=function(e){var t=this;this.toggleMode(),this.formInfo.uiModel=null,setTimeout((function(){t.formInfo=e,t.toggleMode()}))},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275directiveInject"](f.d),F["\u0275\u0275directiveInject"](G),F["\u0275\u0275directiveInject"](u.f),F["\u0275\u0275directiveInject"](z.a),F["\u0275\u0275directiveInject"](z.b),F["\u0275\u0275directiveInject"](f.g),F["\u0275\u0275directiveInject"](f.f))},e.\u0275cmp=F["\u0275\u0275defineComponent"]({type:e,selectors:[["app-forms-builder"]],decls:39,vars:8,consts:[[1,"card","overflow-hidden","mb-0","w-100","h-100"],[1,"card-header","p-2","d-flex","align-items-center"],[1,"mb-0","ml-2"],[1,"ml-auto"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],[1,"fa","fa-save"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["dropdown","","placement","bottom left","container","body",1,"position-relative","px-2"],["dropdownToggle","","type","button",1,"btn"],[1,"fa","fa-ellipsis-v"],["class","dropdown-menu left-bottom-menu","role","menu",4,"dropdownMenu"],[1,"card-body","p-2","flex-fill","overflow-auto"],["class","w-100 h-100 d-block",3,"uiModel","dataModel","interpreter","scripts",4,"ngIf"],["class","d-flex flex-fill h-100",3,"interpreter","scripts","uiModel","scriptUpdate","uiModelUpdated",4,"ngIf"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner",4,"ngIf"],["role","menu",1,"dropdown-menu","left-bottom-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],["role","menuitem",4,"ngIf"],[1,"w-100","h-100","d-block",3,"uiModel","dataModel","interpreter","scripts"],[1,"d-flex","flex-fill","h-100",3,"interpreter","scripts","uiModel","scriptUpdate","uiModelUpdated"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div",0),F["\u0275\u0275text"](1,"\n  "),F["\u0275\u0275elementStart"](2,"div",1),F["\u0275\u0275text"](3,"\n    "),F["\u0275\u0275elementStart"](4,"h5",2),F["\u0275\u0275text"](5),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](6,"\n    "),F["\u0275\u0275elementStart"](7,"div",3),F["\u0275\u0275text"](8,"\n      "),F["\u0275\u0275elementStart"](9,"button",4),F["\u0275\u0275listener"]("click",(function(e){return t.openConfig()})),F["\u0275\u0275element"](10,"i",5),F["\u0275\u0275text"](11,"\xa0Save"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](12,"\n      "),F["\u0275\u0275elementStart"](13,"button",6),F["\u0275\u0275listener"]("click",(function(e){return t.toggleMode()})),F["\u0275\u0275text"](14),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](15,"\n      "),F["\u0275\u0275elementStart"](16,"span",7),F["\u0275\u0275text"](17,"\n        "),F["\u0275\u0275elementStart"](18,"button",8),F["\u0275\u0275text"](19,"\n          "),F["\u0275\u0275element"](20,"i",9),F["\u0275\u0275text"](21,"\n        "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](22,"\n        "),F["\u0275\u0275template"](23,ae,22,1,"ul",10),F["\u0275\u0275text"](24,"\n      "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](25,"\n    "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](26,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](27,"\n  "),F["\u0275\u0275elementStart"](28,"div",11),F["\u0275\u0275text"](29,"\n    "),F["\u0275\u0275template"](30,ce,1,5,"ngx-dynamic-component",12),F["\u0275\u0275text"](31,"\n    "),F["\u0275\u0275template"](32,se,2,3,"ngx-designer-component",13),F["\u0275\u0275text"](33,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](34,"\n"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](35,"\n\n"),F["\u0275\u0275template"](36,de,8,0,"div",14),F["\u0275\u0275pipe"](37,"async"),F["\u0275\u0275text"](38,"\n")),2&e&&(F["\u0275\u0275advance"](5),F["\u0275\u0275textInterpolate"](t.formInfo.title),F["\u0275\u0275advance"](8),F["\u0275\u0275property"]("disabled",t.isPreviewDisabled),F["\u0275\u0275advance"](1),F["\u0275\u0275textInterpolate"](t.modeTitle),F["\u0275\u0275advance"](16),F["\u0275\u0275property"]("ngIf",!t.designerMode&&t.formInfo.uiModel),F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",t.designerMode),F["\u0275\u0275advance"](4),F["\u0275\u0275property"]("ngIf",F["\u0275\u0275pipeBind1"](37,6,t.loading$)))},directives:[a.a,a.d,a.b,r.NgIf,l.m,l.h],pipes:[r.AsyncPipe],styles:["ngx-designer-component[_ngcontent-%COMP%]     #empty-container, ngx-designer-component[_ngcontent-%COMP%]     ngx-dynamic-component, ngx-dynamic-component[_ngcontent-%COMP%]{background:var(--bg)}.toolbar.btn-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:initial;flex:initial}[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}.spinner[_ngcontent-%COMP%]{z-index:11}"]}),e}(),fe=function(){function e(e,t,n){this.router=e,this.titleService=t,this.dataService=n,this.layoutConfig={icon:"assets/img/je-logo-64x64.png",smIcon:"assets/img/je-logo-36x36.png",appName:"forms-builder",collapsed:!0},this.destroy=new p.a}return e.prototype.ngOnInit=function(){var e=this;this.titleService.setTitle("Worksheets Forms builder"),this.handleRouterState(this.router.routerState.root.firstChild),this.router.events.pipe(Object(v.a)(this.destroy),Object(x.a)((function(e){return e instanceof u.c}))).subscribe((function(t){e.router.routerState.snapshot.url.startsWith("/forms/builder")&&e.handleRouterState(e.router.routerState.root.firstChild)}))},e.prototype.handleRouterState=function(e){for(var t;e;)t=e.snapshot.params,e=e.firstChild;this.dataService.selectForm(t)},e.prototype.ngOnDestroy=function(){this.destroy.next(),this.destroy.complete()},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275directiveInject"](u.f),F["\u0275\u0275directiveInject"](Q.d),F["\u0275\u0275directiveInject"](G))},e.\u0275cmp=F["\u0275\u0275defineComponent"]({type:e,selectors:[["app-forms-builder-layout"]],decls:15,vars:1,consts:[[3,"config"],["title","",1,"mb-0","ml-0","top-sub-header","w-md-down-50"],["header","",1,"ml-auto","d-flex"],["sidebar","",1,"h-100","w-100","py-2"],["content",""]],template:function(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"app-layout",0),F["\u0275\u0275text"](1,"\n  "),F["\u0275\u0275elementStart"](2,"h2",1),F["\u0275\u0275text"](3,"WORKSHEET "),F["\u0275\u0275elementStart"](4,"span"),F["\u0275\u0275text"](5,"SYSTEMS"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](6," - Forms Builder"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](7,"\n  "),F["\u0275\u0275element"](8,"div",2),F["\u0275\u0275text"](9,"\n  "),F["\u0275\u0275element"](10,"app-saved-forms",3),F["\u0275\u0275text"](11,"\n  "),F["\u0275\u0275element"](12,"app-forms-builder",4),F["\u0275\u0275text"](13,"\n"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](14,"\n")),2&e&&F["\u0275\u0275property"]("config",t.layoutConfig)},directives:[J.a,te,me],encapsulation:2}),e}(),ue=function(){function e(e,t,n,r){this.route=e,this.dataService=t,this.router=n,this.authService=r,this.workflowConfig={failOnError:!0,include:["@common"],vars:{},workflowsMap:{},consts:{},variableResolver:re.a}}return e.prototype.ngOnInit=function(){var e=this;this.route.params.pipe(Object(S.a)((function(t){return e.dataService.getForm(t)})),Object(S.a)((function(t){return t.formId=0,t.ownerName=e.authService.user.userName,t.workflowsMap._var_import_overrides.objectOwner=t.ownerName,e.dataService.saveFormDialog(t)}))).subscribe((function(t){return Object(g.b)(e,void 0,void 0,(function(){return Object(g.e)(this,(function(e){switch(e.label){case 0:return this.workflowConfig.workflowsMap=t.workflowsMap,this.workflowConfig.vars.uiModel=t.uiModel,[4,new l.q(this.workflowConfig).run("design_time")];case 1:return e.sent(),this.router.navigate(["/forms/builder",t.ownerName,t.formName]),[2]}}))}))}),(function(){}))},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275directiveInject"](u.a),F["\u0275\u0275directiveInject"](G),F["\u0275\u0275directiveInject"](u.f),F["\u0275\u0275directiveInject"](M.b))},e.\u0275cmp=F["\u0275\u0275defineComponent"]({type:e,selectors:[["app-import-layout"]],decls:1,vars:0,template:function(e,t){1&e&&F["\u0275\u0275text"](0,"\n")},styles:[""]}),e}(),pe=function(){return{}};function ve(e,t){if(1&e&&F["\u0275\u0275element"](0,"ngx-dynamic-component",3),2&e){var n=F["\u0275\u0275nextContext"]();F["\u0275\u0275property"]("uiModel",n.formInfo.uiModel)("dataModel",F["\u0275\u0275pureFunction0"](4,pe))("interpreter",n.interpreter)("scripts",n.scripts)}}function xe(e,t){1&e&&(F["\u0275\u0275elementStart"](0,"div",4),F["\u0275\u0275text"](1,"\n  "),F["\u0275\u0275elementStart"](2,"div",5),F["\u0275\u0275text"](3,"\n    "),F["\u0275\u0275elementStart"](4,"span",6),F["\u0275\u0275text"](5,"Loading..."),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](6,"\n  "),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](7,"\n"),F["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(F["\u0275\u0275elementStart"](0,"div",7),F["\u0275\u0275text"](1,"\n  "),F["\u0275\u0275elementStart"](2,"h4",8),F["\u0275\u0275text"](3,"Form "),F["\u0275\u0275elementStart"](4,"i",9),F["\u0275\u0275text"](5),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](6," not found"),F["\u0275\u0275elementEnd"](),F["\u0275\u0275text"](7,"\n"),F["\u0275\u0275elementEnd"]()),2&e){var n=F["\u0275\u0275nextContext"]();F["\u0275\u0275advance"](5),F["\u0275\u0275textInterpolate"](n.formParams)}}var he=[{path:"builder",component:fe,children:[{path:":ownerName/:formName"}]},{path:":ownerName/:formName",component:function(){function e(e,t){this.dataService=e,this.route=t}return e.prototype.ngOnInit=function(){var e=this;this.interpreter=Object(oe.a)(),this.loading$=this.dataService.isLoading$,this.route.params.pipe(Object(I.a)((function(t){return e.formOwner=t})),Object(S.a)((function(t){return e.dataService.getForm(t)}))).subscribe((function(t){e.hasForm=Boolean(t),e.hasForm?(e.scripts=t.scripts,e.formInfo=t):e.formInfo=null}))},Object.defineProperty(e.prototype,"formParams",{get:function(){return this.formOwner?this.formOwner.ownerName+"/"+this.formOwner.formName:""},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275directiveInject"](G),F["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=F["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-preview"]],decls:7,vars:5,consts:[["class","w-100 h-100",3,"uiModel","dataModel","interpreter","scripts",4,"ngIf"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner",4,"ngIf"],["class","d-flex h-100 w-100 justify-content-center align-items-center",4,"ngIf"],[1,"w-100","h-100",3,"uiModel","dataModel","interpreter","scripts"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"d-flex","h-100","w-100","justify-content-center","align-items-center"],[1,"text-center"],[1,"lead"]],template:function(e,t){1&e&&(F["\u0275\u0275template"](0,ve,1,5,"ngx-dynamic-component",0),F["\u0275\u0275text"](1,"\n"),F["\u0275\u0275template"](2,xe,8,0,"div",1),F["\u0275\u0275pipe"](3,"async"),F["\u0275\u0275text"](4,"\n"),F["\u0275\u0275template"](5,ge,8,1,"div",2),F["\u0275\u0275text"](6,"\n")),2&e&&(F["\u0275\u0275property"]("ngIf",t.formInfo&&t.formInfo.uiModel),F["\u0275\u0275advance"](2),F["\u0275\u0275property"]("ngIf",F["\u0275\u0275pipeBind1"](3,3,t.loading$)),F["\u0275\u0275advance"](3),F["\u0275\u0275property"]("ngIf",!1===t.hasForm))},directives:[r.NgIf,l.m],pipes:[r.AsyncPipe],styles:["[_nghost-%COMP%]    >ngx-dynamic-component{display:block}"]}),e}(),canActivate:[function(){function e(e,t,n,r){this.dataService=e,this.loginService=t,this.authService=n,this.notification=r}return e.prototype.canActivate=function(e){var t=this;return this.dataService.getForm(e.params).pipe(Object(E.a)((function(n){return t.authService.user?t.notAvailableForm(n):(t.loginService.openDialog(),t.authService.isAuthenticated$.pipe(Object(x.a)((function(e){return e})),Object(S.a)((function(){return t.dataService.getForm(e.params).pipe(Object(E.a)((function(e){return t.notAvailableForm(e)})))}))))})),Object(j.a)((function(){return!0})))},e.prototype.notAvailableForm=function(e){return this.notification.open({type:O.f.DANGER,message:e.message+". Used account "+this.authService.user.userName+"."}),Object(ne.a)(!1)},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275inject"](G),F["\u0275\u0275inject"](z.b),F["\u0275\u0275inject"](z.a),F["\u0275\u0275inject"](f.g))},e.\u0275prov=F["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()]},{path:"import/:ownerName/:formName",component:ue,canActivate:[function(){function e(e,t,n){this.authService=e,this.router=t,this.loginService=n}return e.prototype.canActivate=function(e){var t=this;return this.authService.getCurrentUser().pipe(Object(S.a)((function(e){return"Public"===e.userName?Object(b.a)("Authorized as public"):Object(ne.a)(!0)})),Object(E.a)((function(){return t.login()})))},e.prototype.login=function(){var e=this;return this.loginService.openDialog(),this.authService.isAuthenticated$.pipe(Object(x.a)((function(t){return t&&"Public"!==e.authService.user.userName})),Object(j.a)((function(){return!0})))},e.\u0275fac=function(t){return new(t||e)(F["\u0275\u0275inject"](z.a),F["\u0275\u0275inject"](u.f),F["\u0275\u0275inject"](z.b))},e.\u0275prov=F["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()]}],be=function(){function e(){}return e.\u0275mod=F["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=F["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[f.c,G],imports:[[u.i.forChild(he)],u.i]}),e}();Object(oe.b)("validateModel",(function(e,t){var n=!0,r=l.j.find(e,"$(children)/itemProperties").filter((function(e){return e.required}));return r.length&&r.forEach((function(e){var r=l.j.find(t,e.dataModelPath);n=![void 0,null,""].includes(r)})),n})),n.d(t,"FormsBuilderModule",(function(){return we}));var we=function(){function e(e){this.actions=e}return e.\u0275mod=F["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=F["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)(F["\u0275\u0275inject"](f.a))},providers:[f.c,G],imports:[[r.CommonModule,be,l.e,c.a,s.a,d.a,m.e,i.b.forRoot(),a.c.forRoot(),o.FormsModule]]}),e}()}}]);
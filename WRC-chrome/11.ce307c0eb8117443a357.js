(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{aaoH:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),u=function(){return function(){}}(),i=e("iutN"),o=e("z5nN"),r=e("MdoF"),a=e("ES0t"),d=e("pMnS"),s=e("AZbF"),c=e("YpoR"),p=e("NcP4"),f=e("6X9N"),m=e("TkW6"),g=e("T62W"),h=e("p11H"),b=e("iYox"),v=e("einG"),C=e("1tPP"),y=e("OJvS"),w=e("uQ7l"),j=e("Xn/w"),O=e("5Ccn"),R=e("rXEo"),S=e("Ip0R"),T=e("xtZt"),_=e("lqqz"),N=e("mrSG"),E=e("yGQT"),x=e("ZYCi"),D=e("/PH2"),I="@ngrx/router-store/navigation",A="@ngrx/router-store/cancel",F="@ngrx/router-store/error";function L(l,n){var e=n;switch(e.type){case I:case F:case A:return{state:e.payload.routerState,navigationId:e.payload.event.id};default:return l}}var V=function(){return function(){}}(),M=function(){function l(){}return l.prototype.serialize=function(l){return{root:this.serializeRoute(l.root),url:l.url}},l.prototype.serializeRoute=function(l){var n=this,e=l.children.map((function(l){return n.serializeRoute(l)}));return{params:l.params,paramMap:l.paramMap,data:l.data,url:l.url,outlet:l.outlet,routeConfig:l.routeConfig?{component:l.routeConfig.component,path:l.routeConfig.path,pathMatch:l.routeConfig.pathMatch,redirectTo:l.routeConfig.redirectTo,outlet:l.routeConfig.outlet}:null,queryParams:l.queryParams,queryParamMap:l.queryParamMap,fragment:l.fragment,component:l.routeConfig?l.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:e[0],pathFromRoot:void 0,children:e}},l}(),k=function(){function l(){}return l.prototype.serialize=function(l){return{root:this.serializeRoute(l.root),url:l.url}},l.prototype.serializeRoute=function(l){var n=this,e=l.children.map((function(l){return n.serializeRoute(l)}));return{params:l.params,data:l.data,url:l.url,outlet:l.outlet,routeConfig:l.routeConfig?{path:l.routeConfig.path,pathMatch:l.routeConfig.pathMatch,redirectTo:l.routeConfig.redirectTo,outlet:l.routeConfig.outlet}:null,queryParams:l.queryParams,fragment:l.fragment,firstChild:e[0],children:e}},l}(),q=function(l){return l[l.PreActivation=1]="PreActivation",l[l.PostActivation=2]="PostActivation",l}({}),W=new t.InjectionToken("@ngrx/router-store Internal Configuration"),$=new t.InjectionToken("@ngrx/router-store Configuration"),P="router";function G(l){return Object(N.__assign)({stateKey:P,serializer:M,navigationActionTiming:q.PreActivation},l)}var U,B,z,H=function(l){return l[l.NONE=1]="NONE",l[l.ROUTER=2]="ROUTER",l[l.STORE=3]="STORE",l}({}),Q=function(){function l(l,n,e,t,u){this.store=l,this.router=n,this.serializer=e,this.errorHandler=t,this.config=u,this.lastEvent=null,this.trigger=H.NONE,this.stateKey=this.config.stateKey,this.setUpStoreStateListener(),this.setUpRouterEventsListener()}var n;return n=l,l.forRoot=function(l){return void 0===l&&(l={}),{ngModule:n,providers:[{provide:W,useValue:l},{provide:$,useFactory:G,deps:[W]},{provide:V,useClass:l.serializer?l.serializer:1===l.routerState?k:M}]}},l.prototype.setUpStoreStateListener=function(){var l=this;this.store.pipe(Object(E.x)(this.stateKey),Object(D.a)(this.store)).subscribe((function(n){var e=Object(N.__read)(n,2);l.navigateIfNeeded(e[0],e[1])}))},l.prototype.navigateIfNeeded=function(l,n){var e=this;if(l&&l.state&&this.trigger!==H.ROUTER&&!(this.lastEvent instanceof x.g)){var t=l.state.url;this.router.url!==t&&(this.storeState=n,this.trigger=H.STORE,this.router.navigateByUrl(t).catch((function(l){e.errorHandler.handleError(l)})))}},l.prototype.setUpRouterEventsListener=function(){var l,n=this,e=this.config.navigationActionTiming===q.PostActivation;this.router.events.pipe(Object(D.a)(this.store)).subscribe((function(t){var u=Object(N.__read)(t,2),i=u[0],o=u[1];n.lastEvent=i,i instanceof x.g?(n.routerState=n.serializer.serialize(n.router.routerState.snapshot),n.trigger!==H.STORE&&(n.storeState=o,n.dispatchRouterRequest(i))):i instanceof x.v?(l=i,e||n.trigger===H.STORE||n.dispatchRouterNavigation(i)):i instanceof x.d?(n.dispatchRouterCancel(i),n.reset()):i instanceof x.f?(n.dispatchRouterError(i),n.reset()):i instanceof x.e&&(n.trigger!==H.STORE&&(e&&n.dispatchRouterNavigation(l),n.dispatchRouterNavigated(i)),n.reset())}))},l.prototype.dispatchRouterRequest=function(l){this.dispatchRouterAction("@ngrx/router-store/request",{event:l})},l.prototype.dispatchRouterNavigation=function(l){var n=this.serializer.serialize(l.state);this.dispatchRouterAction(I,{routerState:n,event:new x.v(l.id,l.url,l.urlAfterRedirects,n)})},l.prototype.dispatchRouterCancel=function(l){this.dispatchRouterAction(A,{storeState:this.storeState,event:l})},l.prototype.dispatchRouterError=function(l){this.dispatchRouterAction(F,{storeState:this.storeState,event:new x.f(l.id,l.url,""+l)})},l.prototype.dispatchRouterNavigated=function(l){var n=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction("@ngrx/router-store/navigated",{event:l,routerState:n})},l.prototype.dispatchRouterAction=function(l,n){this.trigger=H.ROUTER;try{this.store.dispatch({type:l,payload:Object(N.__assign)({routerState:this.routerState},n,{event:1===this.config.routerState?{id:n.event.id,url:n.event.url}:n.event})})}finally{this.trigger=H.NONE}},l.prototype.reset=function(){this.trigger=H.NONE,this.storeState=null,this.routerState=null},l}(),K=e("M0ag"),J=e("zSvW"),Z=Object(E.u)("sqlObject"),X=Object(E.w)(Z,(function(l){return l.structure})),Y=Object(E.w)(Z,(function(l){return l.data})),ll=Object(E.w)(Z,(function(l){return l.currentState.fields})),nl=Object(E.w)(Z,(function(l){return!Object(K.d)(l.structure,l.currentState)})),el=Object(E.w)(Z,(function(l){return l.currentState})),tl=Object(E.w)(Z,(function(l){return l.loading})),ul=Object(E.w)(Z,(function(l){var n=l.changedData;return Boolean(n&&n.length)})),il=Object(E.w)(tl,(function(l){return l.length?{messages:l.map((function(l){return J.a[l]}))}:null})),ol=Object(E.w)(Z,(function(l){return l.rowsCount})),rl=Object(E.w)(Z,(function(l){return l.filters.limitRowsCount})),al=function(l){return l.dbConnections},dl=Object(E.w)((function(l){return l.sqlObjects}),(function(l){return l.list})),sl=Object(E.w)(al,(function(l){return l.list})),cl=Object(E.w)(al,(function(l){return l.current})),pl=Object(E.u)("router"),fl=(U=pl,B=Object(E.w)(U,(function(l){return l&&l.state})),z=Object(E.w)(B,(function(l){if(l){for(var n=l.root;n.firstChild;)n=n.firstChild;return n}})),Object(E.w)(z,(function(l){return l&&l.queryParams})),Object(E.w)(z,(function(l){return l&&l.params})),Object(E.w)(z,(function(l){return l&&l.data})),Object(E.w)(B,(function(l){return l&&l.url}))),ml=Object(E.w)(pl,(function(l,n){if(void 0===n&&(n=null),!l.state)return{};for(var e=l.state.root,t=N.__assign({},e.params);e.firstChild;)t=N.__assign({},t,(e=e.firstChild).params);return n?Object.entries(t).reduce((function(l,e){var t=e[0],u=e[1];return n.includes(t)&&(l[t]=u),l}),{}):t})),gl=Object(E.w)(ml,(function(l,n){return l[n]})),hl=function(){function l(l,n){this.router=l,this.store=n}return l.prototype.ngOnInit=function(){this.connections$=this.store.select(sl),this.selectedConnection$=this.store.select(gl,"connectionName")},l.prototype.onConnectionSelect=function(l){this.router.navigate(["/database",l])},l}(),bl=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function vl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onConnectionSelect(l.context.$implicit.connectorName)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.connectorName)}))}function Cl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"ul",[["aria-labelledby","connections-btn-group"],["class","dropdown-menu dropdown-menu-right"],["id","dropdown-menu-connections"],["role","menu"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,vl)),t["\u0275did"](2,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(e.connections$)))}),null)}function yl(l){return t["\u0275vid"](2,[(l()(),t["\u0275eld"](0,16777216,null,null,9,"div",[["class","btn-group align-self-center"],["dropdown",""],["placement","bottom right"]],[[2,"dropup",null],[2,"open",null],[2,"show",null]],null,null,null,null)),t["\u0275prd"](512,null,T.f,T.f,[]),t["\u0275did"](2,212992,null,0,T.c,[t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,T.a,T.f],{placement:[0,"placement"]},null),(l()(),t["\u0275eld"](3,0,null,null,4,"button",[["aria-controls","dropdown-menu-connections"],["class","btn btn-light dropdown-toggle btn-sm m-0"],["dropdownToggle",""],["id","connections-btn-group"],["role","button"],["tabindex","0"],["title","Select connection"],["type","button"]],[[1,"aria-haspopup",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,4).onClick()&&u),u}),null,null)),t["\u0275did"](4,147456,null,0,T.g,[t.ChangeDetectorRef,T.c,t.ElementRef,t.Renderer2,T.f],null,null),(l()(),t["\u0275ted"](5,null,[" "," "])),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](7,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Cl)),t["\u0275did"](9,16384,null,0,T.d,[T.f,t.ViewContainerRef,t.TemplateRef],null,null)],(function(l,n){l(n,2,0,"bottom right")}),(function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,2).dropup,t["\u0275nov"](n,2).isOpen,t["\u0275nov"](n,2).isOpen&&t["\u0275nov"](n,2).isBs4),l(n,3,0,!0,t["\u0275nov"](n,4).isDisabled,t["\u0275nov"](n,4).isOpen),l(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform(e.selectedConnection$)))}))}var wl=e("hUWP"),jl=e("OzfB"),Ol=e("FTf1"),Rl=e("fQZA"),Sl=function(l){return l.LOAD_SQL_OBJECTS="[DB Manager] load sql objects",l.LOADED_SQL_OBJECTS="[DB Manager] loaded sql objects",l.SELECT_CONNECTION="[DB Manager] select connection",l.LOADED_CONNECTIONS="[DB Manager] loaded connections",l}({}),Tl=function(){return function(l){this.payload=l,this.type=Sl.LOAD_SQL_OBJECTS}}(),_l=function(){return function(l){this.payload=l,this.type=Sl.LOADED_SQL_OBJECTS}}(),Nl=function(){return function(l){this.payload=l,this.type=Sl.SELECT_CONNECTION}}(),El=function(){return function(l){this.payload=l,this.type=Sl.LOADED_CONNECTIONS}}(),xl=e("K9Ia"),Dl=e("ny24"),Il=e("VnD/"),Al=function(l){return l.LOAD_SQL_OBJECT_DATA="[DB Manager] load sql object data",l.LOADED_SQL_OBJECT_DATA="[DB Manager] loaded sql object data",l.LOAD_SQL_OBJECT_STRUCTURE="[DB Manager] load sql object structure",l.LOADED_SQL_OBJECT_STRUCTURE="[DB Manager] loaded sql object structure",l.SAVE_SQL_OBJECT_STRUCTURE="[DB Manager] save sql object structure",l.SAVED_SQL_OBJECT_STRUCTURE="[DB Manager] saved sql object structure",l.SAVE_SQL_OBJECT_DATA="[DB Manager] save sql object data",l.UPDATE_SQL_OBJECT_DATA="[DB Manager] update sql object data",l.DELETE_SQL_OBJECT="[DB Manager] delete sql object",l.UPDATE_SQL_OBJECT="[DB Manager] update state of sql object",l.REFRESH_SQL_OBJECT="[DB Manager] refresh sql object",l.LOAD_STATE_SQL_OBJECT="[DB Manager] load state",l.SET_SQL_DATA_FILTERS="[DB Manager] set sql data filters",l.SET_SQL_DATA_ROWS_COUNT="[DB Manager] set sql data rows count",l.SET_SQL_DATA_FILTER_PROP="[DB Manager] set sql data filter property",l}({}),Fl=function(){return function(l){this.payload=l,this.type=Al.LOAD_SQL_OBJECT_DATA}}(),Ll=function(){return function(l){this.payload=l,this.type=Al.LOADED_SQL_OBJECT_DATA}}(),Vl=function(){return function(l){this.payload=l,this.type=Al.LOAD_SQL_OBJECT_STRUCTURE}}(),Ml=function(){return function(l){this.payload=l,this.type=Al.LOADED_SQL_OBJECT_STRUCTURE}}(),kl=function(){return function(l){this.payload=l,this.type=Al.SAVE_SQL_OBJECT_STRUCTURE}}(),ql=function(){return function(){this.type=Al.SAVE_SQL_OBJECT_DATA}}(),Wl=function(){return function(l){this.payload=l,this.type=Al.UPDATE_SQL_OBJECT_DATA}}(),$l=function(){return function(l){this.payload=l,this.type=Al.DELETE_SQL_OBJECT}}(),Pl=function(){return function(l){this.payload=l,this.type=Al.UPDATE_SQL_OBJECT}}(),Gl=function(){return function(){this.type=Al.SAVED_SQL_OBJECT_STRUCTURE}}(),Ul=function(){return function(){this.type=Al.REFRESH_SQL_OBJECT}}(),Bl=function(){return function(){this.type=Al.LOAD_STATE_SQL_OBJECT}}(),zl=function(){return function(l){this.payload=l,this.type=Al.SET_SQL_DATA_FILTERS}}(),Hl=function(){return function(l){this.payload=l,this.type=Al.SET_SQL_DATA_ROWS_COUNT}}(),Ql=function(){return function(l){this.payload=l,this.type=Al.SET_SQL_DATA_FILTER_PROP}}(),Kl=(e("ZF+8"),e("Jc0W"),e("TwVa")),Jl=(e("OLrf"),function(l){return l.map((function(l){return"object"!=typeof l?{fieldName:l}:l})).filter((function(l){return l.fieldName}))});function Zl(l){return Jl(l).map((function(l){return{fieldName:l.fieldName,dataType:l.dataType||Kl.d.NVARCHAR,size:Yl(l),isNullable:l.isNullable||!0}}))}function Xl(l){return l.filter((function(l){return l.isKey})).map((function(l){return{fieldName:l.fieldName}}))}function Yl(l){return l.dataType!==Kl.d.NVARCHAR&&l.dataType||l.size?l.size:Kl.e[Kl.d.NVARCHAR]}function ln(l){return l.replace(/&|\+|\)|\(|\/|@|\:|;|\?|\!|\*|\-/g,"").replace(/\s/g,"_")}function nn(l){void 0===l&&(l="");var n=l.match(/\/database\/[\w-]+\/([\w-]+)\/*/);return n&&"view"===n[1].toLowerCase()?J.c.View:J.c.Table}var en=(e("kiQV"),e("9Z1F")),tn=e("15JJ"),un=e("26FU"),on=e("F/XL"),rn=e("XlPw"),an=e("Xyxl"),dn=function(){function l(){}return l.prototype.ngOnInit=function(){this.data=Object(K.n)({rows:this.config.data,fieldNames:this.config.fields.map((function(l){return l.fieldName}))})},l.prototype.getColumnType=function(l){return Kl.f[l]},l}(),sn=e("wd/R"),cn=function(){function l(){}return l.prototype.run=function(l,n){var e=this,t=l[0].reduce((function(l,n,e){return l[ln(n)]=e,l}),{});return l.map((function(l,u){return 0===u?l:n.map((function(i,o){var r=null;i.sourceField&&"number"==typeof t[i.sourceField]&&(r=l[t[i.sourceField]],i.dataType!==Kl.d.DATE||r instanceof Date?i.dataType!==Kl.d.INT&&i.dataType!==Kl.d.BIGINT&&i.dataType!==Kl.d.FLOAT||"number"==typeof r||(r=Object(K.q)(r)):r=Object(K.p)(r));var a=n[o],d=a.preprocessFunc;return d&&e[d]?e[d](r,a.preprocessParams,u):r}))})).slice(1)},l.prototype.text=function(l,n){return n},l.prototype.parseNumber=function(l,n){if("number"==typeof l)return l;if("boolean"==typeof l)return+l;if("string"==typeof l){l=l.replace(/,/g,""),n&&n.split("").forEach((function(n){l=l.replace(n,"")}));var e=this.getKoef(l);try{return(l=parseFloat(l))*e}catch(t){return null}}return null},l.prototype.parseBoolean=function(l){var n=l.toString().toLowerCase();return!!["1","yes","true","on"].includes(n)||!["0","no","false","off"].includes(n)&&null},l.prototype.parseDate=function(l,n){if(!l)return null;var e=n?sn(l,n.split(",")):sn(l);return e.isValid()?e.toDate():null},l.prototype.autoid=function(l,n,e){var t=0;try{t=parseInt(n,10),isNaN(t)&&(t=0)}catch(u){}return t+e},l.prototype.getKoef=function(l){return l.includes("k")?1e3:l.includes("m")?1e6:l.includes("b")?1e9:1},l}(),pn=function(l){return l.autoid="int",l.text="nvarchar",l.parseDate="datetime2",l.parseBoolean="bit",l.parseNumber="int",l}({}),fn=new cn,mn=function(l){return l.Create="Creating new table",l.Importing="Importing data",l.Imported="Data successfully imported",l}({}),gn=function(){function l(l,n,e,t,u,i,o){this.fileService=l,this.authService=n,this.sqlService=e,this.store=t,this.notificationService=u,this.router=i,this.dialogService=o,this.dataTypes=Object.values(Kl.d),this.createTable$=new un.a(!0),this.loading=!1,this.preprocessors=J.d}return l.prototype.ngOnInit=function(){var l=this;this.metaData={objectId:0,objectName:null,objectOwner:this.authService.user.userName,objectType:"Table",fields:[]},this.store.select(cl).subscribe((function(n){l.connection=n})),this.tables$=this.store.select(dl),this.createTable$.subscribe((function(n){n?l.createNewTableColumns():l.createSelectedTableColumns()})),this.grid.addEventListener(this.grid.hostElement,"contextmenu",(function(n){var e=l.grid.hitTest(n);l.rowIndex=e.row})),this.grid.cellEditEnded.addHandler((function(n,e){var t=l.grid.rows[e.row].dataItem,u=l.grid.columns[e.col].binding,i=t[u];if(e.panel.cellType===an.CellType.Cell){switch(u){case"dataType":t.size=Kl.e[i]||null;break;case"preprocessFunc":t.dataType=pn[i]||null,t.dataType&&(t.size=Kl.e[t.dataType]||null)}l.grid.refreshCells(!1)}}))},Object.defineProperty(l.prototype,"isValid",{get:function(){return this.metaData.objectOwner&&this.metaData.objectName&&this.metaData.fields.length},enumerable:!0,configurable:!0}),l.prototype.onCtxMenuClicked=function(){this.grid.collectionView.sourceCollection=this.grid.collectionView.items.slice(0,this.rowIndex).concat([{isKey:!1,dataType:Kl.d.NVARCHAR,size:Kl.e[Kl.d.NVARCHAR]}],this.grid.collectionView.items.slice(this.rowIndex))},l.prototype.onTableSelect=function(l){var n=this;this.loading=!0,this.sqlService.getObject(this.sqlConnectionUrl,l.objectOwner,l.objectName).subscribe((function(l){n.selectedTable=l,n.createSelectedTableColumns(),n.loading=!1}))},l.prototype.import=function(){var l=this,n=this.createTable$.value;this.loading=!0,this.progressMessage=n?mn.Create:mn.Importing;var e=this.grid.collectionView.items,t=N.__assign({},n?this.metaData:this.selectedTable,{fields:Zl(e),primaryKeys:Xl(e)});(n?this.sqlService.generateObject(this.sqlConnectionUrl,t):Object(on.a)(null)).pipe(Object(en.a)((function(n){var e=Object(K.k)(n)||"Failed to create new table";return l.notificationService.open({message:e,type:Kl.b.DANGER}),Object(rn.a)(e)})),Object(tn.a)((function(){return l.saveData()}))).subscribe((function(n){return l.importHandler(t,n)}),(function(n){return l.importErrorHandler(n)}))},l.prototype.previewData=function(){this.dialogService.open(dn,{class:"modal-w-90 full-height d-flex flex-column"}).config={data:fn.run(this.data,this.grid.collectionView.items),fields:this.grid.collectionView.items}},Object.defineProperty(l.prototype,"sqlConnectionUrl",{get:function(){return"https://worksheets-web-api-test.azurewebsites.net/api/sql/"+this.connection},enumerable:!0,configurable:!0}),l.prototype.loadCSV=function(){var l=this;this.fileService.importCSVFile().subscribe((function(n){if(l.error=null,n.result){var e=n.result.data;l.metaData.objectName||(l.metaData.objectName=ln(n.file.name.replace(/.txt|-|.csv$/g,""))),l.data=e.filter((function(l){return""!==l.join("")})),l.rowsLoaded=l.data.length;try{l.typesDescriptor=l.getTypes(l.data),l.sourceFields=l.data[0].map((function(l){return ln(l)})),l.metaData.fields=Zl(l.sourceFields),l.createTable$.value?l.createNewTableColumns():l.createSelectedTableColumns()}catch(t){l.data=null,l.sourceFields=null,l.metaData.fields=null,l.error=t.message}finally{l.loading=!1}}else l.loading=!0}))},l.prototype.getSelectedTableTitle=function(){return this.selectedTable?this.selectedTable.objectOwner+"."+this.selectedTable.objectName:"Select table"},l.prototype.importHandler=function(l,n){var e=this;if(n.savedItemsCount===n.itemsToSaveCount)this.notificationService.open({type:Kl.b.SUCCESS,message:"Successfully inserted: "+n.inserted.toLocaleString()+"\n        , updated: "+n.updated.toLocaleString()+"\n        , deleted: "+n.deleted.toLocaleString()}),this.progressMessage=mn.Imported,this.createTable$.value&&this.store.dispatch(new Tl(this.connection)),setTimeout((function(){e.router.navigate(["/database",e.connection,l.objectOwner,l.objectName]),e.modalRef.hide(),e.loading=!1,e.progressMessage=null}),1e3);else{var t=n.savedItemsCount?"So far ":"";n.inserted&&(t+="Inserted: "+n.inserted.toLocaleString()+" "),n.updated&&(t+="Updated: "+n.updated.toLocaleString()+" "),n.deleted&&(t+="Deleted: "+n.deleted.toLocaleString()),this.progressMessage=mn.Importing+" "+n.itemsToSaveCount.toLocaleString()+" rows. "+t}},l.prototype.importErrorHandler=function(l){this.loading=!1,this.progressMessage=null,console.error(l)},l.prototype.createSelectedTableColumns=function(){var l=this;if(this.selectedTable){var n=new Set(this.selectedTable.primaryKeys.map((function(l){return l.fieldName})));this.tableColumns=Jl(this.selectedTable.fields).map((function(e,t){var u=l.sourceFields?l.sourceFields.find((function(l){return l===e.fieldName})):null;return{fieldName:e.fieldName,dataType:e.dataType||Kl.d.NVARCHAR,size:e.size,sourceField:u,isKey:n.has(e.fieldName),preprocessFunc:null,preprocessParams:null}}))}else this.tableColumns=[]},l.prototype.createNewTableColumns=function(){var l=this;this.sourceFields&&(this.tableColumns=Jl(this.sourceFields).map((function(n,e){var t=l.typesDescriptor["col"+e];return{fieldName:n.fieldName,dataType:n.dataType||t.type||Kl.d.NVARCHAR,size:n.size||t.size,sourceField:n.fieldName,isKey:n.isKey||Boolean(t.uniqueValues),preprocessFunc:null,preprocessParams:null}})))},l.prototype.saveData=function(){var l=this;return this.progressMessage=mn.Importing,this.sqlService.saveSqlObjectDataWithStatus(this.sqlConnectionUrl,this.createTable$.value?this.metaData:this.selectedTable,this.sendData).pipe(Object(en.a)((function(n){var e="string"==typeof n.error?n.error:"Failed to Import";return l.notificationService.open({message:e,type:Kl.b.DANGER}),Object(rn.a)(e)})))},Object.defineProperty(l.prototype,"sendData",{get:function(){var l=this.grid.collectionView.items,n=l.map((function(l){return l.fieldName})),e=n.map((function(l,n){return l?n:-1})).filter((function(l){return-1!==l}));return{tableData:{fieldNames:n.filter((function(l){return l})),rows:fn.run(this.data,l).map((function(l){return l.filter((function(l,n){return e.includes(n)}))})).map((function(l){return l.map((function(l){return l instanceof Date?Object(K.e)(l):l}))}))}}},enumerable:!0,configurable:!0}),l.prototype.getTypes=function(l){for(var n=this,e=l[0].reduce((function(l,n,e){return l["col"+e]={fieldName:n,index:e,type:null,size:null,uniqueValues:new Set},l}),{}),t=1;t<l.length;t++)l[t].forEach((function(l,t){e["col"+t]=n.getType(e["col"+t],l)}));var u=!1;return Object.values(e).forEach((function(l){l.uniqueValues=l.uniqueValues&&!u,l.uniqueValues&&(u=!0)})),e},l.prototype.getType=function(l,n){if(l.uniqueValues&&l.uniqueValues.has(n)?l.uniqueValues=!1:l.uniqueValues&&l.uniqueValues.add(n),!n||!String(n).length)return l;var e=function(n){return null===l.type||l.type===Kl.d.INT?l.type=Number.isInteger(n)?n>2147483647?Kl.d.BIGINT:Kl.d.INT:Kl.d.FLOAT:null!==l.type&&l.type!==Kl.d.BIGINT||!Number.isInteger(n)?null!==l.type&&l.type!==Kl.d.FLOAT||(l.type=Kl.d.FLOAT):l.type=Kl.d.BIGINT,l};switch(typeof n){case"number":return e(n);case"string":if((null===l.type||l.type===Kl.d.DATE)&&Object(K.p)(n))return l.type=Kl.d.DATE,l;if(null===l.type||l.type===Kl.d.FLOAT||l.type===Kl.d.INT||l.type===Kl.d.BIGINT){var t=Object(K.q)(n);if(null!==t)return e(t)}l.type=Kl.d.NVARCHAR;var u=100*Math.ceil(n.length/100)||100;return(null===l.size||l.size<u)&&(l.size=u),l}return l},l}(),hn=function(){function l(l,n){this.store=l,this.dialogService=n,this.destroy$=new xl.a}return l.prototype.ngOnInit=function(){var l=this;this.list$=this.store.select(dl).pipe(Object(Dl.a)(this.destroy$)),this.store.select(gl,"connectionName").pipe(Object(Il.a)((function(l){return Boolean(l)})),Object(Dl.a)(this.destroy$)).subscribe((function(n){l.connectionName=n,l.store.dispatch(new Tl(l.connectionName))})),this.store.select(X).pipe(Object(Dl.a)(this.destroy$)).subscribe((function(n){l.listView.selectItem(n)}))},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l.prototype.onSelect=function(l){var n=this.listView.selectedItem;if(n){var e=n.objectOwner;n.objectName===l.objectName&&e==e||this.store.dispatch(new Bl)}else this.store.dispatch(new Bl)},l.prototype.areObjectsEqual=function(l,n){return l&&n&&l.objectName===n.objectName&&l.objectOwner===n.objectOwner},l.prototype.refresh=function(){this.store.dispatch(new Ul)},l.prototype.import=function(){this.dialogService.open(gn,{class:"modal-xl full-height",keyboard:!1})},l}(),bn=e("H0VJ"),vn=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Cn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,21,"ul",[["aria-labelledby","button-basic"],["class","dropdown-menu"],["id","dropdown-basic"],["role","menu"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"a",[["class","dropdown-item"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,3).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](3,671744,null,0,x.r,[x.o,x.a,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](4,3),(l()(),t["\u0275ted"](-1,null,["SQL Query"])),(l()(),t["\u0275eld"](6,0,null,null,4,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,3,"a",[["class","dropdown-item"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,8).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](8,671744,null,0,x.r,[x.o,x.a,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](9,2),(l()(),t["\u0275ted"](-1,null,["Table"])),(l()(),t["\u0275eld"](11,0,null,null,4,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,3,"a",[["class","dropdown-item"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,13).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](13,671744,null,0,x.r,[x.o,x.a,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](14,3),(l()(),t["\u0275ted"](-1,null,["View"])),(l()(),t["\u0275eld"](16,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,1,"a",[["class","dropdown-item"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Stored Procedure"])),(l()(),t["\u0275eld"](19,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,1,"a",[["class","dropdown-item"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Function"]))],(function(l,n){var e=n.component,t=l(n,4,0,"/database",e.connectionName,"sql-query");l(n,3,0,t);var u=l(n,9,0,"/database",e.connectionName);l(n,8,0,u);var i=l(n,14,0,"/database",e.connectionName,"view");l(n,13,0,i)}),(function(l,n){l(n,2,0,t["\u0275nov"](n,3).target,t["\u0275nov"](n,3).href),l(n,7,0,t["\u0275nov"](n,8).target,t["\u0275nov"](n,8).href),l(n,12,0,t["\u0275nov"](n,13).target,t["\u0275nov"](n,13).href)}))}function yn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"a",[["class","p-1 pl-4 btn-link w-100"]],[[8,"title",0],[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0,i=l.component;return"click"===n&&(u=!1!==t["\u0275nov"](l,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),"click"===n&&(u=!1!==i.onSelect(l.parent.context.$implicit)&&u),u}),null,null)),t["\u0275did"](1,671744,null,0,x.r,[x.o,x.a,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](2,4),(l()(),t["\u0275eld"](3,0,null,null,0,"i",[["class","fa fa-table"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,[" ","."," "]))],(function(l,n){var e=l(n,2,0,"/database",n.component.connectionName,n.parent.context.$implicit.objectOwner,n.parent.context.$implicit.objectName);l(n,1,0,e)}),(function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.objectOwner,""),t["\u0275nov"](n,1).target,t["\u0275nov"](n,1).href),l(n,4,0,n.parent.context.$implicit.objectOwner,n.parent.context.$implicit.objectName)}))}function wn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"a",[["class","p-1 pl-4 btn-link w-100"]],[[8,"title",0],[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0,i=l.component;return"click"===n&&(u=!1!==t["\u0275nov"](l,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),"click"===n&&(u=!1!==i.onSelect(l.parent.context.$implicit)&&u),u}),null,null)),t["\u0275did"](1,671744,null,0,x.r,[x.o,x.a,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](2,5),(l()(),t["\u0275eld"](3,0,null,null,0,"i",[["class","fa fa-cubes"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,[" ","."," "]))],(function(l,n){var e=l(n,2,0,"/database",n.component.connectionName,"view",n.parent.context.$implicit.objectOwner,n.parent.context.$implicit.objectName);l(n,1,0,e)}),(function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.objectOwner,""),t["\u0275nov"](n,1).target,t["\u0275nov"](n,1).href),l(n,4,0,n.parent.context.$implicit.objectOwner,n.parent.context.$implicit.objectName)}))}function jn(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,[[2,2]],null,1,null,yn)),t["\u0275did"](1,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,[[2,2]],null,1,null,wn)),t["\u0275did"](3,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,1,0,"Table"===n.context.$implicit.objectType),l(n,3,0,"View"===n.context.$implicit.objectType)}),null)}function On(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"i",[["class","fa mx-1"]],null,null,null,null,null)),t["\u0275prd"](512,null,S["\u0275NgClassImpl"],S["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](2,278528,null,0,S.NgClass,[S["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{"fa-table":0,"fa-cubes":1}),t["\u0275did"](4,933888,null,0,wl.a,[t.ElementRef,jl.i,jl.f,S["\u0275NgClassImpl"],[6,S.NgClass]],{ngClass:[0,"ngClass"],klass:[1,"klass"]},null),t["\u0275pod"](5,{"fa-table":0,"fa-cubes":1})],(function(l,n){var e=l(n,3,0,"Table"===n.context.$implicit.value,"View"===n.context.$implicit.value);l(n,2,0,"fa mx-1",e);var t=l(n,5,0,"Table"===n.context.$implicit.value,"View"===n.context.$implicit.value);l(n,4,0,t,"fa mx-1")}),null)}function Rn(l){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{listView:0}),(l()(),t["\u0275eld"](1,0,null,null,13,"div",[["class","toolbar mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,16777216,null,null,8,"div",[["class","btn-group mr-2"],["dropdown",""]],[[2,"dropup",null],[2,"open",null],[2,"show",null]],null,null,null,null)),t["\u0275prd"](512,null,T.f,T.f,[]),t["\u0275did"](4,212992,null,0,T.c,[t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,T.a,T.f],null,null),(l()(),t["\u0275eld"](5,0,null,null,3,"button",[["aria-controls","dropdown-basic"],["class","btn btn-primary dropdown-toggle"],["dropdownToggle",""],["id","button-basic"],["type","button"]],[[1,"aria-haspopup",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,6).onClick()&&u),u}),null,null)),t["\u0275did"](6,147456,null,0,T.g,[t.ChangeDetectorRef,T.c,t.ElementRef,t.Renderer2,T.f],null,null),(l()(),t["\u0275ted"](-1,null,["New "])),(l()(),t["\u0275eld"](8,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Cn)),t["\u0275did"](10,16384,null,0,T.d,[T.f,t.ViewContainerRef,t.TemplateRef],null,null),(l()(),t["\u0275eld"](11,0,null,null,1,"button",[["class","btn btn-secondary mr-2"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.refresh()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,[" Refresh "])),(l()(),t["\u0275eld"](13,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.import()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,[" Import "])),(l()(),t["\u0275eld"](15,0,null,null,6,"app-list-view",[["class","d-flex h-100 overflow-auto"],["group","objectType"],["orderBy","id"]],null,[[null,"select"]],(function(l,n,e){var t=!0;return"select"===n&&(t=!1!==l.component.onSelect(e)&&t),t}),Ol.b,Ol.a)),t["\u0275did"](16,638976,[[1,4],["listView",4]],2,Rl.a,[],{list:[0,"list"],group:[1,"group"],orderBy:[2,"orderBy"],comparator:[3,"comparator"]},{select:"select"}),t["\u0275qud"](335544320,2,{itemTemplate:0}),t["\u0275qud"](335544320,3,{iconTemplate:0}),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275and"](0,[[2,2]],null,0,null,jn)),(l()(),t["\u0275and"](0,[[2,2],[3,2],["icon",2]],null,0,null,On))],(function(l,n){var e=n.component;l(n,4,0),l(n,16,0,t["\u0275unv"](n,16,0,t["\u0275nov"](n,19).transform(e.list$)),"objectType","id",e.areObjectsEqual)}),(function(l,n){l(n,2,0,t["\u0275nov"](n,4).dropup,t["\u0275nov"](n,4).isOpen,t["\u0275nov"](n,4).isOpen&&t["\u0275nov"](n,4).isBs4),l(n,5,0,!0,t["\u0275nov"](n,6).isDisabled,t["\u0275nov"](n,6).isOpen)}))}var Sn=e("ad02"),Tn=e("67Y/"),_n=function(){function l(l){this.store=l,this.layoutConfig={icon:"assets/img/rc-logo-64x64.png",smIcon:"assets/img/rc-logo-36x36.png",appName:"database-manager"},this.destroy$=new xl.a}return l.prototype.ngOnInit=function(){var l=this;this.store.select(gl,"connectionName").pipe(Object(Il.a)((function(l){return Boolean(l)})),Object(Sn.a)(),Object(Dl.a)(this.destroy$)).subscribe((function(n){l.store.dispatch(new Nl(n))})),this.store.select(fl).pipe(Object(Dl.a)(this.destroy$),Object(tn.a)((function(n){return l.store.select(ml,["ownerName","objectName"]).pipe(Object(Sn.a)((function(l,n){return JSON.stringify(l)===JSON.stringify(n)})),Object(Dl.a)(l.destroy$),Object(Tn.a)((function(l){return{params:l,url:n}})))}))).subscribe((function(n){var e=n.params,t=e.ownerName,u=e.objectName;t&&u?(l.store.dispatch(new Vl({objectOwner:t,objectName:u,objectType:nn(n.url)})),l.store.dispatch(new Fl({objectOwner:t,objectName:u}))):(l.store.dispatch(new Ll(null)),l.store.dispatch(new Ml(null)))}))},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l}(),Nn=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function En(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,12,"app-layout",[],null,null,null,w.b,w.a)),t["\u0275did"](1,114688,null,0,j.a,[O.b,R.a],{config:[0,"config"]},null),(l()(),t["\u0275eld"](2,0,null,0,4,"h2",[["class","mb-0 ml-0 top-sub-header w-md-down-50"],["title",""]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["WORKSHEET "])),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["SYSTEMS"])),(l()(),t["\u0275ted"](-1,null,[" - Database"])),(l()(),t["\u0275eld"](7,0,null,1,1,"app-db-connections",[["class","ml-auto d-flex mr-2"],["header",""]],null,null,null,yl,bl)),t["\u0275did"](8,114688,null,0,hl,[x.o,E.m],null,null),(l()(),t["\u0275eld"](9,0,null,3,1,"app-sql-objects",[["class","h-100 w-100 py-2 d-flex flex-column"],["sidebar",""]],null,null,null,Rn,vn)),t["\u0275did"](10,245760,null,0,hn,[E.m,bn.a],null,null),(l()(),t["\u0275eld"](11,16777216,null,4,1,"router-outlet",[["content",""]],null,null,null,null,null)),t["\u0275did"](12,212992,null,0,x.t,[x.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],t.ChangeDetectorRef],null,null)],(function(l,n){l(n,1,0,n.component.layoutConfig),l(n,8,0),l(n,10,0),l(n,12,0)}),null)}function xn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-manager-layout",[],null,null,null,En,Nn)),t["\u0275did"](1,245760,null,0,_n,[E.m],null,null)],(function(l,n){l(n,1,0)}),null)}var Dn=t["\u0275ccf"]("app-manager-layout",_n,xn,{},{},[]),In=e("pKUh"),An=e("YAQW"),Fn=e("gIcY"),Ln=function(){function l(l,n){this.store=l,this.dbService=n,this.destroy$=new xl.a}return l.prototype.ngOnInit=function(){var l=this;this.rowsCount$=this.store.select(ol),this.perPage$=this.store.select(rl),this.store.select(X).pipe(Object(Dl.a)(this.destroy$),Object(Il.a)((function(l){return Boolean(l.objectOwner)})),Object(Sn.a)((function(l,n){return l.objectOwner===n.objectOwner&&n.objectName===l.objectName})),Object(D.a)(this.store),Object(tn.a)((function(n){var e=n[0];return l.dbService.selectSqlObjectData(n[1].dbConnections.current,e.objectOwner,e.objectName,{fields:["count|1"]})}))).subscribe((function(n){l.store.dispatch(new Hl(n.rows[0][0]))}))},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l.prototype.onRowsCountSelect=function(l){this.store.dispatch(new Ql({limitRowsCount:l.target.value}))},l}(),Vn=e("Gwbs"),Mn=t["\u0275crt"]({encapsulation:0,styles:[[".rows-count[_ngcontent-%COMP%]{right:0;display:inline-block;width:auto;z-index:11}.rows-count[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:inline-block;width:auto;height:1.5rem}"]],data:{}});function kn(l){return t["\u0275vid"](0,[t["\u0275pid"](0,S.DecimalPipe,[t.LOCALE_ID]),(l()(),t["\u0275eld"](1,0,null,null,22,"div",[["class","rows-count position-absolute pr-2"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Show max "])),(l()(),t["\u0275eld"](3,0,null,null,17,"select",[["class","form-control py-0"]],[[8,"value",0]],[[null,"change"]],(function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.onRowsCountSelect(e)&&t),t}),null,null)),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](6,147456,null,0,Fn.NgSelectOption,[t.ElementRef,t.Renderer2,[8,null]],null,null),t["\u0275did"](7,147456,null,0,Fn["\u0275angular_packages_forms_forms_y"],[t.ElementRef,t.Renderer2,[8,null]],null,null),(l()(),t["\u0275ted"](-1,null,["1000"])),(l()(),t["\u0275eld"](9,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](10,147456,null,0,Fn.NgSelectOption,[t.ElementRef,t.Renderer2,[8,null]],null,null),t["\u0275did"](11,147456,null,0,Fn["\u0275angular_packages_forms_forms_y"],[t.ElementRef,t.Renderer2,[8,null]],null,null),(l()(),t["\u0275ted"](-1,null,["10000"])),(l()(),t["\u0275eld"](13,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](14,147456,null,0,Fn.NgSelectOption,[t.ElementRef,t.Renderer2,[8,null]],null,null),t["\u0275did"](15,147456,null,0,Fn["\u0275angular_packages_forms_forms_y"],[t.ElementRef,t.Renderer2,[8,null]],null,null),(l()(),t["\u0275ted"](-1,null,["50000"])),(l()(),t["\u0275eld"](17,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),t["\u0275did"](18,147456,null,0,Fn.NgSelectOption,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](19,147456,null,0,Fn["\u0275angular_packages_forms_forms_y"],[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](-1,null,["ALL"])),(l()(),t["\u0275ted"](21,null,[" rows. \xa0\xa0\xa0\xa0 Total "," rows."])),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275ppd"](23,1)],(function(l,n){l(n,18,0,""),l(n,19,0,"")}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform(e.perPage$)));var u=t["\u0275unv"](n,21,0,l(n,23,0,t["\u0275nov"](n,0),t["\u0275unv"](n,21,0,t["\u0275nov"](n,22).transform(e.rowsCount$))));l(n,21,0,u)}))}var qn=e("21Lb"),Wn=e("5H3E"),$n=e("8X1S"),Pn=e("J2jl"),Gn=e("DogD"),Un=function(){function l(l,n,e){var t=this;this.store=l,this.authService=n,this.dialogService=e,this.dataTypes=Object.values(Kl.d),this.collection=new Gn.CollectionView,this.editCollectionMap=new Map,this.addCollectionSet=new Set,this.destroy$=new xl.a,this.formatItem=function(l,n,e,u){var i=l.rows[n].dataItem,o=l.columns[e].binding,r=t.editCollectionMap.get(i);l.cellType===an.CellType.Cell&&i&&(t.addCollectionSet.has(i)?u.classList.add("added-item"):r&&r.hasOwnProperty(o)?u.classList.add("edited-item"):(u.classList.remove("added-item"),u.classList.remove("edited-item")))}}return l.prototype.ngOnInit=function(){var l=this;this.store.select(X).pipe(Object(Dl.a)(this.destroy$),Object(Il.a)((function(l){return Boolean(l)}))).subscribe((function(n){l.editCollectionMap.clear(),l.addCollectionSet.clear(),l.grid&&l.grid.refreshCells(!1)})),this.store.select(el).pipe(Object(Dl.a)(this.destroy$)).subscribe((function(n){if(!Object(K.d)(l.dataObject,n)){l.dataObject=n;var e=Object(K.m)(n);Object(K.s)(function(l){return Jl(l).map((function(l){return{fieldName:l.fieldName,dataType:l.dataType||Kl.d.NVARCHAR,size:Yl(l),isKey:l.isKey||!1,isNullable:l.isNullable||!0}}))}(l.collection.items),e)||(l.collection.sourceCollection=e)}!l.dataObject.objectOwner&&l.authService.user&&(l.dataObject.objectOwner=l.authService.user.userName,l.store.dispatch(new Pl(l.dataObject)))})),this.isChanged$=this.store.select(nl)},l.prototype.initializedGrid=function(l){var n=this;this.collection.trackChanges=!0,l.rowAdded.addHandler((function(e,t){n.addCollectionSet.add(n.collection.currentAddItem),l.refreshCells(!1)})),l.cellEditEnded.addHandler((function(e,t){var u=n.collection.currentEditItem,i=Kl.e[u.dataType]||null,o=l.columns[3].binding,r=n.collection.currentEditItem[o];if(!n.addCollectionSet.has(u)){var a=l.columns[t.col].binding,d=l.rows[t.row].dataItem[a],s=n.editCollectionMap.get(u)||{};s.hasOwnProperty(a)||(s[a]=t.data),s[a]===d&&delete s[a],t.panel.cellType===an.CellType.Cell&&2===t.col&&(s.hasOwnProperty(o)||(s[o]=r),s[o]===i&&delete s[o]),n.editCollectionMap.set(u,s)}t.panel.cellType===an.CellType.Cell&&2===t.col&&(u[o]=i),l.refreshCells(!1),n.onFieldsUpdate()}))},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l.prototype.save=function(){this.form.ngSubmit.emit()},l.prototype.onTableDelete=function(){var l=this;if(this.dataObject){var n=this.dataObject;this.dialogService.confirmation("Delete table "+n.objectOwner+"."+n.objectName+". Are you sure?").subscribe((function(n){n&&l.store.dispatch(new $l(l.dataObject))}))}},l.prototype.onSubmit=function(){this.form.valid&&this.store.dispatch(new kl(this.getCurrentState()))},l.prototype.onUpdate=function(){this.store.dispatch(new Pl(this.getCurrentState()))},l.prototype.onFieldsUpdate=function(){this.store.dispatch(new Pl(this.getCurrentState()))},l.prototype.getCurrentState=function(){return N.__assign({},this.dataObject,{fields:Zl(this.collection.items),primaryKeys:Xl(this.collection.items)})},l}(),Bn=e("H4hQ"),zn=t["\u0275crt"]({encapsulation:0,styles:[".table-title[_ngcontent-%COMP%] {\n      flex: 0;\n    }"],data:{}});function Hn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onTableDelete()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Delete"]))],null,null)}function Qn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Owner Name is required."]))],null,null)}function Kn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","alert alert-danger py-1 px-2 m-0 w-100"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Qn)),t["\u0275did"](2,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,t["\u0275nov"](n.parent,26).errors.required)}),null)}function Jn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Table Name is required."]))],null,null)}function Zn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","alert alert-danger py-1 px-2 m-0 w-100"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Jn)),t["\u0275did"](2,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,t["\u0275nov"](n.parent,39).errors.required)}),null)}function Xn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,63,"form",[["class","d-flex flex-column h-100"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,2).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,2).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit()&&u),u}),null,null)),t["\u0275did"](1,16384,null,0,Fn["\u0275angular_packages_forms_forms_z"],[],null,null),t["\u0275did"](2,4210688,[[1,4],["form",4]],0,Fn.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,Fn.ControlContainer,null,[Fn.NgForm]),t["\u0275did"](4,16384,null,0,Fn.NgControlStatusGroup,[[4,Fn.ControlContainer]],null,null),(l()(),t["\u0275eld"](5,0,null,null,11,"div",[["fxLayout","row"],["fxLayoutAlign","stretch center"]],null,null,null,null,null)),t["\u0275did"](6,671744,null,0,qn.f,[t.ElementRef,jl.i,[2,qn.o],jl.f],{fxLayout:[0,"fxLayout"]},null),t["\u0275did"](7,671744,null,0,qn.e,[t.ElementRef,jl.i,[2,qn.m],jl.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(l()(),t["\u0275eld"](8,0,null,null,2,"h5",[["class","col-sm-12 px-0"],["fxFlex",""]],null,null,null,null,null)),t["\u0275did"](9,671744,null,0,qn.b,[t.ElementRef,jl.i,jl.e,qn.l,jl.f],{fxFlex:[0,"fxFlex"]},null),(l()(),t["\u0275ted"](-1,null,["Table Information"])),(l()(),t["\u0275eld"](11,0,null,null,5,"div",[["class","row mx-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,2,"button",[["class","btn btn-primary ml-auto mr-1"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275ted"](-1,null,["Save"])),(l()(),t["\u0275and"](16777216,null,null,1,null,Hn)),t["\u0275did"](16,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](17,0,null,null,26,"div",[["class","row mx-0"],["style","max-width: 750px"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,12,"div",[["class","form-group col-sm-3 px-0 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,1,"label",[["for","objectOwner"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Owner"])),(l()(),t["\u0275eld"](21,0,null,null,7,"input",[["class","form-control"],["id","objectOwner"],["name","objectOwner"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,22)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,22).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,22)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,22)._compositionEnd(e.target.value)&&u),"input"===n&&(u=!1!==i.onUpdate()&&u),"ngModelChange"===n&&(u=!1!==(i.dataObject.objectOwner=e)&&u),u}),null,null)),t["\u0275did"](22,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275did"](23,16384,null,0,Fn.RequiredValidator,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,Fn.NG_VALIDATORS,(function(l){return[l]}),[Fn.RequiredValidator]),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](26,671744,[["objectOwner",4]],0,Fn.NgModel,[[2,Fn.ControlContainer],[6,Fn.NG_VALIDATORS],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](28,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,Kn)),t["\u0275did"](30,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](31,0,null,null,12,"div",[["class","form-group col-sm-9 pr-0 pl-2 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Table Name"])),(l()(),t["\u0275eld"](34,0,null,null,7,"input",[["class","form-control"],["id","objectName"],["name","objectName"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,35)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,35).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,35)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,35)._compositionEnd(e.target.value)&&u),"input"===n&&(u=!1!==i.onUpdate()&&u),"ngModelChange"===n&&(u=!1!==(i.dataObject.objectName=e)&&u),u}),null,null)),t["\u0275did"](35,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275did"](36,16384,null,0,Fn.RequiredValidator,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,Fn.NG_VALIDATORS,(function(l){return[l]}),[Fn.RequiredValidator]),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](39,671744,[["objectName",4]],0,Fn.NgModel,[[2,Fn.ControlContainer],[6,Fn.NG_VALIDATORS],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](41,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,Zn)),t["\u0275did"](43,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](44,0,null,null,19,"div",[["class","row flex-fill mx-0 flex-column h-100"],["style","max-width: 750px"]],null,null,null,null,null)),(l()(),t["\u0275eld"](45,0,null,null,1,"h5",[["class","col-sm-12 table-title px-0"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Define Table Fields"])),(l()(),t["\u0275eld"](47,0,null,null,16,"div",[["class","col fields-container d-flex h-100 px-0 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](48,0,null,null,15,"wj-flex-grid",[["class","h-100"]],null,[[null,"initialized"],[null,"deletedRow"]],(function(l,n,e){var u=!0,i=l.component;return"initialized"===n&&(u=!1!==i.initializedGrid(t["\u0275nov"](l,50))&&u),"deletedRow"===n&&(u=!1!==i.onFieldsUpdate()&&u),u}),Wn.d,Wn.a)),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](50,4440064,[[2,4],["grid",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{allowAddNew:[0,"allowAddNew"],allowDelete:[1,"allowDelete"],itemFormatter:[2,"itemFormatter"],itemsSource:[3,"itemsSource"]},{initialized:"initialized",deletedRowNg:"deletedRow"}),t["\u0275prd"](2048,null,"WjComponent",null,[Pn.WjFlexGrid]),(l()(),t["\u0275eld"](52,0,null,0,2,"wj-flex-grid-column",[["binding","isKey"],["dataType","Boolean"],["header","IsKey"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](54,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"]},null),(l()(),t["\u0275eld"](55,0,null,0,2,"wj-flex-grid-column",[["binding","fieldName"],["header","Field Name"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](57,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],minWidth:[3,"minWidth"]},null),(l()(),t["\u0275eld"](58,0,null,0,2,"wj-flex-grid-column",[["binding","dataType"],["header","Field Data Type"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](60,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataMap:[0,"dataMap"],binding:[1,"binding"],header:[2,"header"]},null),(l()(),t["\u0275eld"](61,0,null,0,2,"wj-flex-grid-column",[["binding","size"],["dataType","Number"],["header","Size"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](63,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"]},null)],(function(l,n){var e=n.component;l(n,6,0,"row"),l(n,7,0,"stretch center"),l(n,9,0,""),l(n,16,0,e.dataObject),l(n,23,0,""),l(n,26,0,"objectOwner",e.dataObject.objectOwner),l(n,30,0,t["\u0275nov"](n,26).invalid&&(t["\u0275nov"](n,26).dirty||t["\u0275nov"](n,26).touched)),l(n,36,0,""),l(n,39,0,"objectName",e.dataObject.objectName),l(n,43,0,t["\u0275nov"](n,39).invalid&&(t["\u0275nov"](n,39).dirty||t["\u0275nov"](n,39).touched)),l(n,50,0,!0,!0,e.formatItem,e.collection),l(n,54,0,"Boolean","isKey","IsKey",50),l(n,57,0,"fieldName","Field Name","*",50),l(n,60,0,e.dataTypes,"dataType","Field Data Type"),l(n,63,0,"Number","size","Size",70)}),(function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,12,0,!t["\u0275unv"](n,12,0,t["\u0275nov"](n,13).transform(e.isChanged$))),l(n,21,0,t["\u0275nov"](n,23).required?"":null,t["\u0275nov"](n,28).ngClassUntouched,t["\u0275nov"](n,28).ngClassTouched,t["\u0275nov"](n,28).ngClassPristine,t["\u0275nov"](n,28).ngClassDirty,t["\u0275nov"](n,28).ngClassValid,t["\u0275nov"](n,28).ngClassInvalid,t["\u0275nov"](n,28).ngClassPending),l(n,34,0,t["\u0275nov"](n,36).required?"":null,t["\u0275nov"](n,41).ngClassUntouched,t["\u0275nov"](n,41).ngClassTouched,t["\u0275nov"](n,41).ngClassPristine,t["\u0275nov"](n,41).ngClassDirty,t["\u0275nov"](n,41).ngClassValid,t["\u0275nov"](n,41).ngClassInvalid,t["\u0275nov"](n,41).ngClassPending)}))}function Yn(l){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{form:0}),t["\u0275qud"](671088640,2,{grid:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,Xn)),t["\u0275did"](3,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,n.component.dataObject)}),null)}var le=e("OZfm"),ne=e("NJnL"),ee=e("9uVP"),te=function(){function l(l){this.sql=l,this.delete=new t.EventEmitter,this.apply=new t.EventEmitter,this.collectionView=new Gn.CollectionView,this.loading=!0}return l.prototype.ngOnInit=function(){var l=this;this.collectionView.sourceCollection=[],this.collectionView.filter=function(n){return!l.search||-1!==n.value.toLowerCase().indexOf(l.search.trim().toLowerCase())},this.setSelected(this.currentFilters);var n=new Gn.PropertyGroupDescription("applied",(function(n,e){return l.isSelected(n.value)?"Applied items":"Select items"}));this.collectionView.groupDescriptions.push(n),this.collectionView.sortConverter=function(n,e,t){return"applied"===n.property&&l.selected?l.isSelected(e.value):t},this.setLabel()},l.prototype.onShown=function(){return N.__awaiter(this,void 0,void 0,(function(){var l,n;return N.__generator(this,(function(e){switch(e.label){case 0:this.loading=!0,e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,this.getItems()];case 2:return l=e.sent(),this.collectionView.sourceCollection=l,this.setFooter(this.grid),[3,5];case 3:return n=e.sent(),console.error(n),[3,5];case 4:return this.loading=!1,[7];case 5:return[2]}}))}))},l.prototype.getItems=function(){var l=this,n=Object(ee.k)(this.currentFilters,this.field.bindingName);return this.sql.selectSqlObjectData(this.connection,this.dataObject.objectOwner,this.dataObject.objectName,{fields:[this.field.bindingName,"Count|1"],filters:n}).pipe(Object(Tn.a)((function(e){return l.usedFilters=l.getUsedFiltersStr(n),e.rows&&e.rows.map((function(n){var e=n[0],t=n[1];return l.field.dataType===Gn.DataType.Date&&(e=new Date(Date.parse(e))),{selected:l.isSelected(e),value:e,count:t}}))}))).toPromise()},l.prototype.setSelected=function(l){l&&(this.selected=l[this.field.bindingName])},l.prototype.ngOnChanges=function(l){var n=l.currentFilters;n&&!n.firstChange&&(this.setSelected(n.currentValue),this.setLabel())},l.prototype.sortingHandler=function(l,n){var e=l.columns[n.col],t=this.collectionView.sortDescriptions,u=new Gn.SortDescription(e.binding,"+"!==e.currentSort);this.collectionView.deferUpdate((function(){t.clear(),t.push(new Gn.SortDescription("applied",!1)),t.push(u)})),n.cancel=!0},l.prototype.onGridInit=function(l){l.columnFooters.rows.push(new an.Row({count:0})),l.groupHeaderFormat="<b>{value}</b>",l.formatItem.addHandler((function(l,n){var e=n.panel,t=e.rows[n.row].dataItem,u=e.columns[n.col].binding;e.cellType===an.CellType.Cell&&t&&"value"===u&&null===t[u]&&(n.cell.innerHTML="[NULL]")})),this.selected&&this.collectionView.sortDescriptions.push(new Gn.SortDescription("applied",!1))},l.prototype.onSearch=function(l){this.search=l,this.collectionView.refresh()},l.prototype.onHidden=function(){this.currentFilters&&(this.collectionView.sourceCollection=[])},l.prototype.onApply=function(){this.selected=this.collectionView.items.filter((function(l){return l.selected})).map((function(l){return l.value})),this.selected.length||(this.selected=null),this.pop.hide(),this.apply.emit(this.selected),this.setLabel()},l.prototype.onClear=function(){this.selected=null,this.onHidden(),this.pop.hide(),this.apply.emit(this.selected),this.setLabel()},l.prototype.onDelete=function(){this.selected=null,this.delete.emit(),this.setLabel()},l.prototype.setFooter=function(l){l&&l.columnFooters.setCellData(0,2,this.collectionView.sourceCollection.reduce((function(l,n){return l+n.count}),0))},l.prototype.setLabel=function(){var l=this,n=this.field.bindingName,e=n;this.selected&&this.selected.length&&(n=(e=n+": "+this.selected.map((function(n){return l.field.dataType===Gn.DataType.Date?Object(ee.g)(n,l.field.displayFormat):n})).join(", ")).length>50?e.substring(0,47)+"...":e),this.label=n,this.title=e},l.prototype.isSelected=function(l){return!!this.selected&&(l instanceof Date?this.selected.some((function(n){return n.getTime()===l.getTime()})):this.selected.includes(l))},l.prototype.getUsedFiltersStr=function(l){return l&&l.map((function(l){return l.fieldName+" IN ("+l.value.map((function(l){return l instanceof Date?Object(ee.b)(l):l})).join(",")+"})"})).join(" AND ")},l}(),ue=t["\u0275crt"]({encapsulation:0,styles:[[".filter-component{height:450px;min-width:450px}  .filter-component .popover-content.popover-body{height:100%;padding:.5rem}.fa-filter[_ngcontent-%COMP%]{color:#73818f}.fa-filter.selected[_ngcontent-%COMP%]{color:#2f353a}"]],data:{}});function ie(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","d-flex border border-secondary rounded"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,4,"div",[["class","d-flex"],["containerClass","filter-component"],["placement","bottom"]],null,[[null,"onHidden"],[null,"onShown"]],(function(l,n,e){var t=!0,u=l.component;return"onHidden"===n&&(t=!1!==u.onHidden()&&t),"onShown"===n&&(t=!1!==u.onShown()&&t),t}),null,null)),t["\u0275did"](2,212992,[[2,4],["pop",4]],0,le.c,[le.a,t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,ne.a],{popover:[0,"popover"],placement:[1,"placement"],outsideClick:[2,"outsideClick"],containerClass:[3,"containerClass"]},{onShown:"onShown",onHidden:"onHidden"}),(l()(),t["\u0275eld"](3,0,null,null,2,"label",[["class","col-form-label px-1 cursor-pointer"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,[""," "])),(l()(),t["\u0275eld"](5,0,null,null,0,"i",[["class","fa fa-angle-down"]],null,null,null,null,null))],(function(l,n){l(n,2,0,t["\u0275nov"](n.parent,5),"bottom",!0,"filter-component")}),(function(l,n){var e=n.component;l(n,3,0,e.title),l(n,4,0,e.label)}))}function oe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,6,"i",[["class","fa fa-filter cursor-pointer"],["container","body"],["containerClass","filter-component"],["placement","bottom"]],null,[[null,"onHidden"],[null,"onShown"]],(function(l,n,e){var t=!0,u=l.component;return"onHidden"===n&&(t=!1!==u.onHidden()&&t),"onShown"===n&&(t=!1!==u.onShown()&&t),t}),null,null)),t["\u0275prd"](512,null,S["\u0275NgClassImpl"],S["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](2,278528,null,0,S.NgClass,[S["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{selected:0}),t["\u0275did"](4,212992,[[2,4],["pop",4]],0,le.c,[le.a,t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,ne.a],{popover:[0,"popover"],placement:[1,"placement"],outsideClick:[2,"outsideClick"],container:[3,"container"],containerClass:[4,"containerClass"]},{onShown:"onShown",onHidden:"onHidden"}),t["\u0275did"](5,933888,null,0,wl.a,[t.ElementRef,jl.i,jl.f,S["\u0275NgClassImpl"],[6,S.NgClass]],{ngClass:[0,"ngClass"],klass:[1,"klass"]},null),t["\u0275pod"](6,{selected:0}),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){var e=n.component,u=l(n,3,0,e.selected&&e.selected.length);l(n,2,0,"fa fa-filter cursor-pointer",u),l(n,4,0,t["\u0275nov"](n.parent,5),"bottom",!0,"body","filter-component");var i=l(n,6,0,e.selected&&e.selected.length);l(n,5,0,i,"fa fa-filter cursor-pointer")}),null)}function re(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white flex-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","spinner-border"],["role","status"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Loading..."]))],null,null)}function ae(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,34,"div",[["class","container p-0 h-100 d-flex flex-column"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,re)),t["\u0275did"](2,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](3,0,null,null,4,"div",[["class","input-group mb-2 mr-sm-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,1,"div",[["class","input-group-text"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,0,"i",[["class","fa fa-search"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,0,"input",[["class","form-control form-control-sm"],["placeholder","Search"],["type","text"]],null,[[null,"input"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==l.component.onSearch(e.target.value)&&t),t}),null,null)),(l()(),t["\u0275eld"](8,0,null,null,12,"wj-flex-grid",[["class","h-100 flex-fill"],["headersVisibility","Column"]],null,[[null,"sortingColumn"],[null,"initialized"]],(function(l,n,e){var u=!0,i=l.component;return"sortingColumn"===n&&(u=!1!==i.sortingHandler(t["\u0275nov"](l,10),e)&&u),"initialized"===n&&(u=!1!==i.onGridInit(t["\u0275nov"](l,10))&&u),u}),Wn.d,Wn.a)),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](10,4440064,[[1,4],["grid",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{allowAddNew:[0,"allowAddNew"],allowDelete:[1,"allowDelete"],headersVisibility:[2,"headersVisibility"],selectionMode:[3,"selectionMode"],itemsSource:[4,"itemsSource"]},{initialized:"initialized",sortingColumnNg:"sortingColumn"}),t["\u0275prd"](2048,null,"WjComponent",null,[Pn.WjFlexGrid]),(l()(),t["\u0275eld"](12,0,null,0,2,"wj-flex-grid-column",[["binding","selected"],["dataType","Boolean"],["header","?"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](14,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"],isReadOnly:[4,"isReadOnly"]},null),(l()(),t["\u0275eld"](15,0,null,0,2,"wj-flex-grid-column",[["binding","value"],["header","Value"],["width","*"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](17,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],format:[2,"format"],header:[3,"header"],width:[4,"width"],isReadOnly:[5,"isReadOnly"]},null),(l()(),t["\u0275eld"](18,0,null,0,2,"wj-flex-grid-column",[["binding","count"],["dataType","Number"],["header","Count"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](20,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"],isReadOnly:[4,"isReadOnly"]},null),(l()(),t["\u0275eld"](21,0,null,null,6,"div",[["class","row flex-column m-0 my-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,4,"div",[["class","d-flex justify-content-between mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Used Filter"])),(l()(),t["\u0275eld"](25,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](26,null,["Rows: ",""])),(l()(),t["\u0275eld"](27,0,null,null,0,"input",[["class","form-control form-control-sm"],["disabled","disabled"],["type","text"]],[[8,"value",0]],null,null,null,null)),(l()(),t["\u0275eld"](28,0,null,null,6,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),t["\u0275eld"](29,0,null,null,1,"button",[["class","btn btn-light btn-sm"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onClear()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Clear"])),(l()(),t["\u0275eld"](31,0,null,null,1,"button",[["class","btn btn-primary btn-sm ml-auto mr-2"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onApply()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Apply"])),(l()(),t["\u0275eld"](33,0,null,null,1,"button",[["class","btn btn-light btn-sm"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.pop.hide()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Close"]))],(function(l,n){var e=n.component;l(n,2,0,e.loading),l(n,10,0,!1,!1,"Column",3,e.collectionView),l(n,14,0,"Boolean","selected","?",50,!1),l(n,17,0,e.field.dataType,"value",e.field.displayFormat,"Value","*",!0),l(n,20,0,"Number","count","Count",80,!0)}),(function(l,n){var e=n.component;l(n,26,0,e.collectionView.items.length),l(n,27,0,e.usedFilters)}))}function de(l){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{grid:0}),t["\u0275qud"](671088640,2,{pop:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,ie)),t["\u0275did"](3,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t["\u0275and"](0,[["iconTemplate",2]],null,0,null,oe)),(l()(),t["\u0275and"](0,[["popTemplate",2]],null,0,null,ae))],(function(l,n){l(n,3,0,!n.component.icon,t["\u0275nov"](n,4))}),null)}var se=e("1ua0"),ce=function(){function l(l){this.dialogService=l,this.changed=new t.EventEmitter,this.destroy$=new xl.a,this.filters$=new un.a([]),this.filtersState=null}return l.prototype.ngOnInit=function(){var l=this;this.fields$=this.filters$.pipe(Object(Tn.a)((function(n){var e=n.map((function(l){return l.bindingName}));return l.fields.filter((function(l){return!e.includes(l.bindingName)}))}))),this.columnInfo$=this.filters$.pipe(Object(Tn.a)((function(n){return n.map((function(n){return l.fields.find((function(l){return n.bindingName===l.bindingName}))}))}))),this.selectedFilters$=this.filters$.pipe(Object(Tn.a)((function(l){return l.filter((function(l){return l.selected&&l.selected.length}))})))},l.prototype.ngOnChanges=function(l){var n=l.fields;n&&!n.firstChange&&this.filters$.next(this.getSavedFilters())},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l.prototype.addFilter=function(l){var n=N.__assign({},l,{selected:null,items:[]});this.filters$.next(this.filters$.value.concat([n])),this.saveFilters()},l.prototype.onFilterChange=function(l,n,e){return N.__awaiter(this,void 0,void 0,(function(){return N.__generator(this,(function(l){return this.currentFilters[e.bindingName]=n,this.changed.emit(this.currentFilters),[2]}))}))},l.prototype.removeFilter=function(l,n){return N.__awaiter(this,void 0,void 0,(function(){return N.__generator(this,(function(e){switch(e.label){case 0:return[4,this.onFilterChange(l,null,n)];case 1:return e.sent(),this.currentFilters[n.bindingName]=null,this.filters$.value.splice(l,1),this.filters$.next(this.filters$.value.slice()),this.saveFilters(),[2]}}))}))},l.prototype.manageFilter=function(){var l=this,n=this.dialogService.open(se.b);n.config={filters:this.filters$.value,fields:this.fields},n.init.pipe(Object(tn.a)((function(){return n.component.change}))).subscribe((function(n){return N.__awaiter(l,void 0,void 0,(function(){var l,e=this;return N.__generator(this,(function(t){return l=n,this.filters$.value.filter((function(n){return!l.map((function(l){return l.bindingName})).includes(n.bindingName)})).forEach((function(l){e.currentFilters[l.bindingName]=null})),-1===this.filters$.value.findIndex((function(n,e){return!l[e]||n.bindingName!==l[e].bindingName}))&&l.length===this.filters$.value.length||this.changed.emit(this.currentFilters),this.filters$.next(l),this.saveFilters(),[2]}))}))}))},Object.defineProperty(l.prototype,"filtersKey",{get:function(){return"db-table-filters-"+this.dataObject.objectOwner+"-"+this.dataObject.objectName},enumerable:!0,configurable:!0}),l.prototype.saveFilters=function(){var l=this.filters$.value.map((function(l){return l.bindingName}));l.length?localStorage.setItem(this.filtersKey,JSON.stringify(l)):localStorage.removeItem(this.filtersKey)},l.prototype.getSavedFilters=function(){var l=this;try{var n=localStorage.getItem(this.filtersKey);return n?JSON.parse(n).map((function(n){var e=l.fields.find((function(l){return l.bindingName===n}));if(e)return N.__assign({},e,{selected:null,items:[]})})).filter((function(l){return l})):[]}catch(e){return[]}},l}(),pe=t["\u0275crt"]({encapsulation:0,styles:[[".border[dropdown][_ngcontent-%COMP%]{border-color:transparent}.dropdown-menu[_ngcontent-%COMP%]{max-height:500px}.fa.fa-cogs[_ngcontent-%COMP%]{color:#2f353a}  .applied-popover{min-width:100px}"]],data:{}});function fe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.addFilter(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.bindingName)}))}function me(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"ul",[["aria-labelledby","button-basic"],["class","dropdown-menu overflow-auto"],["id","dropdown-basic"],["role","menu"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.manageFilter()&&t),t}),null,null)),(l()(),t["\u0275eld"](3,0,null,null,0,"i",[["class","fa fa-cogs"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Manage Filter"])),(l()(),t["\u0275eld"](5,0,null,null,0,"li",[["class","divider dropdown-divider"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,fe)),t["\u0275did"](7,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(e.fields$)))}),null)}function ge(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","pr-2 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"app-filter",[],null,[[null,"apply"],[null,"delete"]],(function(l,n,e){var t=!0,u=l.component;return"apply"===n&&(t=!1!==u.onFilterChange(l.context.index,e,l.context.$implicit)&&t),"delete"===n&&(t=!1!==u.removeFilter(l.context.index)&&t),t}),de,ue)),t["\u0275did"](2,638976,null,0,te,[Vn.a],{field:[0,"field"],currentFilters:[1,"currentFilters"],dataObject:[2,"dataObject"],connection:[3,"connection"]},{delete:"delete",apply:"apply"})],(function(l,n){var e=n.component;l(n,2,0,n.context.$implicit,e.currentFilters,e.dataObject,e.connection)}),null)}function he(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,12,"div",[["class","row m-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,8,"div",[["class","btn-group mr-2 mb-2 border"],["dropdown",""]],[[2,"dropup",null],[2,"open",null],[2,"show",null]],null,null,null,null)),t["\u0275prd"](512,null,T.f,T.f,[]),t["\u0275did"](3,212992,null,0,T.c,[t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,T.a,T.f],null,null),(l()(),t["\u0275eld"](4,0,null,null,3,"button",[["aria-controls","dropdown-basic"],["class","btn btn-primary dropdown-toggle align-self-baseline"],["containerClass","applied-popover"],["dropdownToggle",""],["id","button-basic"],["triggers","mouseenter:mouseleave"],["type","button"]],[[8,"disabled",0],[1,"aria-haspopup",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,5).onClick()&&u),u}),null,null)),t["\u0275did"](5,147456,null,0,T.g,[t.ChangeDetectorRef,T.c,t.ElementRef,t.Renderer2,T.f],null,null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](7,0,null,null,0,"i",[["class","fa fa-filter"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,me)),t["\u0275did"](9,16384,null,0,T.d,[T.f,t.ViewContainerRef,t.TemplateRef],null,null),(l()(),t["\u0275and"](16777216,null,null,2,null,ge)),t["\u0275did"](11,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,3,0),l(n,11,0,t["\u0275unv"](n,11,0,t["\u0275nov"](n,12).transform(e.columnInfo$)))}),(function(l,n){var e=n.component;l(n,1,0,t["\u0275nov"](n,3).dropup,t["\u0275nov"](n,3).isOpen,t["\u0275nov"](n,3).isOpen&&t["\u0275nov"](n,3).isBs4),l(n,4,0,!t["\u0275unv"](n,4,0,t["\u0275nov"](n,6).transform(e.fields$)).length,!0,t["\u0275nov"](n,5).isDisabled,t["\u0275nov"](n,5).isOpen)}))}function be(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,null,null,1,null,he)),t["\u0275did"](1,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,1,0,e.fields&&e.fields.length)}),null)}var ve=e("aa1+"),Ce=e("xuMK"),ye=e("jYNz"),we=e("dzgT"),je=e("4CEX"),Oe=e("LXVg"),Re=e("mlm9"),Se=function(){function l(l,n,e,t){this.store=l,this.actions$=n,this.dialogService=e,this.fileService=t,this.filters={},this.currentPage=1,this.destroy$=new xl.a}return l.prototype.ngOnInit=function(){var l=this;this.isChanged$=this.store.select(ul),this.fields$=this.store.select(ll).pipe(Object(Dl.a)(this.destroy$)),this.fields$.subscribe((function(n){l.fields=n.map((function(n){return{isKey:n.isKey,bindingName:n.fieldName,sqlDataType:n.dataType,headerText:l.getColumnHeader(n.fieldName),width:l.getColumnWidth(n.fieldName),dataType:l.getColumnType(n.fieldName,n.dataType),displayFormat:l.getColumnDisplayFormat(n.fieldName)}}))})),this.store.select(cl).subscribe((function(n){l.connection=n})),Object(we.a)([this.fields$,this.store.select(Y)]).pipe(Object(Il.a)((function(l){var n=l[0];return n&&0!==n.length})),Object(Dl.a)(this.destroy$)).subscribe((function(n){l.refreshData(n[1])})),this.actions$.pipe(Object(ye.d)(Al.REFRESH_SQL_OBJECT),Object(Dl.a)(this.destroy$),Object(D.a)(this.store)).subscribe((function(n){l.refreshData(n[1].sqlObject.data),l.currentPage=1})),this.loading$=this.store.select(il),this.store.select(rl).subscribe((function(n){l.limitRows=n})),this.store.select(ol).subscribe((function(n){l.rowsCount=n})),this.store.select(X).subscribe((function(n){l.dataObject=n,l.filters={},l.currentPage=1,l.localGridConfig=new Oe.a("database-"+l.connection,n.objectOwner+"-"+n.objectName),setTimeout((function(){l.grid.autoSizeRow(0,!0)}))}))},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l.prototype.saveData=function(){this.store.dispatch(new ql)},l.prototype.getColumnWidth=function(l,n){return void 0===n&&(n=150),this.localGridConfig&&this.localGridConfig.getColumn(l).width||n},l.prototype.getColumnHeader=function(l){return this.localGridConfig&&this.localGridConfig.getColumn(l).header},l.prototype.getColumnType=function(l,n){return this.localGridConfig&&this.localGridConfig.getColumn(l).dataType||Kl.f[n]},l.prototype.getColumnDisplayFormat=function(l){return this.localGridConfig&&this.localGridConfig.getColumn(l).displayFormat||"dd/MM/yyyy"},l.prototype.initializedGrid=function(l){var n=this;this.gridContext=function(l){var n=new Set,e=new Map,t=[];function u(l,n,t,u){var i,o,r=e.get(l)||{};r.hasOwnProperty(n)||(r[n]=t),o=u,((i=r[n])instanceof Date?i.getTime()===o.getTime():i===o)&&delete r[n],e.set(l,r)}return l.rowAdded.addHandler((function(e,t){n.add(l.collectionView.currentAddItem),l.refreshCells(!1)})),l.onPasted=function(e){for(var t=e.range,u=t.row2,i=[],o=t.row;o<=u;o++)i.push(l.rows[o].dataItem),n.add(l.rows[o].dataItem);l.refreshCells(!1)},l.deletingRow.addHandler((function(u,i){var o=l.collectionView;n.has(o.currentItem)?n.delete(o.currentItem):t.push(o.currentItem),e.delete(o.currentItem)})),l.itemFormatter=function(l,t,u,i){var o=l.rows[t].dataItem,r=l.columns[u].binding,a=e.get(o);l.cellType===an.CellType.Cell&&o&&(n.has(o)?i.classList.add("added-item"):a&&a.hasOwnProperty(r)?i.classList.add("edited-item"):(i.classList.remove("added-item"),i.classList.remove("edited-item")))},l.cellEditEnded.addHandler((function(e,t){var i=l.collectionView.currentEditItem;if(!n.has(i)){var o=l.columns[t.col].binding;u(i,o,t.data,l.rows[t.row].dataItem[o])}l.refreshCells(!1)})),{clear:function(){e.clear(),n.clear()},get state(){return{edited:Array.from(e.keys()),added:Array.from(n.values()),deleted:t}},setEditValue:u}}(l),l.cellEditEnded.addHandler((function(){return n.changeHandler()})),l.deletedRow.addHandler((function(){return n.changeHandler()})),l.addEventListener(l.hostElement,"contextmenu",(function(e){var t=l.hitTest(e);n.columnToEdit=n.fields.find((function(l,n){return t.col===n})),n.contextMenuValue=n.grid.collectionView.items[t.row][n.columnToEdit.bindingName]}));var e=l.itemFormatter;l.itemFormatter=function(n,t,u,i){e(n,t,u,i);var o=n.columns[u].binding;if(n.cellType===an.CellType.ColumnHeader&&i.firstChild instanceof HTMLElement){var r=i.firstChild.querySelector("#sort-icon");r&&i.firstChild.removeChild(r);var a=l.collectionView.sortDescriptions[0];if(a&&a.property===o){var d=document.createElement("SPAN");d.id="sort-icon",d.className=a.ascending?"wj-glyph-up":"wj-glyph-down",i.firstChild.appendChild(d)}}},l.sortingColumn.addHandler((function(l,n){n.data.target.classList.contains("fa-filter")&&(n.cancel=!0)})),l.resizingColumn.addHandler((function(e,t){n.localGridConfig&&n.localGridConfig.saveColumn(l.columns[t.col].binding,{width:l.columns[t.col].renderWidth})}))},l.prototype.exportToCSV=function(){this.fileService.exportToFile(this.grid.collectionView.sourceCollection,{fileType:Kl.a.CSV,fileName:this.dataObject.objectOwner+"-"+this.dataObject.objectName})},l.prototype.exportToExcel=function(){Re.FlexGridXlsxConverter.saveAsync(this.grid,{includeColumnHeaders:!0},this.dataObject.objectOwner+"-"+this.dataObject.objectName)},l.prototype.onCtxMenuClicked=function(l){switch(l.value){case"edit-column":this.editColumn();break;case"fill-all":this.fillRows("all");break;case"fill-empty":this.fillRows("empty")}},l.prototype.editColumn=function(){var l=this,n=this.dialogService.open(je.a,{class:"modal-lg"});n.config=[this.columnToEdit],n.init.pipe(Object(tn.a)((function(){return n.component.save}))).subscribe((function(n){n.forEach((function(n){l.localGridConfig.saveColumn(n.bindingName,n)}));var e=n[0],t=l.fields.findIndex((function(l){return l.bindingName===e.bindingName}));l.fields.splice(t,1,e)}))},l.prototype.fillRows=function(l){var n=this,e=!1;this.grid.collectionView.sourceCollection.forEach((function(t){var u=n.columnToEdit.bindingName,i=t[u];n.updateCondition(i,l)&&(t[u]=n.contextMenuValue,n.gridContext.setEditValue(t,u,i,n.contextMenuValue),e=!0)})),e&&(this.grid.refresh(!0),this.changeHandler())},l.prototype.updateCondition=function(l,n){switch(n){case"all":return l!==this.contextMenuValue;case"empty":return[null,void 0,""].includes(l);default:return!0}},l.prototype.changeHandler=function(){var l=this.gridContext.state,n=l.added,e=l.edited,t=[];e&&(t=t.concat(e)),n&&(t=t.concat(n)),this.store.dispatch(new Wl(t))},l.prototype.onFiltersChange=function(l){this.filters=N.__assign({},l),this.applyFilters()},l.prototype.onApply=function(l,n){var e;this.filters=N.__assign({},this.filters,((e={})[n.bindingName]=l,e)),this.applyFilters()},Object.defineProperty(l.prototype,"skipRows",{get:function(){return(this.currentPage-1)*this.limitRows},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"filtersList",{get:function(){var l=this;return Object.entries(this.filters).filter((function(l){return Boolean(l[1])})).map((function(n){var e=n[0];return{fieldName:e,value:n[1].map((function(n){if(l.localGridConfig.getColumn(e).dataType===Gn.DataType.Date){var t=l.localGridConfig.getColumn(e).displayFormat;return Object(K.i)(n,t)}return n instanceof Date?Object(K.e)(n):null===n?"[NULL]":n})).join(", ")}}))},enumerable:!0,configurable:!0}),l.prototype.onNextPage=function(l){if(this.currentPage>=1&&l>0&&this.skipRows+this.limitRows<this.rowsCount)this.currentPage++;else{if(!(this.currentPage>=2&&l<0))return;this.currentPage--}this.limitRows&&this.store.dispatch(new Ql({skipRowsCount:this.skipRows}))},l.prototype.applyFilters=function(){this.store.dispatch(new zl({filters:Object(K.l)(this.filters)})),this.store.dispatch(new Fl(this.dataObject))},l.prototype.refreshData=function(l){this.data=this.formatData(Object(K.f)(l)),this.gridContext&&this.gridContext.clear()},l.prototype.formatData=function(l){var n=this;return l&&l.fieldNames?(l.dataTypes=l.fieldNames.map((function(l){var e=n.fields.find((function(n){return n.bindingName===l}));return e?e.sqlDataType:null})),Object(K.n)(l)):[]},l}(),Te=e("Ub3T"),_e=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.data-grid[_ngcontent-%COMP%]{height:calc(100% - 25px)}.data-grid[_ngcontent-%COMP%]   app-filter[_ngcontent-%COMP%]{-webkit-box-ordinal-group:2;order:1}.data-grid[_ngcontent-%COMP%]     .wj-cell.wj-header>div{display:-webkit-box;display:flex;height:100%;-webkit-box-align:center;align-items:center;max-height:50px}.applied-filters-list[_ngcontent-%COMP%]{list-style-type:none}.text-normal[_ngcontent-%COMP%]{white-space:normal;word-break:break-word;width:100%;padding-right:5px;max-height:50px;text-overflow:ellipsis;overflow:hidden;text-align:center;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}"]],data:{}});function Ne(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-primary ml-auto mr-0 align-self-baseline mb-2"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.saveData()&&t),t}),null,null)),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275ted"](-1,null,["Save"]))],null,(function(l,n){var e=n.component;l(n,0,0,!t["\u0275unv"](n,0,0,t["\u0275nov"](n,1).transform(e.isChanged$)))}))}function Ee(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"ul",[["class","dropdown-menu left-menu"],["role","menu"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.exportToExcel()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Export to Excel"])),(l()(),t["\u0275eld"](4,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,1,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.exportToCSV()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Export to CSV"]))],null,null)}function xe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function De(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white flex-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","spinner-border"],["role","status"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Loading..."])),(l()(),t["\u0275and"](16777216,null,null,1,null,xe)),t["\u0275did"](5,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,5,0,n.context.ngIf.messages)}),null)}function Ie(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","text-normal"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""])),(l()(),t["\u0275eld"](2,0,null,null,1,"app-filter",[],null,[[null,"apply"]],(function(l,n,e){var t=!0;return"apply"===n&&(t=!1!==l.component.onApply(e,l.parent.context.$implicit)&&t),t}),de,ue)),t["\u0275did"](3,638976,null,0,te,[Vn.a],{icon:[0,"icon"],field:[1,"field"],currentFilters:[2,"currentFilters"],dataObject:[3,"dataObject"],connection:[4,"connection"]},{apply:"apply"})],(function(l,n){var e=n.component;l(n,3,0,!0,n.parent.context.$implicit,e.filters,e.dataObject,e.connection)}),(function(l,n){l(n,0,0,n.parent.context.$implicit.headerText),l(n,1,0,n.parent.context.$implicit.headerText)}))}function Ae(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"wj-flex-grid-column",[],null,null,null,Wn.c,Wn.b)),t["\u0275did"](1,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],format:[2,"format"],header:[3,"header"],width:[4,"width"]},null),t["\u0275prd"](2048,null,"WjComponent",null,[Pn.WjFlexGridColumn]),(l()(),t["\u0275and"](16777216,null,0,2,null,Ie)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridCellTemplate]),t["\u0275did"](5,212992,null,0,Pn.WjFlexGridCellTemplate,[t.ViewContainerRef,[2,t.TemplateRef],t.ElementRef,[3,"WjComponent"],t.Renderer,t.Injector,t.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null)],(function(l,n){l(n,1,0,n.context.$implicit.dataType,n.context.$implicit.bindingName,n.context.$implicit.displayFormat,n.context.$implicit.headerText,n.context.$implicit.width),l(n,5,0,"","ColumnHeader")}),null)}function Fe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,1,"i",[["class","fa fa-filter cursor-pointer px-1"],["triggers","mouseenter:mouseleave"]],null,null,null,null,null)),t["\u0275did"](1,212992,null,0,le.c,[le.a,t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,ne.a],{popover:[0,"popover"],triggers:[1,"triggers"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,1,0,t["\u0275nov"](n.parent,61),"mouseenter:mouseleave")}),null)}function Le(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" |"])),(l()(),t["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-angle-double-left ml-1 cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onNextPage(-1)&&t),t}),null,null)),(l()(),t["\u0275ted"](3,null,[" Page: ",""])),(l()(),t["\u0275eld"](4,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-angle-double-right cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onNextPage(1)&&t),t}),null,null))],null,(function(l,n){l(n,3,0,n.component.currentPage)}))}function Ve(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["",""])),(l()(),t["\u0275ted"](3,null,[": "," "]))],null,(function(l,n){l(n,2,0,n.context.$implicit.fieldName),l(n,3,0,n.context.$implicit.value)}))}function Me(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"ul",[["class","applied-filters-list px-0"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Ve)),t["\u0275did"](2,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.filtersList)}),null)}function ke(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"h6",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Apply Filter"])),(l()(),t["\u0275and"](16777216,null,null,1,null,Me)),t["\u0275did"](3,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,3,0,n.component.filters)}),null)}function qe(l){return t["\u0275vid"](0,[t["\u0275pid"](0,S.DecimalPipe,[t.LOCALE_ID]),t["\u0275qud"](402653184,1,{grid:0}),(l()(),t["\u0275eld"](2,0,null,null,17,"div",[["class","row mx-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"app-filters",[],null,[[null,"changed"]],(function(l,n,e){var t=!0;return"changed"===n&&(t=!1!==l.component.onFiltersChange(e)&&t),t}),be,pe)),t["\u0275did"](4,770048,null,0,ce,[bn.a],{fields:[0,"fields"],currentFilters:[1,"currentFilters"],connection:[2,"connection"],dataObject:[3,"dataObject"]},{changed:"changed"}),(l()(),t["\u0275and"](16777216,null,null,1,null,Ne)),t["\u0275did"](6,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](7,16777216,null,null,12,"span",[["class","d-flex position-relative px-2 mb-2"],["dropdown",""],["placement","top left"]],[[2,"dropup",null],[2,"open",null],[2,"show",null]],null,null,null,null)),t["\u0275prd"](512,null,S["\u0275NgClassImpl"],S["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](9,278528,null,0,S.NgClass,[S["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](10,{"ml-auto":0}),t["\u0275did"](11,933888,null,0,wl.a,[t.ElementRef,jl.i,jl.f,S["\u0275NgClassImpl"],[6,S.NgClass]],{ngClass:[0,"ngClass"],klass:[1,"klass"]},null),t["\u0275pod"](12,{"ml-auto":0}),t["\u0275prd"](512,null,T.f,T.f,[]),t["\u0275did"](14,212992,null,0,T.c,[t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,T.a,T.f],{placement:[0,"placement"]},null),(l()(),t["\u0275eld"](15,0,null,null,2,"button",[["class","btn py-0"],["dropdownToggle",""],["type","button"]],[[1,"aria-haspopup",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,16).onClick()&&u),u}),null,null)),t["\u0275did"](16,147456,null,0,T.g,[t.ChangeDetectorRef,T.c,t.ElementRef,t.Renderer2,T.f],null,null),(l()(),t["\u0275eld"](17,0,null,null,0,"i",[["class","fa fa-ellipsis-v"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Ee)),t["\u0275did"](19,16384,null,0,T.d,[T.f,t.ViewContainerRef,t.TemplateRef],null,null),(l()(),t["\u0275eld"](20,0,null,null,40,"div",[["class","position-relative h-100"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,De)),t["\u0275did"](22,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](24,0,null,null,21,"wj-menu",[["style","display:none;"]],null,[[null,"itemClicked"]],(function(l,n,e){var u=!0;return"itemClicked"===n&&(u=!1!==l.component.onCtxMenuClicked(t["\u0275nov"](l,26))&&u),u}),ve.f,ve.b)),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](26,6012928,[["ctxMenu",4]],0,Ce.WjMenu,[t.ElementRef,t.Injector,[3,"WjComponent"]],{isButton:[0,"isButton"]},{itemClickedNg:"itemClicked"}),t["\u0275prd"](2048,null,"WjComponent",null,[Ce.WjMenu]),(l()(),t["\u0275eld"](28,16777216,null,0,5,"wj-menu-item",[["value","edit-column"]],null,null,null,ve.e,ve.c)),t["\u0275prd"](6144,null,"WjComponent",null,[Ce.WjMenuItem]),t["\u0275did"](30,4440064,null,0,Ce.WjMenuItem,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ViewContainerRef,t.Renderer],{value:[0,"value"]},null),(l()(),t["\u0275eld"](31,0,null,0,2,"span",[["class","px-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,0,"i",[["class","fa fa-columns mr-1 my-2"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Format Column"])),(l()(),t["\u0275eld"](34,16777216,null,0,5,"wj-menu-item",[["value","fill-all"]],null,null,null,ve.e,ve.c)),t["\u0275prd"](6144,null,"WjComponent",null,[Ce.WjMenuItem]),t["\u0275did"](36,4440064,null,0,Ce.WjMenuItem,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ViewContainerRef,t.Renderer],{value:[0,"value"]},null),(l()(),t["\u0275eld"](37,0,null,0,2,"span",[["class","px-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](38,0,null,null,0,"i",[["class","fa fa-file-o mr-1 my-2"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Fill all rows"])),(l()(),t["\u0275eld"](40,16777216,null,0,5,"wj-menu-item",[["value","fill-empty"]],null,null,null,ve.e,ve.c)),t["\u0275prd"](6144,null,"WjComponent",null,[Ce.WjMenuItem]),t["\u0275did"](42,4440064,null,0,Ce.WjMenuItem,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ViewContainerRef,t.Renderer],{value:[0,"value"]},null),(l()(),t["\u0275eld"](43,0,null,0,2,"span",[["class","px-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](44,0,null,null,0,"i",[["class","fa fa-files-o mr-1 my-2"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Fill empty rows"])),(l()(),t["\u0275eld"](46,0,null,null,6,"wj-flex-grid",[["class","data-grid"]],null,[[null,"itemsSourceChange"],[null,"initialized"],[null,"contextmenu"]],(function(l,n,e){var u=!0,i=l.component;return"contextmenu"===n&&(u=!1!==t["\u0275nov"](l,50).onContextMenu(e)&&u),"itemsSourceChange"===n&&(u=!1!==(i.data=e)&&u),"initialized"===n&&(u=!1!==i.initializedGrid(t["\u0275nov"](l,49))&&u),u}),Wn.d,Wn.a)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGrid]),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](49,4440064,[[1,4],["grid",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{allowAddNew:[0,"allowAddNew"],allowDelete:[1,"allowDelete"],isReadOnly:[2,"isReadOnly"],itemsSource:[3,"itemsSource"]},{initialized:"initialized"}),t["\u0275did"](50,16384,null,0,Ce.WjContextMenu,[t.ElementRef],{wjContextMenu:[0,"wjContextMenu"]},null),(l()(),t["\u0275and"](16777216,null,0,1,null,Ae)),t["\u0275did"](52,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](53,0,null,null,7,"div",[["class","row m-0 align-items-center"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Fe)),t["\u0275did"](55,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](56,0,null,null,2,"span",[["class","ml-auto mr-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](57,null,["Rows: ",""])),t["\u0275ppd"](58,1),(l()(),t["\u0275and"](16777216,null,null,1,null,Le)),t["\u0275did"](60,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,[["popTemplate",2]],null,0,null,ke))],(function(l,n){var e=n.component;l(n,4,0,e.fields,e.filters,e.connection,e.dataObject),l(n,6,0,!e.isReadOnly);var u=l(n,10,0,e.isReadOnly);l(n,9,0,"d-flex position-relative px-2 mb-2",u);var i=l(n,12,0,e.isReadOnly);l(n,11,0,i,"d-flex position-relative px-2 mb-2"),l(n,14,0,"top left"),l(n,22,0,t["\u0275unv"](n,22,0,t["\u0275nov"](n,23).transform(e.loading$))),l(n,26,0,!0),l(n,30,0,"edit-column"),l(n,36,0,"fill-all"),l(n,42,0,"fill-empty"),l(n,49,0,!0,!0,!!e.isReadOnly,e.data),l(n,50,0,t["\u0275nov"](n,26)),l(n,52,0,e.fields),l(n,55,0,e.filters),l(n,60,0,e.limitRows)}),(function(l,n){var e=n.component;l(n,7,0,t["\u0275nov"](n,14).dropup,t["\u0275nov"](n,14).isOpen,t["\u0275nov"](n,14).isOpen&&t["\u0275nov"](n,14).isBs4),l(n,15,0,!0,t["\u0275nov"](n,16).isDisabled,t["\u0275nov"](n,16).isOpen);var u=e.data?e.data.length:t["\u0275unv"](n,57,0,l(n,58,0,t["\u0275nov"](n,0),0));l(n,57,0,u)}))}var We=function(){function l(l){this.store=l,this.destroy$=new xl.a}return l.prototype.ngOnInit=function(){var l=this;this.isStructureChanged$=this.store.select(nl),this.isDataChanged$=this.store.select(ul),this.store.select(X).pipe(Object(Dl.a)(this.destroy$)).subscribe((function(n){l.dataObject=n})),this.loading$=this.store.select(il)},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l}(),$e=t["\u0275crt"]({encapsulation:0,styles:[["tabset.sql-object-tab[_ngcontent-%COMP%] > .tab-content[_ngcontent-%COMP%]{position:relative}.spinner[_ngcontent-%COMP%]{left:0}"]],data:{}});function Pe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"i",[["class","fa fa-cogs fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Structure "])),(l()(),t["\u0275eld"](2,0,null,null,7,"span",[],null,null,null,null,null)),t["\u0275prd"](512,null,S["\u0275NgClassImpl"],S["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](4,278528,null,0,S.NgClass,[S["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pod"](6,{changed:0}),t["\u0275did"](7,933888,null,0,wl.a,[t.ElementRef,jl.i,jl.f,S["\u0275NgClassImpl"],[6,S.NgClass]],{ngClass:[0,"ngClass"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pod"](9,{changed:0})],(function(l,n){var e=n.component,u=l(n,6,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform(e.isStructureChanged$)));l(n,4,0,u);var i=l(n,9,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(e.isStructureChanged$)));l(n,7,0,i)}),null)}function Ge(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function Ue(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white flex-column"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["1 "])),(l()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","spinner-border"],["role","status"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Loading..."])),(l()(),t["\u0275and"](16777216,null,null,1,null,Ge)),t["\u0275did"](6,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.context.ngIf.messages)}),null)}function Be(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"i",[["class","fa fa-table fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Data "])),(l()(),t["\u0275eld"](2,0,null,null,7,"span",[],null,null,null,null,null)),t["\u0275prd"](512,null,S["\u0275NgClassImpl"],S["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](4,278528,null,0,S.NgClass,[S["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pod"](6,{changed:0}),t["\u0275did"](7,933888,null,0,wl.a,[t.ElementRef,jl.i,jl.f,S["\u0275NgClassImpl"],[6,S.NgClass]],{ngClass:[0,"ngClass"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pod"](9,{changed:0})],(function(l,n){var e=n.component,u=l(n,6,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform(e.isDataChanged$)));l(n,4,0,u);var i=l(n,9,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(e.isDataChanged$)));l(n,7,0,i)}),null)}function ze(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,22,"tabset",[["class","tabset-fx sql-object-tab"]],[[2,"tab-container",null]],null,null,In.b,In.a)),t["\u0275did"](1,180224,null,0,An.e,[An.f,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](2,0,null,0,20,"tab",[["class","h-100 position-relative"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](3,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](4,0,null,null,1,"app-rows-count",[],null,null,null,kn,Mn)),t["\u0275did"](5,245760,null,0,Ln,[E.m,Vn.a],null,null),(l()(),t["\u0275eld"](6,0,null,null,16,"tabset",[["class","tabset-fx"]],[[2,"tab-container",null]],null,null,In.b,In.a)),t["\u0275did"](7,180224,null,0,An.e,[An.f,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](8,0,null,0,8,"tab",[["class","position-relative"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](9,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],null,null),(l()(),t["\u0275and"](0,null,null,1,null,Pe)),t["\u0275did"](11,16384,null,0,An.c,[t.TemplateRef,An.b],null,null),(l()(),t["\u0275eld"](12,0,null,null,1,"app-table-editor",[["class","w-100 h-100"],["left",""]],null,null,null,Yn,zn)),t["\u0275did"](13,245760,[["editor",4]],0,Un,[E.m,Bn.a,bn.a],null,null),(l()(),t["\u0275and"](16777216,null,null,2,null,Ue)),t["\u0275did"](15,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](17,0,null,0,5,"tab",[],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](18,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],null,null),(l()(),t["\u0275and"](0,null,null,1,null,Be)),t["\u0275did"](20,16384,null,0,An.c,[t.TemplateRef,An.b],null,null),(l()(),t["\u0275eld"](21,0,null,null,1,"app-table-data",[["class","h-100 d-flex"],["right",""]],null,null,null,qe,_e)),t["\u0275did"](22,245760,[["data",4]],0,Se,[E.m,ye.a,bn.a,Te.a],null,null)],(function(l,n){var e=n.component;l(n,3,0,e.dataObject?e.dataObject.objectName:"Create table"),l(n,5,0),l(n,9,0),l(n,13,0),l(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform(e.loading$))),l(n,18,0),l(n,22,0)}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).clazz),l(n,2,0,t["\u0275nov"](n,3).id,t["\u0275nov"](n,3).active,t["\u0275nov"](n,3).addClass),l(n,6,0,t["\u0275nov"](n,7).clazz),l(n,8,0,t["\u0275nov"](n,9).id,t["\u0275nov"](n,9).active,t["\u0275nov"](n,9).addClass),l(n,17,0,t["\u0275nov"](n,18).id,t["\u0275nov"](n,18).active,t["\u0275nov"](n,18).addClass)}))}function He(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-sql-object-content",[],null,null,null,ze,$e)),t["\u0275did"](1,245760,null,0,We,[E.m],null,null)],(function(l,n){l(n,1,0)}),null)}var Qe=t["\u0275ccf"]("app-sql-object-content",We,He,{},{},[]),Ke=e("+EyX"),Je=e("HF1C"),Ze=function(){function l(){this.leftContentSize=50,this.modeState={left:!0,right:!0}}return l.prototype.ngOnInit=function(){},l.prototype.onModeState=function(l){this.modeState[l]=!this.modeState[l],this.leftContentSize=this.modeState.left&&!this.modeState.right?100:this.modeState.left&&this.modeState.right?50:0},l.prototype.resize=function(){},l}(),Xe=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ye(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,30,"div",[["class","card overflow-hidden mb-0 w-100 h-100"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,[["header",1]],null,16,"div",[["class","card-header d-flex pl-0 py-2 pr-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,14,"div",[["class","btn-group d-block ml-3"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,6,"label",[["btnCheckbox",""],["class","btn btn-secondary cursor-pointer mb-0"],["name","mode-left"],["ngDefaultControl",""],["role","button"],["tabindex","0"]],[[2,"active",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,4)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,4).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,4)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,4)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.modeState.left=e)&&u),"click"===n&&(u=!1!==i.onModeState("left")&&u),u}),null,null)),t["\u0275did"](4,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](6,671744,null,0,Fn.NgModel,[[8,null],[8,null],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](8,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null),t["\u0275ncd"](null,0),(l()(),t["\u0275eld"](10,0,null,null,6,"label",[["btnCheckbox",""],["class","btn btn-secondary cursor-pointer mb-0"],["name","mode-right"],["ngDefaultControl",""],["role","button"],["tabindex","0"]],[[2,"active",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,11)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,11).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,11)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,11)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.modeState.right=e)&&u),"click"===n&&(u=!1!==i.onModeState("right")&&u),u}),null,null)),t["\u0275did"](11,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](13,671744,null,0,Fn.NgModel,[[8,null],[8,null],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](15,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null),t["\u0275ncd"](null,1),t["\u0275ncd"](null,2),(l()(),t["\u0275eld"](18,0,null,null,12,"div",[["class","card-body d-flex p-0 flex-column h-100"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,11,"as-split",[["class","row h-100 preview edit-mode m-0 w-100"],["direction","horizontal"],["unit","pixel"]],null,null,null,Ke.b,Ke.a)),t["\u0275did"](20,4374528,[["split",4]],0,Je.c,[t.NgZone,t.ElementRef,t.ChangeDetectorRef,t.Renderer2],{direction:[0,"direction"],unit:[1,"unit"],useTransition:[2,"useTransition"]},null),(l()(),t["\u0275eld"](21,0,null,0,9,"as-split-area",[["class","d-flex flex-column"]],null,null,null,null,null)),t["\u0275did"](22,212992,null,0,Je.b,[t.NgZone,t.ElementRef,t.Renderer2,Je.c],null,null),(l()(),t["\u0275eld"](23,0,null,null,7,"as-split",[],null,[[null,"onDragEnd"],[null,"transitionEnd"]],(function(l,n,e){var t=!0,u=l.component;return"onDragEnd"===n&&(t=!1!==u.resize()&&t),"transitionEnd"===n&&(t=!1!==u.resize()&&t),t}),Ke.b,Ke.a)),t["\u0275did"](24,4374528,null,0,Je.c,[t.NgZone,t.ElementRef,t.ChangeDetectorRef,t.Renderer2],{useTransition:[0,"useTransition"]},{transitionEnd:"transitionEnd"}),(l()(),t["\u0275eld"](25,0,null,0,2,"as-split-area",[["class","d-flex mb-0 position-relative"]],null,null,null,null,null)),t["\u0275did"](26,212992,[["area0",4]],0,Je.b,[t.NgZone,t.ElementRef,t.Renderer2,Je.c],{size:[0,"size"]},null),t["\u0275ncd"](null,3),(l()(),t["\u0275eld"](28,0,null,0,2,"as-split-area",[["class","d-flex overflow-auto flex-column explorer-section"]],null,null,null,null,null)),t["\u0275did"](29,212992,[["area1",4]],0,Je.b,[t.NgZone,t.ElementRef,t.Renderer2,Je.c],{size:[0,"size"]},null),t["\u0275ncd"](null,4)],(function(l,n){var e=n.component;l(n,6,0,"mode-left",e.modeState.left),l(n,13,0,"mode-right",e.modeState.right),l(n,20,0,"horizontal","pixel",!0),l(n,22,0),l(n,24,0,!0),l(n,26,0,e.leftContentSize),l(n,29,0,100-e.leftContentSize)}),(function(l,n){var e=n.component;l(n,3,0,e.modeState.left,t["\u0275nov"](n,8).ngClassUntouched,t["\u0275nov"](n,8).ngClassTouched,t["\u0275nov"](n,8).ngClassPristine,t["\u0275nov"](n,8).ngClassDirty,t["\u0275nov"](n,8).ngClassValid,t["\u0275nov"](n,8).ngClassInvalid,t["\u0275nov"](n,8).ngClassPending),l(n,10,0,e.modeState.right,t["\u0275nov"](n,15).ngClassUntouched,t["\u0275nov"](n,15).ngClassTouched,t["\u0275nov"](n,15).ngClassPristine,t["\u0275nov"](n,15).ngClassDirty,t["\u0275nov"](n,15).ngClassValid,t["\u0275nov"](n,15).ngClassInvalid,t["\u0275nov"](n,15).ngClassPending)}))}var lt=e("bU/s"),nt=function(){function l(l,n,e){this.store=l,this.authService=n,this.dialogService=e,this.collection=new Gn.CollectionView,this.isChanged=!1,this.changed=new t.EventEmitter,this.destroy$=new xl.a}return l.prototype.ngOnInit=function(){var l=this;this.store.select(el).pipe(Object(Dl.a)(this.destroy$)).subscribe((function(n){l.dataObject=n,l.dataObject.objectType=J.c.View,l.initialSql=n.sqlText,"New"===n.objectName&&(l.dataObject.sqlText="create view test1.testView1"),l.sqlEditor&&"string"==typeof n.sqlText&&l.sqlEditor.setValue(n.sqlText,-1),l.collection.sourceCollection=Object(K.m)(n),l.dataObject.objectOwner||(l.dataObject.objectOwner=l.authService.user.userName,l.store.dispatch(new Pl(l.dataObject)))}))},l.prototype.ngAfterViewInit=function(){var l=this;this.sqlEditor=Object(lt.edit)(this.sqlElement.nativeElement,{mode:"ace/mode/sql",autoScrollEditorIntoView:!0,value:this.dataObject.sqlText||"0"}),this.sqlEditor.on("change",(function(){var n=l.sqlEditor.getValue();l.isChanged=l.initialSql!==n,l.dataObject.sqlText=n}))},l.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},l.prototype.onViewDelete=function(){var l=this;if(this.dataObject){var n=this.dataObject;this.dialogService.confirmation("Delete view "+n.objectOwner+"."+n.objectName+". Are you sure?").subscribe((function(n){n&&l.store.dispatch(new $l(l.dataObject))}))}},l.prototype.onSubmit=function(){this.store.dispatch(new kl(this.dataObject))},l}(),et=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function tt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-secondary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onViewDelete()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Delete"]))],null,null)}function ut(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","form-group col-sm-9 pr-0 pl-2 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["View Name"])),(l()(),t["\u0275eld"](3,0,null,null,7,"input",[["class","form-control"],["disabled","disabled"],["id","objectName"],["name","objectName"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,4)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,4).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,4)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,4)._compositionEnd(e.target.value)&&u),u}),null,null)),t["\u0275did"](4,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275did"](5,16384,null,0,Fn.RequiredValidator,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,Fn.NG_VALIDATORS,(function(l){return[l]}),[Fn.RequiredValidator]),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](8,671744,[["objectName",4]],0,Fn.NgModel,[[2,Fn.ControlContainer],[6,Fn.NG_VALIDATORS],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},null),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](10,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null)],(function(l,n){var e=n.component;l(n,5,0,""),l(n,8,0,"objectName","disabled",e.dataObject.objectName)}),(function(l,n){l(n,3,0,t["\u0275nov"](n,5).required?"":null,t["\u0275nov"](n,10).ngClassUntouched,t["\u0275nov"](n,10).ngClassTouched,t["\u0275nov"](n,10).ngClassPristine,t["\u0275nov"](n,10).ngClassDirty,t["\u0275nov"](n,10).ngClassValid,t["\u0275nov"](n,10).ngClassInvalid,t["\u0275nov"](n,10).ngClassPending)}))}function it(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,56,"form",[["class","d-flex flex-column h-100"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,2).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,2).onReset()&&u),u}),null,null)),t["\u0275did"](1,16384,null,0,Fn["\u0275angular_packages_forms_forms_z"],[],null,null),t["\u0275did"](2,4210688,[[1,4],["form",4]],0,Fn.NgForm,[[8,null],[8,null]],null,null),t["\u0275prd"](2048,null,Fn.ControlContainer,null,[Fn.NgForm]),t["\u0275did"](4,16384,null,0,Fn.NgControlStatusGroup,[[4,Fn.ControlContainer]],null,null),(l()(),t["\u0275eld"](5,0,null,null,10,"div",[["fxLayout","row"],["fxLayoutAlign","stretch center"]],null,null,null,null,null)),t["\u0275did"](6,671744,null,0,qn.f,[t.ElementRef,jl.i,[2,qn.o],jl.f],{fxLayout:[0,"fxLayout"]},null),t["\u0275did"](7,671744,null,0,qn.e,[t.ElementRef,jl.i,[2,qn.m],jl.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(l()(),t["\u0275eld"](8,0,null,null,2,"h5",[["class","col-sm-12 px-0"],["fxFlex",""]],null,null,null,null,null)),t["\u0275did"](9,671744,null,0,qn.b,[t.ElementRef,jl.i,jl.e,qn.l,jl.f],{fxFlex:[0,"fxFlex"]},null),(l()(),t["\u0275ted"](-1,null,["View Information"])),(l()(),t["\u0275eld"](11,0,null,null,4,"div",[["class","row mx-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,1,"button",[["class","btn btn-primary ml-auto mr-1"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onSubmit()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Save"])),(l()(),t["\u0275and"](16777216,null,null,1,null,tt)),t["\u0275did"](15,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](16,0,null,null,13,"div",[["class","row mx-0"],["style","max-width: 750px"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,10,"div",[["class","form-group col-sm-3 px-0 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,1,"label",[["for","objectOwner"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Owner"])),(l()(),t["\u0275eld"](20,0,null,null,7,"input",[["class","form-control"],["disabled","disabled"],["id","objectOwner"],["name","objectOwner"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,21)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,21).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,21)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,21)._compositionEnd(e.target.value)&&u),u}),null,null)),t["\u0275did"](21,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275did"](22,16384,null,0,Fn.RequiredValidator,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,Fn.NG_VALIDATORS,(function(l){return[l]}),[Fn.RequiredValidator]),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](25,671744,[["objectOwner",4]],0,Fn.NgModel,[[2,Fn.ControlContainer],[6,Fn.NG_VALIDATORS],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},null),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](27,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,ut)),t["\u0275did"](29,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](30,0,null,null,26,"app-split-content",[["class","h-100"]],null,null,null,Ye,Xe)),t["\u0275did"](31,114688,null,0,Ze,[],null,null),(l()(),t["\u0275eld"](32,0,[[2,0],["sqlEditor",1]],3,0,"div",[["class","h-100 p-2 w-100"],["left",""]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,[["fields",1]],4,17,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,16,"div",[["class","col fields-container d-flex h-100 px-0 mb-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,15,"wj-flex-grid",[["class","h-100"]],null,null,null,Wn.d,Wn.a)),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](37,4440064,[["grid",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{allowAddNew:[0,"allowAddNew"],allowDelete:[1,"allowDelete"],isReadOnly:[2,"isReadOnly"],itemsSource:[3,"itemsSource"]},null),t["\u0275prd"](2048,null,"WjComponent",null,[Pn.WjFlexGrid]),(l()(),t["\u0275eld"](39,0,null,0,2,"wj-flex-grid-column",[["binding","isKey"],["dataType","Boolean"],["header","IsKey"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](41,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"]},null),(l()(),t["\u0275eld"](42,0,null,0,2,"wj-flex-grid-column",[["binding","fieldName"],["header","Field Name"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](44,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],minWidth:[3,"minWidth"]},null),(l()(),t["\u0275eld"](45,0,null,0,2,"wj-flex-grid-column",[["binding","dataType"],["header","Field Data Type"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](47,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataMap:[0,"dataMap"],binding:[1,"binding"],header:[2,"header"]},null),(l()(),t["\u0275eld"](48,0,null,0,2,"wj-flex-grid-column",[["binding","size"],["dataType","Number"],["header","Size"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](50,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"]},null),(l()(),t["\u0275eld"](51,0,null,0,2,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](52,0,null,null,0,"i",[["class","fa fa-cogs fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" SQL editor "])),(l()(),t["\u0275eld"](54,0,null,1,2,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](55,0,null,null,0,"i",[["class","fa fa-table fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Fields "]))],(function(l,n){var e=n.component;l(n,6,0,"row"),l(n,7,0,"stretch center"),l(n,9,0,""),l(n,15,0,e.dataObject),l(n,22,0,""),l(n,25,0,"objectOwner","disabled",e.dataObject.objectOwner),l(n,29,0,"New"!==e.dataObject.objectName),l(n,31,0),l(n,37,0,!1,!1,!0,e.collection),l(n,41,0,"Boolean","isKey","IsKey",50),l(n,44,0,"fieldName","Field Name","*",50),l(n,47,0,e.dataTypes,"dataType","Field Data Type"),l(n,50,0,"Number","size","Size",70)}),(function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,12,0,!e.isChanged),l(n,20,0,t["\u0275nov"](n,22).required?"":null,t["\u0275nov"](n,27).ngClassUntouched,t["\u0275nov"](n,27).ngClassTouched,t["\u0275nov"](n,27).ngClassPristine,t["\u0275nov"](n,27).ngClassDirty,t["\u0275nov"](n,27).ngClassValid,t["\u0275nov"](n,27).ngClassInvalid,t["\u0275nov"](n,27).ngClassPending)}))}function ot(l){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{form:0}),t["\u0275qud"](671088640,2,{sqlElement:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,it)),t["\u0275did"](3,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,n.component.dataObject)}),null)}var rt=function(){function l(l){this.store=l}return l.prototype.ngOnInit=function(){this.dataObject$=this.store.select(X),this.loading$=this.store.select(il)},l}(),at=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function dt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"i",[["class","fa fa-cogs fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Structure "])),(l()(),t["\u0275eld"](2,0,null,null,7,"span",[],null,null,null,null,null)),t["\u0275prd"](512,null,S["\u0275NgClassImpl"],S["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](4,278528,null,0,S.NgClass,[S["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pod"](6,{changed:0}),t["\u0275did"](7,933888,null,0,wl.a,[t.ElementRef,jl.i,jl.f,S["\u0275NgClassImpl"],[6,S.NgClass]],{ngClass:[0,"ngClass"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pod"](9,{changed:0})],(function(l,n){var e=n.component,u=l(n,6,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform(e.isSQLChanged$)));l(n,4,0,u);var i=l(n,9,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(e.isSQLChanged$)));l(n,7,0,i)}),null)}function st(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function ct(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white flex-column"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["1 "])),(l()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","spinner-border"],["role","status"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Loading..."])),(l()(),t["\u0275and"](16777216,null,null,1,null,st)),t["\u0275did"](6,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.context.ngIf.messages)}),null)}function pt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"i",[["class","fa fa-table fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Data "]))],null,null)}function ft(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,24,"tabset",[["class","tabset-fx sql-object-tab"]],[[2,"tab-container",null]],null,null,In.b,In.a)),t["\u0275did"](1,180224,null,0,An.e,[An.f,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](2,0,null,0,22,"tab",[["class","h-100 position-relative"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](3,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](6,0,null,null,1,"app-rows-count",[],null,null,null,kn,Mn)),t["\u0275did"](7,245760,null,0,Ln,[E.m,Vn.a],null,null),(l()(),t["\u0275eld"](8,0,null,null,16,"tabset",[["class","tabset-fx"]],[[2,"tab-container",null]],null,null,In.b,In.a)),t["\u0275did"](9,180224,null,0,An.e,[An.f,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](10,0,null,0,8,"tab",[["class","position-relative"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](11,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],null,null),(l()(),t["\u0275and"](0,null,null,1,null,dt)),t["\u0275did"](13,16384,null,0,An.c,[t.TemplateRef,An.b],null,null),(l()(),t["\u0275eld"](14,0,null,null,1,"app-view-editor",[["class","w-100 h-100"],["left",""]],null,null,null,ot,et)),t["\u0275did"](15,4440064,null,0,nt,[E.m,Bn.a,bn.a],null,null),(l()(),t["\u0275and"](16777216,null,null,2,null,ct)),t["\u0275did"](17,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](19,0,null,0,5,"tab",[],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](20,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],null,null),(l()(),t["\u0275and"](0,null,null,1,null,pt)),t["\u0275did"](22,16384,null,0,An.c,[t.TemplateRef,An.b],null,null),(l()(),t["\u0275eld"](23,0,null,null,1,"app-table-data",[["class","h-100 d-flex"],["right",""]],null,null,null,qe,_e)),t["\u0275did"](24,245760,[["data",4]],0,Se,[E.m,ye.a,bn.a,Te.a],{isReadOnly:[0,"isReadOnly"]},null)],(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform(e.dataObject$))?t["\u0275unv"](n,3,0,t["\u0275nov"](n,5).transform(e.dataObject$)).objectName:"Create view"),l(n,7,0),l(n,11,0),l(n,15,0),l(n,17,0,t["\u0275unv"](n,17,0,t["\u0275nov"](n,18).transform(e.loading$))),l(n,20,0),l(n,24,0,!0)}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).clazz),l(n,2,0,t["\u0275nov"](n,3).id,t["\u0275nov"](n,3).active,t["\u0275nov"](n,3).addClass),l(n,8,0,t["\u0275nov"](n,9).clazz),l(n,10,0,t["\u0275nov"](n,11).id,t["\u0275nov"](n,11).active,t["\u0275nov"](n,11).addClass),l(n,19,0,t["\u0275nov"](n,20).id,t["\u0275nov"](n,20).active,t["\u0275nov"](n,20).addClass)}))}function mt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-sql-view-object",[],null,null,null,ft,at)),t["\u0275did"](1,114688,null,0,rt,[E.m],null,null)],(function(l,n){l(n,1,0)}),null)}var gt=t["\u0275ccf"]("app-sql-view-object",rt,mt,{},{},[]),ht=e("lTVp"),bt=(e("kiQV"),function(){function l(l,n,e){this.http=l,this.store=n,this.authService=e}return l.prototype.handleKeyboardEvent=function(l){"F5"===l.key&&(l.preventDefault(),l.stopImmediatePropagation(),this.onRun())},l.prototype.ngOnInit=function(){var l=this;this.store.select(cl).pipe(Object(Sn.a)()).subscribe((function(n){l.connection=n})),this.sqlEditor=Object(lt.edit)(this.sqlElement.nativeElement,{mode:"ace/mode/sql",autoScrollEditorIntoView:!0})},l.prototype.onRun=function(){var l=this;this.http.post("https://worksheets-web-api-test.azurewebsites.net/api/sql/"+this.connection+"/execute",{sql:this.sqlEditor.getSelectedText()||this.sqlEditor.getValue()},this.authService.getHttpHeaders()).pipe(Object(en.a)((function(n){return l.error="string"==typeof n.error?n.error:"Failed to query data.",Object(on.a)(null)}))).subscribe((function(n){n?(l.error=null,l.fields=n.fields.map((function(l){return{bindingName:l.fieldName,dataType:Kl.f[l.dataType],headerText:l.fieldName}})),l.data=Object(K.n)(n.table)):(l.fields=null,l.data=null)}))},l}()),vt=e("t/Na"),Ct=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function yt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"alert",[["type","danger"]],null,null,null,r.c,r.b)),t["\u0275did"](1,114688,null,0,ht.a,[ht.b,t.ChangeDetectorRef],{type:[0,"type"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Error:"])),(l()(),t["\u0275ted"](4,0,[" "," "]))],(function(l,n){l(n,1,0,"danger")}),(function(l,n){l(n,4,0,n.component.error)}))}function wt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"wj-flex-grid-column",[],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](2,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"]},null)],(function(l,n){l(n,2,0,n.context.$implicit.dataType,n.context.$implicit.bindingName,n.context.$implicit.headerText)}),null)}function jt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"wj-flex-grid",[["class","h-100"]],null,[[null,"itemsSourceChange"]],(function(l,n,e){var t=!0;return"itemsSourceChange"===n&&(t=!1!==(l.component.data=e)&&t),t}),Wn.d,Wn.a)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGrid]),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](3,4440064,[["flex",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{isReadOnly:[0,"isReadOnly"],itemsSource:[1,"itemsSource"]},null),(l()(),t["\u0275and"](16777216,null,0,1,null,wt)),t["\u0275did"](5,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,3,0,!0,e.data),l(n,5,0,e.fields)}),null)}function Ot(l){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{sqlElement:0}),(l()(),t["\u0275eld"](1,0,null,null,20,"tabset",[["class","tabset-fx"]],[[2,"tab-container",null]],null,null,In.b,In.a)),t["\u0275did"](2,180224,null,0,An.e,[An.f,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](3,0,null,0,18,"tab",[["class","h-100"],["heading","SQL query"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](4,212992,null,0,An.b,[An.e,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](5,0,null,null,16,"app-split-content",[["class","h-100"]],null,null,null,Ye,Xe)),t["\u0275did"](6,114688,null,0,Ze,[],null,null),(l()(),t["\u0275eld"](7,0,null,2,2,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,1,"button",[["class","btn btn-primary ml-auto mr-1"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onRun()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Run"])),(l()(),t["\u0275eld"](10,0,[[1,0],["sqlElement",1]],3,0,"div",[["class","w-100"],["left",""]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,4,4,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,yt)),t["\u0275did"](13,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,jt)),t["\u0275did"](15,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](16,0,null,0,2,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,0,"i",[["class","fa fa-cogs fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" SQL "])),(l()(),t["\u0275eld"](19,0,null,1,2,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,0,"i",[["class","fa fa-table fa-lg"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Data "]))],(function(l,n){var e=n.component;l(n,4,0,"SQL query"),l(n,6,0),l(n,13,0,e.error),l(n,15,0,e.fields&&e.data)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).clazz),l(n,3,0,t["\u0275nov"](n,4).id,t["\u0275nov"](n,4).active,t["\u0275nov"](n,4).addClass)}))}function Rt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-sql-query",[],null,[["document","keydown"]],(function(l,n,e){var u=!0;return"document:keydown"===n&&(u=!1!==t["\u0275nov"](l,1).handleKeyboardEvent(e)&&u),u}),Ot,Ct)),t["\u0275did"](1,114688,null,0,bt,[vt.c,E.m,Bn.a],null,null)],(function(l,n){l(n,1,0)}),null)}var St=t["\u0275ccf"]("app-sql-query",bt,Rt,{},{},[]),Tt=e("UMf5"),_t=e("cMwH"),Nt=e("Sb+d"),Et=e("Zefe"),xt=e("9nlD"),Dt=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.fields-container[_ngcontent-%COMP%]{height:calc(100% - 200px)}"]],data:{}});function It(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,20,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","form-group row m-0 w-50"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"label",[["class","col-sm-4 col-form-label"],["for","owner-name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Owner name"])),(l()(),t["\u0275eld"](4,0,null,null,6,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,5,"input",[["class","form-control"],["id","owner-name"],["placeholder","Owner"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,6)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,6).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,6)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,6)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.metaData.objectOwner=e)&&u),u}),null,null)),t["\u0275did"](6,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](8,671744,null,0,Fn.NgModel,[[8,null],[8,null],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](10,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null),(l()(),t["\u0275eld"](11,0,null,null,9,"div",[["class","form-group row m-0 w-50"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,1,"label",[["class","col-sm-4 col-form-label"],["for","object-name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Object name"])),(l()(),t["\u0275eld"](14,0,null,null,6,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,5,"input",[["class","form-control"],["id","object-name"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,16)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,16).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,16)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,16)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.metaData.objectName=e)&&u),u}),null,null)),t["\u0275did"](16,16384,null,0,Fn.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,Fn.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[l]}),[Fn.DefaultValueAccessor]),t["\u0275did"](18,671744,null,0,Fn.NgModel,[[8,null],[8,null],[8,null],[6,Fn.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fn.NgControl,null,[Fn.NgModel]),t["\u0275did"](20,16384,null,0,Fn.NgControlStatus,[[4,Fn.NgControl]],null,null)],(function(l,n){var e=n.component;l(n,8,0,e.metaData.objectOwner),l(n,18,0,e.metaData.objectName)}),(function(l,n){l(n,5,0,t["\u0275nov"](n,10).ngClassUntouched,t["\u0275nov"](n,10).ngClassTouched,t["\u0275nov"](n,10).ngClassPristine,t["\u0275nov"](n,10).ngClassDirty,t["\u0275nov"](n,10).ngClassValid,t["\u0275nov"](n,10).ngClassInvalid,t["\u0275nov"](n,10).ngClassPending),l(n,15,0,t["\u0275nov"](n,20).ngClassUntouched,t["\u0275nov"](n,20).ngClassTouched,t["\u0275nov"](n,20).ngClassPristine,t["\u0275nov"](n,20).ngClassDirty,t["\u0275nov"](n,20).ngClassValid,t["\u0275nov"](n,20).ngClassInvalid,t["\u0275nov"](n,20).ngClassPending)}))}function At(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"li",[["role","menuitem"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onTableSelect(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",".",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.objectOwner,n.context.$implicit.objectName)}))}function Ft(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"ul",[["aria-labelledby","button-basic"],["class","dropdown-menu"],["id","dropdown-basic"],["role","menu"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,At)),t["\u0275did"](2,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(e.tables$)))}),null)}function Lt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,11,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","object-name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Import data into"])),(l()(),t["\u0275eld"](3,16777216,null,null,8,"div",[["class","btn-group"],["dropdown",""]],[[2,"dropup",null],[2,"open",null],[2,"show",null]],null,null,null,null)),t["\u0275prd"](512,null,T.f,T.f,[]),t["\u0275did"](5,212992,null,0,T.c,[t.ElementRef,t.Renderer2,t.ViewContainerRef,_.a,T.a,T.f],null,null),(l()(),t["\u0275eld"](6,0,null,null,3,"button",[["aria-controls","dropdown-basic"],["class","btn btn-light dropdown-toggle"],["dropdownToggle",""],["id","button-basic"],["type","button"]],[[1,"aria-haspopup",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,7).onClick()&&u),u}),null,null)),t["\u0275did"](7,147456,null,0,T.g,[t.ChangeDetectorRef,T.c,t.ElementRef,t.Renderer2,T.f],null,null),(l()(),t["\u0275ted"](8,null,[" ",""])),(l()(),t["\u0275eld"](9,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Ft)),t["\u0275did"](11,16384,null,0,T.d,[T.f,t.ViewContainerRef,t.TemplateRef],null,null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,5,0)}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275nov"](n,5).dropup,t["\u0275nov"](n,5).isOpen,t["\u0275nov"](n,5).isOpen&&t["\u0275nov"](n,5).isBs4),l(n,6,0,!0,t["\u0275nov"](n,7).isDisabled,t["\u0275nov"](n,7).isOpen),l(n,8,0,e.getSelectedTableTitle())}))}function Vt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[""," rows loaded"])),t["\u0275ppd"](2,1)],null,(function(l,n){var e=n.component,u=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent,0),e.rowsLoaded));l(n,1,0,u)}))}function Mt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white flex-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","spinner-border"],["role","status"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Loading..."])),(l()(),t["\u0275eld"](4,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""]))],null,(function(l,n){l(n,5,0,n.component.progressMessage)}))}function kt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","d-flex position-absolute align-items-center w-100 h-100 spinner bg-white flex-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"alert",[["type","danger"]],null,null,null,r.c,r.b)),t["\u0275did"](2,114688,null,0,ht.a,[ht.b,t.ChangeDetectorRef],{type:[0,"type"]},null),(l()(),t["\u0275eld"](3,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Error:"])),(l()(),t["\u0275ted"](5,0,[" Verify file format (","). "]))],(function(l,n){l(n,2,0,"danger")}),(function(l,n){l(n,5,0,n.component.error)}))}function qt(l){return t["\u0275vid"](0,[t["\u0275pid"](0,S.DecimalPipe,[t.LOCALE_ID]),t["\u0275qud"](402653184,1,{grid:0}),(l()(),t["\u0275eld"](2,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"h4",[["class","modal-title pull-left"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Import CSV data"])),(l()(),t["\u0275eld"](5,0,null,null,2,"button",[["aria-label","Close"],["class","close pull-right"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.modalRef.hide()&&t),t}),null,null)),(l()(),t["\u0275eld"](6,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\xd7"])),(l()(),t["\u0275eld"](8,0,null,null,69,"div",[["class","modal-body px-4 d-flex flex-column h-100"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,15,"div",[["class","row m-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,1,"button",[["class","btn btn-primary mr-2"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.loadCSV()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Browse..."])),(l()(),t["\u0275eld"](12,0,null,null,6,"div",[["class","d-flex w-75"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,It)),t["\u0275did"](14,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,2,null,Lt)),t["\u0275did"](17,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](19,0,null,null,5,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,2,"input",[["class","form-check-input mr-2"],["id","create-tabel"],["type","checkbox"]],[[8,"checked",0],[8,"value",0]],[[null,"change"]],(function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.createTable$.next(e.target.checked)&&t),t}),null,null)),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](23,0,null,null,1,"label",[["class","form-check-label"],["for","create-tabel"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Create New Table"])),(l()(),t["\u0275eld"](25,0,null,null,52,"div",[["class","row flex-fill mx-0 flex-column my-2 h-100 position-relative"]],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,6,"div",[["fxLayout","row"]],null,null,null,null,null)),t["\u0275did"](27,671744,null,0,qn.f,[t.ElementRef,jl.i,[2,qn.o],jl.f],{fxLayout:[0,"fxLayout"]},null),(l()(),t["\u0275eld"](28,0,null,null,2,"h5",[["class","table-title"],["fxFlex",""]],null,null,null,null,null)),t["\u0275did"](29,671744,null,0,qn.b,[t.ElementRef,jl.i,jl.e,qn.l,jl.f],{fxFlex:[0,"fxFlex"]},null),(l()(),t["\u0275ted"](-1,null,["Fields Mappings"])),(l()(),t["\u0275and"](16777216,null,null,1,null,Vt)),t["\u0275did"](32,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](33,0,null,null,40,"div",[["class","fields-container d-flex flex-fill"]],null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,7,"wj-menu",[["style","display:none;"]],null,[[null,"itemClicked"]],(function(l,n,e){var t=!0;return"itemClicked"===n&&(t=!1!==l.component.onCtxMenuClicked()&&t),t}),ve.f,ve.b)),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](36,6012928,[["ctxMenu",4]],0,Ce.WjMenu,[t.ElementRef,t.Injector,[3,"WjComponent"]],{isButton:[0,"isButton"]},{itemClickedNg:"itemClicked"}),t["\u0275prd"](2048,null,"WjComponent",null,[Ce.WjMenu]),(l()(),t["\u0275eld"](38,16777216,null,0,3,"wj-menu-item",[],null,null,null,ve.e,ve.c)),t["\u0275prd"](6144,null,"WjComponent",null,[Ce.WjMenuItem]),t["\u0275did"](40,4440064,null,0,Ce.WjMenuItem,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ViewContainerRef,t.Renderer],{value:[0,"value"]},null),(l()(),t["\u0275ted"](-1,0,["Insert Field above"])),(l()(),t["\u0275eld"](42,0,null,null,31,"wj-flex-grid",[["class","h-100"]],null,[[null,"contextmenu"]],(function(l,n,e){var u=!0;return"contextmenu"===n&&(u=!1!==t["\u0275nov"](l,47).onContextMenu(e)&&u),u}),Wn.d,Wn.a)),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](44,4440064,[[1,4],["grid",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{allowAddNew:[0,"allowAddNew"],allowDelete:[1,"allowDelete"],itemsSource:[2,"itemsSource"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),t["\u0275did"](47,16384,null,0,Ce.WjContextMenu,[t.ElementRef],{wjContextMenu:[0,"wjContextMenu"]},null),t["\u0275prd"](2048,null,"WjComponent",null,[Pn.WjFlexGrid]),(l()(),t["\u0275eld"](49,0,null,0,3,"wj-flex-grid-column",[["binding","isKey"],["dataType","Boolean"],["header","IsKey"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](51,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"],allowSorting:[4,"allowSorting"],isReadOnly:[5,"isReadOnly"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](53,0,null,0,3,"wj-flex-grid-column",[["binding","fieldName"],["dataType","String"],["header","Table Field"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](55,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"],minWidth:[4,"minWidth"],allowSorting:[5,"allowSorting"],isReadOnly:[6,"isReadOnly"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](57,0,null,0,2,"wj-flex-grid-column",[["binding","sourceField"],["header","Source Field"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](59,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataMap:[0,"dataMap"],binding:[1,"binding"],header:[2,"header"],width:[3,"width"],minWidth:[4,"minWidth"],allowSorting:[5,"allowSorting"],isReadOnly:[6,"isReadOnly"]},null),(l()(),t["\u0275eld"](60,0,null,0,3,"wj-flex-grid-column",[["binding","dataType"],["header","Field Data Type"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](62,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataMap:[0,"dataMap"],binding:[1,"binding"],header:[2,"header"],allowSorting:[3,"allowSorting"],isReadOnly:[4,"isReadOnly"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](64,0,null,0,3,"wj-flex-grid-column",[["binding","size"],["dataType","Number"],["header","Size"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](66,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],header:[2,"header"],allowSorting:[3,"allowSorting"],isReadOnly:[4,"isReadOnly"],isRequired:[5,"isRequired"]},null),t["\u0275pid"](131072,S.AsyncPipe,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](68,0,null,0,2,"wj-flex-grid-column",[["binding","preprocessFunc"],["header","Preprocess Function"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](70,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataMap:[0,"dataMap"],binding:[1,"binding"],header:[2,"header"],allowSorting:[3,"allowSorting"],isReadOnly:[4,"isReadOnly"],isRequired:[5,"isRequired"]},null),(l()(),t["\u0275eld"](71,0,null,0,2,"wj-flex-grid-column",[["binding","preprocessParams"],["header","Parameters"]],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](73,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],allowSorting:[2,"allowSorting"],isReadOnly:[3,"isReadOnly"],isRequired:[4,"isRequired"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,Mt)),t["\u0275did"](75,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,kt)),t["\u0275did"](77,16384,null,0,S.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](78,0,null,null,7,"div",[["class","modal-footer flex-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](79,0,null,null,6,"div",[["class","row w-100 mx-0 px-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](80,0,null,null,1,"button",[["class","btn btn-light"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.previewData()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Preview Data"])),(l()(),t["\u0275eld"](82,0,null,null,1,"button",[["class","btn btn-primary ml-auto mr-2"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.import()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Import"])),(l()(),t["\u0275eld"](84,0,null,null,1,"button",[["class","btn btn-light"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.modalRef.hide()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Cancel"]))],(function(l,n){var e=n.component;l(n,14,0,t["\u0275unv"](n,14,0,t["\u0275nov"](n,15).transform(e.createTable$))),l(n,17,0,!t["\u0275unv"](n,17,0,t["\u0275nov"](n,18).transform(e.createTable$))),l(n,27,0,"row"),l(n,29,0,""),l(n,32,0,e.rowsLoaded),l(n,36,0,!0),l(n,40,0,"edit"),l(n,44,0,t["\u0275unv"](n,44,0,t["\u0275nov"](n,45).transform(e.createTable$)),t["\u0275unv"](n,44,1,t["\u0275nov"](n,46).transform(e.createTable$)),e.tableColumns),l(n,47,0,t["\u0275nov"](n,36)),l(n,51,0,"Boolean","isKey","IsKey",50,!1,!t["\u0275unv"](n,51,5,t["\u0275nov"](n,52).transform(e.createTable$))),l(n,55,0,"String","fieldName","Table Field","*",50,!1,!t["\u0275unv"](n,55,6,t["\u0275nov"](n,56).transform(e.createTable$))),l(n,59,0,e.sourceFields,"sourceField","Source Field","*",50,!1,!1),l(n,62,0,e.dataTypes,"dataType","Field Data Type",!1,!t["\u0275unv"](n,62,4,t["\u0275nov"](n,63).transform(e.createTable$))),l(n,66,0,"Number","size","Size",!1,!t["\u0275unv"](n,66,4,t["\u0275nov"](n,67).transform(e.createTable$)),!1),l(n,70,0,e.preprocessors,"preprocessFunc","Preprocess Function",!1,!1,!1),l(n,73,0,"preprocessParams","Parameters",!1,!1,!1),l(n,75,0,e.loading),l(n,77,0,e.error)}),(function(l,n){var e=n.component;l(n,20,0,t["\u0275unv"](n,20,0,t["\u0275nov"](n,21).transform(e.createTable$)),t["\u0275unv"](n,20,1,t["\u0275nov"](n,22).transform(e.createTable$))),l(n,80,0,!e.data||!e.data.length),l(n,82,0,!e.isValid)}))}function Wt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-import-csv",[],null,null,null,qt,Dt)),t["\u0275did"](1,114688,null,0,gn,[Te.a,Bn.a,Vn.a,E.m,xt.a,x.o,bn.a],null,null)],(function(l,n){l(n,1,0)}),null)}var $t=t["\u0275ccf"]("app-import-csv",gn,Wt,{modalRef:"modalRef"},{},[]),Pt=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]],data:{}});function Gt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"wj-flex-grid-column",[],null,null,null,Wn.c,Wn.b)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGridColumn]),t["\u0275did"](2,4440064,null,0,Pn.WjFlexGridColumn,[t.ElementRef,t.Injector,[3,"WjComponent"]],{dataType:[0,"dataType"],binding:[1,"binding"],format:[2,"format"],header:[3,"header"]},null)],(function(l,n){l(n,2,0,n.component.getColumnType(n.context.$implicit.dataType),n.context.$implicit.fieldName,"dd/MM/yyyy HH:mm:ss",n.context.$implicit.fieldName)}),null)}function Ut(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"h4",[["class","modal-title pull-left"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Preview result table"])),(l()(),t["\u0275eld"](3,0,null,null,2,"button",[["aria-label","Close"],["class","close pull-right"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.modalRef.hide()&&t),t}),null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\xd7"])),(l()(),t["\u0275eld"](6,0,null,null,6,"div",[["class","modal-body px-4 d-flex flex-column h-100"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,5,"wj-flex-grid",[["class","h-100"]],null,null,null,Wn.d,Wn.a)),t["\u0275prd"](6144,null,"WjComponent",null,[Pn.WjFlexGrid]),t["\u0275prd"](5120,null,Fn.NG_VALUE_ACCESSOR,(function(l){return[$n.WjValueAccessorFactory(l)]}),["WjComponent"]),t["\u0275did"](10,4440064,[["grid",4]],0,Pn.WjFlexGrid,[t.ElementRef,t.Injector,[3,"WjComponent"],t.ChangeDetectorRef],{allowAddNew:[0,"allowAddNew"],allowDelete:[1,"allowDelete"],isReadOnly:[2,"isReadOnly"],itemsSource:[3,"itemsSource"]},null),(l()(),t["\u0275and"](16777216,null,0,1,null,Gt)),t["\u0275did"](12,278528,null,0,S.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](13,0,null,null,3,"div",[["class","modal-footer flex-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,2,"div",[["class","row w-100 mx-0 px-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,1,"button",[["class","btn btn-light"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.modalRef.hide()&&t),t}),null,null)),(l()(),t["\u0275ted"](-1,null,["Close"]))],(function(l,n){var e=n.component;l(n,10,0,!1,!1,!0,e.data),l(n,12,0,e.config.fields)}),null)}function Bt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-preview-data",[],null,null,null,Ut,Pt)),t["\u0275did"](1,114688,null,0,dn,[],null,null)],(function(l,n){l(n,1,0)}),null)}var zt=t["\u0275ccf"]("app-preview-data",dn,Bt,{modalRef:"modalRef",config:"config"},{},[]),Ht=e("9bPP"),Qt=e("DQlY"),Kt=e("M2Lx"),Jt=e("Wf4p"),Zt=e("eDkP"),Xt=e("Fzqc"),Yt=e("uGex"),lu=e("v9Dh"),nu=e("ZYjt"),eu=e("s/lM"),tu=e("A5yv"),uu=function(){function l(l,n,e){this.store=l,this.dbService=n,this.router=e}return l.prototype.canActivate=function(){var l=this;return this.store.select(gl,"connectionName").pipe(Object(tn.a)((function(n){return n?l.dbService.getMyDbConnections().pipe(Object(en.a)((function(l){return Object(on.a)([])})),Object(Tn.a)((function(e){try{l.store.dispatch(new El(e))}catch(t){return!1}return e.map((function(l){return l.connectorName.toLowerCase()})).includes(n.toLowerCase())}))):(l.router.navigate(["/login"]),Object(on.a)(!1))})))},l}(),iu=e("yD1i"),ou=e("EscI"),ru=e("mPam"),au=e("EM0x"),du=e("3pJQ"),su=e("V9q+"),cu=e("CJFP"),pu=e("dWZg"),fu=e("/VYK"),mu=e("seP3"),gu=e("b716"),hu=e("4c35"),bu=e("qAlS"),vu=e("de3e"),Cu=e("UodH"),yu=e("FVSy"),wu=e("9It4"),ju=e("lLAP"),Ou=e("La40"),Ru=e("y4qS"),Su=e("BHnd"),Tu=e("SMsm"),_u=e("0etK"),Nu=e("PCNd"),Eu={list:[]};function xu(l,n){switch(void 0===l&&(l=Eu),n.type){case Sl.LOADED_SQL_OBJECTS:return N.__assign({},l,{list:n.payload});default:return l}}var Du={list:[],current:null};function Iu(l,n){switch(void 0===l&&(l=Du),n.type){case Sl.SELECT_CONNECTION:return N.__assign({},l,{current:n.payload});case Sl.LOADED_CONNECTIONS:return N.__assign({},l,{list:n.payload});default:return l}}var Au={fields:[],details:{},objectId:0,objectOwner:null,objectName:"New",objectType:"Table"},Fu={structure:N.__assign({},Au),data:null,currentState:N.__assign({},Au),changedData:null,filters:{limitRowsCount:1e3,skipRowsCount:0},loading:[],rowsCount:0};function Lu(l,n){switch(void 0===l&&(l=Fu),n.type){case Al.LOAD_SQL_OBJECT_STRUCTURE:return N.__assign({},l,{filters:{limitRowsCount:l.filters.limitRowsCount,skipRowsCount:0},structure:N.__assign({},Au,t=n.payload),currentState:N.__assign({},Au,t),loading:Array.from(new Set(l.loading.concat([J.b.STRUCTURE_LOAD])))});case Al.LOAD_SQL_OBJECT_DATA:return N.__assign({},l,{data:null,loading:Array.from(new Set(l.loading.filter((function(l){return l!==J.b.DATA_SAVE})).concat([J.b.DATA_LOAD])))});case Al.SAVE_SQL_OBJECT_DATA:return N.__assign({},l,{loading:Array.from(new Set(l.loading.concat([J.b.DATA_SAVE])))});case Al.LOAD_STATE_SQL_OBJECT:return N.__assign({},l,{loading:[J.b.STRUCTURE_LOAD,J.b.DATA_LOAD]});case Al.LOADED_SQL_OBJECT_STRUCTURE:var e=n.payload||N.__assign({},Au);return N.__assign({},l,{structure:e,loading:l.loading.filter((function(l){return l!==J.b.STRUCTURE_LOAD})),currentState:Object(K.f)(e)});case Al.LOADED_SQL_OBJECT_DATA:var t;return N.__assign({},l,{data:t=n.payload,loading:l.loading.filter((function(l){return l!==J.b.DATA_LOAD})),changedData:null});case Al.UPDATE_SQL_OBJECT:return N.__assign({},l,{currentState:n.payload});case Al.UPDATE_SQL_OBJECT_DATA:return N.__assign({},l,{changedData:n.payload});case Al.REFRESH_SQL_OBJECT:return e=l.structure,N.__assign({},l,{changedData:null,currentState:Object(K.f)(e)});case Al.SET_SQL_DATA_FILTERS:return N.__assign({},l,{filters:N.__assign({limitRowsCount:l.filters.limitRowsCount},n.payload)});case Al.SET_SQL_DATA_ROWS_COUNT:return N.__assign({},l,{rowsCount:n.payload});case Al.SET_SQL_DATA_FILTER_PROP:return N.__assign({},l,{filters:N.__assign({},l.filters,n.payload)});default:return l}}var Vu=e("AytR"),Mu=function(l){return l.ERROR="[DB Manager] error",l.SUCCESS="[DB Manager] success",l}({}),ku=function(){return function(l){this.payload=l,this.type=Mu.ERROR}}(),qu=function(){return function(l){this.payload=l,this.type=Mu.SUCCESS}}(),Wu=Vu.a.apiBaseUrl+"/sql",$u=function(){function l(l,n,e,t){var u=this;this.actions$=l,this.sqlDb=n,this.store=e,this.router=t,this.loadSqlObjectStructure$=this.actions$.pipe(Object(ye.d)(Al.LOAD_SQL_OBJECT_STRUCTURE),Object(D.a)(this.store),Object(tn.a)((function(l){var n=l[0].payload;return u.sqlDb.getObject(Wu+"/"+l[1].dbConnections.current,n.objectOwner,n.objectName,n.objectType).pipe(Object(Tn.a)((function(l){return new Ml(l)})),Object(en.a)((function(l){return Object(on.a)(new ku(l.message),new Ml(null))})))}))),this.loadSqlObjectData$=this.actions$.pipe(Object(ye.d)(Al.LOAD_SQL_OBJECT_DATA),Object(D.a)(this.store),Object(tn.a)((function(l){var n=l[0].payload,e=l[1];return u.sqlDb.selectSqlObjectData(e.dbConnections.current,n.objectOwner,n.objectName,e.sqlObject.filters).pipe(Object(Tn.a)((function(l){return new Ll(l)})),Object(en.a)((function(l){return Object(on.a)(new ku(l),new Ll(null))})))}))),this.saveSqlObjectStructure$=this.actions$.pipe(Object(ye.d)(Al.SAVE_SQL_OBJECT_STRUCTURE),Object(D.a)(this.store),Object(tn.a)((function(l){var n=l[0].payload,e=l[1];return Object(K.d)(n,e.sqlObject.structure)?[new Gl,{type:"Sql structure not changed"}]:u.sqlDb.generateObject(Wu+"/"+e.dbConnections.current,n).pipe(Object(tn.a)((function(l){return[new Tl(e.dbConnections.current),new Ml(l),new Gl,new qu("SQL Structure saved")]})),Object(en.a)((function(l){return Object(on.a)(new ku(Object(K.k)(l)))})))}))),this.saveSqlObjectData$=this.actions$.pipe(Object(ye.d)(Al.SAVE_SQL_OBJECT_DATA),Object(D.a)(this.store),Object(tn.a)((function(l){var n=l[1],e=n.sqlObject;return u.sqlDb.saveSqlObjectData(Wu+"/"+n.dbConnections.current,e.structure,{tableData:Object(K.o)(e.changedData)}).pipe(Object(tn.a)((function(){return[new Fl(e.structure),new qu("SQL Object data saved")]})),Object(en.a)((function(l){return Object(on.a)(new ku(l.error||"Server error"))})))}))),this.deleteSqlObject$=this.actions$.pipe(Object(ye.d)(Al.DELETE_SQL_OBJECT),Object(D.a)(this.store),Object(tn.a)((function(l){var n=l[1];return u.sqlDb.deleteObject(Wu+"/"+n.dbConnections.current,l[0].payload).pipe(Object(tn.a)((function(){return u.router.navigate(["/database",n.dbConnections.current]),[new qu("SQL Object deleted"),new Tl(n.dbConnections.current),new Ll(null),new Ml(null)]})),Object(en.a)((function(l){var n=[l.error.title,Object.values(l.error.errors)];return Object(on.a)(new ku(n.join("\n")))})))}))),this.loadedSqlObject$=this.actions$.pipe(Object(ye.d)(Al.LOADED_SQL_OBJECT_STRUCTURE),Object(D.a)(this.store),Object(Tn.a)((function(l){var n=l[0].payload,e=["/database",l[1].dbConnections.current];if(n){var t=n.objectOwner,i=n.objectName;n.objectType===J.c.View&&e.push("view"),e=e.concat([t,i]),u.router.navigate(e)}return{type:"Route checked after table structure update"}}))),this.limitRowsCount$=this.actions$.pipe(Object(ye.d)(Al.SET_SQL_DATA_FILTER_PROP),Object(D.a)(this.store),Object(Tn.a)((function(l){return new Fl(l[1].sqlObject.structure)})))}return N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"loadSqlObjectStructure$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"loadSqlObjectData$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"saveSqlObjectStructure$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"saveSqlObjectData$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"deleteSqlObject$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"loadedSqlObject$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"limitRowsCount$",void 0),l}(),Pu=function(){function l(l,n,e){var t=this;this.actions$=l,this.notificationService=n,this.sqlDb=e,this.loadSqlObjects$=this.actions$.pipe(Object(ye.d)(Sl.LOAD_SQL_OBJECTS),Object(tn.a)((function(l){return t.sqlDb.getSqlObjects(Vu.a.apiBaseUrl+"/sql/"+l.payload)})),Object(Tn.a)((function(l){return new _l(l)})),Object(en.a)((function(l){return Object(on.a)(new ku(l.message))}))),this.errorHandler$=this.actions$.pipe(Object(ye.d)(Mu.ERROR),Object(Tn.a)((function(l){var n=l.payload;return t.notificationService.open({message:n,type:Kl.b.DANGER}),{type:"[DB Manager] Shown Error: "+n}}))),this.successHandler$=this.actions$.pipe(Object(ye.d)(Mu.SUCCESS),Object(Tn.a)((function(l){var n=l.payload;return t.notificationService.open({message:n,type:Kl.b.SUCCESS}),{type:"[DB Manager] Shown Success: "+n}})))}return N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"loadSqlObjects$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"errorHandler$",void 0),N.__decorate([Object(ye.b)(),N.__metadata("design:type",Object)],l.prototype,"successHandler$",void 0),l}(),Gu=function(){return function(){}}(),Uu=e("9EwZ"),Bu=e("+Fm5"),zu=e("LhJ2"),Hu=e("OaQ9");e.d(n,"DatabaseManagerModuleNgFactory",(function(){return Qu}));var Qu=t["\u0275cmf"](u,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,o.a,o.b,r.a,a.a,d.a,s.h,s.g,c.a,c.e,c.f,c.g,c.h,c.i,c.j,c.b,c.c,c.d,p.a,f.g,f.i,f.a,f.d,f.f,f.h,f.j,f.e,f.k,f.b,f.c,m.a,g.a,h.a,b.a,v.a,C.a,y.a,Dn,Qe,gt,St,Tt.a,_t.a,Nt.a,Et.a,$t,zt]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,S.NgLocalization,S.NgLocaleLocalization,[t.LOCALE_ID,[2,S["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,Fn["\u0275angular_packages_forms_forms_o"],Fn["\u0275angular_packages_forms_forms_o"],[]),t["\u0275mpd"](4608,vt.k,vt.q,[S.DOCUMENT,t.PLATFORM_ID,vt.o]),t["\u0275mpd"](4608,vt.r,vt.r,[vt.k,vt.p]),t["\u0275mpd"](5120,vt.a,(function(l){return[l]}),[vt.r]),t["\u0275mpd"](4608,vt.n,vt.n,[]),t["\u0275mpd"](6144,vt.l,null,[vt.n]),t["\u0275mpd"](4608,vt.j,vt.j,[vt.l]),t["\u0275mpd"](6144,vt.b,null,[vt.j]),t["\u0275mpd"](4608,vt.f,vt.m,[vt.b,t.Injector]),t["\u0275mpd"](4608,vt.c,vt.c,[vt.f]),t["\u0275mpd"](4608,Ht.b,Ht.b,[]),t["\u0275mpd"](4608,An.f,An.f,[]),t["\u0275mpd"](4608,le.a,le.a,[]),t["\u0275mpd"](4608,ne.a,ne.a,[t.RendererFactory2,t.PLATFORM_ID]),t["\u0275mpd"](4608,_.a,_.a,[t.ComponentFactoryResolver,t.NgZone,t.Injector,ne.a,t.ApplicationRef]),t["\u0275mpd"](4608,Qt.a,Qt.a,[t.RendererFactory2,_.a]),t["\u0275mpd"](4608,T.f,T.f,[]),t["\u0275mpd"](5120,t.APP_BOOTSTRAP_LISTENER,(function(l,n){return[jl.j(l,n)]}),[S.DOCUMENT,t.PLATFORM_ID]),t["\u0275mpd"](4608,Fn.FormBuilder,Fn.FormBuilder,[]),t["\u0275mpd"](4608,Kt.c,Kt.c,[]),t["\u0275mpd"](4608,Jt.b,Jt.b,[]),t["\u0275mpd"](4608,Zt.c,Zt.c,[Zt.h,Zt.d,t.ComponentFactoryResolver,Zt.g,Zt.e,t.Injector,t.NgZone,S.DOCUMENT,Xt.b,[2,S.Location]]),t["\u0275mpd"](5120,Zt.i,Zt.j,[Zt.c]),t["\u0275mpd"](5120,Yt.a,Yt.b,[Zt.c]),t["\u0275mpd"](5120,lu.a,lu.b,[Zt.c]),t["\u0275mpd"](4608,nu.e,Jt.c,[[2,Jt.g],[2,Jt.l]]),t["\u0275mpd"](4608,ht.b,ht.b,[]),t["\u0275mpd"](4608,O.b,O.b,[t.PLATFORM_ID]),t["\u0275mpd"](4608,eu.c,eu.c,[[2,eu.d]]),t["\u0275mpd"](135680,E.k,E.k,[E.a,E.i,E.j,E.d]),t["\u0275mpd"](5120,tu.c,tu.d,[tu.j,tu.g]),t["\u0275mpd"](4608,uu,uu,[E.m,Vn.a,x.o]),t["\u0275mpd"](4608,bn.a,bn.a,[S.DOCUMENT,t.ComponentFactoryResolver,t.ApplicationRef,t.Injector]),t["\u0275mpd"](1073742336,S.CommonModule,S.CommonModule,[]),t["\u0275mpd"](1073742336,Fn["\u0275angular_packages_forms_forms_d"],Fn["\u0275angular_packages_forms_forms_d"],[]),t["\u0275mpd"](1073742336,Fn.FormsModule,Fn.FormsModule,[]),t["\u0275mpd"](1073742336,T.e,T.e,[]),t["\u0275mpd"](1073742336,Qt.e,Qt.e,[]),t["\u0275mpd"](1073742336,ht.c,ht.c,[]),t["\u0275mpd"](1073742336,An.d,An.d,[]),t["\u0275mpd"](1073742336,iu.b,iu.b,[]),t["\u0275mpd"](1073742336,Ht.c,Ht.c,[]),t["\u0275mpd"](1073742336,Je.a,Je.a,[]),t["\u0275mpd"](1073742336,O.a,O.a,[]),t["\u0275mpd"](1073742336,le.d,le.d,[]),t["\u0275mpd"](1073742336,x.s,x.s,[[2,x.y],[2,x.o]]),t["\u0275mpd"](1073742336,$n.WjDirectiveBaseModule,$n.WjDirectiveBaseModule,[]),t["\u0275mpd"](1073742336,Pn.WjGridModule,Pn.WjGridModule,[]),t["\u0275mpd"](1073742336,ou.WjGridFilterModule,ou.WjGridFilterModule,[]),t["\u0275mpd"](1073742336,eu.b,eu.b,[]),t["\u0275mpd"](1073742336,ru.c,ru.c,[]),t["\u0275mpd"](1073742336,vt.e,vt.e,[]),t["\u0275mpd"](1073742336,vt.d,vt.d,[]),t["\u0275mpd"](1073742336,au.d,au.d,[au.B]),t["\u0275mpd"](1073742336,jl.c,jl.c,[]),t["\u0275mpd"](1073742336,Xt.a,Xt.a,[]),t["\u0275mpd"](1073742336,qn.i,qn.i,[]),t["\u0275mpd"](1073742336,wl.c,wl.c,[]),t["\u0275mpd"](1073742336,du.a,du.a,[]),t["\u0275mpd"](1073742336,su.a,su.a,[[2,jl.g],t.PLATFORM_ID]),t["\u0275mpd"](1073742336,cu.a,cu.a,[]),t["\u0275mpd"](1073742336,Fn.ReactiveFormsModule,Fn.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,pu.b,pu.b,[]),t["\u0275mpd"](1073742336,fu.c,fu.c,[]),t["\u0275mpd"](1073742336,Kt.d,Kt.d,[]),t["\u0275mpd"](1073742336,mu.d,mu.d,[]),t["\u0275mpd"](1073742336,gu.b,gu.b,[]),t["\u0275mpd"](1073742336,hu.e,hu.e,[]),t["\u0275mpd"](1073742336,bu.b,bu.b,[]),t["\u0275mpd"](1073742336,Zt.f,Zt.f,[]),t["\u0275mpd"](1073742336,Jt.l,Jt.l,[[2,Jt.d],[2,nu.f]]),t["\u0275mpd"](1073742336,Jt.u,Jt.u,[]),t["\u0275mpd"](1073742336,Jt.s,Jt.s,[]),t["\u0275mpd"](1073742336,Jt.q,Jt.q,[]),t["\u0275mpd"](1073742336,Yt.d,Yt.d,[]),t["\u0275mpd"](1073742336,vu.d,vu.d,[]),t["\u0275mpd"](1073742336,vu.c,vu.c,[]),t["\u0275mpd"](1073742336,Cu.c,Cu.c,[]),t["\u0275mpd"](1073742336,yu.f,yu.f,[]),t["\u0275mpd"](1073742336,wu.d,wu.d,[]),t["\u0275mpd"](1073742336,ju.a,ju.a,[]),t["\u0275mpd"](1073742336,Ou.j,Ou.j,[]),t["\u0275mpd"](1073742336,Ru.p,Ru.p,[]),t["\u0275mpd"](1073742336,Su.l,Su.l,[]),t["\u0275mpd"](1073742336,lu.c,lu.c,[]),t["\u0275mpd"](1073742336,Tu.a,Tu.a,[]),t["\u0275mpd"](1073742336,_u.a,_u.a,[]),t["\u0275mpd"](1073742336,Nu.a,Nu.a,[]),t["\u0275mpd"](131584,E.a,E.a,[]),t["\u0275mpd"](131584,tu.l,tu.l,[]),t["\u0275mpd"](2048,E.h,null,[tu.l]),t["\u0275mpd"](256,E.z,void 0,[]),t["\u0275mpd"](1024,E.d,E.H,[E.z]),t["\u0275mpd"](256,E.B,{sqlObjects:xu,dbConnections:Iu,sqlObject:Lu,router:L},[]),t["\u0275mpd"](2048,E.C,null,[E.B]),t["\u0275mpd"](1024,E.c,E.G,[t.Injector,E.B,E.C]),t["\u0275mpd"](256,E.A,E.s,[]),t["\u0275mpd"](256,E.E,void 0,[]),t["\u0275mpd"](1024,E.r,E.y,[E.E]),t["\u0275mpd"](1024,E.F,E.J,[E.r]),t["\u0275mpd"](1024,E.e,(function(l,n){return[E.L(l),E.K(n)]}),[E.F,E.F]),t["\u0275mpd"](256,E.q,[],[]),t["\u0275mpd"](1024,E.D,E.I,[E.e,E.q]),t["\u0275mpd"](1024,E.f,E.v,[E.A,E.D]),t["\u0275mpd"](131584,E.g,E.g,[E.h,E.d,E.c,E.f]),t["\u0275mpd"](2048,E.i,null,[E.g]),t["\u0275mpd"](131584,E.j,E.j,[]),t["\u0275mpd"](1024,tu.j,tu.e,[]),t["\u0275mpd"](256,tu.h,{maxAge:25,logOnly:!0},[]),t["\u0275mpd"](1024,tu.g,tu.i,[tu.h]),t["\u0275mpd"](512,tu.k,tu.k,[tu.j,tu.g,tu.l]),t["\u0275mpd"](512,tu.a,tu.a,[tu.l,E.a,E.i,tu.k,E.j,t.ErrorHandler,E.d,tu.g]),t["\u0275mpd"](1024,E.l,tu.f,[tu.a]),t["\u0275mpd"](512,E.m,E.m,[E.l,E.a,E.g]),t["\u0275mpd"](1073742336,E.o,E.o,[E.a,E.i,E.j,E.m]),t["\u0275mpd"](512,V,M,[]),t["\u0275mpd"](256,W,{},[]),t["\u0275mpd"](1024,$,G,[W]),t["\u0275mpd"](1073742336,Q,Q,[E.m,x.o,V,t.ErrorHandler,$]),t["\u0275mpd"](512,ye.c,ye.c,[t.ErrorHandler,E.m]),t["\u0275mpd"](131584,ye.h,ye.h,[ye.c,E.m]),t["\u0275mpd"](512,ye.a,ye.a,[E.j]),t["\u0275mpd"](512,Pu,Pu,[ye.a,xt.a,Vn.a]),t["\u0275mpd"](512,$u,$u,[ye.a,Vn.a,E.m,x.o]),t["\u0275mpd"](1024,ye.g,ye.e,[Pu,$u]),t["\u0275mpd"](1073742336,ye.f,ye.f,[ye.c,ye.h,E.m,ye.g,[2,E.o],[2,E.n]]),t["\u0275mpd"](1073742336,Gu,Gu,[]),t["\u0275mpd"](1073742336,tu.b,tu.b,[]),t["\u0275mpd"](1073742336,Ce.WjInputModule,Ce.WjInputModule,[]),t["\u0275mpd"](1073742336,Uu.b,Uu.b,[]),t["\u0275mpd"](1073742336,Bu.WjChartModule,Bu.WjChartModule,[]),t["\u0275mpd"](1073742336,zu.WjChartAnimationModule,zu.WjChartAnimationModule,[]),t["\u0275mpd"](1073742336,Hu.a,Hu.a,[]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](256,ru.d,ru.e,[]),t["\u0275mpd"](256,vt.o,"XSRF-TOKEN",[]),t["\u0275mpd"](256,vt.p,"X-XSRF-TOKEN",[]),t["\u0275mpd"](256,T.a,{autoClose:!0,insideClick:!1},[]),t["\u0275mpd"](1024,x.m,(function(){return[[{path:":connectionName",component:_n,canActivate:[uu],children:[{component:We,path:""},{component:We,path:":ownerName/:objectName"},{component:rt,path:"view"},{component:rt,path:"view/:ownerName/:objectName"},{component:bt,path:"sql-query"}]}]]}),[])])}))}}]);
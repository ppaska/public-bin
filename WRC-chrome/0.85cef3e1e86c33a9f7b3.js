(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0SAw":function(e,t,i){"use strict";i.d(t,"a",(function(){return W})),i.d(t,"b",(function(){return Y})),i.d(t,"c",(function(){return U}));var n=i("mrSG"),r=i("eIep"),o=i("lMX+"),s=i("tcrU"),a=i("EPMZ"),l=i("vg9S"),c=i("1ua0"),h=i("eY+I"),u=i("TwVa"),d=i("LXVg"),p=i("4CEX"),f=i("0Qfz"),g=i("FQei"),m=i("bU/s"),b=i("M0ag"),_=i("a5yf"),y=i("efbX"),v=i("fXoL"),x=i("ZF+8"),w=i("UfhM"),S=i("ofXK"),C=i("dZIy"),O=i("fEDK"),j=i("RsUz"),T=i("3s35"),N=i("4D4C"),A=["grid"],M=["editorEl"];function E(e,t){if(1&e){var i=v.Ub();v.Tb(0,"a",21),v.bc("click",(function(){return v.vc(i),v.dc().selectPath(-1)})),v.Ec(1,"root"),v.Sb()}}function P(e,t){1&e&&(v.Tb(0,"a"),v.Ec(1,"root"),v.Sb())}function I(e,t){if(1&e){var i=v.Ub();v.Tb(0,"a",21),v.bc("click",(function(){v.vc(i);var e=v.dc().index;return v.dc().selectPath(e)})),v.Ec(1),v.Sb()}if(2&e){var n=v.dc().$implicit;v.Bb(1),v.Fc(n.path)}}function D(e,t){if(1&e&&(v.Tb(0,"span"),v.Ec(1),v.Sb()),2&e){var i=v.dc().$implicit;v.Bb(1),v.Fc(i.path)}}function k(e,t){if(1&e&&(v.Tb(0,"li",1),v.Cc(1,I,2,1,"a",2),v.Cc(2,D,2,1,"span",3),v.Sb()),2&e){var i=t.last;v.Bb(1),v.jc("ngIf",!i),v.Bb(1),v.jc("ngIf",i)}}function L(e,t){if(1&e){var i=v.Ub();v.Tb(0,"ul",22),v.Tb(1,"li",23),v.Tb(2,"a",24),v.bc("click",(function(){return v.vc(i),v.dc().exportToExcel()})),v.Ec(3,"Export to Excel"),v.Sb(),v.Sb(),v.Tb(4,"li",23),v.Tb(5,"a",24),v.bc("click",(function(){return v.vc(i),v.dc().exportToCSV()})),v.Ec(6,"Export to CSV"),v.Sb(),v.Sb(),v.Tb(7,"li",23),v.Tb(8,"a",24),v.bc("click",(function(){return v.vc(i),v.dc().saveToDatabase()})),v.Ec(9,"Save To Database"),v.Sb(),v.Sb(),v.Sb()}}function F(e,t){if(1&e){var i=v.Ub();v.Tb(0,"wj-input-date",28),v.bc("valueChange",(function(e){return v.vc(i),t.cell.value=e})),v.Sb()}if(2&e){var n=t.cell,r=v.dc(2).$implicit;v.jc("value",n.value)("isRequired",!1)("format",r.displayFormat)}}function R(e,t){1&e&&v.Cc(0,F,1,3,"ng-template",27),2&e&&v.jc("cellType","CellEdit")}function B(e,t){if(1&e){var i=v.Ub();v.Tb(0,"a",31),v.bc("click",(function(){v.vc(i);var e=v.dc().item,t=v.dc().$implicit;return v.dc().onDataSelect(e,t)})),v.Ec(1),v.Sb()}if(2&e){var n=v.dc().item,r=v.dc().$implicit,o=v.dc();v.Bb(1),v.Fc(o.formatToStr(n[r.bindingName]))}}function z(e,t){if(1&e){var i=v.Ub();v.Tb(0,"span",32),v.bc("dblclick",(function(){v.vc(i);var e=v.dc().item,t=v.dc().$implicit;return v.dc().openCell(e,t)})),v.Ec(1),v.Sb()}if(2&e){var n=v.dc().item,r=v.dc().$implicit,o=v.dc();v.Bb(1),v.Fc(o.formatValue(n,r))}}function V(e,t){if(1&e&&(v.Cc(0,B,2,1,"a",29),v.Cc(1,z,2,1,"ng-template",null,30,v.Dc)),2&e){var i=t.item,n=v.sc(2),r=v.dc().$implicit,o=v.dc();v.jc("ngIf",o.isObject(i[r.bindingName]))("ngIfElse",n)}}function H(e,t){if(1&e&&(v.Rb(0),v.Tb(1,"wj-flex-grid-column",25),v.Cc(2,R,1,1,void 0,3),v.Cc(3,V,3,2,"ng-template",26),v.Sb(),v.Qb()),2&e){var i=t.$implicit,n=v.dc();v.Bb(1),v.jc("header",n.getDefaultHeader(i))("dataType",i.dataType)("binding",i.bindingName)("width",i.width)("format",i.displayFormat),v.Bb(1),v.jc("ngIf",4===i.dataType)}}var X=function(e){return{"d-none":e}},G=function(e,t){return{"h-0":e,"h-100":t}},W=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.fileService=t,o.dialogService=i,o.authService=n,o.loginService=r,o.flex=l.b.hide,o.viewData={},o.isVertical=!0,o.objectPath=[],o.collectionView=new s.CollectionView,o}return Object(n.d)(t,e),Object.defineProperty(t.prototype,"itemsSource",{get:function(){var e=this;return this.componentDataModel!==this.data&&(this.data=this.componentDataModel,this.renderData(this.data),window.requestAnimationFrame((function(){e.grid.selectionMode=o.SelectionMode.CellRange,e.objectPath=[];var t=e.data?l.b.show:l.b.hide;e.flex!==t&&(e.flex=t)}))),this.collectionView},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){return Object(n.b)(this,void 0,void 0,(function(){var t,i=this;return Object(n.e)(this,(function(n){switch(n.label){case 0:return void 0===(t=this.properties).isReadOnly&&(t.isReadOnly=!0),this.gridIdentifier=t.host,this.gridIdentifier&&(this.localGridConfig=new d.a(this.gridIdentifier,this.uiModel.id||"object-explorer"),this.grid.addEventListener(this.grid.hostElement,"contextmenu",(function(e){var t=i.grid.hitTest(e);i.columnsToEdit=i.columnsList.filter((function(e,n){var r=i.grid.selection;return r.col2-r.col>0?i.grid.selection.col2>=n&&i.grid.selection.col<=n||t.col===n:i.grid.selection.col>=n&&i.grid.selection.col2<=n||t.col===n}))}))),this.grid.cellEditEnded.addHandler((function(e,t){var n=i.data;if(i.isVertical){i.objectPath.forEach((function(e){n=n[e.path]}));var r=i.collectionView.sourceCollection[t.row];0===t.col&&t.data!==r.fieldName&&delete n[t.data],n[r.fieldName]=void 0===r.row0?"":r.row0}else{var o=i.collectionView.sourceCollection;o.length&&o[0].valueTypeKey&&(o=o.map((function(e){return e.valueTypeKey}))),Object(h.t)(i.data,i.getJSONUtilsPath(),o)}i.changedDataModel.emit(i.data)})),this.grid.deletingRow.addHandler((function(e,t){var n=i.objectPath.reduce((function(e,t){return e[t.path]}),i.data);return i.isVertical?i.grid.selectedItems.forEach((function(e){delete n[e.fieldName]})):n.splice(t.row,1),i.changedDataModel.emit(i.data),!0})),[4,e.prototype.ngOnInit.call(this)];case 1:return n.sent(),[2]}}))}))},t.prototype.initEditor=function(e){var t=this;this.editor?this.editor.setValue(e,-1):setTimeout((function(){t.editor=Object(m.edit)(t.editorEl.nativeElement,{autoScrollEditorIntoView:!0,tabSize:2,useSoftTabs:!0,indentedSoftWrap:!0,readOnly:!0,theme:Object(b.f)(),value:e})}))},t.prototype.saveToDatabase=function(){this.authService.user?this.dialogService.open(c.e,{class:"modal-xl full-height"}).config=this.data:this.loginService.openDialog()},t.prototype.renderData=function(e){var t=this;if("string"==typeof e||"function"==typeof e)return this.stringData=String(e)||"[Empty string]",void this.initEditor(this.stringData);this.stringData=null;var i=e;e||(i=[]),Array.isArray(i)?(this.isVertical=!1,this.columnsList=this.getColumns(i),i=this.formatData(i)):(this.isVertical=!0,this.columnsList=this.getVerticalColumns(),i=this.formatToArray(i)),this.grid.selectionMode=o.SelectionMode.None,this.viewData=e,this.collectionView.sourceCollection=i,window.requestAnimationFrame((function(){t.grid.selectionMode=o.SelectionMode.CellRange,t.fieldsCount=null==i?void 0:i.length}))},t.prototype.onDataSelect=function(e,t){var i=e[t.bindingName];i&&"object"==typeof i&&(this.isVertical||this.objectPath.push({path:this.collectionView._idx,dataItem:this.grid.selectedRows[0]}),this.objectPath.push({path:this.isVertical?e.fieldName:t.bindingName,dataItem:this.grid.selectedRows[0].dataItem}),this.renderData(i))},t.prototype.onResizedColumn=function(e){this.localGridConfig&&this.localGridConfig.saveColumn(this.grid.columns[e.col].binding,{width:this.grid.columns[e.col].renderWidth},this.getPathStr())},t.prototype.onCtxMenuClicked=function(e){var t=this;if(this.localGridConfig){var i=this.dialogService.open(p.a,{class:"modal-lg"});i.config=this.columnsToEdit,i.init.pipe(Object(r.a)((function(){return i.component.save}))).subscribe((function(e){e.forEach((function(e){t.localGridConfig.saveColumn(e.bindingName,e,t.getPathStr())})),t.renderData(t.viewData)}))}else alert("Add host item property to UIModel")},t.prototype.getDefaultHeader=function(e){return e.headerText||Object(g.formatCamelStr)(e.bindingName)},t.prototype.getColumns=function(e){var t=this;if(void 0===e&&(e=[]),e.length){var i=e.reduce((function(e,t){return Object.assign(e,"object"==typeof t?t:{valueTypeKey:t}),e}),{});return Object.keys(i).map((function(e){return"valueTypeKey"===e?{headerText:"Value",bindingName:"valueTypeKey"}:{headerText:t.getColumnHeader(e)||e,bindingName:e,width:t.getColumnWidth(e),dataType:t.getColumnType(e),displayFormat:t.getColumnDisplayFormat(e)}}))}},t.prototype.openCell=function(e,t){var i=e[t.bindingName];"string"!=typeof i&&"function"!=typeof i||(this.objectPath.push({path:this.isVertical?e.fieldName:t.bindingName,dataItem:this.grid.selectedRows[0].dataItem}),this.renderData(i))},t.prototype.getVerticalColumns=function(){return[{headerText:this.getColumnHeader("fieldName"),bindingName:"fieldName",width:this.getColumnWidth("fieldName",220),dataType:this.getColumnType("fieldName"),displayFormat:this.getColumnDisplayFormat("fieldName")},{headerText:"Field Value",bindingName:"row0",width:this.getColumnWidth("row0","*"),dataType:this.getColumnType("row0")||s.DataType.String,displayFormat:this.getColumnDisplayFormat("row0")}]},t.prototype.selectPath=function(e){this.objectPath=this.objectPath.slice(0,e+1);var t=this.objectPath.reduce((function(e,t){return e[t.path]}),this.data);if(!t){var i=this.objectPath.slice(-1);t=i.length?i[0].dataItem[i[0].path]:null}this.renderData(t)},t.prototype.isObject=function(e){return Boolean(e&&"object"==typeof e&&Object.keys(e).length)},t.prototype.formatToArray=function(e){return Object(f.transpose)([Object.entries(e).reduce((function(e,t){return e[t[0]]=t[1],e}),{})])},t.prototype.formatData=function(e){return void 0===e&&(e=[]),e.length?e.map((function(e){return"object"!=typeof e&&(e={valueTypeKey:e}),e})):e},t.prototype.formatToStr=function(e){var t=JSON.stringify(e);return t.length>250?t.slice(0,250)+"...":t},t.prototype.formatValue=function(e,t){var i=t.displayFormat,n=e[t.bindingName];switch(t.dataType){case s.DataType.Date:return null===n?"":i?Object(s.format)("{val:"+i+"}",{val:new Date(n)}):new Date(n).toDateString();case s.DataType.Number:return isNaN(n)||""===n?n:i?Object(s.format)("{val:"+i+"}",{val:Number(n)}):Number(n);case s.DataType.Boolean:return Boolean(n)}if("object"==typeof n&&!(n instanceof Date)){if(Array.isArray(n)&&!n.length)return"[]";if(n&&Object.keys(n).length)return this.formatToStr(n);if(n)return"{}";if(null===n)return""}return n},t.prototype.exportToCSV=function(){this.fileService.exportToFile(this.collectionView.sourceCollection,{fileType:u.FileType.CSV,fileName:this.objectPath.map((function(e){return e.path})).join("-")||"object-explorer"})},t.prototype.exportToExcel=function(){a.FlexGridXlsxConverter.saveAsync(this.grid,{includeColumnHeaders:!0},"object-explorer.xlsx")},t.prototype.getColumnWidth=function(e,t){return void 0===t&&(t=150),this.localGridConfig&&this.localGridConfig.getColumn(e,this.getPathStr()).width||t},t.prototype.getColumnHeader=function(e){return this.localGridConfig&&this.localGridConfig.getColumn(e,this.getPathStr()).headerText},t.prototype.getColumnType=function(e){return this.localGridConfig&&this.localGridConfig.getColumn(e,this.getPathStr()).dataType},t.prototype.getColumnDisplayFormat=function(e){return this.localGridConfig&&this.localGridConfig.getColumn(e,this.getPathStr()).displayFormat},t.prototype.resize=function(){this.editor&&this.editor.resize()},t.prototype.getPathStr=function(){return this.objectPath.map((function(e){return e.path})).join("-")||"root"},t.prototype.getJSONUtilsPath=function(){return 0===this.objectPath.length?"$":"$."+this.objectPath.map((function(e){return"string"==typeof e.path?e.path.replace(/\//g,":"):e.path})).join("/")},t.\u0275fac=function(e){return new(e||t)(v.Nb(x.c),v.Nb(x.b),v.Nb(w.a),v.Nb(w.b))},t.\u0275cmp=v.Hb({type:t,selectors:[["dc-object-explorer"]],viewQuery:function(e,t){var i;1&e&&(v.Ac(A,!0),v.Jc(M,!0)),2&e&&(v.rc(i=v.cc())&&(t.grid=i.first),v.rc(i=v.cc())&&(t.editorEl=i.first))},hostVars:2,hostBindings:function(e,t){2&e&&v.Db(t.flex)},features:[v.yb],decls:25,vars:21,consts:[[1,"breadcrumb","px-0","py-2","mb-3"],[1,"breadcrumb-item"],[3,"click",4,"ngIf"],[4,"ngIf"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"ml-auto"],[1,"badge","badge-info","align-text-bottom"],["dropdown","","placement","top left",1,"position-relative","px-2"],["dropdownToggle","","type","button",1,"btn","py-0"],[1,"fa","fa-ellipsis-v"],["class","dropdown-menu export-menu","role","menu",4,"dropdownMenu"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],[3,"value"],[1,"h-100",3,"itemsSource","wjContextMenu","isReadOnly","headersVisibility","selectionMode","allowDelete","allowAddNew","ngClass","resizedColumn"],["grid",""],[4,"ngFor","ngForOf"],["filter",""],[3,"ngClass","resized"],[1,"h-100"],["editorEl",""],[3,"click"],["role","menu",1,"dropdown-menu","export-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[3,"header","dataType","binding","width","format"],["wjFlexGridCellTemplate","","cellType","Cell"],["wjFlexGridCellTemplate","",3,"cellType"],[3,"value","isRequired","format","valueChange"],["class","object-type",3,"click",4,"ngIf","ngIfElse"],["valueType",""],[1,"object-type",3,"click"],[1,"value-type",3,"dblclick"]],template:function(e,t){if(1&e){var i=v.Ub();v.Tb(0,"ol",0),v.Tb(1,"li",1),v.Cc(2,E,2,0,"a",2),v.Cc(3,P,2,0,"a",3),v.Sb(),v.Cc(4,k,3,2,"li",4),v.Tb(5,"li",5),v.Tb(6,"span",6),v.Ec(7),v.Sb(),v.Sb(),v.Tb(8,"li"),v.Tb(9,"span",7),v.Tb(10,"button",8),v.Ob(11,"i",9),v.Sb(),v.Cc(12,L,10,0,"ul",10),v.Sb(),v.Sb(),v.Sb(),v.Tb(13,"wj-menu",11,12),v.bc("itemClicked",(function(){v.vc(i);var e=v.sc(14);return t.onCtxMenuClicked(e)})),v.Tb(15,"wj-menu-item",13),v.Ec(16,"Edit Column"),v.Sb(),v.Sb(),v.Tb(17,"wj-flex-grid",14,15),v.bc("resizedColumn",(function(e){return t.onResizedColumn(e)})),v.Cc(19,H,4,6,"ng-container",16),v.Ob(20,"wj-flex-grid-filter",null,17),v.Sb(),v.Tb(22,"div",18),v.bc("resized",(function(){return t.resize()})),v.Ob(23,"div",19,20),v.Sb()}if(2&e){var n=v.sc(14);v.Bb(2),v.jc("ngIf",t.objectPath.length),v.Bb(1),v.jc("ngIf",!t.objectPath.length),v.Bb(1),v.jc("ngForOf",t.objectPath),v.Bb(3),v.Gc("",t.fieldsCount," rows"),v.Bb(6),v.jc("isButton",!0),v.Bb(2),v.jc("value","edit"),v.Bb(2),v.jc("itemsSource",t.itemsSource)("wjContextMenu",n)("isReadOnly",t.properties.isReadOnly)("headersVisibility","All")("selectionMode",t.properties.selectionMode||0)("allowDelete",t.properties.allowDelete||!1)("allowAddNew",t.properties.allowAddNew||!1)("ngClass",v.nc(16,X,t.stringData)),v.Bb(2),v.jc("ngForOf",t.columnsList),v.Bb(3),v.jc("ngClass",v.oc(18,G,!t.stringData,t.stringData))}},directives:[S.m,S.l,C.a,C.d,C.b,O.d,O.e,j.a,O.a,S.k,T.a,N.b,j.c,j.b,O.b],styles:['[_ngcontent-%COMP%]:root{--bg:#fff;--body-bg:#e4e5e6;--header-bg:#ebedef;--color:#4f5d73;--border-color:#c4c9d0;--wj-alt:#f7f7f7;--form-input-bg:#fff;--form-input-color:#768192;--nav-link-color:#8a93a2;--secondary-color:#c4c9d0;--opacity:0.05;--hover:"#f0f3f5"}a.object-type[_ngcontent-%COMP%], a.object-type[_ngcontent-%COMP%]:hover, ol[_ngcontent-%COMP%]   li.breadcrumb-item[_ngcontent-%COMP%]:not(:last-child)   a[_ngcontent-%COMP%]{color:#20a8d8;cursor:pointer}.value-type[_ngcontent-%COMP%], a.object-type[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.export-menu[_ngcontent-%COMP%]{left:auto!important;right:0!important}']}),t}(h.a),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),Object(n.c)([Object(h.r)({description:"Determines whether the user can modify cell. Default true",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_grid.flexgrid.html#isreadonly"}),Object(n.f)("design:type",Boolean)],t.prototype,"isReadOnly",void 0),Object(n.c)([Object(h.r)({description:"Defines identifier for grid",example:"grid-id-1"}),Object(n.f)("design:type",String)],t.prototype,"host",void 0),Object(n.c)([Object(h.r)({description:"Specifies constants that define the selection behavior.",example:"5",link:"https://www.grapecity.com/wijmo/api/enums/wijmo_grid.selectionmode.html"}),Object(n.f)("design:type",Number)],t.prototype,"selectionMode",void 0),Object(n.c)([Object(h.r)({description:"Specifies if row can be deleted. Default false",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_grid.flexgrid.html#allowdelete"}),Object(n.f)("design:type",Boolean)],t.prototype,"allowDelete",void 0),Object(n.c)([Object(h.r)({description:"Specifies if new row can be added. Default false",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_grid.flexgrid.html#allowaddnew"}),Object(n.f)("design:type",Boolean)],t.prototype,"allowAddNew",void 0),t}(y.b),U={name:"grid-object-explorer",packageName:"rest-client",label:"Object Explorer",category:"Data",description:"Data Grid Object Explorer component",itemProperties:Y,component:W,example:{title:"Grid Object Explorer example",uiModel:'<grid-object-explorer binding="$.tableData"></grid-object-explorer>',dataModel:{tableData:[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"}]}},children:!1};h.c.set("selectionMode",{name:"selectionMode",values:Object(_.b)(o.SelectionMode)})},"4CEX":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("mrSG"),r=i("fXoL"),o=(i("K3ix"),i("tcrU")),s=i("3Pt+"),a=i("ofXK");function l(e,t){if(1&e&&(r.Tb(0,"option",23),r.Ec(1),r.Sb()),2&e){var i=t.$implicit;r.jc("value",i.value),r.Bb(1),r.Fc(i.label)}}function c(e,t){if(1&e&&(r.Tb(0,"option",23),r.Ec(1),r.Sb()),2&e){var i=t.$implicit;r.jc("value",i.value),r.Bb(1),r.Fc(i.label)}}function h(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",7),r.Tb(1,"label",24),r.Ec(2,"Display Format"),r.Sb(),r.Tb(3,"div",9),r.Tb(4,"select",25),r.bc("ngModelChange",(function(e){return r.vc(i),r.dc().columnInfo.displayFormat=e})),r.Cc(5,c,2,2,"option",15),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=r.dc();r.Bb(4),r.jc("ngModel",n.columnInfo.displayFormat),r.Bb(1),r.jc("ngForOf",n.dateFormats)}}function u(e,t){if(1&e&&(r.Tb(0,"option",23),r.Ec(1),r.Sb()),2&e){var i=t.$implicit;r.jc("value",i.value),r.Bb(1),r.Fc(i.label)}}function d(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",7),r.Tb(1,"label",24),r.Ec(2,"Display format"),r.Sb(),r.Tb(3,"div",9),r.Tb(4,"select",25),r.bc("ngModelChange",(function(e){return r.vc(i),r.dc().columnInfo.displayFormat=e})),r.Cc(5,u,2,2,"option",15),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=r.dc();r.Bb(4),r.jc("ngModel",n.columnInfo.displayFormat),r.Bb(1),r.jc("ngForOf",n.numberFormats)}}var p=function(){function e(){this.save=new r.p,this.columnInfo={headerText:null,width:null,dataType:o.DataType.String,displayFormat:null,bindingName:null},this.dataTypes=[{label:"String",value:o.DataType.String},{label:"Number",value:o.DataType.Number},{label:"Date",value:o.DataType.Date},{label:"Boolean",value:o.DataType.Boolean}],this.dateFormats=[{label:"(dd/MM/yyyy) 24/08/2015",value:"dd/MM/yyyy"},{label:"(MM/dd/yyyy) 08/24/2015",value:"MM/dd/yyyy"},{label:"(yyyy-MM-dd) 2015-08-24",value:"yyyy-MM-dd"},{label:"(dd/MMM/yyyy) 24/Aug/2015",value:"dd/MMM/yyyy"},{label:"(MMM/dd/yyyy) Aug/24/2015",value:"MMM/dd/yyyy"},{label:"(dd/MM/yyyy HH:mm:ss) 24/08/2015 15:28:22",value:"dd/MM/yyyy HH:mm:ss"},{label:"(MM/dd/yyyy HH:mm:ss) 08/24/2015 15:28:22",value:"MM/dd/yyyy HH:mm:ss"},{label:"(yyyy-MM-dd HH:mm:ss) 2015-08-24 15:28:22",value:"yyyy-MM-dd HH:mm:ss"},{label:"(dd/MMM/yyyy HH:mm:ss) 24/Aug/2015 15:28:22",value:"dd/MMM/yyyy HH:mm:ss"},{label:"(MMM/dd/yyyy HH:mm:ss) Aug/24/2015 15:28:22",value:"MMM/dd/yyyy HH:mm:ss"}],this.numberFormats=[{label:"12,345",value:"n0"},{label:"12,345.6",value:"n1"},{label:"12,345.67",value:"n2"},{label:"12,345.689",value:"n3"},{label:"12,345.6891",value:"n4"},{label:"12345",value:"f0"},{label:"1234.1",value:"g1"},{label:"1234.12",value:"g2"},{label:"1234.123",value:"g3"},{label:"1234.1234",value:"g4"},{label:"1234.12345",value:"g5"},{label:"1234.123456",value:"g6"}]}return e.prototype.ngOnInit=function(){var e=this;Object.keys(this.columnInfo).forEach((function(t){e.columnInfo[t]="dataType"===t?Number(e.config[0][t]):"bindingName"===t?e.config.map((function(e){return e.bindingName})).join(", "):e.config[0][t]}))},e.prototype.saveColumn=function(){var e=this;this.save.emit(this.config.map((function(t,i){var r=Object(n.a)(Object(n.a)({},e.columnInfo),{bindingName:t.bindingName});return 0!==i&&delete r.headerText,r}))),this.modalRef.hide()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Hb({type:e,selectors:[["app-column-editor"]],inputs:{config:"config",modalRef:"modalRef"},outputs:{save:"save"},decls:39,vars:8,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column"],[1,"position-relative","h-100"],["columnInfoForm","ngForm"],[1,"form-group","row","mx-0","mb-2"],["for","field-name",1,"col-form-label","px-0","col-5","col-lg-3"],[1,"flex-fill","ml-2"],["type","text","disabled","disabled","placeholder","Enter column header text","name","fieldName","id","field-name",1,"form-control",3,"ngModel","ngModelChange"],["for","header-text",1,"col-form-label","px-0","col-5","col-lg-3"],["type","text","placeholder","Enter column header text","name","headerText","id","header-text",1,"form-control",3,"ngModel","ngModelChange"],["for","data-type-selection",1,"col-form-label","px-0","col-5","col-lg-3"],["id","data-type-selection","name","data-type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row mx-0 mb-2",4,"ngIf"],["for","column-width",1,"col-form-label","px-0","col-5","col-lg-3"],["type","number","placeholder","Enter column width","name","name","id","column-width",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-primary","ml-auto","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-light",3,"click"],[3,"value"],["for","display-format-selection",1,"col-form-label","px-0","col-5","col-lg-3"],["id","display-format-selection","name","display-format",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(r.Tb(0,"div",0),r.Tb(1,"h4",1),r.Ec(2,"Column editor"),r.Sb(),r.Tb(3,"button",2),r.bc("click",(function(){return t.modalRef.hide()})),r.Tb(4,"span",3),r.Ec(5,"\xd7"),r.Sb(),r.Sb(),r.Sb(),r.Tb(6,"div",4),r.Tb(7,"div",5),r.Tb(8,"form",null,6),r.Tb(10,"div",7),r.Tb(11,"label",8),r.Ec(12,"Field Name"),r.Sb(),r.Tb(13,"div",9),r.Tb(14,"input",10),r.bc("ngModelChange",(function(e){return t.columnInfo.bindingName=e})),r.Sb(),r.Sb(),r.Sb(),r.Tb(15,"div",7),r.Tb(16,"label",11),r.Ec(17,"Header Text"),r.Sb(),r.Tb(18,"div",9),r.Tb(19,"input",12),r.bc("ngModelChange",(function(e){return t.columnInfo.headerText=e})),r.Sb(),r.Sb(),r.Sb(),r.Tb(20,"div",7),r.Tb(21,"label",13),r.Ec(22,"Data Type"),r.Sb(),r.Tb(23,"div",9),r.Tb(24,"select",14),r.bc("ngModelChange",(function(e){return t.columnInfo.dataType=e})),r.Cc(25,l,2,2,"option",15),r.Sb(),r.Sb(),r.Sb(),r.Cc(26,h,6,2,"div",16),r.Cc(27,d,6,2,"div",16),r.Tb(28,"div",7),r.Tb(29,"label",17),r.Ec(30,"Width"),r.Sb(),r.Tb(31,"div",9),r.Tb(32,"input",18),r.bc("ngModelChange",(function(e){return t.columnInfo.width=e})),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(33,"div",19),r.Tb(34,"div",20),r.Tb(35,"button",21),r.bc("click",(function(){return t.saveColumn()})),r.Ec(36,"Save"),r.Sb(),r.Tb(37,"button",22),r.bc("click",(function(){return t.modalRef.hide()})),r.Ec(38,"Cancel"),r.Sb(),r.Sb(),r.Sb()),2&e){var i=r.sc(9);r.Bb(14),r.jc("ngModel",t.columnInfo.bindingName),r.Bb(5),r.jc("ngModel",t.columnInfo.headerText),r.Bb(5),r.jc("ngModel",t.columnInfo.dataType),r.Bb(1),r.jc("ngForOf",t.dataTypes),r.Bb(1),r.jc("ngIf",4==t.columnInfo.dataType),r.Bb(1),r.jc("ngIf",2==t.columnInfo.dataType),r.Bb(5),r.jc("ngModel",t.columnInfo.width),r.Bb(3),r.jc("disabled",!i.valid)}},directives:[s.t,s.j,s.k,s.b,s.i,s.l,s.r,a.l,a.m,s.n,s.m,s.s],encapsulation:2}),e}()},"4D4C":function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return c}));var n=i("vuIU"),r=i("1OyB"),o=i("ofXK"),s=i("fXoL"),a=i("h9Sk"),l=function e(t,i,n,o,s){Object(r.a)(this,e),this.element=t,this.newWidth=i,this.newHeight=n,this.oldWidth=o,this.oldHeight=s},c=function(){var e=function(){function e(t){Object(r.a)(this,e),this.element=t,this.resized=new s.p}return Object(n.a)(e,[{key:"ngOnInit",value:function(){var e=this;a.ResizeSensor&&(this.resizeSensor=new a.ResizeSensor(this.element.nativeElement,(function(){return e.onResized()})))}},{key:"ngOnDestroy",value:function(){this.resizeSensor&&this.resizeSensor.detach()}},{key:"onResized",value:function(){var e=this.element.nativeElement.clientWidth,t=this.element.nativeElement.clientHeight;if(e!==this.oldWidth||t!==this.oldHeight){var i=new l(this.element,e,t,this.oldWidth,this.oldHeight);this.oldWidth=this.element.nativeElement.clientWidth,this.oldHeight=this.element.nativeElement.clientHeight,this.resized.emit(i)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Nb(s.n))},e.\u0275dir=s.Ib({type:e,selectors:[["","resized",""]],outputs:{resized:"resized"}}),e}(),h=function(){var e=function e(){Object(r.a)(this,e)};return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e}()},BOKU:function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return v}));var n,r=i("fXoL"),o=i("ofXK"),s=i("3Pt+"),a=i("JIag"),l=i("tcrU"),c=i("I7ZH"),h=["*"],u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},p=function(e,t){return function(i,n){t(i,n,e)}},f={selector:"wj-tree-view",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","childItemsPath","displayMemberPath","imageMemberPath","checkedMemberPath","isContentHtml","showCheckboxes","autoCollapse","isAnimated","isReadOnly","allowDragging","checkOnClick","expandOnClick","expandOnLoad","lazyLoadFunction","itemsSource","selectedItem","selectedNode","checkedItems"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","invalidInputNg: invalidInput","itemsSourceChangedNg: itemsSourceChanged","loadingItemsNg: loadingItems","loadedItemsNg: loadedItems","itemClickedNg: itemClicked","selectedItemChangedNg: selectedItemChanged","selectedItemChangePC: selectedItemChange","selectedNodeChangePC: selectedNodeChange","checkedItemsChangedNg: checkedItemsChanged","checkedItemsChangePC: checkedItemsChange","isCollapsedChangingNg: isCollapsedChanging","isCollapsedChangedNg: isCollapsedChanged","isCheckedChangingNg: isCheckedChanging","isCheckedChangedNg: isCheckedChanged","formatItemNg: formatItem","dragStartNg: dragStart","dragOverNg: dragOver","dropNg: drop","dragEndNg: dragEnd","nodeEditStartingNg: nodeEditStarting","nodeEditStartedNg: nodeEditStarted","nodeEditEndingNg: nodeEditEnding","nodeEditEndedNg: nodeEditEnded"],providers:[{provide:s.h,useFactory:a.b,multi:!0,deps:["WjComponent"]}]},g=function(e){function t(t,i,n){var r=e.call(this,a.a.getHostElement(t,i))||this;return r.isInitialized=!1,r._wjBehaviour=a.a.attach(r,t,i,n),r.created(),r}var i;return u(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.addEventListener=function(t,i,n,r){var o=this;void 0===r&&(r=!1);var s=a.a,l=s.ngZone;l&&s.outsideZoneEvents[i]?l.runOutsideAngular((function(){e.prototype.addEventListener.call(o,t,i,n,r)})):e.prototype.addEventListener.call(this,t,i,n,r)},t.meta={outputs:f.outputs,changeEvents:{selectedItemChanged:["selectedItem","selectedNode"],checkedItemsChanged:["checkedItems"]}},t.\u0275fac=function(e){return new(e||t)(r.Nb(r.n),r.Nb(r.t),r.Nb("WjComponent",12))},t.\u0275cmp=r.Hb({type:t,selectors:[["wj-tree-view"]],inputs:{asyncBindings:"asyncBindings",wjModelProperty:"wjModelProperty",isDisabled:"isDisabled",childItemsPath:"childItemsPath",displayMemberPath:"displayMemberPath",imageMemberPath:"imageMemberPath",checkedMemberPath:"checkedMemberPath",isContentHtml:"isContentHtml",showCheckboxes:"showCheckboxes",autoCollapse:"autoCollapse",isAnimated:"isAnimated",isReadOnly:"isReadOnly",allowDragging:"allowDragging",checkOnClick:"checkOnClick",expandOnClick:"expandOnClick",expandOnLoad:"expandOnLoad",lazyLoadFunction:"lazyLoadFunction",itemsSource:"itemsSource",selectedItem:"selectedItem",selectedNode:"selectedNode",checkedItems:"checkedItems"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",invalidInputNg:"invalidInput",itemsSourceChangedNg:"itemsSourceChanged",loadingItemsNg:"loadingItems",loadedItemsNg:"loadedItems",itemClickedNg:"itemClicked",selectedItemChangedNg:"selectedItemChanged",selectedItemChangePC:"selectedItemChange",selectedNodeChangePC:"selectedNodeChange",checkedItemsChangedNg:"checkedItemsChanged",checkedItemsChangePC:"checkedItemsChange",isCollapsedChangingNg:"isCollapsedChanging",isCollapsedChangedNg:"isCollapsedChanged",isCheckedChangingNg:"isCheckedChanging",isCheckedChangedNg:"isCheckedChanged",formatItemNg:"formatItem",dragStartNg:"dragStart",dragOverNg:"dragOver",dropNg:"drop",dragEndNg:"dragEnd",nodeEditStartingNg:"nodeEditStarting",nodeEditStartedNg:"nodeEditStarted",nodeEditEndingNg:"nodeEditEnding",nodeEditEndedNg:"nodeEditEnded"},features:[r.Ab([{provide:"WjComponent",useExisting:Object(r.V)((function(){return i}))}].concat(f.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=d([,p(0,Object(r.r)(r.n)),p(1,Object(r.r)(r.t)),p(2,Object(r.r)("WjComponent")),p(2,Object(r.L)()),p(2,Object(r.D)())],t)}(c.TreeView),m={selector:"wj-tab-panel",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","isAnimated","autoSwitch","selectedIndex","selectedTab"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","invalidInputNg: invalidInput","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedTabChangePC: selectedTabChange"],providers:[{provide:s.h,useFactory:a.b,multi:!0,deps:["WjComponent"]}]},b=(function(e){function t(t,i,n){var r=e.call(this,a.a.getHostElement(t,i))||this;return r.isInitialized=!1,r._wjBehaviour=a.a.attach(r,t,i,n),r.created(),r}var i;u(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this.tabs.beginUpdate(),this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this.selectedIndex<0&&this.tabs.length&&(this.selectedIndex=0),this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.addEventListener=function(t,i,n,r){var o=this;void 0===r&&(r=!1);var s=a.a,l=s.ngZone;l&&s.outsideZoneEvents[i]?l.runOutsideAngular((function(){e.prototype.addEventListener.call(o,t,i,n,r)})):e.prototype.addEventListener.call(this,t,i,n,r)},t.prototype.ngAfterContentInit=function(){var e=this.selectedIndex,t=this.tabs;e>-1&&e<t.length&&l.addClass(t[e].header,"wj-state-active"),t.endUpdate()},t.meta={outputs:m.outputs,changeEvents:{selectedIndexChanged:["selectedIndex","selectedTab"]}},t.\u0275fac=function(e){return new(e||t)(r.Nb(r.n),r.Nb(r.t),r.Nb("WjComponent",12))},t.\u0275cmp=r.Hb({type:t,selectors:[["wj-tab-panel"]],inputs:{asyncBindings:"asyncBindings",wjModelProperty:"wjModelProperty",isDisabled:"isDisabled",isAnimated:"isAnimated",autoSwitch:"autoSwitch",selectedIndex:"selectedIndex",selectedTab:"selectedTab"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",invalidInputNg:"invalidInput",selectedIndexChangedNg:"selectedIndexChanged",selectedIndexChangePC:"selectedIndexChange",selectedTabChangePC:"selectedTabChange"},features:[r.Ab([{provide:"WjComponent",useExisting:Object(r.V)((function(){return i}))}].concat(m.providers))],ngContentSelectors:h,decls:2,vars:0,template:function(e,t){1&e&&(r.ic(),r.Tb(0,"div"),r.hc(1),r.Sb())},encapsulation:2}),t=i=d([,p(0,Object(r.r)(r.n)),p(1,Object(r.r)(r.t)),p(2,Object(r.r)("WjComponent")),p(2,Object(r.L)()),p(2,Object(r.D)())],t)}(c.TabPanel),{selector:"wj-tab",template:"<ng-content></ng-content>",inputs:["wjProperty","isDisabled","isVisible"],outputs:["initialized"],providers:[]}),_=(function(e){function t(t,i,n){var r=e.call(this,document.createElement("div"),document.createElement("div"))||this;return r.isInitialized=!1,r.wjProperty="tabs",r._wjBehaviour=a.a.attach(r,t,i,n),r.created(),r}var i;u(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.ngAfterContentInit=function(){var e=this._wjBehaviour.elementRef.nativeElement;this._setParts(e.children[0],e.children[1])},t.meta={outputs:b.outputs},t.\u0275fac=function(e){return new(e||t)(r.Nb(r.n),r.Nb(r.t),r.Nb("WjComponent",12))},t.\u0275cmp=r.Hb({type:t,selectors:[["wj-tab"]],inputs:{wjProperty:"wjProperty",isDisabled:"isDisabled",isVisible:"isVisible"},outputs:{initialized:"initialized"},features:[r.Ab([{provide:"WjComponent",useExisting:Object(r.V)((function(){return i}))}].concat(b.providers))],ngContentSelectors:h,decls:1,vars:0,template:function(e,t){1&e&&(r.ic(),r.hc(0))},encapsulation:2}),t=i=d([,p(0,Object(r.r)(r.n)),p(1,Object(r.r)(r.t)),p(2,Object(r.r)("WjComponent")),p(2,Object(r.L)()),p(2,Object(r.D)())],t)}(c.Tab),{selector:"wj-accordion",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","isAnimated","autoSwitch","selectedIndex","selectedPane","showIcons","allowCollapseAll","allowExpandMany"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","invalidInputNg: invalidInput","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange"],providers:[{provide:s.h,useFactory:a.b,multi:!0,deps:["WjComponent"]}]}),y=(function(e){function t(t,i,n){var r=e.call(this,a.a.getHostElement(t,i))||this;return r.isInitialized=!1,r._wjBehaviour=a.a.attach(r,t,i,n),r.created(),r}var i;u(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this.panes.beginUpdate(),this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this.selectedIndex<0&&this.panes.length&&(this.selectedIndex=0),this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.addEventListener=function(t,i,n,r){var o=this;void 0===r&&(r=!1);var s=a.a,l=s.ngZone;l&&s.outsideZoneEvents[i]?l.runOutsideAngular((function(){e.prototype.addEventListener.call(o,t,i,n,r)})):e.prototype.addEventListener.call(this,t,i,n,r)},t.prototype.ngAfterContentInit=function(){var e=this.selectedIndex,t=this.panes;e>-1&&e<t.length&&l.addClass(t[e].header,"wj-state-active"),t.endUpdate()},t.meta={outputs:_.outputs,changeEvents:{selectedIndexChanged:["selectedIndex"]}},t.\u0275fac=function(e){return new(e||t)(r.Nb(r.n),r.Nb(r.t),r.Nb("WjComponent",12))},t.\u0275cmp=r.Hb({type:t,selectors:[["wj-accordion"]],inputs:{asyncBindings:"asyncBindings",wjModelProperty:"wjModelProperty",isDisabled:"isDisabled",isAnimated:"isAnimated",autoSwitch:"autoSwitch",selectedIndex:"selectedIndex",selectedPane:"selectedPane",showIcons:"showIcons",allowCollapseAll:"allowCollapseAll",allowExpandMany:"allowExpandMany"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",invalidInputNg:"invalidInput",selectedIndexChangedNg:"selectedIndexChanged",selectedIndexChangePC:"selectedIndexChange"},features:[r.Ab([{provide:"WjComponent",useExisting:Object(r.V)((function(){return i}))}].concat(_.providers))],ngContentSelectors:h,decls:2,vars:0,template:function(e,t){1&e&&(r.ic(),r.Tb(0,"div"),r.hc(1),r.Sb())},encapsulation:2}),t=i=d([,p(0,Object(r.r)(r.n)),p(1,Object(r.r)(r.t)),p(2,Object(r.r)("WjComponent")),p(2,Object(r.L)()),p(2,Object(r.D)())],t)}(c.Accordion),{selector:"wj-accordion-pane",template:"<ng-content></ng-content>",inputs:["wjProperty","isDisabled","isVisible"],outputs:["initialized"],providers:[]}),v=(function(e){function t(t,i,n){var r=e.call(this,document.createElement("div"),document.createElement("div"))||this;return r.isInitialized=!1,r.wjProperty="panes",r._wjBehaviour=a.a.attach(r,t,i,n),r.created(),r}var i;u(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.ngAfterContentInit=function(){var e=this._wjBehaviour.elementRef.nativeElement;this._setParts(e.children[0],e.children[1])},t.meta={outputs:y.outputs},t.\u0275fac=function(e){return new(e||t)(r.Nb(r.n),r.Nb(r.t),r.Nb("WjComponent",12))},t.\u0275cmp=r.Hb({type:t,selectors:[["wj-accordion-pane"]],inputs:{wjProperty:"wjProperty",isDisabled:"isDisabled",isVisible:"isVisible"},outputs:{initialized:"initialized"},features:[r.Ab([{provide:"WjComponent",useExisting:Object(r.V)((function(){return i}))}].concat(y.providers))],ngContentSelectors:h,decls:1,vars:0,template:function(e,t){1&e&&(r.ic(),r.hc(0))},encapsulation:2}),t=i=d([,p(0,Object(r.r)(r.n)),p(1,Object(r.r)(r.t)),p(2,Object(r.r)("WjComponent")),p(2,Object(r.L)()),p(2,Object(r.D)())],t)}(c.AccordionPane),function(){function e(){}return e.\u0275mod=r.Lb({type:e}),e.\u0275inj=r.Kb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e}())},EPMZ:function(e,t,i){"use strict";i.r(t),i.d(t,"softDetail",(function(){return V})),i.d(t,"softMultiRow",(function(){return H})),i.d(t,"softTransposed",(function(){return X})),i.d(t,"softTransposedMultiRow",(function(){return G})),i.d(t,"FlexGridXlsxConverter",(function(){return Y})),i.d(t,"XlsxFormatItemEventArgs",(function(){return U})),i.d(t,"_StyleCache",(function(){return q}));var n={};i.r(n),i.d(n,"Workbook",(function(){return f})),i.d(n,"WorkSheet",(function(){return g})),i.d(n,"WorkbookColumn",(function(){return m})),i.d(n,"WorkbookRow",(function(){return b})),i.d(n,"WorkbookCell",(function(){return _})),i.d(n,"WorkbookFrozenPane",(function(){return y})),i.d(n,"WorkbookStyle",(function(){return v})),i.d(n,"WorkbookFont",(function(){return x})),i.d(n,"WorkbookFill",(function(){return w})),i.d(n,"WorkbookBorder",(function(){return S})),i.d(n,"WorkbookBorderSetting",(function(){return C})),i.d(n,"DefinedName",(function(){return O})),i.d(n,"WorkbookTable",(function(){return j})),i.d(n,"WorkbookTableColumn",(function(){return T})),i.d(n,"WorkbookTableStyle",(function(){return N})),i.d(n,"WorkbookTableCommonStyle",(function(){return A})),i.d(n,"WorkbookTableBandedStyle",(function(){return M})),i.d(n,"WorkbookTableBorder",(function(){return E})),i.d(n,"WorkbookTextRun",(function(){return P})),i.d(n,"HAlign",(function(){return s})),i.d(n,"VAlign",(function(){return l})),i.d(n,"BorderStyle",(function(){return c})),i.d(n,"useJSZip",(function(){return D})),i.d(n,"_xlsx",(function(){return k})),i.d(n,"_SyncPromise",(function(){return R})),i.d(n,"_map",(function(){return B}));var r={};i.r(r),i.d(r,"softDetail",(function(){return V})),i.d(r,"softMultiRow",(function(){return H})),i.d(r,"softTransposed",(function(){return X})),i.d(r,"softTransposedMultiRow",(function(){return G})),i.d(r,"FlexGridXlsxConverter",(function(){return Y})),i.d(r,"XlsxFormatItemEventArgs",(function(){return U})),i.d(r,"_StyleCache",(function(){return q}));var o,s,a,l,c,h=i("tcrU"),u=i("lMX+"),d=i("xOOu"),p=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),f=function(){function e(){this._externalCancellation=null}return Object.defineProperty(e.prototype,"sheets",{get:function(){return null==this._sheets&&(this._sheets=[]),this._sheets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styles",{get:function(){return null==this._styles&&(this._styles=[]),this._styles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definedNames",{get:function(){return null==this._definedNames&&(this._definedNames=[]),this._definedNames},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorThemes",{get:function(){return null==this._colorThemes&&(this._colorThemes=[]),this._colorThemes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reservedContent",{get:function(){return null==this._reservedContent&&(this._reservedContent={}),this._reservedContent},set:function(e){this._reservedContent=e},enumerable:!0,configurable:!0}),e.prototype.save=function(t){var i=k.save(this);return t&&e._saveToFile(i.base64,t,!(!this._reservedContent||!this._reservedContent.macros)),i.base64},e.prototype.saveAsync=function(t,i,n,r){var o=this;this.cancelAsync((function(){o._cs=Object(h.isFunction)(o._externalCancellation)?o._externalCancellation():new R,k.saveAsync(o,o._cs,n,r).then((function(n){t&&e._saveToFile(n,t,!(!o._reservedContent||!o._reservedContent.macros)),o._cs=null,Object(h.isFunction)(r)&&r(100),i&&i(n)}),(function(){return o._cs=null}))}))},e.prototype.cancelAsync=function(e){var t=this;this._cs?(this._cs.cancel(),setTimeout((function(){t._cs=null,Object(h.isFunction)(e)&&e()}),100)):Object(h.isFunction)(e)&&e()},e.prototype.load=function(e){var t=k.load(this._getBase64String(e));this._deserialize(t),t=null},e.prototype.loadAsync=function(e,t,i){var n=this;k.loadAsync(n._getBase64String(e)).then((function(e){n._deserialize(e),e=null,t(n)})).catch(i)},e.prototype._serialize=function(){var e={sheets:[]};return e.sheets=this._serializeWorkSheets(),this._styles&&this._styles.length>0&&(e.styles=this._serializeWorkbookStyles()),this._reservedContent&&(e.reservedContent=this._reservedContent),null!=this.activeWorksheet&&!isNaN(this.activeWorksheet)&&this.activeWorksheet>=0&&(e.activeWorksheet=this.activeWorksheet),this.application&&(e.application=this.application),this.company&&(e.company=this.company),null!=this.created&&(e.created=this.created),this.creator&&(e.creator=this.creator),this.lastModifiedBy&&(e.lastModifiedBy=this.lastModifiedBy),null!=this.modified&&(e.modified=this.modified),this._definedNames&&this._definedNames.length>0&&(e.definedNames=this._serializeDefinedNames()),this._colorThemes&&this._colorThemes.length>0&&(e.colorThemes=this._colorThemes.slice()),e},e.prototype._deserialize=function(e){this._deserializeWorkSheets(e.sheets),e.styles&&e.styles.length>0&&this._deserializeWorkbookStyles(e.styles),this.activeWorksheet=e.activeWorksheet,this.application=e.application,this.company=e.company,this.created=e.created,this.creator=e.creator,this.lastModifiedBy=e.lastModifiedBy,this.modified=e.modified,this.reservedContent=e.reservedContent,e.definedNames&&e.definedNames.length>0&&this._deserializeDefinedNames(e.definedNames),e.colorThemes&&e.colorThemes.length>0&&(this._colorThemes=e.colorThemes.slice())},e.prototype._addWorkSheet=function(e,t){null==this._sheets&&(this._sheets=[]),null==t||isNaN(t)?this._sheets.push(e):this._sheets[t]=e},e._saveToFile=function(t,i,n){var r,o,s,a,l,c,h=window.document,u=n?"xlsm":"xlsx",d="xlsm"===u?"application/vnd.ms-excel.sheet.macroEnabled.12":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if((o=i.lastIndexOf("."))<0)i+="."+u;else{if(0===o)throw"Invalid file name.";(""===(r=i.substring(o+1))||r!==u)&&(i+="."+u)}s=new Blob([e._base64DecToArr(t)],{type:d}),navigator.msSaveBlob?navigator.msSaveBlob(s,i):URL.createObjectURL?(l=h.createElement("a"),c=function(e){var t=h.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},l.download=i,l.href=URL.createObjectURL(s),c(l),l=null):(a=new FileReader,l=h.createElement("a"),c=function(e){var t=h.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},a.onload=function(){l.download=i,l.href=a.result,c(l),l=null},a.readAsDataURL(s))},e.prototype._getBase64String=function(e){var t;if(null==e||0===e.length)throw"Invalid xlsx file content.";return-1!==(t=e.search(/base64,/i))&&(e=e.substring(t+7)),e},e.toXlsxDateFormat=function(e){var t;if(1===e.length)switch(e){case"r":case"R":return"ddd, dd MMM yyyy HH:mm:ss &quot;GMT&quot;";case"u":return"yyyy-MM-dd&quot;T&quot;HH:mm:ss&quot;Z&quot;";case"o":case"O":t=(t=h.culture.Globalize.calendar.patterns[e]).replace(/f+k/gi,"000");break;default:t=h.culture.Globalize.calendar.patterns[e]}return t||(t=e),t=t.replace(/"/g,"").replace(/tt/,"AM/PM").replace(/t/,"A/P").replace(/M+/gi,(function(e){return e.toLowerCase()})).replace(/g+y+/gi,(function(e){return e.substring(0,e.indexOf("y"))+"e"})),/FY|Q/i.test(t)?"General":t},e.toXlsxNumberFormat=function(e){var t,i,n,r,o,s,a,l=-1,c=e?e.toLowerCase():"",u=[];if(/^[ncpfdg]\d*.*,*$/.test(c)&&(i=this._formatMap[t=c[0]]),i){if(r=c.split(","),"c"===t&&("\u200b"===(n=(a=e?e.match(/([a-z])(\d*)(,*)(.*)/i):null)&&a[4]?a[4]:h.culture.Globalize.numberFormat.currency.symbol)&&(n=""),i=i.replace(/\{1\}/g,n)),c.length>1?l=parseInt(r[0].substr(1)):"d"!==t&&(l=2),!isNaN(l))for(s=0;s<l;s++)u.push(0);for(s=0;s<r.length-1;s++)u.push(",");o=i.replace(/\{0\}/g,u.length>0?"d"===t?u.join(""):(!isNaN(l)&&l>0?".":"")+u.join(""):"d"===t?"0":"")}else o=c;return o},e.fromXlsxFormat=function(e){var t,i,n,r,o,s,a,l,c,u=[],d=h.culture.Globalize.numberFormat.currency.symbol;if(!e||"General"===e)return[""];for(i=(e=e.replace(/;@/g,"").replace(/&quot;?/g,"")).split(";"),r=0;r<i.length;r++){if(/[hsmy\:]/i.test(n=i[r]))t=n.replace(/\[\$\-.+\]/g,"").replace(/(\\)(.)/g,"$2").replace(/H+/g,(function(e){return e.toLowerCase()})).replace(/m+/g,(function(e){return e.toUpperCase()})).replace(/S+/g,(function(e){return e.toLowerCase()})).replace(/AM\/PM/gi,"tt").replace(/A\/P/gi,"t").replace(/\.000/g,".fff").replace(/\.00/g,".ff").replace(/\.0/g,".f").replace(/\\[\-\s,]/g,(function(e){return e.substring(1)})).replace(/Y+/g,(function(e){return e.toLowerCase()})).replace(/D+/g,(function(e){return e.toLowerCase()})).replace(/M+:?|:?M+/gi,(function(e){return e.indexOf(":")>-1?e.toLowerCase():e})).replace(/g+e/gi,(function(e){return e.substring(0,e.length-1)+"yy"}));else if(s=n.lastIndexOf("."),a=n.lastIndexOf("0"),l=n.lastIndexOf(","),t=n.search(/\[\$([^\-\]]+)[^\]]*\]/)>-1||n.indexOf(d)>-1&&-1===n.search(/\[\$([\-\]]+)[^\]]*\]/)?"c":"%"===n[e.length-1]?"p":"n",t+=s>-1&&s<a?n.substring(s,a).length:"0",/^0+,*$/.test(n)&&(t="d"+((a=n.lastIndexOf("0"))+1)),l>-1&&a>-1&&a<l)for(c=n.substring(a+1,l+1).split(""),o=0;o<c.length;o++)t+=",";u.push(t)}return u},e._parseCellFormat=function(e,t){return t?this.toXlsxDateFormat(e):this.toXlsxNumberFormat(e)},e._parseExcelFormat=function(e){if(null!=e){var t=e&&e.style&&e.style.format;if((null!=e.value||t)&&!isNaN(e.value)){var i=Object(h.isNumber)(e.value);return!i||t&&"General"!==t?e.isDate||Object(h.isDate)(e.value)||i||""===e.value||e.isNumber?this.fromXlsxFormat(t)[0]:t:Object(h.isInt)(e.value)?"d":"f2"}}},e.xlsxAddress=function(e,t,i,n,r){var o=i?"$":"",s=null==n?o:n?"$":"";return!0===r?"":(isNaN(t)?"":s+this._numAlpha(t))+(!1===r||isNaN(e)?"":o+(e+1).toString())},e.tableAddress=function(e){var t=e&&/^((\$?)([A-Za-z]+))?((\$?)(\d+))?$/.exec(e),i={};return t?(t[3]&&(i.col=this._alphaNum(t[3]),i.absCol=!!t[2]),t[6]&&(i.row=+t[6]-1,i.absRow=!!t[5]),i):null},e._parseHAlignToString=function(e){switch(e){case s.Left:return"left";case s.Center:return"center";case s.Right:return"right";case s.Justify:return"justify";default:return"general"}},e._parseStringToHAlign=function(e){var t=e?e.toLowerCase():"";return"left"===t?s.Left:"center"===t?s.Center:"right"===t?s.Right:"justify"===t?s.Justify:s.General},e._parseVAlignToString=function(e){switch(e){case l.Bottom:return"bottom";case l.Center:return"center";case l.Top:return"top";default:return null}},e._parseStringToVAlign=function(e){var t=e?e.toLowerCase():"";return"top"===t?l.Top:"center"===t?l.Center:"bottom"===t?l.Bottom:null},e._parseBorderTypeToString=function(e){switch(e){case c.Dashed:return"dashed";case c.Dotted:return"dotted";case c.Double:return"double";case c.Hair:return"hair";case c.Medium:return"medium";case c.MediumDashDotDotted:return"mediumDashDotDot";case c.MediumDashDotted:return"mediumDashDot";case c.MediumDashed:return"mediumDashed";case c.SlantedMediumDashDotted:return"slantDashDot";case c.Thick:return"thick";case c.Thin:return"thin";case c.ThinDashDotDotted:return"dashDotDot";case c.ThinDashDotted:return"dashDot";case c.None:default:return"none"}},e._parseStringToBorderType=function(e){return"dashed"===e?c.Dashed:"dotted"===e?c.Dotted:"double"===e?c.Double:"hair"===e?c.Hair:"medium"===e?c.Medium:"mediumDashDotDot"===e?c.MediumDashDotDotted:"mediumDashDot"===e?c.MediumDashDotted:"mediumDashed"===e?c.MediumDashed:"slantDashDot"===e?c.SlantedMediumDashDotted:"thick"===e?c.Thick:"thin"===e?c.Thin:"dashDotDot"===e?c.ThinDashDotDotted:"dashDot"===e?c.ThinDashDotted:null},e._escapeXML=function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""},e._unescapeXML=function(e){return"string"==typeof e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/"):""},e._numAlpha=function(e){var t=Math.floor(e/26)-1;return(t>-1?this._numAlpha(t):"")+this._alphabet.charAt(e%26)},e._alphaNum=function(e){var t=0;return e&&(e=e.toUpperCase()),2===e.length&&(t=this._alphaNum(e.charAt(0))+1),26*t+this._alphabet.indexOf(e.substr(-1))},e._b64ToUint6=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},e._base64DecToArr=function(e,t){for(var i,n,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=r.length,s=t?Math.ceil((3*o+1>>2)/t)*t:3*o+1>>2,a=new Uint8Array(s),l=0,c=0,h=0;h<o;h++)if(n=3&h,l|=this._b64ToUint6(r.charCodeAt(h))<<18-6*n,3===n||o-h==1){for(i=0;i<3&&c<s;i++,c++)a[c]=l>>>(16>>>i&24)&255;l=0}return a},e._uint6ToB64=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65},e._base64EncArr=function(e){for(var t=2,i="",n=e.length,r=0,o=0;o<n;o++)o>0&&4*o/3%76==0&&(i+="\r\n"),r|=e[o]<<(16>>>(t=o%3)&24),2!==t&&e.length-o!=1||(i+=String.fromCharCode(this._uint6ToB64(r>>>18&63),this._uint6ToB64(r>>>12&63),this._uint6ToB64(r>>>6&63),this._uint6ToB64(63&r)),r=0);return i.substr(0,i.length-2+t)+(2===t?"":1===t?"=":"==")},e.prototype._serializeWorkSheets=function(){var e,t,i=[];for(t=0;t<this._sheets.length;t++)(e=this._sheets[t])&&(i[t]=e._serialize());return i},e.prototype._serializeWorkbookStyles=function(){var e,t,i=[];for(t=0;t<this._styles.length;t++)(e=this._styles[t])&&(i[t]=e._serialize());return i},e.prototype._serializeDefinedNames=function(){var e,t,i=[];for(t=0;t<this._definedNames.length;t++)(e=this._definedNames[t])&&(i[t]=e._serialize());return i},e.prototype._serializeTableStyles=function(){var e,t,i=[];for(t=0;t<this._tableStyles.length;t++)(e=this._tableStyles[t])&&(i[t]=e._serialize());return i},e.prototype._deserializeWorkSheets=function(e){var t,i,n;for(this._sheets=[],Object(h.assert)(null!=e,"workSheets should not be null."),n=0;n<e.length;n++)(i=e[n])&&((t=new g)._deserialize(i),this._sheets[n]=t)},e.prototype._deserializeWorkbookStyles=function(e){var t,i,n;for(this._styles=[],n=0;n<e.length;n++)(i=e[n])&&((t=new v)._deserialize(i),this._styles[n]=t)},e.prototype._deserializeDefinedNames=function(e){var t,i,n;for(this._definedNames=[],n=0;n<e.length;n++)(i=e[n])&&((t=new O)._deserialize(i),this._definedNames[n]=t)},e.prototype._deserializeTableStyles=function(e){var t,i,n;for(this._tableStyles=[],n=0;n<e.length;n++)(i=e[n])&&((t=new N)._deserialize(i),this._tableStyles[n]=t)},e._alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e._formatMap={n:"#,##0{0}",c:"{1}#,##0{0}_);({1}#,##0{0})",p:"#,##0{0}%",f:"0{0}",d:"{0}",g:"0{0}"},e}(),g=function(){function e(){}return Object.defineProperty(e.prototype,"columns",{get:function(){return null==this._columns&&(this._columns=[]),this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return null==this._rows&&(this._rows=[]),this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tables",{get:function(){return null==this._tables&&(this._tables=[]),this._tables},enumerable:!0,configurable:!0}),e.prototype._serialize=function(){var e;return this._checkEmptyWorkSheet()?null:(e={},this.style&&(e.style=this.style._serialize()),this._columns&&this._columns.length>0&&(e.columns=this._serializeWorkbookColumns()),this._rows&&this._rows.length>0&&(e.rows=this._serializeWorkbookRows()),this.frozenPane&&(e.frozenPane=this.frozenPane._serialize()),this.name&&(e.name=this.name),null!=this.summaryBelow&&(e.summaryBelow=this.summaryBelow),null!=this.visible&&(e.visible=this.visible),this._tables&&this._tables.length>0&&(e.tables=this._serializeTables()),e)},e.prototype._deserialize=function(e){var t,i;e.style&&((i=new v)._deserialize(e.style),this.style=i),e.columns&&e.columns.length>0&&this._deserializeWorkbookColumns(e.columns),e.rows&&e.rows.length>0&&this._deserializeWorkbookRows(e.rows),e.frozenPane&&((t=new y)._deserialize(e.frozenPane),this.frozenPane=t),this.name=e.name,this.summaryBelow=e.summaryBelow,this.visible=e.visible,e.tables&&e.tables.length>0&&this._deserializeTables(e.tables)},e.prototype._addWorkbookColumn=function(e,t){null==this._columns&&(this._columns=[]),null==t||isNaN(t)?this._columns.push(e):this._columns[t]=e},e.prototype._addWorkbookRow=function(e,t){null==this._rows&&(this._rows=[]),null==t||isNaN(t)?this._rows.push(e):this._rows[t]=e},e.prototype._serializeWorkbookColumns=function(){var e,t,i=[];for(t=0;t<this._columns.length;t++)(e=this._columns[t])&&(i[t]=e._serialize());return i},e.prototype._serializeWorkbookRows=function(){var e,t,i=[];for(t=0;t<this._rows.length;t++)(e=this._rows[t])&&(i[t]=e._serialize());return i},e.prototype._serializeTables=function(){var e,t,i=[];for(t=0;t<this._tables.length;t++)(e=this._tables[t])&&(i[t]=e._serialize());return i},e.prototype._deserializeWorkbookColumns=function(e){var t,i,n;for(this._columns=[],n=0;n<e.length;n++)(t=e[n])&&((i=new m)._deserialize(t),this._columns[n]=i)},e.prototype._deserializeWorkbookRows=function(e){var t,i,n;for(this._rows=[],n=0;n<e.length;n++)(t=e[n])&&((i=new b)._deserialize(t),this._rows[n]=i)},e.prototype._deserializeTables=function(e){var t,i,n;for(this._tables=[],n=0;n<e.length;n++)(i=e[n])&&((t=new j)._deserialize(i),this._tables[n]=t)},e.prototype._checkEmptyWorkSheet=function(){return!(null!=this._rows||null!=this._columns||null!=this.visible||null!=this.summaryBelow||null!=this.frozenPane||null!=this.style||null!=this.name&&""!==this.name||null!=this._tables&&0!=this._tables.length)},e}(),m=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookColumn()?null:(e={},this.style&&(e.style=this.style._serialize()),null!=this.autoWidth&&(e.autoWidth=this.autoWidth),null!=this.width&&(e.width=this.width),null!=this.visible&&(e.visible=this.visible),e)},e.prototype._deserialize=function(e){var t;e.style&&((t=new v)._deserialize(e.style),this.style=t),this.autoWidth=e.autoWidth,this.visible=e.visible,this.width=e.width},e.prototype._checkEmptyWorkbookColumn=function(){return null==this.style&&null==this.width&&null==this.autoWidth&&null==this.visible},e}(),b=function(){function e(){}return Object.defineProperty(e.prototype,"cells",{get:function(){return null==this._cells&&(this._cells=[]),this._cells},enumerable:!0,configurable:!0}),e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookRow()?null:(e={},this._cells&&this._cells.length>0&&(e.cells=this._serializeWorkbookCells()),this.style&&(e.style=this.style._serialize()),null!=this.collapsed&&(e.collapsed=this.collapsed),null==this.groupLevel||isNaN(this.groupLevel)||(e.groupLevel=this.groupLevel),null==this.height||isNaN(this.height)||(e.height=this.height),null!=this.visible&&(e.visible=this.visible),e)},e.prototype._deserialize=function(e){var t;e.cells&&e.cells.length>0&&this._deserializeWorkbookCells(e.cells),e.style&&((t=new v)._deserialize(e.style),this.style=t),this.collapsed=e.collapsed,this.groupLevel=e.groupLevel,this.height=e.height,this.visible=e.visible},e.prototype._addWorkbookCell=function(e,t){null==this._cells&&(this._cells=[]),null==t||isNaN(t)?this._cells.push(e):this._cells[t]=e},e.prototype._serializeWorkbookCells=function(){var e,t,i=[];for(t=0;t<this._cells.length;t++)(e=this._cells[t])&&(i[t]=e._serialize());return i},e.prototype._deserializeWorkbookCells=function(e){var t,i,n;for(this._cells=[],n=0;n<e.length;n++)(t=e[n])&&((i=new _)._deserialize(t),this._cells[n]=i)},e.prototype._checkEmptyWorkbookRow=function(){return null==this._cells&&null==this.style&&null==this.collapsed&&null==this.visible&&(null==this.height||isNaN(this.height))&&(null==this.groupLevel||isNaN(this.groupLevel))},e}(),_=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookCell()?null:(e={},this.style&&(e.style=this.style._serialize()),null!=this.value&&(e.value=this.value),this.formula&&(e.formula=this.formula),null!=this.isDate&&(e.isDate=this.isDate),null!=this.isNumber&&(e.isNumber=this.isNumber),null!=this.colSpan&&!isNaN(this.colSpan)&&this.colSpan>1&&(e.colSpan=this.colSpan),null!=this.rowSpan&&!isNaN(this.rowSpan)&&this.rowSpan>1&&(e.rowSpan=this.rowSpan),this.link&&(e.link=this.link),this.textRuns&&this.textRuns.length>0&&(e.textRuns=this._serializeTextRuns()),e)},e.prototype._deserialize=function(e){var t;e.style&&((t=new v)._deserialize(e.style),this.style=t),this.value=e.value,this.formula=e.formula,this.isDate=e.isDate,this.isNumber=e.isNumber,this.colSpan=e.colSpan,this.rowSpan=e.rowSpan,this.link=e.link,e.textRuns&&e.textRuns.length>0&&this._deserializeTextRuns(e.textRuns)},e.prototype._serializeTextRuns=function(){var e,t=[];for(e=0;e<this.textRuns.length;e++)t.push(this.textRuns[e]._serialize());return t},e.prototype._deserializeTextRuns=function(e){var t,i;for(this.textRuns=[],i=0;i<e.length;i++)(t=new P)._deserialize(e[i]),this.textRuns.push(t)},e.prototype._checkEmptyWorkbookCell=function(){return null==this.style&&null==this.value&&null==this.isDate&&null==this.isNumber&&(null==this.formula||""===this.formula)&&(null==this.colSpan||isNaN(this.colSpan)||this.colSpan<=1)&&(null==this.rowSpan||isNaN(this.rowSpan)||this.rowSpan<=1)&&(null==this.link||""===this.link)},e}(),y=function(){function e(){}return e.prototype._serialize=function(){return null!=this.columns&&!isNaN(this.columns)&&0!==this.columns||null!=this.rows&&!isNaN(this.rows)&&0!==this.rows?{columns:this.columns,rows:this.rows}:null},e.prototype._deserialize=function(e){this.columns=e.columns,this.rows=e.rows},e}(),v=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookStyle()?null:(e={},this.basedOn&&(e.basedOn=this.basedOn._serialize()),this.fill&&(e.fill=this.fill._serialize()),this.font&&(e.font=this.font._serialize()),this.borders&&(e.borders=this.borders._serialize()),this.format&&(e.format=this.format),null!=this.hAlign&&(e.hAlign=Object(h.asEnum)(this.hAlign,s,!1)),null!=this.vAlign&&(e.vAlign=Object(h.asEnum)(this.vAlign,l,!1)),null==this.indent||isNaN(this.indent)||(e.indent=this.indent),this.wordWrap&&(e.wordWrap=this.wordWrap),e)},e.prototype._deserialize=function(t){var i,n,r,o;t.basedOn&&((i=new e)._deserialize(t.basedOn),this.basedOn=i),t.fill&&((n=new w)._deserialize(t.fill),this.fill=n),t.font&&((r=new x)._deserialize(t.font),this.font=r),t.borders&&((o=new S)._deserialize(t.borders),this.borders=o),this.format=t.format,null!=t.hAlign&&(this.hAlign=Object(h.asEnum)(t.hAlign,s,!1)),null!=t.vAlign&&(this.vAlign=Object(h.asEnum)(t.vAlign,l,!1)),null==t.indent||isNaN(t.indent)||(this.indent=t.indent),t.wordWrap&&(this.wordWrap=t.wordWrap)},e.prototype._checkEmptyWorkbookStyle=function(){return null==this.basedOn&&null==this.fill&&null==this.font&&null==this.borders&&(null==this.format||""===this.format)&&null==this.hAlign&&null==this.vAlign&&null==this.wordWrap},e}(),x=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookFont()?null:(e={},null!=this.bold&&(e.bold=this.bold),null!=this.italic&&(e.italic=this.italic),null!=this.underline&&(e.underline=this.underline),this.color&&(e.color=this.color),this.family&&(e.family=this.family),null==this.size||isNaN(this.size)||(e.size=this.size),e)},e.prototype._deserialize=function(e){this.bold=e.bold,null!=e.color&&(this.color=e.color),this.family=e.family,this.italic=e.italic,this.size=e.size,this.underline=e.underline},e.prototype._checkEmptyWorkbookFont=function(){return null==this.bold&&null==this.italic&&null==this.underline&&(null==this.color||""===this.color)&&(null==this.family||""===this.family)&&(null==this.size||isNaN(this.size))},e}(),w=function(){function e(){}return e.prototype._serialize=function(){return this.color?{color:this.color}:null},e.prototype._deserialize=function(e){null!=e.color&&(this.color=e.color)},e}(),S=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookBorder()?null:(e={},this.top&&(e.top=this.top._serialize()),this.bottom&&(e.bottom=this.bottom._serialize()),this.left&&(e.left=this.left._serialize()),this.right&&(e.right=this.right._serialize()),this.diagonal&&(e.diagonal=this.diagonal._serialize()),e)},e.prototype._deserialize=function(e){var t,i,n,r,o;e.top&&((t=new C)._deserialize(e.top),this.top=t),e.bottom&&((i=new C)._deserialize(e.bottom),this.bottom=i),e.left&&((n=new C)._deserialize(e.left),this.left=n),e.right&&((r=new C)._deserialize(e.right),this.right=r),e.diagonal&&((o=new C)._deserialize(e.diagonal),this.diagonal=o)},e.prototype._checkEmptyWorkbookBorder=function(){return null==this.top&&null==this.bottom&&null==this.left&&null==this.right&&null==this.diagonal},e}(),C=function(){function e(){}return e.prototype._serialize=function(){var e;return null!=this.color&&""!==this.color||null!=this.style?(e={},this.color&&(e.color=this.color),null!=this.style&&(e.style=Object(h.asEnum)(this.style,c,!1)),e):null},e.prototype._deserialize=function(e){null==e.color&&null==e.style||(this.color=e.color,null!=e.style&&(this.style=Object(h.asEnum)(e.style,c,!1)))},e}(),O=function(){function e(){}return e.prototype._serialize=function(){var e;return null==this.name?null:(e={name:this.name,value:this.value},null!=this.sheetName&&(e.sheetName=this.sheetName),e)},e.prototype._deserialize=function(e){this.name=e.name,this.value=e.value,this.sheetName=e.sheetName},e}(),j=function(){function e(){}return Object.defineProperty(e.prototype,"columns",{get:function(){return null==this._columns&&(this._columns=[]),this._columns},enumerable:!0,configurable:!0}),e.prototype._serialize=function(){var e,t;return null==this.name||null==this.range||null==this._columns?null:(null!=this.style&&(t=this.style._serialize()),(e={name:this.name,range:this.range,showHeaderRow:this.showHeaderRow,showTotalRow:this.showTotalRow,style:t,showBandedColumns:this.showBandedColumns,showBandedRows:this.showBandedRows,alterFirstColumn:this.alterFirstColumn,alterLastColumn:this.alterLastColumn,columns:[]}).columns=this._serializeTableColumns(),e)},e.prototype._deserialize=function(e){var t;this.name=e.name,this.range=e.range,this.showHeaderRow=e.showHeaderRow,this.showTotalRow=e.showTotalRow,null!=e.style&&((t=new N)._deserialize(e.style),this.style=t),this.showBandedColumns=e.showBandedColumns,this.showBandedRows=e.showBandedRows,this.alterFirstColumn=e.alterFirstColumn,this.alterLastColumn=e.alterLastColumn,this._deserializeTableColumns(e.columns)},e.prototype._serializeTableColumns=function(){var e,t,i=[];for(t=0;t<this._columns.length;t++)(e=this._columns[t])&&(i[t]=e._serialize());return i},e.prototype._deserializeTableColumns=function(e){var t,i,n;for(Object(h.assert)(null!=e,"table Columns should not be null."),this._columns=[],n=0;n<e.length;n++)(i=e[n])&&((t=new T)._deserialize(i),this._columns[n]=t)},e}(),T=function(){function e(){}return e.prototype._serialize=function(){return null==this.name?null:{name:this.name,totalRowLabel:this.totalRowLabel,totalRowFunction:this.totalRowFunction,showFilterButton:this.showFilterButton}},e.prototype._deserialize=function(e){this.name=e.name,this.totalRowLabel=e.totalRowLabel,this.totalRowFunction=e.totalRowFunction,this.showFilterButton=e.showFilterButton},e}(),N=function(){function e(){}return e.prototype._serialize=function(){var e;return this._checkEmptyWorkbookTableStyle()?null:(e={name:this.name},this.wholeTableStyle&&(e.wholeTableStyle=this.wholeTableStyle._serialize()),this.firstBandedColumnStyle&&(e.firstBandedColumnStyle=this.firstBandedColumnStyle._serialize()),this.firstBandedRowStyle&&(e.firstBandedRowStyle=this.firstBandedRowStyle._serialize()),this.secondBandedColumnStyle&&(e.secondBandedColumnStyle=this.secondBandedColumnStyle._serialize()),this.secondBandedRowStyle&&(e.secondBandedRowStyle=this.secondBandedRowStyle._serialize()),this.headerRowStyle&&(e.headerRowStyle=this.headerRowStyle._serialize()),this.totalRowStyle&&(e.totalRowStyle=this.totalRowStyle._serialize()),this.firstColumnStyle&&(e.firstColumnStyle=this.firstColumnStyle._serialize()),this.lastColumnStyle&&(e.lastColumnStyle=this.lastColumnStyle._serialize()),this.firstHeaderCellStyle&&(e.firstHeaderCellStyle=this.firstHeaderCellStyle._serialize()),this.lastHeaderCellStyle&&(e.lastHeaderCellStyle=this.lastHeaderCellStyle._serialize()),this.firstTotalCellStyle&&(e.firstTotalCellStyle=this.firstTotalCellStyle._serialize()),this.lastTotalCellStyle&&(e.lastTotalCellStyle=this.lastTotalCellStyle._serialize()),e)},e.prototype._deserialize=function(e){this.name=e.name,e.wholeTableStyle&&(this.wholeTableStyle=new A,this.wholeTableStyle._deserialize(e.wholeTableStyle)),e.firstBandedColumnStyle&&(this.firstBandedColumnStyle=new M,this.firstBandedColumnStyle._deserialize(e.firstBandedColumnStyle)),e.firstBandedRowStyle&&(this.firstBandedRowStyle=new M,this.firstBandedRowStyle._deserialize(e.firstBandedRowStyle)),e.secondBandedColumnStyle&&(this.secondBandedColumnStyle=new M,this.secondBandedColumnStyle._deserialize(e.secondBandedColumnStyle)),e.secondBandedRowStyle&&(this.secondBandedRowStyle=new M,this.secondBandedRowStyle._deserialize(e.secondBandedRowStyle)),e.headerRowStyle&&(this.headerRowStyle=new A,this.headerRowStyle._deserialize(e.headerRowStyle)),e.totalRowStyle&&(this.totalRowStyle=new A,this.totalRowStyle._deserialize(e.totalRowStyle)),e.firstColumnStyle&&(this.firstColumnStyle=new A,this.firstColumnStyle._deserialize(e.firstColumnStyle)),e.lastColumnStyle&&(this.lastColumnStyle=new A,this.lastColumnStyle._deserialize(e.lastColumnStyle)),e.firstHeaderCellStyle&&(this.firstHeaderCellStyle=new A,this.firstHeaderCellStyle._deserialize(e.firstHeaderCellStyle)),e.lastHeaderCellStyle&&(this.lastHeaderCellStyle=new A,this.lastHeaderCellStyle._deserialize(e.lastHeaderCellStyle)),e.firstTotalCellStyle&&(this.firstTotalCellStyle=new A,this.firstTotalCellStyle._deserialize(e.firstTotalCellStyle)),e.lastTotalCellStyle&&(this.lastTotalCellStyle=new A,this.lastTotalCellStyle._deserialize(e.lastTotalCellStyle))},e.prototype._checkEmptyWorkbookTableStyle=function(){return null==this.name||null==this.wholeTableStyle&&null==this.firstBandedColumnStyle&&null==this.firstBandedRowStyle&&null==this.secondBandedColumnStyle&&null==this.secondBandedRowStyle&&null==this.headerRowStyle&&null==this.totalRowStyle&&null==this.firstColumnStyle&&null==this.lastColumnStyle&&null==this.firstHeaderCellStyle&&null==this.lastHeaderCellStyle&&null==this.firstTotalCellStyle&&null==this.lastTotalCellStyle},e}(),A=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype._deserialize=function(t){var i;e.prototype._deserialize.call(this,t),t.borders&&((i=new E)._deserialize(t.borders),this.borders=i)},t}(v),M=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype._serialize=function(){var t;return(t=e.prototype._serialize.call(this)).size=this.size,t},t.prototype._deserialize=function(t){e.prototype._deserialize.call(this,t),null!=t.size&&(this.size=t.size)},t}(A),E=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype._serialize=function(){var t;return null!=(t=e.prototype._serialize.call(this))||this.vertical&&this.horizontal||(t={}),this.vertical&&(t.vertical=this.vertical._serialize()),this.horizontal&&(t.horizontal=this.horizontal._serialize()),t},t.prototype._deserialize=function(t){var i,n;e.prototype._deserialize.call(this,t),t.vertical&&((i=new C)._deserialize(t.vertical),this.vertical=i),t.horizontal&&((n=new C)._deserialize(t.horizontal),this.horizontal=n)},t}(S),P=function(){function e(){}return e.prototype._serialize=function(){var e={text:this.text};return this.font&&(e.font=this.font._serialize()),e},e.prototype._deserialize=function(e){e.font&&(this.font=new x,this.font._deserialize(e.font)),this.text=e.text},e}();(a=s||(s={}))[a.General=0]="General",a[a.Left=1]="Left",a[a.Center=2]="Center",a[a.Right=3]="Right",a[a.Fill=4]="Fill",a[a.Justify=5]="Justify",function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Bottom=2]="Bottom",e[e.Justify=3]="Justify"}(l||(l={})),function(e){e[e.None=0]="None",e[e.Thin=1]="Thin",e[e.Medium=2]="Medium",e[e.Dashed=3]="Dashed",e[e.Dotted=4]="Dotted",e[e.Thick=5]="Thick",e[e.Double=6]="Double",e[e.Hair=7]="Hair",e[e.MediumDashed=8]="MediumDashed",e[e.ThinDashDotted=9]="ThinDashDotted",e[e.MediumDashDotted=10]="MediumDashDotted",e[e.ThinDashDotDotted=11]="ThinDashDotDotted",e[e.MediumDashDotDotted=12]="MediumDashDotDotted",e[e.SlantedMediumDashDotted=13]="SlantedMediumDashDotted"}(c||(c={}));var I=d;function D(e){I=e}var k=function(){function e(){}return e.load=function(e){var t=new I;Object(h.assert)(null==t.loadAsync,"Please use JSZip 2.5 to load excel files synchronously.");var i,n=new F(t);return this._loadImpl(n,e).then((function(e){return i=e})),i},e.loadAsync=function(e){var t=new I;return Object(h.assert)(null!=t.loadAsync,"Please use JSZip 3.0 to load excel files asynchrounously."),this._loadImpl(t,e)},e.save=function(e){var t,i,n=Date.now();this._saveWorkbookToZip(e,null,!1).then((function(e){return t=e})),n=Date.now()-n,i=this._macroEnabled?"application/vnd.ms-excel.sheet.macroEnabled.12;":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;";var r=Date.now(),o=t.generate({compression:"DEFLATE"});return{base64:o,zipTime:Date.now()-r,processTime:n,href:function(){return"data:"+i+"base64,"+o}}},e.saveAsync=function(e,t,i,n){var r=new R(t);return Object(h.isFunction)(n)&&n(0),this._saveWorkbookToZip(e,t,!0,(function(e){Object(h.isFunction)(n)&&n(Math.round(B(e,0,100,0,90)))})).then((function(e){Object(h.isFunction)(n)&&n(91);var o=e.generateAsync({type:"base64",compression:"DEFLATE"});o.catch((function(e){i&&i(e),r.reject(e)})),o.then((function(e){t&&t.cancelled?r.cancel():(Object(h.isFunction)(n)&&n(100),r.resolve(e))}))}),(function(e){r.reject(e)})),r},e._loadImpl=function(e,t){var i,n=this,r=Date.now(),o={sheets:[]},s=e.loadAsync(t,{base64:!0}).then((function(e){return i=e}));t=null;var a=s.constructor;return(s=(s=(s=(s=(s=(s=s.then((function(){var e=i.file("xl/theme/theme1.xml");if(e)return e.async("string").then((function(e){n._getTheme(e),o.colorThemes=n._colorThemes})).then((function(){var e=a.resolve();return e=n._getZipStyle(i,e,o),n._getZipSharedString(i,e,o)}));var t=a.resolve();return t=n._getZipStyle(i,t,o),n._getZipSharedString(i,t,o)}))).then((function(){var e=i.file("xl/workbook.xml");if(e)return e.async("string").then((function(e){n._getWorkbook(e,o)}))}))).then((function(){n._tables=null;var e=a.resolve();return i.folder("xl/tables").forEach((function(t,i){null==n._tables&&(n._tables=[]),e=e.then((function(){return i.async("string").then((function(e){var t=n._getTable(e);t.fileName=i.name.substring(i.name.lastIndexOf("/")+1),n._tables.push(t)}))}))})),e}))).then((function(){var e=i.file("docProps/core.xml");if(e)return e.async("string").then((function(e){n._getCoreSetting(e,o)}))}))).then((function(){var e=i.file("xl/vbaProject.bin");if(e)return e.async("uint8array").then((function(e){null==o.reservedContent&&(o.reservedContent={}),o.reservedContent.macros=e}))}))).then((function(){var e=a.resolve();return i.folder("xl/worksheets").forEach((function(t,r){if(t&&-1===t.indexOf("/")){var s=n._getSheetIndex(r.name);isNaN(s)||(e=e.then((function(){return r.async("string").then((function(e){if(n._getSheet(e,s-1,o),null!=o.sheets[s-1].tableRIds||null!=o.sheets[s-1].hyperlinkRIds){var t=i.file("xl/worksheets/_rels/sheet"+s+".xml.rels");if(t)return t.async("string").then((function(e){for(var t=e.split("<Relationship "),i=t.length;--i;){var r=t[i],a=n._getAttr(r,"Id");o.sheets[s-1].tableRIds&&-1!==o.sheets[s-1].tableRIds.indexOf(a)?(null==o.sheets[s-1].tables&&(o.sheets[s-1].tables=[]),o.sheets[s-1].tables.push(n._getSheetRelatedTable(r))):o.sheets[s-1].hyperlinkRIds&&n._getSheetRelatedHyperlink(r,a,o.sheets[s-1])}}))}}))})))}})),e}))).then((function(){return o.processTime=Date.now()-r,i=null,o}))},e._getZipStyle=function(e,t,i){var n=this,r=e.file("xl/styles.xml");return r&&(t=t.then((function(){return r.async("string").then((function(e){n._getStyle(e),i.styles=n._styles,null!=n._tableStyles&&(i.tableStyles=n._tableStyles)}))}))),t},e._getZipSharedString=function(e,t,i){var n=this,r=e.file("xl/sharedStrings.xml");return r&&t.then((function(){return r.async("string").then((function(e){n._getSharedString(e)}))})),t},e._saveWorkbookToZip=function(e,t,i,n){var r=this,o=new I;i?Object(h.assert)(null!=o.generateAsync,"Please use JSZip 3.0 to save excel files asynchrounously."):Object(h.assert)(null==o.generateAsync,"Please use JSZip 2.5 to save excel files synchronously."),Object(h.isFunction)(n)&&n(0),o.folder("_rels").file(".rels",this._xmlDescription+this._generateRelsDoc());var s=o.folder("docProps"),a=o.folder("xl");this._colorThemes=e.colorThemes,a.folder("theme").file("theme1.xml",this._xmlDescription+this._generateThemeDoc()),this._macroEnabled=!(!e.reservedContent||!e.reservedContent.macros),this._macroEnabled&&a.file("vbaProject.bin",e.reservedContent.macros),s.file("core.xml",this._xmlDescription+this._generateCoreDoc(e)),this._sharedStrings=[[],0],this._styles=new Array(1),this._borders=new Array(1),this._fonts=new Array(1),this._fills=new Array(2),this._tableStyles=new Array,this._dxfs=new Array,this._contentTypes=[],this._props=[],this._xlRels=[],this._worksheets=[],this._tables=[],this._tableStyles=[];var l=new R(t);return this._generateWorksheets(e,a,t,i,n).then((function(){a.file("styles.xml",r._xmlDescription+r._generateStyleDoc()),o.file("[Content_Types].xml",r._xmlDescription+r._generateContentTypesDoc()),s.file("app.xml",r._xmlDescription+r._generateAppDoc(e)),a.folder("_rels").file("workbook.xml.rels",r._xmlDescription+r._generateWorkbookRels());var t=r._xmlDescription+r._generateSharedStringsDoc();r._sharedStrings=[[],0],a.file("sharedStrings.xml",t),t=null,a.file("workbook.xml",r._xmlDescription+r._generateWorkbook(e)),Object(h.isFunction)(n)&&n(100),l.resolve(o)})),l},e._generateWorksheets=function(e,t,i,n,r){for(var o,s=this,a=t.folder("worksheets"),l=e.sheets.length,c=[],u=e.sheets.map((function(e){return e.rows.length})).reduce((function(e,t){return e+t})),d=e.sheets.map((function(e){return e.rows.length/u})),p=l-1,f=0,g=0,m=function(){var u=l;c.push((function(){var l=new R(i);return s._generateWorkSheet(u,e,a,i,n,(function(e){Object(h.isFunction)(r)&&(e=Math.round(e*d[u]),p!==u&&(p=u,g+=f),f=e,r(g+e))})).then((function(){var i=e.sheets[u];if(i&&(i.tables&&i.tables.length>0||i.externalLinks&&i.externalLinks.length>0)){var n=0,r='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">';if(i.externalLinks&&i.externalLinks.length>0&&(r+=s._generateHyperlinkRel(i.externalLinks),n=i.externalLinks.length),i.tables&&i.tables.length>0){null==o&&(o=t.folder("tables"));for(var c=0;c<i.tables.length;c++){var h=i.tables[c];s._generateTable(h,o),r+='<Relationship Target="../tables/'+h.fileName+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/table" Id="rId'+(c+1+n)+'"/>'}}r+="</Relationships>",a.folder("_rels").file("sheet"+(u+1)+".xml.rels",s._xmlDescription+r)}l.resolve()})),l}))};l--;)m();return R.serial(i,c).then((function(){Object(h.isFunction)(r)&&r(100)}))},e._getSharedString=function(e){var t,i,n,r,o,s,a,l,c=e.split(/<si.*?>/g),h=c.length;for(this._sharedStrings=[];--h;)for(t=1,r=!1,c[h].search(/<r>/gi)>-1?(r=!0,i=c[h].split(/<r>/g)):c[h].indexOf("<t/>")>=0?i=["",""]:(c[h]=c[h].substring(0,c[h].indexOf("</t>")),i=c[h].split(/<t.*?>/g));t<i.length;)s=null,r?(-1!==i[t].indexOf("<rPr>")&&(s=this._getTextRunFont(i[t])),(n=i[t].match(/(<t.*?>)(.*)/))&&3===n.length&&null!=n[2]&&-1!==(l=(a=n[2]).indexOf("</t>"))&&(a=a.substring(0,l)),o={font:s,text:f._unescapeXML(a)},null==this._sharedStrings[h-1]?this._sharedStrings[h-1]=[o]:this._sharedStrings[h-1].push(o)):this._sharedStrings[h-1]=f._unescapeXML(i[t]),t++},e._getInlineString=function(e){for(var t=e.split("<t>"),i=t.length,n="";--i;)n+=t[i].substring(0,t[i].indexOf("</t>"));return n},e._getCoreSetting=function(e,t){var i,n;(n=e.indexOf("<dc:creator>"))>=0&&(i=e.substr(n+12),t.creator=i.substring(0,i.indexOf("</dc:creator>"))),(n=e.indexOf("<cp:lastModifiedBy>"))>=0&&(i=e.substr(n+19),t.lastModifiedBy=i.substring(0,i.indexOf("</cp:lastModifiedBy>"))),(n=e.indexOf('<dcterms:created xsi:type="dcterms:W3CDTF">'))>=0&&(i=e.substr(n+43),t.created=new Date(i.substring(0,i.indexOf("</dcterms:created>")))),(n=e.indexOf('<dcterms:modified xsi:type="dcterms:W3CDTF">'))>=0&&(i=e.substr(n+44),t.modified=new Date(i.substring(0,i.indexOf("</dcterms:modified>"))))},e._getWorkbook=function(e,t){var i,n,r,o,s,a,l,c,h=e.substring(e.indexOf("<bookViews>"),e.indexOf("</bookViews>")),u="",d=e.indexOf("<definedNames>");for(h&&(u=this._getAttr(h,"activeTab")),t.activeWorksheet=+u,a=(s=e.split("<sheet ")).length;--a;)l=this._getAttr(s[a],"name"),c="hidden"!==this._getAttr(s[a],"state"),t.sheets.unshift({name:l,visible:c,columns:[],rows:[]});if(d>-1)for(t.definedNames=[],a=(s=e.substring(d,e.indexOf("</definedNames>")).split("<definedName ")).length;--a;)l=this._getAttr(s[a],"name"),(n=s[a].match(/.*>.+(?=<\/definedName>)/))&&(n=n[0].replace(/(.*>)(.+)/,"$2"),n=isNaN(+n)?n:+n),i={name:l,value:n},""!==(r=this._getAttr(s[a],"localSheetId"))&&(o=t.sheets[+r])&&(i.sheetName=o.name),t.definedNames.unshift(i)},e._getTheme=function(e){e=e.substring(e.indexOf("<a:clrScheme"),e.indexOf("</a:clrScheme>")),this._colorThemes=this._defaultColorThemes.slice(),this._colorThemes[0]=this._getAttr(e.substring(e.indexOf("a:lt1"),e.indexOf("</a:lt1>")),"lastClr")||this._getAttr(e.substring(e.indexOf("a:lt1"),e.indexOf("</a:lt1>")),"val"),this._colorThemes[1]=this._getAttr(e.substring(e.indexOf("a:dk1"),e.indexOf("</a:dk1>")),"lastClr")||this._getAttr(e.substring(e.indexOf("a:dk1"),e.indexOf("</a:dk1>")),"val"),this._colorThemes[2]=this._getAttr(e.substring(e.indexOf("a:lt2"),e.indexOf("</a:lt2>")),"val"),this._colorThemes[3]=this._getAttr(e.substring(e.indexOf("a:dk2"),e.indexOf("</a:dk2>")),"val");for(var t=e.substring(e.indexOf("<a:accent1"),e.indexOf("</a:accent6>")).split("<a:accent"),i=t.length;--i;)this._colorThemes[i+3]=this._getAttr(t[i],"val")},e._getStyle=function(e){var t,i,n,r,o,s=[],a=[],l=[],c=this._numFmts.slice();if(this._styles=[],(n=e.indexOf("<numFmts"))>=0){var h=e.substring(n+8,e.indexOf("</numFmts>")).split("<numFmt");for(t=h.length;--t;)c[+this._getAttr(i=h[t],"numFmtId")]=this._getAttr(i,"formatCode")}if((n=e.indexOf("<fonts"))>=0){var u,d=e.substring(n,e.indexOf("</fonts>")).split("<font>");for(t=d.length;--t;)r=this._getChildNodeValue(i=d[t],"sz"),s[t-1]={bold:i.indexOf("<b/>")>=0||"true"===this._getChildNodeValue(i,"b"),italic:i.indexOf("<i/>")>=0||"true"===this._getChildNodeValue(i,"i"),underline:i.indexOf("<u/>")>=0||(u=this._getChildNodeValue(i,"u"))&&"none"!==u,size:Math.round(r?96*+r/72:14),family:this._getChildNodeValue(i,"name"),color:this._getColor(i,!1)},r=null}if((n=e.indexOf("<fills"))>=0){var p=e.substring(n,e.indexOf("</fills>")).split("<fill>");for(t=p.length;--t;)a[t-1]=this._getColor(p[t],!0)}if((n=e.indexOf("<borders"))>=0){var g=e.substring(n+8,e.indexOf("</borders>")).split("<border");for(t=g.length;--t;)l[t-1]={left:this._getEdgeBorder(i=g[t],"left"),right:this._getEdgeBorder(i,"right"),top:this._getEdgeBorder(i,"top"),bottom:this._getEdgeBorder(i,"bottom")}}if((n=e.indexOf("<cellXfs"))>=0){var m,b,_,y,v,x,w=e.substring(n,e.indexOf("</cellXfs>")).split("<xf");for(t=w.length;--t;)b=(m=c[_=+this._getAttr(i=w[t],"numFmtId")])?/[hsmy\:]/i.test(m)?"date":m.indexOf("0")>-1?"number":"@"===m?"string":"unknown":"unknown",y=(_=+this._getAttr(i,"fontId"))>0?s[_]:null,v=(_=+this._getAttr(i,"fillId"))>1?a[_]:null,x=(_=+this._getAttr(i,"borderId"))>0?l[_]:null,n=i.indexOf("<alignment"),o=+this._getAttr(i,"quotePrefix"),this._styles.unshift({formatCode:m,type:b,font:y,fillColor:v,borders:x,hAlign:n>=0?f._parseStringToHAlign(this._getAttr(i,"horizontal")):null,vAlign:n>=0?f._parseStringToVAlign(this._getAttr(i,"vertical")):null,wordWrap:n>=0?"1"===this._getAttr(i,"wrapText"):null,quotePrefix:1===o})}if(e.indexOf("<tableStyle ")>-1){this._tableStyles=[];var S=e.substring(e.indexOf("<tableStyles "),e.indexOf("</tableStyles>")),C=e.substring(e.indexOf("<dxfs "),e.indexOf("</dxfs>"));this._getTableStyles(S,C.split("<dxf>"))}},e._getEdgeBorder=function(e,t){var i,n,r,o,s=e.indexOf("<"+t),a=e.indexOf("</"+t+">");if(s>=0){n=(n=e.substring(s)).substring(0,a>=0?a:n.indexOf("/>"));var l=this._getAttr(n,"style");l&&(r=f._parseStringToBorderType(l),o=this._getColor(n,!1),r===c.Thin&&o&&"#c6c6c6"===o.toLowerCase()||((i={}).style=r,i.color=o))}return i},e._getSheet=function(e,t,i){var n,r=[];if(e.indexOf("<mergeCells")>-1)for(var o=e.substring(e.indexOf("<mergeCells"),e.indexOf("</mergeCells>")).split("<mergeCell "),s=o.length;--s;)2===(n=this._getAttr(o[s],"ref").split(":")).length&&r.unshift({topRow:+n[0].match(/\d*/g).join("")-1,leftCol:this._alphaNum(n[0].match(/[a-zA-Z]*/g)[0]),bottomRow:+n[1].match(/\d*/g).join("")-1,rightCol:this._alphaNum(n[1].match(/[a-zA-Z]*/g)[0])});this._getsBaseSharedFormulas(e);var a=e.split("<row "),l=i.sheets[t];if(a[0].indexOf("<dimension")>=0){var c=this._getAttr(a[0].substr(a[0].indexOf("<dimension")),"ref");c&&(c=c.substr(c.indexOf(":")+1),l.maxCol=this._alphaNum(c.match(/[a-zA-Z]*/g)[0])+1,l.maxRow=+c.match(/\d*/g).join(""))}var u=e.indexOf("<tableParts");if(u>-1){var d=e.substring(u,e.indexOf("</tableParts>")).split("<tablePart "),p=d.length;for(l.tableRIds=[];--p;)l.tableRIds.unshift(this._getAttr(d[p],"r:id"))}if(a.length>0&&a[0].indexOf("<pane")>-1&&"frozen"===this._getAttr(a[0].substr(a[0].indexOf("<pane")),"state")){var g=this._getAttr(a[0].substr(a[0].indexOf("<pane")),"ySplit"),m=this._getAttr(a[0].substr(a[0].indexOf("<pane")),"xSplit");l.frozenPane={rows:g?+g:NaN,columns:m?+m:NaN}}l.summaryBelow="0"!==this._getAttr(a[0],"summaryBelow"),s=a.length,a.length<=1?(l.maxCol=20,l.maxRow=200):l.maxRow<s-1&&(l.maxRow=s-1);for(var b,_=null,y=null;--s;){var v=l.rows[+this._getAttr(a[s],"r")-1]={visible:!0,groupLevel:NaN,cells:[]};if(a[s].substring(0,a[s].indexOf(">")).indexOf("hidden")>-1&&"1"===this._getAttr(a[s],"hidden")&&(v.visible=!1),"1"===this._getAttr(a[s],"customHeight")){var x=+this._getAttr(a[s].substring(0,a[s].indexOf(">")).replace("customHeight",""),"ht");v.height=96*x/72}_=null,y=null,"1"===this._getAttr(a[s],"customFormat")&&(_=(y=this._styles[+this._getAttr(a[s].substring(a[s].indexOf(" s=")),"s")]||{type:"General",formatCode:null}).font||y.fillColor||y.hAlign||y.vAlign||y.wordWrap||y.borders||y.formatCode&&"General"!==y.formatCode?{format:y.formatCode&&"General"!==y.formatCode?y.formatCode:null,font:y.font,fill:{color:y.fillColor},borders:y.borders,hAlign:y.hAlign,vAlign:y.vAlign,wordWrap:y.wordWrap}:null),v.style=_;var w=this._getAttr(a[s],"outlineLevel");v.groupLevel=w&&""!==w?+w:NaN,v.collapsed="1"===this._getAttr(a[s],"collapsed");var S=a[s].split("<c "),C=S.length;for((null==l.maxCol||l.maxCol<C-1)&&(l.maxCol=C-1);--C;){var O=S[C];_=(y=this._styles[+this._getAttr(O,"s")]||{type:"General",formatCode:null}).font||y.fillColor||y.hAlign||y.vAlign||y.wordWrap||y.borders||y.formatCode&&"General"!==y.formatCode?{format:y.formatCode&&"General"!==y.formatCode?y.formatCode:null,font:y.font,fill:{color:y.fillColor},borders:y.borders,hAlign:y.hAlign,vAlign:y.vAlign,wordWrap:y.wordWrap}:null;var j=this._getAttr(O.substring(0,O.indexOf(">")),"t")||y.type,T=null,N="inlineStr"===j||O.indexOf("<is>")>=0;N?T=this._getInlineString(O):O.indexOf("<v>")>-1&&(T=O.substring(O.indexOf("<v>")+3,O.indexOf("</v>")));var A=null,M=null,E=null;O.indexOf("<f")>-1&&(O.indexOf("</f>")>-1?(A=O.match(/<f.*>.+(?=<\/f>)/))&&(A=A[0].replace(/(\<f.*>)(.+)/,"$2")):(M=this._getAttr(O,"si"))&&(E=this._getAttr(O,"r"),A=this._getSharedFormula(M,E))),null!=A&&(A=A.replace(/\[\#This Row\]\s*,\s*/gi,"@")),"str"===j||"e"===j||N||(T=T?+T:T),b=this._alphaNum(this._getAttr(O,"r").match(/[a-zA-Z]*/g)[0]);var P=null;switch(j){case"s":null!=(T=this._sharedStrings[T])&&(Object(h.isString)(T)?y&&y.quotePrefix&&(T="'"+T):(P=T.slice(),T=this._getTextOfTextRuns(P)));break;case"b":T=1===T;break;case"date":T=T?this._convertDate(T):""}Object(h.isNumber)(T)&&(null==_&&(_={format:""}),_.format=Object(h.isInt)(T)?_.format||"#,##0":_.format||"#,##0.00"),v.cells[b]={value:T,textRuns:P,isDate:"date"===j,isNumber:"number"===j,formula:f._unescapeXML(A),style:_}}}var I=[],D=[];if(_=null,y=null,a.length>0&&a[0].indexOf("<cols>")>-1)for(var k=(I=a[0].substring(a[0].indexOf("<cols>")+6,a[0].indexOf("</cols>")).split("<col ")).length-1;k>0;k--){var L=this._parseCharWidthToPixel(+this._getAttr(I[k],"width"));for(y=null,I[k].indexOf("style")>-1&&(y=this._styles[+this._getAttr(I[k],"style")]||{type:"General",formatCode:null}),_=null,y&&(y.font||y.fillColor||y.hAlign||y.vAlign||y.wordWrap||y.borders||y.formatCode&&"General"!==y.formatCode)&&(_={format:y.formatCode&&"General"!==y.formatCode?y.formatCode:null,font:y.font,fill:{color:y.fillColor},borders:y.borders,hAlign:y.hAlign,vAlign:y.vAlign,wordWrap:y.wordWrap}),b=+this._getAttr(I[k],"min")-1;b<+this._getAttr(I[k],"max")&&b<l.maxCol;b++)D[b]={visible:"1"!==this._getAttr(I[k],"hidden"),autoWidth:"1"===this._getAttr(I[k],"bestFit"),width:L,style:_}}l.columns=D;var F,R=e.indexOf("<hyperlinks");if(R>-1)for(var B=e.substring(R,e.indexOf("</hyperlinks>")).split("<hyperlink "),z=B.length;--z;)this._getHyperlink(l,B[z]);if(l.frozenPane){if(!isNaN(l.frozenPane.rows))for(s=0;s<l.rows.length&&s<l.frozenPane.rows;s++)l.rows[s]&&!l.rows[s].visible&&l.frozenPane.rows++;if(!isNaN(l.frozenPane.columns))for(s=0;s<D.length&&s<l.frozenPane.columns;s++)D[s]&&!D[s].visible&&l.frozenPane.columns++}for(C=0;C<r.length;C++)l.rows[(F=r[C]).topRow]||(l.rows[F.topRow]={cells:[]}),l.rows[F.topRow].cells||(l.rows[F.topRow].cells=[]),l.rows[F.topRow].cells[F.leftCol]||(l.rows[F.topRow].cells[F.leftCol]={}),l.rows[F.topRow].cells[F.leftCol].rowSpan=F.bottomRow<l.maxRow?F.bottomRow-F.topRow+1:200,l.rows[F.topRow].cells[F.leftCol].colSpan=F.rightCol<l.maxCol?F.rightCol-F.leftCol+1:20},e._getTable=function(e){var t={};t.name=this._getAttr(e,"name"),t.range=this._getAttr(e,"ref");var i=this._getAttr(e,"headerRowCount");t.showHeaderRow=""==i||"1"===i;var n=this._getAttr(e,"totalsRowCount");t.showTotalRow="1"===n;var r=e.substring(e.indexOf("<tableStyleInfo")),o=this._getAttr(r,"name");t.style=this._isBuiltInStyleName(o)?{name:o}:this._getTableStyleByName(o),t.showBandedColumns="1"===this._getAttr(r,"showColumnStripes"),t.showBandedRows="1"===this._getAttr(r,"showRowStripes"),t.alterFirstColumn="1"===this._getAttr(r,"showFirstColumn"),t.alterLastColumn="1"===this._getAttr(r,"showLastColumn");var s=e.split("<tableColumn ");t.columns=[];for(var a=1;a<s.length;a++)t.columns.push(this._getTableColumn(s[a]));if(e.indexOf("filterColumn")>-1)for(var l=e.substring(e.indexOf("<autoFilter"),e.indexOf("</autoFilter>")).split("<filterColumn"),c=1;c<l.length;c++){var h=l[c],u=+this._getAttr(h,"colId");t.columns[u].showFilterButton="1"!==this._getAttr(h,"hiddenButton")}return t},e._getTableColumn=function(e){var t={};t.name=this._getAttr(e,"name");var i=this._getAttr(e,"totalsRowLabel");if(i)t.totalRowLabel=i;else{var n=this._getAttr(e,"totalsRowFunction");"custom"===n&&(n=e.substring(e.indexOf("<totalsRowFormula>")+2+"totalsRowFormula".length,e.indexOf("</totalsRowFormula>"))),t.totalRowFunction=n}return t},e._getSheetRelatedTable=function(e){var t=this._getAttr(e,"Target");t=t.substring(t.lastIndexOf("/")+1);for(var i=0;i<this._tables.length;i++){var n=this._tables[i];if(t===n.fileName)return n}return null},e._getSheetRelatedHyperlink=function(e,t,i){for(var n=0;n<i.hyperlinkRIds.length;n++){var r=i.hyperlinkRIds[n];if(r.rId===t){var o=this._getAttr(e,"Target");i.rows[r.ref.row]&&i.rows[r.ref.row].cells[r.ref.col]&&(i.rows[r.ref.row].cells[r.ref.col].link=o)}}},e._getTableStyles=function(e,t){for(var i=e.split("<tableStyle "),n=i.length;--n;){var r={},o=i[n];r.name=this._getAttr(o,"name");for(var s=o.split("<tableStyleElement "),a=s.length;--a;){var l=s[a],c=this._getAttr(l,"type");switch(c){case"firstRowStripe":c="firstBandedRowStyle";break;case"secondRowStripe":c="secondBandedRowStyle";break;case"firstColumnStripe":c="firstBandedColumnStyle";break;case"secondColumnStripe":c="secondBandedColumnStyle";break;default:c+="Style"}var h=this._getAttr(l,"dxfId");""!==h&&(r[c]=this._getTableStyleElement(t[+h+1]));var u=this._getAttr(l,"size");u&&(null==r[c]&&(r[c]={}),r[c].size=+u)}this._tableStyles.push(r)}},e._getTableStyleElement=function(e){var t=null,i=null,n=null,r=null,o=e.indexOf("<font>");if(o>=0){t=e.substring(o,e.indexOf("</font>"));var s=this._getChildNodeValue(t,"sz");i={bold:"1"===this._getChildNodeValue(t,"b"),italic:"1"===this._getChildNodeValue(t,"i"),underline:"1"===this._getChildNodeValue(t,"u"),size:Math.round(s?96*+s/72:14),family:this._getChildNodeValue(t,"name"),color:this._getColor(t,!1)}}return t=null,(o=e.indexOf("<fill>"))>=0&&(t=e.substring(o,e.indexOf("</fill>")),n={color:this._getColor(t,!0)}),t=null,(o=e.indexOf("<border>"))>=0&&(t=e.substring(o,e.indexOf("</border>")),r={left:this._getEdgeBorder(t,"left"),right:this._getEdgeBorder(t,"right"),top:this._getEdgeBorder(t,"top"),bottom:this._getEdgeBorder(t,"bottom"),vertical:this._getEdgeBorder(t,"vertical"),horizontal:this._getEdgeBorder(t,"horizontal")}),{font:i,fill:n,borders:r}},e._getTableStyleByName=function(e){var t,i;if(null==this._tableStyles||0===this._tableStyles.length)return null;for(t=0;t<this._tableStyles.length;t++)if((i=this._tableStyles[t])&&i.name.toLowerCase()===e.toLowerCase())return i;return null},e._getHyperlink=function(e,t){var i,n,r,o,s;if(null!=(i=this._getAttr(t,"ref"))){n=i.split(":"),null==(o=this._getAttr(t,"r:id"))&&(s=this._getAttr(t,"location"));for(var a=0;a<n.length;a++)r=f.tableAddress(n[a]),o?(null==e.hyperlinkRIds&&(e.hyperlinkRIds=[]),e.hyperlinkRIds.push({ref:r,rId:o})):s&&e.rows[r.row]&&e.rows[r.row].cells[r.col]&&(e.rows[r.row].cells[r.col].link=s)}},e._getTextRunFont=function(e){var t,i=this._getChildNodeValue(e,"sz");return{bold:e.indexOf("<b/>")>=0||"true"===this._getChildNodeValue(e,"b"),italic:e.indexOf("<i/>")>=0||"true"===this._getChildNodeValue(e,"i"),underline:e.indexOf("<u/>")>=0||(t=this._getChildNodeValue(e,"u"))&&"none"!==t,size:Math.round(i?96*+i/72:14),family:this._getChildNodeValue(e,"name"),color:this._getColor(e,!1)}},e._getTextOfTextRuns=function(e){var t,i,n="";for(t=0;t<e.length;t++)(i=e[t])&&(n+=i.text);return n},e._isBuiltInStyleName=function(e){var t;if(0===e.search(/TableStyleLight/i)){if(t=+e.substring(15),!isNaN(t)&&t>=1&&t<=21)return!0}else if(0===e.search(/TableStyleMedium/i)){if(t=+e.substring(16),!isNaN(t)&&t>=1&&t<=28)return!0}else if(0===e.search(/TableStyleDark/i)&&(t=+e.substring(14),!isNaN(t)&&t>=1&&t<=11))return!0;return!1},e._generateRelsDoc=function(){return'<Relationships xmlns="'+this._relationshipsNS+'"><Relationship Target="docProps/app.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Id="rId3"/><Relationship Target="docProps/core.xml" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Id="rId2"/><Relationship Target="xl/workbook.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Id="rId1"/></Relationships>'},e._generateThemeDoc=function(){return'<a:theme name="Office Theme" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:themeElements>'+this._generateClrScheme()+this._generateFontScheme()+this._generateFmtScheme()+"</a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/></a:theme>"},e._generateClrScheme=function(){return null===this._colorThemes&&(this._colorThemes=[]),'<a:clrScheme name="Office"><a:dk1><a:sysClr lastClr="'+(this._colorThemes[1]||"000000")+'" val="windowText"/></a:dk1><a:lt1><a:sysClr lastClr="'+(this._colorThemes[0]||"FFFFFF")+'" val="window"/></a:lt1><a:dk2><a:srgbClr val="'+(this._colorThemes[3]||"1F497D")+'"/></a:dk2><a:lt2><a:srgbClr val="'+(this._colorThemes[2]||"EEECE1")+'"/></a:lt2><a:accent1><a:srgbClr val="'+(this._colorThemes[4]||"4F81BD")+'"/></a:accent1><a:accent2><a:srgbClr val="'+(this._colorThemes[5]||"C0504D")+'"/></a:accent2><a:accent3><a:srgbClr val="'+(this._colorThemes[6]||"9BBB59")+'"/></a:accent3><a:accent4><a:srgbClr val="'+(this._colorThemes[7]||"8064A2")+'"/></a:accent4><a:accent5><a:srgbClr val="'+(this._colorThemes[8]||"4BACC6")+'"/></a:accent5><a:accent6><a:srgbClr val="'+(this._colorThemes[9]||"F79646")+'"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme>'},e._generateFontScheme=function(){return'<a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria"/><a:ea typeface=""/><a:cs typeface=""/><a:font typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af" script="Jpan"/><a:font typeface="\ub9d1\uc740 \uace0\ub515" script="Hang"/><a:font typeface="\u5b8b\u4f53" script="Hans"/><a:font typeface="\u65b0\u7d30\u660e\u9ad4" script="Hant"/><a:font typeface="Times New Roman" script="Arab"/><a:font typeface="Times New Roman" script="Hebr"/><a:font typeface="Tahoma" script="Thai"/><a:font typeface="Nyala" script="Ethi"/><a:font typeface="Vrinda" script="Beng"/><a:font typeface="Shruti" script="Gujr"/><a:font typeface="MoolBoran" script="Khmr"/><a:font typeface="Tunga" script="Knda"/><a:font typeface="Raavi" script="Guru"/><a:font typeface="Euphemia" script="Cans"/><a:font typeface="Plantagenet Cherokee" script="Cher"/><a:font typeface="Microsoft Yi Baiti" script="Yiii"/><a:font typeface="Microsoft Himalaya" script="Tibt"/><a:font typeface="MV Boli" script="Thaa"/><a:font typeface="Mangal" script="Deva"/><a:font typeface="Gautami" script="Telu"/><a:font typeface="Latha" script="Taml"/><a:font typeface="Estrangelo Edessa" script="Syrc"/><a:font typeface="Kalinga" script="Orya"/><a:font typeface="Kartika" script="Mlym"/><a:font typeface="DokChampa" script="Laoo"/><a:font typeface="Iskoola Pota" script="Sinh"/><a:font typeface="Mongolian Baiti" script="Mong"/><a:font typeface="Times New Roman" script="Viet"/><a:font typeface="Microsoft Uighur" script="Uigh"/><a:font typeface="Sylfaen" script="Geor"/></a:majorFont><a:minorFont><a:latin typeface="Calibri"/><a:ea typeface=""/><a:cs typeface=""/><a:font typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af" script="Jpan"/><a:font typeface="\ub9d1\uc740 \uace0\ub515" script="Hang"/><a:font typeface="\u5b8b\u4f53" script="Hans"/><a:font typeface="\u65b0\u7d30\u660e\u9ad4" script="Hant"/><a:font typeface="Arial" script="Arab"/><a:font typeface="Arial" script="Hebr"/><a:font typeface="Tahoma" script="Thai"/><a:font typeface="Nyala" script="Ethi"/><a:font typeface="Vrinda" script="Beng"/><a:font typeface="Shruti" script="Gujr"/><a:font typeface="DaunPenh" script="Khmr"/><a:font typeface="Tunga" script="Knda"/><a:font typeface="Raavi" script="Guru"/><a:font typeface="Euphemia" script="Cans"/><a:font typeface="Plantagenet Cherokee" script="Cher"/><a:font typeface="Microsoft Yi Baiti" script="Yiii"/><a:font typeface="Microsoft Himalaya" script="Tibt"/><a:font typeface="MV Boli" script="Thaa"/><a:font typeface="Mangal" script="Deva"/><a:font typeface="Gautami" script="Telu"/><a:font typeface="Latha" script="Taml"/><a:font typeface="Estrangelo Edessa" script="Syrc"/><a:font typeface="Kalinga" script="Orya"/><a:font typeface="Kartika" script="Mlym"/><a:font typeface="DokChampa" script="Laoo"/><a:font typeface="Iskoola Pota" script="Sinh"/><a:font typeface="Mongolian Baiti" script="Mong"/><a:font typeface="Arial" script="Viet"/><a:font typeface="Microsoft Uighur" script="Uigh"/><a:font typeface="Sylfaen" script="Geor"/></a:minorFont></a:fontScheme>'},e._generateFmtScheme=function(){return'<a:fmtScheme name="Office">'+this._generateFillScheme()+this._generateLineStyles()+this._generateEffectScheme()+this._generateBgFillScheme()+"</a:fmtScheme>"},e._generateFillScheme=function(){return'<a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin scaled="1" ang="16200000"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin scaled="1" ang="16200000"/></a:gradFill></a:fillStyleLst>'},e._generateLineStyles=function(){return'<a:lnStyleLst><a:ln algn="ctr" cmpd="sng" cap="flat" w="9525"><a:solidFill><a:schemeClr val="phClr"><a:shade val="9500"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln algn="ctr" cmpd="sng" cap="flat" w="25400"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln algn="ctr" cmpd="sng" cap="flat" w="38100"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst>'},e._generateEffectScheme=function(){return'<a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw dir="5400000" rotWithShape="0" dist="23000" blurRad="40000"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw dir="5400000" rotWithShape="0" dist="23000" blurRad="40000"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw dir="5400000" rotWithShape="0" dist="23000" blurRad="40000"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot rev="0" lon="0" lat="0"/></a:camera><a:lightRig dir="t" rig="threePt"><a:rot rev="1200000" lon="0" lat="0"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst>'},e._generateBgFillScheme=function(){return'<a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst>'},e._generateCoreDoc=function(e){var t='<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">';return t+=e.creator?"<dc:creator>"+e.creator+"</dc:creator>":"<dc:creator/>",(t+=e.lastModifiedBy?"<cp:lastModifiedBy>"+e.lastModifiedBy+"</cp:lastModifiedBy>":"<cp:lastModifiedBy/>")+'<dcterms:created xsi:type="dcterms:W3CDTF">'+(e.created||new Date).toISOString()+'</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">'+(e.modified||new Date).toISOString()+"</dcterms:modified></cp:coreProperties>"},e._generateSheetGlobalSetting=function(e,t,i){var n=t.rows&&t.rows[0]&&t.rows[0].cells?t.rows[0].cells.length:0,r=' xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">';return r+='<sheetPr><outlinePr summaryBelow="0"/></sheetPr>',r+='<dimension ref="A1'+(n>0?":"+this._numAlpha(n-1)+t.rows.length:"")+'"/>',r+='<sheetViews><sheetView workbookViewId="0"',e===i.activeWorksheet&&(r+=' tabSelected="1"'),!t.frozenPane||0===t.frozenPane.rows&&0===t.frozenPane.columns?r+="/>":(r+=">",r+='<pane state="frozen" activePane="'+(0!==t.frozenPane.rows&&0!==t.frozenPane.columns?"bottomRight":0!==t.frozenPane.rows?"bottomLeft":"topRight")+'" topLeftCell="'+(this._numAlpha(t.frozenPane.columns)+(t.frozenPane.rows+1))+'" ySplit="'+t.frozenPane.rows.toString()+'" xSplit="'+t.frozenPane.columns.toString()+'"/>',r+="</sheetView>"),(r+="</sheetViews>")+'<sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>'},e._generateCell=function(e,t,i,n,r,o){var s='<c r="'+this._numAlpha(t)+(e+1)+'" s="'+i.toString()+'"';n&&(s+=' t="'+n+'"');var a="";return o&&("="===o[0]&&(o=o.substring(1)),o=o.replace(/\@\s*/gi,"[#This Row], "),a+="<f>"+f._escapeXML(o)+"</f>"),null!=r&&""!==r&&(a+="<v>"+r+"</v>"),s+(a?">"+a+"</c>":"/>")},e._generateMergeSetting=function(e){for(var t='<mergeCells count="'+e.length.toString()+'">',i=0;i<e.length;i++)t+='<mergeCell ref="'+e[i].join(":")+'"/>';return t+"</mergeCells>"},e._generateStyleDoc=function(){var e='<styleSheet xmlns="'+this._workbookNS+'" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac">',t="",i="",n=[],r=0,o=0,s="",a="";a=this._generateFontStyle({},!0);var l="",c="";c+=this._generateFillStyle("none",null),c+=this._generateFillStyle("gray125",null);var h="",u="";u+=this._generateBorderStyle({});var d="",p="";for(p+=this._generateCellXfs(0,0,0,0,{});r<this._styles.length;){var f=this._styles[r];if(f){var g=0;if((f=JSON.parse(f)).format&&"General"!==f.format&&(g=this._numFmts.indexOf(f.format))<0){var m=n.indexOf(f.format);-1===m?(n.push(f.format),i+='<numFmt numFmtId="'+(g=164+o).toString()+'" formatCode="'+f.format+'"/>',o++):g=164+m}var b=0;if(f.borders){var _=JSON.stringify(f.borders);(b=this._borders.indexOf(_))<0&&(b=this._borders.push(_)-1,u+=this._generateBorderStyle(f.borders))}var y=0;if(f.font){var v=JSON.stringify(f.font);(y=this._fonts.indexOf(v))<0&&(y=this._fonts.push(v)-1,a+=this._generateFontStyle(f.font))}var x=0;if(f.fill&&f.fill.color){var w=JSON.stringify(f.fill);(x=this._fills.indexOf(w))<0&&(x=this._fills.push(w)-1,c+=this._generateFillStyle("solid",f.fill.color))}p+=this._generateCellXfs(g,b,y,x,f)}r++}n=null,o>0?(t='<numFmts count="'+o+'">',t+=i,t+="</numFmts>"):t='<numFmts count="0"/>',e+=t,s='<fonts count="'+this._fonts.length+'" x14ac:knownFonts="1">',s+=a,e+=s+="</fonts>",l='<fills count="'+this._fills.length+'">',l+=c,e+=l+="</fills>",h='<borders count="'+this._borders.length+'">',h+=u,e+=h+="</borders>",e+='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',d='<cellXfs count="'+this._styles.length+'">',d+=p,d+="</cellXfs>";var S="",C="";return this._tableStyles.length>0&&(this._getDxfs(),this._dxfs.length>0&&(S=this._generateDxfs()),C=this._generateTableStyles()),e+(d+'<cellStyles count="1"><cellStyle xfId="0" builtinId="0" name="Normal"/></cellStyles>')+(""===S?'<dxfs count="0"/>':S)+(""===C?'<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleLight16"/>':C)+'<extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}"><x14ac:slicerStyles defaultSlicerStyle="SlicerStyleLight1" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"/></ext></extLst></styleSheet>'},e._generateBorderStyle=function(e,t){void 0===t&&(t=!1);var i,n,r="<border>";for(var o in{left:0,right:0,top:0,bottom:0,diagonal:0,vertical:0,horizontal:0})(t||"vertical"!==o&&"horizontal"!==o)&&(e[o]?(i="<"+o+' style="'+e[o].style+'">',6===(n=(n=e[o].color)?"#"===n[0]?n.substring(1):n:"").length&&(n="FF"+n),n||(n="FF000000"),i+='<color rgb="'+n+'"/>',i+="</"+o+">"):i="<"+o+"/>",r+=i);return r+"</border>"},e._generateFontStyle=function(e,t){void 0===t&&(t=!1);var i="<font>";return e.bold&&(i+="<b/>"),e.italic&&(i+="<i/>"),e.underline&&(i+="<u/>"),i+='<sz val="'+(e.size?Math.round(72*e.size/96):this._defaultFontSize)+'"/>',i+=e.color?'<color rgb="FF'+("#"===e.color[0]?e.color.substring(1):e.color)+'"/>':'<color theme="1"/>',i+='<name val="'+(e.family||this._defaultFontName)+'"/>',i+='<family val="2"/>',t&&(i+='<scheme val="minor"/>'),i+"</font>"},e._generateFillStyle=function(e,t,i){void 0===i&&(i=!1);var n,r='<fill><patternFill patternType="'+e+'">';return t&&(n=i?"<bgColor ":"<fgColor ",r+=n+='rgb="FF'+("#"===t[0]?t.substring(1):t)+'"/>'),r+"</patternFill></fill>"},e._generateCellXfs=function(e,t,i,n,r){var o='<xf xfId="0" ';if(o+='numFmtId="'+e.toString()+'" ',e>0&&(o+='applyNumberFormat="1" '),o+='borderId="'+t.toString()+'" ',t>0&&(o+='applyBorder="1" '),o+='fontId="'+i.toString()+'" ',i>0&&(o+='applyFont="1" '),o+='fillId="'+n.toString()+'" ',n>0&&(o+='applyFill="1" '),r.quotePrefix&&(o+='quotePrefix="1" '),r.hAlign||r.vAlign||r.indent||r.wordWrap){o+='applyAlignment="1">';var s="<alignment ";r.hAlign&&(s+='horizontal="'+r.hAlign+'" '),r.vAlign&&(s+='vertical="'+r.vAlign+'" '),r.indent&&(s+='indent="'+r.indent+'" '),r.wordWrap&&(s+='wrapText="1"'),o+=s+="/>",o+="</xf>"}else o+="/>";return o},e._generateContentTypesDoc=function(){var e,t='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">';for(this._macroEnabled&&(t+='<Default ContentType="application/vnd.ms-office.vbaProject" Extension="bin"/>'),t+='<Default ContentType="application/vnd.openxmlformats-package.relationships+xml" Extension="rels"/><Default ContentType="application/xml" Extension="xml"/><Override ContentType="'+(this._macroEnabled?"application/vnd.ms-excel.sheet.macroEnabled.main+xml":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml")+'" PartName="/xl/workbook.xml"/>',e=0;e<this._contentTypes.length;e++)t+=this._contentTypes[e];for(t+='<Override ContentType="application/vnd.openxmlformats-officedocument.theme+xml" PartName="/xl/theme/theme1.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" PartName="/xl/styles.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" PartName="/xl/sharedStrings.xml"/><Override ContentType="application/vnd.openxmlformats-package.core-properties+xml" PartName="/docProps/core.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" PartName="/docProps/app.xml"/>',e=0;e<this._tables.length;e++)t+='<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml" PartName="/xl/tables/'+this._tables[e]+'"/>';return t+"</Types>"},e._generateAppDoc=function(e){for(var t='<Properties xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes" xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>'+(e.application||"wijmo.xlsx")+'</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector baseType="variant" size="2"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>'+this._props.length+'</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector baseType="lpstr" size="'+this._props.length+'">',i=0;i<this._props.length;i++)t+="<vt:lpstr>"+this._props[i]+"</vt:lpstr>";return t+"</vt:vector></TitlesOfParts><Manager/><Company>"+(e.company||"GrapeCity, Inc.")+"</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>1.0</AppVersion></Properties>"},e._generateWorkbookRels=function(){for(var e='<Relationships xmlns="'+this._relationshipsNS+'">',t=0;t<this._xlRels.length;t++)e+=this._xlRels[t];return e+='<Relationship Target="sharedStrings.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Id="rId'+(this._xlRels.length+1)+'"/><Relationship Target="styles.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Id="rId'+(this._xlRels.length+2)+'"/><Relationship Target="theme/theme1.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Id="rId'+(this._xlRels.length+3)+'"/>',this._macroEnabled&&(e+='<Relationship Target="vbaProject.bin" Type="http://schemas.microsoft.com/office/2006/relationships/vbaProject" Id="rId'+(this._xlRels.length+4)+'"/>'),e+"</Relationships>"},e._generateWorkbook=function(e){for(var t='<workbook xmlns="'+this._workbookNS+'" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion rupBuild="9303" lowestEdited="5" lastEdited="5" appName="xl"/><workbookPr/><bookViews><workbookView xWindow="480" yWindow="60" windowWidth="18195" windowHeight="8505"'+(null!=e.activeWorksheet?' activeTab="'+e.activeWorksheet.toString()+'"':"")+"/></bookViews><sheets>",i=0;i<this._worksheets.length;i++)t+=this._worksheets[i];if(t+="</sheets>",e.definedNames&&e.definedNames.length>0){for(t+="<definedNames>",i=0;i<e.definedNames.length;i++){var n=-1;e.definedNames[i].sheetName&&(n=this._getSheetIndexBySheetName(e,e.definedNames[i].sheetName)),t+='<definedName name="'+e.definedNames[i].name+'" '+(n>-1?'localSheetId="'+n+'"':"")+">"+e.definedNames[i].value+"</definedName>"}t+="</definedNames>"}return t+'<calcPr fullCalcOnLoad="1"/></workbook>'},e._generateWorksheetRows=function(e,t,i,n,r,o,a,c,u,d){for(var p,g=this,m=function(m,_){if(a&&a.cancelled)return{value:void 0};if(c&&m-t>100&&Date.now()-e>100)return setTimeout((function(){a&&a.cancelled||(u(Math.round((m+1)/i.length*100)),g._generateWorksheetRows(Date.now(),m,i,n,r,o,a,c,u,d))}),0),{value:void 0};var y=-1,v=i[m]&&i[m].cells?i[m].cells.length:0,x=null;if(o.sheetData+='<row x14ac:dyDescent="0.25" r="'+(m+1).toString()+'"',i[m]&&(i[m].height&&(o.sheetData+=' customHeight="1" ht="'+(72*+i[m].height/96).toString()+'"'),i[m].groupLevel&&(o.sheetData+=' outlineLevel="'+i[m].groupLevel.toString()+'"'),x=i[m].style?b._cloneStyle(i[m].style):null)){(x=b._resolveStyleInheritance(x)).font&&x.font.color&&(x.font.color=b._parseColor(x.font.color)),x.fill&&x.fill.color&&(x.fill.color=b._parseColor(x.fill.color)),null==x.hAlign||Object(h.isString)(x.hAlign)||(x.hAlign=f._parseHAlignToString(Object(h.asEnum)(x.hAlign,s))),null==x.vAlign||Object(h.isString)(x.vAlign)||(x.vAlign=f._parseVAlignToString(Object(h.asEnum)(x.vAlign,l)));var w=JSON.stringify(x);(A=b._styles.indexOf(w))<0&&(A=b._styles.push(w)-1),o.sheetData+=' customFormat="1" s="'+A.toString()+'"'}for(i[m]&&!1===i[m].visible&&(o.sheetData+=' hidden="1"'),i[m]&&!0===i[m].collapsed&&(o.sheetData+=' collapsed="1"'),o.sheetData+=">";++y<v;){var S=i[m].cells[y],C="",O=-1,j=S?S.textRuns:null,T=S&&S.hasOwnProperty("value")?S.value:S,N=S&&S.style?b._cloneStyle(S.style):{};N=b._resolveStyleInheritance(N);var A,M=r[y];M&&(M=b._resolveStyleInheritance(M),N=b._extend(N,M)),x&&(N=b._extend(N,x)),n&&(n=b._resolveStyleInheritance(n),N=b._extend(N,n)),null==N.hAlign||Object(h.isString)(N.hAlign)||(N.hAlign=f._parseHAlignToString(Object(h.asEnum)(N.hAlign,s))),null==N.vAlign||Object(h.isString)(N.vAlign)||(N.vAlign=f._parseVAlignToString(Object(h.asEnum)(N.vAlign,l))),N.font&&N.font.color&&(N.font.color=b._parseColor(N.font.color)),N.fill&&N.fill.color&&(N.fill.color=b._parseColor(N.fill.color)),b._applyDefaultBorder(N),N.borders&&(N.borders=b._extend({},N.borders),b._parseBorder(N.borders,!!N.fill&&!!N.fill.color)),S&&S.isDate&&!Object(h.isDate)(T)&&(p=new Date(T),Object(h.isDate)(p)&&(T=p)),!Object(h.isNumber)(T)||!isNaN(T)&&isFinite(T)||(T=T.toString()),j||T&&Object(h.isString)(T)&&("@"===N.format||"General"===N.format||(+T).toString()!==T||!isFinite(+T))?(b._sharedStrings[1]++,"'"===(T=j?"{RichTextMark}"+JSON.stringify(j):f._unescapeXML(T))[0]&&(N.quotePrefix=!0,T=T.substring(1)),(O=b._sharedStrings[0].indexOf(T))<0&&(O=b._sharedStrings[0].push(T)-1),T=O,C="s"):Object(h.isBoolean)(T)?(T=T?1:0,C="b"):Object(h.isDate)(T)?(T=b._convertDate(T),N.format=N.format||"mm-dd-yy"):Object(h.isObject)(T)&&(T=null),w=JSON.stringify(N),(A=b._styles.indexOf(w))<0&&(A=b._styles.push(w)-1),S&&(null!=S.colSpan&&S.colSpan>1||null!=S.rowSpan&&S.rowSpan>1)&&(S.colSpan=S.colSpan||1,S.rowSpan=S.rowSpan||1,b._checkValidMergeCell(o.merges,m,S.rowSpan,y,S.colSpan)&&o.merges.push([b._numAlpha(y)+(m+1),b._numAlpha(y+S.colSpan-1)+(m+S.rowSpan)])),S&&S.link&&(null==o.hyperlinks&&(o.hyperlinks=[]),o.hyperlinks.push({ref:f.xlsxAddress(m,y),value:T,href:S.link})),N=null,o.sheetData+=b._generateCell(m,y,A,C,T,S&&S.formula?S.formula:null)}o.sheetData+="</row>"},b=this,_=t,y=i.length;_<y;_++){var v=m(_);if("object"==typeof v)return v.value}Object(h.isFunction)(d)&&d()},e._generateWorkSheet=function(e,t,i,n,r,o){var a=this,c=t.sheets[e];if(!c)throw"Worksheet should not be empty!";o(0);var u=new R(n),d=c.columns,p=this._cloneColumnsStyle(d),g=c.style?this._cloneStyle(c.style):null,m='<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"'+this._generateSheetGlobalSetting(e,c,t),b={hyperlinks:[],merges:[],sheetData:"<sheetData>"};return this._generateWorksheetRows(Date.now(),0,c.rows,g,p,b,n,r,o,(function(){var t=e+1,n=1;if(b.sheetData+="</sheetData>",d&&d.length>0){m+="<cols>";for(var r=0;r<d.length;r++){var g=-1;if(!a._isEmpty(p[r])){var _=p[r];if(_){(_=a._resolveStyleInheritance(_)).font&&_.font.color&&(_.font.color=a._parseColor(_.font.color)),_.fill&&_.fill.color&&(_.fill.color=a._parseColor(_.fill.color)),null==_.hAlign||Object(h.isString)(_.hAlign)||(_.hAlign=f._parseHAlignToString(Object(h.asEnum)(_.hAlign,s))),null==_.vAlign||Object(h.isString)(_.vAlign)||(_.vAlign=f._parseVAlignToString(Object(h.asEnum)(_.vAlign,l)));var y=JSON.stringify(_);(g=a._styles.indexOf(y))<0&&(g=a._styles.push(y)-1)}}if(!a._isEmpty(d[r])){var v=d[r].width;v=null!=v?"string"==typeof v&&v.indexOf("ch")>-1?a._parseCharCountToCharWidth(v.substring(0,v.indexOf("ch"))):a._parsePixelToCharWidth(v):8.43;var x=(r+1).toString();m+='<col min="'+x+'" max="'+x+'"',g>=0&&(m+=' style="'+g.toString()+'"'),v&&(m+=' width="'+v+'" customWidth="1"'),!1!==d[r].autoWidth&&(m+=' bestFit="1"'),!1===d[r].visible&&(m+=' hidden="1"'),m+="/>"}}m+="</cols>"}b.sheetData=m+b.sheetData,m=b.sheetData,b.sheetData=null,b.merges.length>0&&(m+=a._generateMergeSetting(b.merges));var w=b.hyperlinks;if(w&&w.length>0){for(m+="<hyperlinks>",r=0;r<w.length;r++)/\'?(\w+)\'?\!\$?[A-Za-z]{1,2}\$?\d+(:\$?[A-Za-z]{1,2}\$?\d+)?/.test(w[r].href)||/^\$?[A-Za-z]{1,2}\$?\d+(:\$?[A-Za-z]{1,2}\$?\d+)?$/.test(w[r].href)?m+='<hyperlink ref="'+w[r].ref+'" display="'+w[r].value+'" location="'+w[r].href+'"/>':(null==c.externalLinks&&(c.externalLinks=[]),c.externalLinks.push(w[r].href),m+='<hyperlink ref="'+w[r].ref+'" r:id="rId'+n+'"/>',n++);m+="</hyperlinks>"}if(m+='<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/>',c.tables&&c.tables.length>0){for(m+='<tableParts count="'+c.tables.length+'">',r=0;r<c.tables.length;r++)m+='<tablePart r:id="rId'+n+'"/>',n++;m+="</tableParts>"}i.file("sheet"+t+".xml",a._xmlDescription+(m+="</worksheet>")),m=null,a._contentTypes.unshift('<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" PartName="/xl/worksheets/sheet'+t+'.xml"/>'),a._props.unshift(f._escapeXML(c.name)||"Sheet"+t),a._xlRels.unshift('<Relationship Target="worksheets/sheet'+t+'.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Id="rId'+t+'"/>');var S='<sheet r:id="rId'+t+'" sheetId="'+t+'" name="'+(f._escapeXML(c.name)||"Sheet"+t)+'"'+(!1===c.visible?' state="hidden"':"")+"/>";a._worksheets.unshift(S),o(100),u.resolve()})),u},e._generateSharedStringsDoc=function(){var e,t='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="'+this._sharedStrings[1]+'" uniqueCount="'+this._sharedStrings[0].length+'">';for(e=0;e<this._sharedStrings[0].length;e++){t+="<si>";var i=this._sharedStrings[0][e];if(i&&0===i.indexOf("{RichTextMark}"))try{var n=JSON.parse(i.substring(14));if(n&&n.length>0){for(var r=0;r<n.length;r++){t+="<r>";var o=n[r];o.font&&(t+=this._generateFontStyle(o.font,!0).replace(/font/g,"rPr")),t+=this._generatePlainText(o.text),t+="</r>"}t+="</si>"}}catch(e){t+=this._generatePlainText(i)+"</si>"}else t+=this._generatePlainText(i)+"</si>"}return t+"</sst>"},e._generatePlainText=function(e){if(""===e)return"<t/>";var t="<t";return(Object(h.isNullOrWhiteSpace)(e)||/^\s+\w*|\w*\s+$/.test(e))&&(t+=' xml:space="preserve"'),t+">"+f._escapeXML(e)+"</t>"},e._generateTable=function(e,t){var i=this._tables.length+1,n="table"+i+".xml";e.fileName=n,this._tables.push(n);var r='<table ref="'+e.range+'" displayName="'+e.name+'" name="'+e.name+'" id="'+i+'" '+(!1===e.showHeaderRow?'headerRowCount="0" ':"")+(!0===e.showTotalRow?'totalsRowCount="1" ':'totalsRowShown="0" ')+' xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';!1!==e.showHeaderRow&&(r+=this._generateTableFilterSetting(e.range,e.showTotalRow,e.columns)),r+='<tableColumns count="'+e.columns.length+'">';for(var o="",s=0;s<e.columns.length;s++){var a=e.columns[s];o+='<tableColumn name="'+a.name+'" id="'+(s+1)+'" ',a.totalRowFunction?this._tableColumnFunctions.indexOf(a.totalRowFunction)>-1?o+='totalsRowFunction="'+a.totalRowFunction+'"/>':o+='totalsRowFunction="custom"><totalsRowFormula>'+a.totalRowFunction+"</totalsRowFormula></tableColumn>":o+=(a.totalRowLabel?'totalsRowLabel="'+a.totalRowLabel+'"':"")+"/>"}if(r+=o+"</tableColumns>",r+='<tableStyleInfo name="'+e.style.name+'" showColumnStripes="'+(e.showBandedColumns?"1":"0")+'" showRowStripes="'+(e.showBandedRows?"1":"0")+'" showLastColumn="'+(e.alterLastColumn?"1":"0")+'" showFirstColumn="'+(e.alterFirstColumn?"1":"0")+'"/></table>',!this._isBuiltInStyleName(e.style.name)){var l=JSON.stringify(e.style);-1===this._tableStyles.indexOf(l)&&this._tableStyles.push(l)}t.file(n,this._xmlDescription+r),r=null},e._generateTableFilterSetting=function(e,t,i){var n=e;if(t){var r=n.indexOf(":")+1,o=f.tableAddress(n.substring(n.indexOf(":")+1));o.row-=1,n=n.substring(0,r)+f.xlsxAddress(o.row,o.col)}for(var s='<autoFilter ref="'+n+'"',a="",l=0;l<i.length;l++)!1===i[l].showFilterButton&&(a+='<filterColumn hiddenButton="1" colId="'+l+'"/>');return s+(""===a?"/>":">"+a+"</autoFilter>")},e._generateHyperlinkRel=function(e){for(var t="",i=0;i<e.length;i++)t+='<Relationship TargetMode="External" Target="'+e[i]+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Id="rId'+(i+1)+'"/>';return t},e._getDxfs=function(){for(var e,t=this,i=0;i<this._tableStyles.length;i++)e=JSON.parse(this._tableStyles[i]),Object.keys(e).forEach((function(i){var n,r,o=e[i];!o||Object(h.isString)(o)||t._isEmptyStyleEle(o)||(n=JSON.stringify(o),-1===(r=t._dxfs.indexOf(n))&&(r=t._dxfs.push(n)-1,o.styleIndex=r))})),this._tableStyles[i]=e},e._generateDxfs=function(){for(var e,t='<dxfs count="'+this._dxfs.length+'">',i=0;i<this._dxfs.length;i++)t+="<dxf>",(e=JSON.parse(this._dxfs[i])).font&&(t+=this._generateFontStyle(e.font)),e.fill&&e.fill.color&&(t+=this._generateFillStyle("solid",e.fill.color,!0)),e.borders&&!this._isEmpty(e.borders)&&(e.borders=this._extend({},e.borders),this._parseBorder(e.borders,!1),t+=this._generateBorderStyle(e.borders,!0)),t+="</dxf>";return t+"</dxfs>"},e._generateTableStyles=function(){for(var e,t,i,n,r,o,s='<tableStyles count="'+this._tableStyles.length+'" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleLight16">',a=0;a<this._tableStyles.length;a++){e=this._tableStyles[a],t=Object.keys(e),r="",o=0;for(var l=0;l<t.length;l++)if(n=e[i=t[l]],!Object(h.isString)(n)){switch(o++,r+="<tableStyleElement",null!=n.styleIndex&&(r+=' dxfId="'+n.styleIndex+'"'),i){case"firstBandedColumnStyle":r+=' type="firstColumnStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;case"secondBandedColumnStyle":r+=' type="secondColumnStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;case"firstBandedRowStyle":r+=' type="firstRowStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;case"secondBandedRowStyle":r+=' type="secondRowStripe"',null!=n.size&&(r+=' size="'+n.size+'"');break;default:r+=' type="'+i.substring(0,i.length-5)+'"'}r+="/>"}o>0&&(s+='<tableStyle count="'+o+'" name="'+e.name+'" pivot="0">',s+=r+"</tableStyle>")}return s+"</tableStyles>"},e._isEmptyStyleEle=function(e){return this._isEmpty(e.borders)&&(this._isEmpty(e.fill)||Object(h.isNullOrWhiteSpace)(e.fill.color))&&(this._isEmpty(e.font)||!0!==e.font.bold&&Object(h.isNullOrWhiteSpace)(e.font.color)&&Object(h.isNullOrWhiteSpace)(e.font.family)&&!0!==e.font.italic&&null==e.font.size&&!0!==e.font.underline)},e._getTableFileName=function(e,t){for(var i="",n=0;n<e.length;n++){var r=e[n];if(r.name===t){i=r.fileName;break}}return i},e._getColor=function(e,t){var i,n,r,o,s;return-1===e.search(/fgcolor/i)&&-1===e.search(/bgcolor/i)&&t||-1===e.search(/color/i)&&!t?null:(-1===(i=e.indexOf("<fgColor"))&&(i=e.indexOf("<bgColor")),-1!==(e=t?e.substring(i,e.indexOf("/>")):e.substring(e.indexOf("<color"))).indexOf("rgb=")?(o=this._getAttr(e,"rgb"))&&8===o.length&&(o=o.substring(2)):-1!==e.indexOf("indexed")?(r=+this._getAttr(e,"indexed"),o=this._indexedColors[r]||""):-1!==e.indexOf("auto")&&"1"===this._getAttr(e,"auto")?o="#000000":(n=+this._getAttr(e,"theme"),-1!==e.indexOf("tint")&&(s=+this._getAttr(e,"tint")),o=this._getThemeColor(n,s)),o&&"#"===o[0]?o:"#"+o)},e._getThemeColor=function(e,t){var i,n=this._colorThemes[e];return null!=t?((i=new h.Color("#"+n).getHsl())[2]=t<0?i[2]*(1+t):i[2]*(1-t)+(1-1*(1-t)),h.Color.fromHsl(i[0],i[1],i[2]).toString().substring(1)):n},e._parseColor=function(e){var t=new h.Color(e);return t.a<1&&(t=h.Color.toOpaque(t)),t.toString()},e._getsBaseSharedFormulas=function(e){var t,i,n,r=e.match(/\<f[^<]*ref[^<]*>[^<]+(?=\<\/f>)/g);if(this._sharedFormulas=[],r&&r.length>0)for(var o=0;o<r.length;o++)i=this._getAttr(t=r[o],"si"),n=(n=this._getAttr(t,"ref"))?n.substring(0,n.indexOf(":")):"",t=t.replace(/(\<f.*>)(.+)/,"$2"),this._sharedFormulas[+i]=this._parseSharedFormulaInfo(n,t)},e._parseSharedFormulaInfo=function(e,t){var i,n,r,o,s,a=t.match(/(\'?\w+\'?\!)?(\$?[A-Za-z]+)(\$?\d+)/g);if(o=f.tableAddress(e),a&&a.length>0){s=[];for(var l=0;l<a.length;l++)t=t.replace(i=a[l],"{"+l+"}"),(n=i.indexOf("!"))>0&&(r=i.substring(0,n),i=i.substring(n+1)),s[l]={cellAddress:f.tableAddress(i),sheetRef:r}}return{cellRef:o,formula:t,formulaRefs:s}},e._getSharedFormula=function(e,t){var i,n,r,o,s,a,l,c,h;if(this._sharedFormulas&&this._sharedFormulas.length>0&&(i=this._sharedFormulas[+e])){if(a=i.formula,(l=i.formulaRefs)&&l.length>0){r=(n=f.tableAddress(t)).row-(i.cellRef?i.cellRef.row:0),o=n.col-(i.cellRef?i.cellRef.col:0);for(var u=0;u<l.length;u++)s=(c=l[u]).cellAddress.row+(c.cellAddress.absRow?0:r),h=f.xlsxAddress(s,c.cellAddress.col+(c.cellAddress.absCol?0:o),c.cellAddress.absRow,c.cellAddress.absCol),null!=c.sheetRef&&""!==c.sheetRef&&(h=c.sheetRef+"!"+h),a=a.replace("{"+u+"}",h)}return a}return""},e._convertDate=function(e){var t,i,n=new Date(1900,0,0),r=Date.UTC(1900,0,0),o="[object Date]"===Object.prototype.toString.call(e),s=6e4*((o?e.getTimezoneOffset():(new Date).getTimezoneOffset())-n.getTimezoneOffset()),a=n.getTime()-r-6e4*n.getTimezoneOffset();return o?(e.getTime()-n.getTime()-s+a)/864e5+1:Object(h.isNumber)(e)?(t=e>59?1:0,0!=(s=6e4*((i=new Date(1e3*Math.round((+n+864e5*(e-t))/1e3))).getTimezoneOffset()-n.getTimezoneOffset()))?new Date(1e3*Math.round((+n+s-a+864e5*(e-t))/1e3)):i):null},e._parseBorder=function(e,t){for(var i in{left:0,right:0,top:0,bottom:0,diagonal:0}){var n=e[i];n&&(Object(h.isString)(n.color)&&(n.color=this._parseColor(n.color)),null==n.style||Object(h.isString)(n.style)||(n.style=f._parseBorderTypeToString(Object(h.asEnum)(n.style,c,!1))),!t&&n.color&&"#c6c6c6"===n.color.toLowerCase()&&"thin"===n.style&&(e[i]=null))}},e._applyDefaultBorder=function(e){if(e.fill&&e.fill.color)for(var t in null==e.borders&&(e.borders={}),{left:0,right:0,top:0,bottom:0})null==e.borders[t]&&(e.borders[t]={style:c.Thin,color:"#C6C6C6"})},e._resolveStyleInheritance=function(e){var t;if(!e.basedOn)return e;for(var i in e.basedOn)if("basedOn"===i)for(i in t=this._resolveStyleInheritance(e.basedOn)){var n=t[i];e[i]=null==e[i]?n:this._extend(e[i],n)}else n=e.basedOn[i],e[i]=null==e[i]?n:this._extend(e[i],n);return delete e.basedOn,e},e._parsePixelToCharWidth=function(e){return null==e||isNaN(+e)?null:((+e-5)/7*100+.5)/100},e._parseCharWidthToPixel=function(e){return null==e||isNaN(+e)?null:Math.floor((256*+e+128/7)/256*7)+5},e._parseCharCountToCharWidth=function(e){return null==e||isNaN(+e)?null:(7*+e+5)/7*256/256},e._numAlpha=function(e){var t=Math.floor(e/26)-1;return(t>-1?this._numAlpha(t):"")+this._alphabet.charAt(e%26)},e._alphaNum=function(e){return e.length>1?(this._alphabet.indexOf(e[0])+1)*Math.pow(26,e.length-1)+this._alphaNum(e.substring(1)):this._alphabet.indexOf(e)},e._typeOf=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},e._extend=function(e,t){if(Object(h.isObject)(e)&&Object(h.isObject)(t)){for(var i in t){var n=t[i];Object(h.isObject)(n)&&null!=e[i]?this._extend(e[i],n):null!=n&&null==e[i]&&(e[i]=n)}return e}return t},e._isEmpty=function(e){var t=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var i in e)if(t.call(e,i))return!1;return!0},e._cloneStyle=function(e){var t;if(null==e||"object"!=typeof e)return e;for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=this._cloneStyle(e[i]));return t},e._cloneColumnsStyle=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n])&&t.style&&(i[n]=this._cloneStyle(t.style));return i},e._getSheetIndex=function(e){return+(e=e.substring(0,e.lastIndexOf(".xml"))).substring(e.lastIndexOf("sheet")+5)},e._checkValidMergeCell=function(e,t,i,n,r){for(var o=0;o<e.length;o++){var s=e[o],a=+s[0].match(/\d*/g).join("")-1,l=this._alphaNum(s[0].match(/[a-zA-Z]*/g)[0]),c=+s[1].match(/\d*/g).join("")-1,h=this._alphaNum(s[1].match(/[a-zA-Z]*/g)[0]);if(!(t>c||t+i-1<a||n>h||n+r-1<l))return!1}return!0},e._getAttr=function(e,t){var i=e.indexOf(t+'="');return i>=0?(e=e.substr(i+t.length+2)).substring(0,e.indexOf('"')):""},e._getChildNodeValue=function(e,t){var i=e.indexOf(t+' val="');return i>=0?(e=e.substr(i+t.length+6)).substring(0,e.indexOf('"')):""},e._getSheetIndexBySheetName=function(e,t){for(var i=0;i<e.sheets.length;i++)if(e.sheets[i].name===t)return i;return-1},e._alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e._indexedColors=["000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","800000","008000","000080","808000","800080","008080","C0C0C0","808080","9999FF","993366","FFFFCC","CCFFFF","660066","FF8080","0066CC","CCCCFF","000080","FF00FF","FFFF00","00FFFF","800080","800000","008080","0000FF","00CCFF","CCFFFF","CCFFCC","FFFF99","99CCFF","FF99CC","CC99FF","FFCC99","3366FF","33CCCC","99CC00","FFCC00","FF9900","FF6600","666699","969696","003366","339966","003300","333300","993300","993366","333399","333333","000000","FFFFFF"],e._numFmts=["General","0","0.00","#,##0","#,##0.00",,,"$#,##0.00_);($#,##0.00)",,"0%","0.00%","0.00E+00","# ?/?","# ??/??","m/d/yyyy","d-mmm-yy","d-mmm","mmm-yy","h:mm AM/PM","h:mm:ss AM/PM","h:mm","h:mm:ss","m/d/yy h:mm",,,,,,,,,,,,,,,"#,##0 ;(#,##0)","#,##0 ;[Red](#,##0)","#,##0.00;(#,##0.00)","#,##0.00;[Red](#,##0.00)",,,,,"mm:ss","[h]:mm:ss","mmss.0","##0.0E+0","@"],e._tableColumnFunctions="average, count, countNums, max, min, stdDev, sum, var",e._xmlDescription='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',e._workbookNS="http://schemas.openxmlformats.org/spreadsheetml/2006/main",e._relationshipsNS="http://schemas.openxmlformats.org/package/2006/relationships",e._defaultFontName="Calibri",e._defaultFontSize=11,e._macroEnabled=!1,e._defaultColorThemes=["FFFFFF","000000","EEECE1","1F497D","4F818D","C0504D","9BBB59","8064A2","4BACC6","F79646"],e}(),L=function(){function e(e){this.value=e}return e.prototype.then=function(t,i){return new e(t?t(this.value):null)},e.prototype.catch=function(e){return this.then(null,e)},e.resolve=function(){return new e},e}(),F=function(){function e(e){this._obj=e}return e.prototype.loadAsync=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=(e=this._obj).load.apply(e,t);return new L(this._wrapOrNull(n))},e.prototype.file=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=(e=this._obj).file.apply(e,t);return this._wrapOrNull(n)},Object.defineProperty(e.prototype,"name",{get:function(){return this._obj.name},enumerable:!0,configurable:!0}),e.prototype.async=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e=t&&t.length>0&&"uint8array"===t[0].toLowerCase()?this._obj.asUint8Array():this._obj.asText(),new L(e)},e.prototype.folder=function(e){var t=this._obj.folder(e);return this._wrapOrNull(t)},e.prototype.forEach=function(t){var i=this._obj.root,n=i.length,r=this._obj.files;for(var o in r)o.length>n&&o.substr(0,n).toLowerCase()===i&&t(o.substr(n),new e(r[o]))},e.prototype._wrapOrNull=function(t){return null!=t?new e(t):null},e}(),R=function(){function e(e,t){this._callbacks=[],this._cs=e,this._onCancel=t}return e.serial=function(t,i){i=i.slice();var n=new e(t),r=[];return function e(){n.cancelled?i=[]:i.length?i.shift()().then((function(t){r.push(t),e()}),(function(e){i=[],n.reject(e)})):n.resolve(r)}(),n},e.prototype.cancel=function(e){void 0===e&&(e=!0),this._cancelled=!0,e&&this._onCancel&&this._onCancel()},Object.defineProperty(e.prototype,"cancelled",{get:function(){return this._cancelled||this._cs&&this._cs.cancelled},enumerable:!0,configurable:!0}),e.prototype.then=function(e,t){return this._callbacks.push({onFulfilled:e,onRejected:t}),this._resolved&&this.resolve(this._resolved.value),this},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.resolve=function(e){if(this.cancelled)return this;this._resolved={value:e};try{this.onFulfilled(e)}catch(e){this.onRejected(e)}return this},e.prototype.reject=function(e){return this.cancelled||this.onRejected(e),this},e.prototype.onFulfilled=function(e){for(;this._callbacks.length;){var t=this._callbacks[0];t.onFulfilled&&t.onFulfilled(e),this._callbacks.shift()}},e.prototype.onRejected=function(e){for(var t;t=this._callbacks.shift();)t.onRejected&&t.onRejected(e)},e}();function B(e,t,i,n,r){var o=i-t;return 0==o&&(o=1),(r-n)/o*(e-t)+n}Object(h._registerModule)("wijmo.xlsx",n);var z=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function V(){return Object(h._getModule)("wijmo.grid.detail")}function H(){return Object(h._getModule)("wijmo.grid.multirow")}function X(){return Object(h._getModule)("wijmo.grid.transposed")}function G(){return Object(h._getModule)("wijmo.grid.transposedmultirow")}var W,Y=function(){function e(){}return e.save=function(e,t,i){var n=new f;return this._saveFlexGridToWorkbook(n,e,t,!1,null),i&&n.save(i),n},e.saveAsync=function(e,t,i,n,r,o,s){var a=this,l=new f;if(!s)return this._saveFlexGridToWorkbook(l,e,t,!1,null),i?l.saveAsync(i,(function(e){Object(h.isFunction)(n)&&n(e,l)}),r,null):Object(h.isFunction)(n)&&n(null,l),l;var c=null!=i;return this.cancelAsync((function(){var s,u=[e.collectionView&&e.collectionView.collectionChanged,e.columns&&e.columns.collectionChanged,e.rows&&e.rows.collectionChanged,e.resizedColumn,e.resizedRow],d=function(){return u.forEach((function(e){e&&e.removeHandler(p)}))},p=function(){a._cs&&a._cs.cancel(!1),clearTimeout(s),s=setTimeout((function(){d(),l=null,a.saveAsync(e,t,i,n,r,o)}),100)},f=function(){clearTimeout(s),a._cs=null,d()};a._cs=new R(null,f),u.forEach((function(e){e&&e.addHandler(p)})),a._saveFlexGridToWorkbook(l,e,t,!0,a._cs,(function(e){Object(h.isFunction)(o)&&o(c?Math.round(B(e,0,100,0,50)):e)})).then((function(){i?(l._externalCancellation=function(){return a._cs},l.saveAsync(i,(function(e){f(),Object(h.isFunction)(n)&&n(e,l)}),(function(e){f(),Object(h.isFunction)(r)&&r(e)}),(function(e){Object(h.isFunction)(o)&&o(Math.round(B(e,0,100,51,100)))}))):(f(),Object(h.isFunction)(o)&&o(100),Object(h.isFunction)(n)&&n(null,l))}),(function(e){throw f(),e}))})),null},e.cancelAsync=function(e){var t=this;this._cs?(this._cs.cancel(),setTimeout((function(){t._cs=null,Object(h.isFunction)(e)&&e()}),100)):Object(h.isFunction)(e)&&e()},e.load=function(e,t,i){var n=this;if(t instanceof Blob){var r=new FileReader;r.onload=function(){var t=f._base64EncArr(new Uint8Array(r.result)),o=new f;o.load(t),t=null,e.deferUpdate((function(){n._loadToFlexGrid(e,o,i),o=null}))},r.readAsArrayBuffer(t)}else if(t instanceof f)e.deferUpdate((function(){n._loadToFlexGrid(e,t,i),t=null}));else{if(t instanceof ArrayBuffer)t=f._base64EncArr(new Uint8Array(t));else if(!Object(h.isString)(t))throw"Invalid workbook.";var o=new f;o.load(t),t=null,e.deferUpdate((function(){n._loadToFlexGrid(e,o,i),o=null}))}},e.loadAsync=function(e,t,i,n,r){var o=this;if(t instanceof Blob){var s=new FileReader;s.onload=function(){var t=f._base64EncArr(new Uint8Array(s.result)),a=new f;a.loadAsync(t,(function(r){t=null,a=null,e.deferUpdate((function(){o._loadToFlexGrid(e,r,i),n&&n(r),r=null}))}),r)},s.readAsArrayBuffer(t)}else if(t instanceof f)e.deferUpdate((function(){o._loadToFlexGrid(e,t,i),n&&n(t),t=null}));else{if(t instanceof ArrayBuffer)t=f._base64EncArr(new Uint8Array(t));else if(!Object(h.isString)(t))throw"Invalid workbook.";(new f).loadAsync(t,(function(r){t=null,e.deferUpdate((function(){o._loadToFlexGrid(e,r,i),n&&n(r),r=null}))}),r)}},e._saveFlexGridToWorkbook=function(e,t,i,n,r,o){var s,a=this,l=new R(r),c=new g,d=!i||null==i.includeColumnHeaders||i.includeColumnHeaders,p=!(!i||null==i.includeRowHeaders)&&i.includeRowHeaders,f=W.Cache,b=i?i.includeColumns:null,_=i?i.formatItem:null,v=0,x=p?t.rowHeaders.columns.length:0,w=[];i&&(f=!1===Object(h.asBoolean)(i.includeCellStyles,!0)?W.None:!1===Object(h.asBoolean)(i.quickCellStyles,!0)?W.Regular:W.Cache);var S=f===W.Cache?new q(500):null;null==this.hasCssText&&(this.hasCssText="cssText"in document.body.style);var C,O=t.wj_sheetInfo;if(c.name=i?i.sheetName:"",c.visible=!i||!1!==i.sheetVisible,O&&O.tables&&O.tables.length>0)for(var j=0;j<O.tables.length;j++)c.tables.push(O.tables[j]);s=[],O||f===W.None&&!_||((C=document.createElement("div")).style.visibility="hidden",C.setAttribute(u.FlexGrid._WJS_MEASURE,"true"),t.hostElement.appendChild(C)),(p?[t.rowHeaders,t.columnHeaders]:[t.columnHeaders]).forEach((function(e){for(var i=e.rows,n=e.columns,r=0,o=e.cellType===u.CellType.ColumnHeader?x:0,l=0;l<i.length;l++)if(!(i[l].renderSize<=0)){s[r]||(s[r]=[]);for(var h=0,p=0;h<n.length;h++){var f=t._getBindingColumn(e,l,n[h]),g=a._getColumnSetting(f,h,n);if(g&&(s[r][o+h]=g,0===r)){if(e.cellType===u.CellType.ColumnHeader&&b&&!b(f))continue;var _=new m;_._deserialize(g),c._addWorkbookColumn(_,o+p++)}}r++}e.cellType===u.CellType.ColumnHeader&&(v=d?r:0)}));var T=[[t.topLeftCells,t.columnHeaders],[t.rowHeaders,t.cells],[t.bottomLeftCells,t.columnFooters]];d||T.shift();var N=T.map((function(e){return e[1].rows.length})).reduce((function(e,t){return e+t}));return this._saveContentToWorksheet(r,n,Date.now(),0,{panels:T,panelIdx:0,globRowIdx:0,rowsOffset:0,totalRows:N},t,c,p,s,f,C,w,S,b,_,(function(e){o(Math.round(e/N*100))}),(function(){var n=new y;n.rows=d?t.frozenRows+v:t.frozenRows,n.columns=p?t.frozenColumns+x:t.frozenColumns,c.frozenPane=n,e._addWorkSheet(c),O||f===W.None&&!_||(t.hostElement.removeChild(C),w.forEach((function(e){return e.forEach((function(e){e&&e.parentElement&&e.parentElement.removeChild(e)}))}))),S&&S.clear(),e.activeWorksheet=i?i.activeWorksheet:null,l.resolve()})),l},e._saveContentToWorksheet=function(e,t,i,n,r,o,s,a,l,c,d,p,f,g,m,_,y){for(var v=this,x=c?20:200,w=function(h){if(e&&e.cancelled)return{value:void 0};if(t&&h-n>x&&Date.now()-i>100)return setTimeout((function(){e&&e.cancelled||(_(h),v._saveContentToWorksheet(e,t,Date.now(),h,r,o,s,a,l,c,d,p,f,g,m,_,y))}),0),{value:void 0};for(;h-r.rowsOffset>=r.panels[r.panelIdx][1].rows.length;)r.rowsOffset+=r.panels[r.panelIdx][1].rows.length,r.panelIdx++;var w=r.panels[r.panelIdx],C=w[0],O=w[1],j=h-r.rowsOffset,T=O.rows[j];if(O.cellType!==u.CellType.Cell&&T.renderSize<=0||T instanceof u._NewRowTemplate)return"continue";var N=0,A={},M=new b,E=T instanceof u.GroupRow,P=0;O.cellType===u.CellType.Cell&&(E?P=T.level:o.rows.maxGroupLevel>-1&&(P=o.rows.maxGroupLevel+1)),a&&(N=S._parseFlexGridRowToSheetRow(C,A,j,0,l,c,d,p,f,E,P,g,m)),S._parseFlexGridRowToSheetRow(O,A,j,N,l,c,d,p,f,E,P,g,m),A.cells.length>0&&(M._deserialize(A),s._addWorkbookRow(M,r.globRowIdx)),r.globRowIdx++},S=this,C=n;C<r.totalRows;C++){var O=w(C);if("object"==typeof O)return O.value}Object(h.isFunction)(y)&&y()},e._loadToFlexGrid=function(e,t,i){if(G()&&e instanceof G().TransposedMultiRow)throw"Not supported.";i=i||{};var n,r=null!=e.wj_sheetInfo,o={},a=[],l=[],c={};e.itemsSource=null,e.columns.clear(),e.columnHeaders.rows.clear(),e.rowHeaders.columns.clear(),e.rows.clear(),e.frozenColumns=0,e.frozenRows=0;var d=null==i.sheetIndex||isNaN(i.sheetIndex)?0:i.sheetIndex;if(d<0||d>=t.sheets.length)throw"The sheet index option is out of the sheet range of current workbook.";if(null!=i.sheetName)for(var p=0;p<t.sheets.length;p++)if(i.sheetName===t.sheets[p].name){n=t.sheets[p];break}if(null!=(n=n||t.sheets[d]).rows){for(var g=this._getColumnCount(n.rows),m=this._getRowCount(n.rows,g),b=n.columns,_=0;_<g;_++)e.columns.push(new u.Column),b[_]&&(isNaN(+b[_].width)||(e.columns[_].width=+b[_].width),b[_].visible||null==b[_].visible||(e.columns[_].visible=!!b[_].visible),b[_].style&&b[_].style.wordWrap&&(e.columns[_].wordWrap=b[_].style.wordWrap));var y,v=(null==i.includeColumnHeaders||i.includeColumnHeaders)&&n.rows.length>0,x=v?this._getColumnHeadersHeight(n):0,w=!1,S=[],C=n.frozenPane&&n.frozenPane.rows,O=n.frozenPane&&n.frozenPane.columns;C=Object(h.isNumber)(C)&&!isNaN(C)?C:null,O=Object(h.isNumber)(O)&&!isNaN(O)?O:null;for(var j=x;j<m;j++){var T=!1,N=null,A=n.rows[j];if(A)for(var M=j+1;M<n.rows.length;){var E=n.rows[M];if(E){(isNaN(A.groupLevel)&&!isNaN(E.groupLevel)||!isNaN(A.groupLevel)&&A.groupLevel<E.groupLevel)&&(T=!0);break}M++}if(T&&!n.summaryBelow)y&&(y.isCollapsed=w),(y=new u.GroupRow).isReadOnly=!1,w=null!=A.collapsed&&A.collapsed,y.level=isNaN(A.groupLevel)?0:A.groupLevel,c[y.level]=w,this._checkParentCollapsed(c,y.level)&&y._setFlag(u.RowColFlags.ParentCollapsed,!0),e.rows.push(y);else{var P=new u.Row;A&&this._checkParentCollapsed(c,A.groupLevel)&&P._setFlag(u.RowColFlags.ParentCollapsed,!0),e.rows.push(P)}for(A&&A.height&&!isNaN(A.height)&&(e.rows[j-x].height=A.height),_=0;_<g;_++)if(A){var I=A.cells[_],D=I?I.formula:null;D&&"="!==D[0]&&(D="="+D),I&&I.textRuns&&I.textRuns.length>0?(e.rows[j-x].isContentHtml=!0,e.setCellData(j-x,_,this._parseTextRunsToHTML(I.textRuns))):e.setCellData(j-x,_,D&&r?D:this._getItemValue(I)),T||this._setColumn(S,_,I);var k=j*g+_,L=I?I.style:null,F=f._parseExcelFormat(I),R=void 0;if(L){if(N=(null==N||N)&&!!L.wordWrap,L.hAlign)R=f._parseHAlignToString(Object(h.asEnum)(L.hAlign,s));else switch(this._getItemType(I)){case h.DataType.Number:R="right";break;case h.DataType.Boolean:R="center";break;default:R=F&&0===F.search(/[n,c,p]/i)?"right":"left"}if(o[k]={fontWeight:L.font&&L.font.bold?"bold":"none",fontStyle:L.font&&L.font.italic?"italic":"none",textDecoration:L.font&&L.font.underline?"underline":"none",textAlign:R,fontFamily:L.font&&L.font.family?L.font.family:"",fontSize:L.font&&L.font.size?L.font.size+"px":"",color:L.font&&L.font.color?L.font.color:"",backgroundColor:L.fill&&L.fill.color?L.fill.color:"",whiteSpace:L.wordWrap?"pre-wrap":"normal",format:F},L.borders&&(L.borders.left&&(this._parseBorderStyle(L.borders.left.style,"Left",o[k]),o[k].borderLeftColor=L.borders.left.color),L.borders.right&&(this._parseBorderStyle(L.borders.right.style,"Right",o[k]),o[k].borderRightColor=L.borders.right.color),L.borders.top&&(this._parseBorderStyle(L.borders.top.style,"Top",o[k]),o[k].borderTopColor=L.borders.top.color),L.borders.bottom&&(this._parseBorderStyle(L.borders.bottom.style,"Bottom",o[k]),o[k].borderBottomColor=L.borders.bottom.color)),L.fill&&L.fill.color){var B=o[k],z=L.borders,V=L.fill.color;z?(z.left&&z.left.color||(B.borderLeftColor=V),z.right&&z.right.color||_===O-1||(B.borderRightColor=V),z.top&&z.top.color||(B.borderTopColor=V),z.bottom&&z.bottom.color||j===C-1||(B.borderBottomColor=V)):(B.borderLeftColor=V,_!==O-1&&(B.borderRightColor=V),B.borderTopColor=V,j!==C-1&&(B.borderBottomColor=V))}L.font&&-1===l.indexOf(L.font.family)&&l.push(L.font.family)}I&&Object(h.isNumber)(I.rowSpan)&&I.rowSpan>0&&Object(h.isNumber)(I.colSpan)&&I.colSpan>0&&(I.rowSpan>1||I.colSpan>1)&&a.push(new u.CellRange(j,_,j+I.rowSpan-1,_+I.colSpan-1))}A&&(this._checkParentCollapsed(c,A.groupLevel)||A.visible||null==A.visible||(e.rows[j-x].visible=A.visible),e.rows[j-x].wordWrap=!!A.style&&!!A.style.wordWrap||!!N)}for(y&&(y.isCollapsed=w),null!=O&&(e.frozenColumns=O),null!=C&&(e.frozenRows=v&&C>0?C-1:C),_=0;_<e.columnHeaders.columns.length;_++){var H=S[_],X=e.columns[_];X.isRequired=!1,H&&(H.dataType===h.DataType.Boolean&&(X.dataType=H.dataType),X.format=H.format,X.align=H.hAlign,X.wordWrap=X.wordWrap||!!H.wordWrap)}for(p=0;p<Math.max(x,1);p++)e.columnHeaders.rows.push(new u.Row);var W=Object.keys(n.rows);for(p=0;p<x;p++)for(var Y=0;Y<e.columnHeaders.columns.length;Y++){var U=n.rows[W[p]].cells[Y],q=U&&U.value||"",K=e.columnHeaders.columns[Y];if(q){var $=f._parseExcelFormat(U);q=h.Globalize.format(q,$)}K.header=K.header||q,e.columnHeaders.setCellData(p,Y,q)}if(r){var J=null==i.sheetVisible||i.sheetVisible;e.wj_sheetInfo.name=n.name,e.wj_sheetInfo.visible=!0===J||!1!==n.visible,e.wj_sheetInfo.styledCells=o,e.wj_sheetInfo.mergedRanges=a,e.wj_sheetInfo.fonts=l,e.wj_sheetInfo.tables=n.tables}}},e._getColumnHeadersHeight=function(e){if(!e&&!e.rows.length)return 0;for(var t=1,i=0;i<e.rows.length;i++){var n=e.rows[i];if(n){n.cells.forEach((function(e){t=Math.max(t,e.rowSpan||0)}));break}}return t},e._escapePlainText=function(e){return null==e?"":""===e?"'":e&&("'"===e[0]||e.length>1&&"="===e[0]&&"="===e[1])?"'"+e:e},e._parseFlexGridRowToSheetRow=function(e,t,i,n,r,o,a,c,d,p,g,m,b){var _,y,v,x,w,S,C,O,j,T,N,A,M,E,P,I,D,k,L,F,R,B,z,Y,q,K,$,J,Q,Z,ee=!1,te=!1;for((L=(_=e.grid).wj_sheetInfo)&&(F=L.evaluateFormula),null==(y=e.rows[i]).recordIndex?(Y=0,e.cellType===u.CellType.ColumnHeader&&e.rows.length>1&&(Y=i===r.length?i-1:i)):Y=y.recordIndex,t.cells||(t.cells=[]),t.visible=y.isVisible,t.height=y.renderHeight||e.rows.defaultSize,t.groupLevel=g,p&&(t.collapsed=y.isCollapsed),y.wordWrap&&(t.style={wordWrap:y.wordWrap}),(y.constructor===u.Row||y.constructor===u._NewRowTemplate||X()&&_ instanceof X().TransposedGrid&&y instanceof u.Row||V()&&y.constructor===V().DetailRow||H()&&y.constructor===H()._MultiRow||G()&&y instanceof G()._MultiRow)&&(ee=!0),V()&&y.constructor===V().DetailRow&&(te=!0),x=0;x<e.columns.length;x++)if(w=null,k=1,D=1,Q=0,z=!1,P=null,K=null,O=null,B=_._getBindingColumn(e,i,e.columns[x]),I=null,L&&e===_.cells?(E=i*e.columns.length+x,L.mergedRanges&&(I=this._getMergedRange(i,x,L.mergedRanges)),L.styledCells&&(P=L.styledCells[E])):o!==W.None&&(K=this._getMeasureCell(e,x,a,c),P=(I=_.getMergedRange(e,i,x,!1))?this._getCellStyle(e,K,I.bottomRow,I.rightCol,d)||{}:this._getCellStyle(e,K,i,x,d)||{}),I||(I=_.getMergedRange(e,i,x,!1)),I?i===I.topRow&&x===I.leftCol&&(D=I.bottomRow-I.topRow+1,k=this._getColSpan(e,I,m),z=!0):z=!0,!m||m(B)){if(v=r[Y]?r[Y][x+n]:null,ee||p?(C=z?e.getCellData(i,x,!0):null,j=z?e.getCellData(i,x,!1):null,N=this._isFormula(C),M=null,R=Object(h.isDate)(j),P&&P.format?(/[hsmyt\:]/i.test(w=P.format)&&(R=!0),S=f._parseCellFormat(P.format,R)):v&&v.style&&v.style.format?(w=B.format,S=v.style.format):S=null,N&&null!=F&&Object(h.isFunction)(F)&&(M=F(C)),S||(R?S="m/d/yyyy":Object(h.isNumber)(j)&&!B.dataMap?S=Object(h.isInt)(j)?"#,##0":"#,##0.00":N?(A=C.toLowerCase()).indexOf("now()")>-1?(S="m/d/yyyy h:mm",R=!0):A.indexOf("today()")>-1||A.indexOf("date(")>-1?(S="m/d/yyyy",R=!0):A.indexOf("time(")>-1&&(S="h:mm AM/PM",R=!0):S="General")):(C=z?_.columnHeaders.getCellData(0,x,!0):null,S="General"),Object(h.isString)(C)&&-1!==C.indexOf("<span")&&(O=this._parseToTextRuns(C),C=null),$=this._parseCellStyle(P)||{},e===_.cells&&p&&y.hasChildren&&x===_.columns.firstVisibleIndex){if(N&&null!=M?T=M:C?T=C:z&&(T=y.getGroupHeader().replace(/<\/?\w+>/g,"").replace(/&#39;/g,"'")),null==T&&!P)continue;!(R=Object(h.isDate)(T))&&w&&"d"===w.toLowerCase()&&Object(h.isInt)(T)&&(S="0"),T=Object(h.isString)(T)?f._unescapeXML(T):T,x===_.columns.firstVisibleIndex&&_.treeIndent&&(Q=g),q={value:T,isDate:R,formula:N?this._parseToExcelFormula(C,R):null,colSpan:k,rowSpan:D,style:this._extend($,{format:S,font:{bold:!0},hAlign:s.Left,indent:Q}),textRuns:O}}else C=Object(h.isString)(C)?f._unescapeXML(C):C,j=Object(h.isString)(j)?f._unescapeXML(j):j,!R&&w&&"d"===w.toLowerCase()&&Object(h.isInt)(j)&&(S="0"),J=$&&$.hAlign?$.hAlign:v&&v.style&&null!=v.style.hAlign?Object(h.asEnum)(v.style.hAlign,s,!0):Object(h.isDate)(j)?s.Left:s.General,x!==_.columns.firstVisibleIndex||!_.treeIndent||J!==s.Left&&J!==s.General||(Q=g),q={value:N?M:this._escapePlainText("General"!==S||""===C&&null==j?j:C),isDate:R,formula:N?this._parseToExcelFormula(C,R):null,colSpan:x<_.columns.firstVisibleIndex?1:k,rowSpan:D,style:this._extend($,{format:S,hAlign:J,vAlign:D>1?e===_.cells||!1===_.centerHeadersVertically?l.Top:l.Center:null,indent:Q}),textRuns:O},te&&(Z=e.getCellElement(i,x))&&Z.appendChild(y.detail);b&&b(new U(e,new u.CellRange(i,x),K,a,c,d,q)),t.cells.push(q)}return n+x},e._parseCellStyle=function(e,t){if(void 0===t&&(t=!1),null==e)return null;var i=e.fontSize;i=i?+i.substring(0,i.indexOf("px")):null,isNaN(i)&&(i=null);var n=e.fontWeight;n="bold"===n||+n>=700;var r="italic"===e.fontStyle,o=e.textDecorationStyle;null==o&&(o=e.textDecoration),o="underline"===o;var s=e.whiteSpace;return s=!!s&&s.indexOf("pre")>-1,{font:{bold:n,italic:r,underline:o,family:this._parseToExcelFontFamily(e.fontFamily),size:i,color:e.color},fill:{color:e.backgroundColor},borders:this._parseBorder(e,t),hAlign:f._parseStringToHAlign(e.textAlign),wordWrap:s}},e._parseBorder=function(e,t){var i={};return i.left=this._parseEgdeBorder(e,"Left"),i.right=this._parseEgdeBorder(e,"Right"),i.top=this._parseEgdeBorder(e,"Top"),i.bottom=this._parseEgdeBorder(e,"Bottom"),t&&(i.vertical=this._parseEgdeBorder(e,"Vertical"),i.horizontal=this._parseEgdeBorder(e,"Horizontal")),i},e._parseEgdeBorder=function(e,t){var i,n=e["border"+t+"Style"],r=e["border"+t+"Width"];if(r&&(r=parseFloat(r)),n&&"none"!==n&&"hidden"!==n&&0!==r){switch(i={},n=n.toLowerCase()){case"dotted":i.style=r>1?c.MediumDashDotted:c.Dotted;break;case"dashed":i.style=r>1?c.MediumDashed:c.Dashed;break;case"double":i.style=c.Double;break;default:i.style=r>2?c.Thick:r>1?c.Medium:c.Thin}i.color=e["border"+t+"Color"]}return i},e._parseBorderStyle=function(e,t,i){var n="border"+t+"Style",r="border"+t+"Width";switch(e){case c.Dotted:case c.Hair:i[n]="dotted",i[r]="1px";break;case c.Dashed:case c.ThinDashDotDotted:case c.ThinDashDotted:i[n]="dashed",i[r]="1px";break;case c.MediumDashed:case c.MediumDashDotDotted:case c.MediumDashDotted:case c.SlantedMediumDashDotted:i[n]="dashed",i[r]="2px";break;case c.Double:i[n]="double",i[r]="3px";break;case c.Medium:i[n]="solid",i[r]="2px";break;case c.Thick:i[n]="solid",i[r]="3px";break;default:i[n]="solid",i[r]="1px"}},e._parseToExcelFontFamily=function(e){var t;return e&&(t=e.split(","))&&t.length>0&&(e=t[0].replace(/\"|\'/g,"")),e},e._parseToExcelFormula=function(e,t){var i,n,r,o,s,a,l,c=/\"?\w+\"?\s*\,\s*\"(\w+)\"/i;if(i=e.match(/(floor|ceiling)\([+-]?\d+\.?\d*\)/gi))for(s=0;s<i.length;s++)l=(a=i[s]).substring(0,a.lastIndexOf(")"))+", 1)",e=e.replace(a,l);if(i=null,i=e.match(/text\(\"?\w+\"?\s*\,\s*\"\w+\"\)/gi))for(s=0;s<i.length;s++)(n=(a=i[s]).match(c))&&2===n.length&&(/^d{1,4}?$/.test(r=n[1])||(o=f._parseCellFormat(r,t),l=a.replace(r,o),e=e.replace(a,l)));return e},e._parseToTextRuns=function(e){var t,i,n,r=e.split("<span "),o=[];for(t=0;t<r.length;t++)n=-1!==(i=r[t]).indexOf("</span>")?{text:i.substring(i.indexOf(">")+1,i.indexOf("</span>")),font:this._parseToTextRunFont(i.substring(i.indexOf('style="')+7,i.indexOf(';"')))}:{text:i},o.push(n);return o},e._parseToTextRunFont=function(e){var t,i,n,r,o,s,a,l,c,h=e.split(";");if(h.length>0){for(t=0;t<h.length;t++)if(2===(i=h[t].split(":")).length)switch(i[1]=i[1].trim(),i[0]){case"font-size":s=+i[1].substring(0,i[1].indexOf("px")),isNaN(s)&&(s=null);break;case"font-weight":n="bold"===i[1]||+i[1]>=700;break;case"font-style":r="italic"===i[1];break;case"text-decoration-style":case"text-decoration":o="underline"===i[1];break;case"font-family":a=this._parseToExcelFontFamily(i[1]);break;case"color":l=i[1]}c={bold:n,italic:r,underline:o,family:a,size:s,color:l}}return c},e._getMeasureCell=function(e,t,i,n){var r=n[e.cellType],o=r&&r[t],s=null==o;return o?this.hasCssText&&(o.style.cssText="",o.style.visibility="hidden"):(r||(n[e.cellType]=r=[]),r[t]=o=i.cloneNode()),!s&&o.parentElement||(e.hostElement.children.length>0?e.hostElement.children[0].appendChild(o):e.hostElement.appendChild(o)),o},e._getColumnSetting=function(e,t,i){var n=e;return null!=e.colspan&&(n=this._getRenderColumn(t,i)),n?{autoWidth:!0,width:n.renderWidth||i.defaultSize,visible:n.visible,style:{format:n.format?f._parseCellFormat(n.format,n.dataType===h.DataType.Date):"",hAlign:f._parseStringToHAlign(this._toExcelHAlign(n.getAlignment())),wordWrap:n.wordWrap}}:null},e._toExcelHAlign=function(e){return(e=e?e.trim().toLowerCase():e)?e.indexOf("center")>-1?"center":e.indexOf("right")>-1||e.indexOf("end")>-1?"right":e.indexOf("justify")>-1?"justify":"left":e},e._getColumnCount=function(e){for(var t,i=0,n=0,r=0;r<e.length;r++)(t=e[r]&&e[r].cells?e[r].cells:[])&&t.length>0&&(n=t.length,Object(h.isInt)(t[n-1].colSpan)&&t[n-1].colSpan>1&&(n=n+t[n-1].colSpan-1),n>i&&(i=n));return i},e._getRowCount=function(e,t){for(var i,n,r=e.length,o=r-1,s=0;s<t;s++)e:for(;o>=0;o--)if((n=((i=e[o])&&i.cells?i.cells:[])[s])&&(null!=n.value&&""!==n.value||Object(h.isInt)(n.rowSpan)&&n.rowSpan>1)){Object(h.isInt)(n.rowSpan)&&n.rowSpan>1&&o+n.rowSpan>r&&(r=o+n.rowSpan);break e}return r},e._numAlpha=function(e){var t=Math.floor(e/26)-1;return(t>-1?this._numAlpha(t):"")+String.fromCharCode(65+e%26)},e._getItemType=function(e){return null==e||null==e.value||isNaN(e.value)?null:Object(h.getType)(e.value)},e._setColumn=function(e,t,i){var n,r,o,a=e[t];a?(n=this._getItemType(i),a.dataType!==n&&a.dataType===h.DataType.Boolean&&n!==h.DataType.Boolean&&(a.dataType=n),!i||null==i.value||Object(h.isString)(i.value)&&Object(h.isNullOrWhiteSpace)(i.value)||(r=f._parseExcelFormat(i))&&a.format!==r&&"General"!==r&&(a.format=r),i&&i.style&&(i.style.hAlign&&(o=f._parseHAlignToString(Object(h.asEnum)(i.style.hAlign,s))),a.wordWrap=(null==a.wordWrap||a.wordWrap)&&!!i.style.wordWrap),o||n!==h.DataType.Number||(o="right"),a.hAlign=o):e[t]={dataType:this._getItemType(i),format:f._parseExcelFormat(i),hAlign:"",wordWrap:null}},e._getItemValue=function(e){if(null==e||null==e.value)return null;var t=e.value;return Object(h.isString)(t)&&"'"===t[0]&&(t=t.substr(1)),Object(h.isNumber)(t)&&isNaN(t)||t instanceof Date&&isNaN(t.getTime())?"":t},e._getCellStyle=function(e,t,i,n,r){var o,s=e.grid;try{s.cellFactory.updateCell(e,i,n,t,null,!(r&&!s.formatItem.hasHandlers&&!s.itemFormatter)),t.className=t.className.replace("wj-state-selected",""),t.className=t.className.replace("wj-state-multi-selected","")}catch(e){return null}if(r){var a,l=e.hostElement,c=t;a=c.style.cssText.split(/;\s+/).filter((function(e){var t=e.substring(0,e.indexOf(":"));return/^(color|background|border|font|text|whitespace)/i.test(t)})).join(";");do{a=c.className+a}while(c!==l&&(c=c.parentElement));(o=r.getValue(a))||(o=window.getComputedStyle(t),r.add(a,o))}else o=window.getComputedStyle(t);return o},e._parseTextRunsToHTML=function(e){var t,i,n,r;for(n="",r=0;r<e.length;r++)n+=(i=(t=e[r]).font)?'<span style="'+(i.bold?"font-weight: bold;":"")+(i.italic?"font-style: italic;":"")+(i.underline?"text-decoration: underline;":"")+(i.family?"font-family: "+i.family+";":"")+(null!=i.size?"font-size: "+i.size+"px;":"")+(i.color?"color: "+i.color+";":"")+'">'+t.text+"</span>":t.text;return n},e._extend=function(e,t){for(var i in t){var n=t[i];Object(h.isObject)(n)&&e[i]?Object(h.copy)(e[i],n):e[i]=n}return e},e._checkParentCollapsed=function(e,t){var i=!1;return Object.keys(e).forEach((function(n){!0===e[n]&&!1===i&&!isNaN(t)&&+n<t&&(i=!0)})),i},e._getColSpan=function(e,t,i){for(var n=0,r=t.leftCol;r<=t.rightCol;r++)i&&!i(e.columns[r])||n++;return n},e._getRenderColumn=function(e,t){return e>=t.length?null:t[e]},e._getMergedRange=function(e,t,i){var n,r;for(n=0;n<i.length;n++)if(e>=(r=i[n]).topRow&&e<=r.bottomRow&&t>=r.leftCol&&t<=r.rightCol)return r;return null},e._isFormula=function(e){return e&&"string"==typeof e&&e.length>1&&"="===e[0]&&"="!==e[1]},e}(),U=function(e){function t(t,i,n,r,o,s,a){var l=e.call(this,t,i)||this;return l._cell=n,l._patternCell=r,l._xlsxCell=a,l._cellsCache=o,l._styleCache=s,l}return z(t,e),Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xlsxCell",{get:function(){return this._xlsxCell},set:function(e){this._xlsxCell=e},enumerable:!0,configurable:!0}),t.prototype.getFormattedCell=function(){return this._cell||(this._cell=Y._getMeasureCell(this.panel,this.col,this._patternCell,this._cellsCache),Y._getCellStyle(this.panel,this._cell,this.row,this.col,this._styleCache)),this._cell},t}(u.CellRangeEventArgs);!function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Cache=2]="Cache"}(W||(W={}));var q=function(){function e(e){this._cache={},this._size=0,this._max=e}return e.prototype.add=function(e,t){this._size>=this._max&&this.clear(),this._cache[e]=this._cloneStyle(t),this._size++},e.prototype.clear=function(){this._cache={},this._size=0},e.prototype.getValue=function(e){return this._cache[e]||null},e.prototype.hasKey=function(e){return!!this._cache[e]},e.prototype._cloneStyle=function(e){if(!e)return null;for(var t={},i=function(e){return e.replace(/\-([a-z])/g,(function(e,t,i){return i>0?t.toUpperCase():t}))},n=0,r=e.length;n<r;n++){var o=e[n];t[i(o)]=e.getPropertyValue(o)}return t},e}();Object(h._registerModule)("wijmo.grid.xlsx",r)},I7ZH:function(e,t,i){"use strict";i.r(t),i.d(t,"TabPanel",(function(){return c})),i.d(t,"Tab",(function(){return h})),i.d(t,"Accordion",(function(){return d})),i.d(t,"AccordionPane",(function(){return p})),i.d(t,"FormatNodeEventArgs",(function(){return f})),i.d(t,"TreeNodeEventArgs",(function(){return g})),i.d(t,"TreeNodeDragDropEventArgs",(function(){return m})),i.d(t,"DropPosition",(function(){return r})),i.d(t,"TreeNode",(function(){return b})),i.d(t,"_BindingArray",(function(){return _})),i.d(t,"TreeView",(function(){return y})),i.d(t,"_TreeDragDropManager",(function(){return v}));var n,r,o,s=i("tcrU"),a=i("I7ZH"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e){function t(t,i,n){var r=e.call(this,t,null,!0)||this;r._tabs=new s.ObservableArray,r._selectedIndex=-1,r._animated=!0,r._autoSwitch=!0,r.selectedIndexChanged=new s.Event;var o=r.hostElement,a=[];if(!n)for(;o.firstElementChild;){var l=o.firstElementChild;o.removeChild(l),a.push(l)}var c=r.getTemplate();return r.applyTemplate("wj-control wj-tabpanel wj-animated",c,{_dRoot:"root",_dTabHeaders:"tabheaders",_dTabPanes:"tabpanes"}),o.tabIndex=-1,r._dRoot.tabIndex=r._dTabHeaders.tabIndex=r._dTabPanes.tabIndex=-1,i&&Object(s.isBoolean)(i.isAnimated)&&(r.isAnimated=i.isAnimated),r.addEventListener(o,"click",r._click.bind(r)),r.addEventListener(o,"keydown",r._keydown.bind(r)),r._tabs.collectionChanged.addHandler(r._populateControl.bind(r)),r.tabs.deferUpdate((function(){a.forEach((function(e){Object(s.assert)(2==e.childElementCount,"TabPanel children should contain header and pane elements"),r.tabs.push(new h(e.children[0],e.children[1]))}))})),r.initialize(i),r.selectedIndex<0&&r.tabs.length?r.selectedIndex=0:r.onSelectedIndexChanged(),r}return l(t,e),Object.defineProperty(t.prototype,"tabs",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){(e=Object(s.asInt)(e,!1))!=this._selectedIndex?(this._selectedIndex=e,this._updateContent(),this.onSelectedIndexChanged()):this._updateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedTab",{get:function(){var e=this._selectedIndex;return e>-1?this._tabs[e]:null},set:function(e){for(var t=-1,i=0;i<this._tabs.length&&t<0;i++)this._tabs[i]==e&&(t=i);this.selectedIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animated},set:function(e){this._animated=Object(s.asBoolean)(e),Object(s.toggleClass)(this.hostElement,"wj-animated",this._animated)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSwitch",{get:function(){return this._autoSwitch},set:function(e){e!=this._autoSwitch&&(this._autoSwitch=Object(s.asBoolean)(e),this._updateContent())},enumerable:!0,configurable:!0}),t.prototype.getTab=function(e){for(var t=0;t<this._tabs.length;t++)if((i=this._tabs[t]).header.id==e||i.pane.id==e)return i;for(t=0;t<this._tabs.length;t++){var i;if((i=this._tabs[t]).header.textContent==e)return i}return null},t.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},t.prototype._populateControl=function(){var e=this;this._removeChildren(this._dTabHeaders),this._removeChildren(this._dTabPanes);var t=-1;this._tabs.forEach((function(i,n){Object(s.assert)(i instanceof h,"tabs array must contain Tab objects."),i._setPanel(e);var r=i.header;Object(s.addClass)(r,"wj-tabheader"),Object(s.setAttribute)(r,"role","tab"),e._dTabHeaders.appendChild(r);var o=i.pane;Object(s.addClass)(o,"wj-tabpane"),Object(s.setAttribute)(o,"role","tabpanel"),Object(s.setAttribute)(o,"aria-labelledby",r.id?r.id:null),e._dTabPanes.appendChild(o),t<0&&(Object(s.hasClass)(r,"wj-state-active")||"true"==r.getAttribute("aria-selected"))&&(t=n)})),t<0&&this._tabs.length>0&&(t=0),t>-1?this.selectedIndex=t:this.selectedIndex>-1&&this.selectedIndex<this._tabs.length&&this._updateContent(),this._validateSelection()},t.prototype._validateSelection=function(){var e=this.selectedTab;if(e&&(e.isDisabled||!e.isVisible)){var t=this._getNextIndex(this.selectedIndex,1);t<0&&(t=this._getNextIndex(this.selectedIndex,-1)),this.selectedIndex=t}},t.prototype._updateContent=function(){var e=this,t=Object(s.contains)(this._dTabHeaders,Object(s.getActiveElement)()),i=this._dTabHeaders.children,n=this._dTabPanes.children,r=this._selectedIndex;if(r>-1&&r<n.length){var o=(h=n[r]).style;this.isAnimated?(this._eAnim&&(this._eAnim.style.opacity=""),this._toAnim&&clearInterval(this._toAnim),o.opacity="0",this._eAnim=h,this._toAnim=Object(s.animate)((function(t){1==t?(e._eAnim=null,e._toAnim=null,o.opacity=""):o.opacity=t.toString()}))):o.opacity=""}for(var a=0;a<i.length;a++){var l=a==r,c=i[a];Object(s.setAttribute)(c,"aria-selected",l),Object(s.toggleClass)(c,"wj-state-active",l);var h=n[a];Object(s.toggleClass)(h,"wj-state-active",l),c.tabIndex=l||!this._autoSwitch?this._orgTabIndex:-1,l&&(t&&c.focus(),this._szObserver||s.Control.invalidateAll(h))}},t.prototype._removeChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype._click=function(e){var t=this._getTabIndex(e.target);if(t>-1){var i=this._tabs[t];!i.isDisabled&&i.isVisible&&(this.selectedIndex=t)}},t.prototype._keydown=function(e){if(!e.defaultPrevented){var t=this._getTabIndex(Object(s.getActiveElement)());if(t>-1){var i=this._getKeyCode(e);switch(i){case s.Key.Left:case s.Key.Up:case s.Key.Right:case s.Key.Down:case s.Key.Home:case s.Key.PageUp:case s.Key.End:case s.Key.PageDown:switch(i){case s.Key.Left:case s.Key.Up:t=this._getNextIndex(t,-1);break;case s.Key.Right:case s.Key.Down:t=this._getNextIndex(t,1);break;case s.Key.Home:case s.Key.PageUp:t=this._getNextIndex(-1,1);break;case s.Key.End:case s.Key.PageDown:t=this._getNextIndex(this._tabs.length,-1)}t>-1&&(this._autoSwitch?this.selectedIndex=t:this._tabs[t].header.focus()),e.preventDefault();break;case s.Key.Enter:case s.Key.Space:t>-1&&this._tabs[t].header.click(),e.preventDefault()}}}},t.prototype._getTabIndex=function(e){var t=Object(s.closest)(e,".wj-tabheader");if(t&&Object(s.closest)(t,".wj-tabpanel")==this.hostElement)for(var i=0;i<this._tabs.length;i++)if(this._tabs[i].header==t)return i;return-1},t.prototype._getNextIndex=function(e,t){for(var i=e+t;i>-1&&i<this._tabs.length;i+=t){var n=this._tabs[i];if(!n.isDisabled&&n.isVisible)return i}return-1},t.controlTemplate='<div wj-part="root"><div wj-part="tabheaders" class="wj-tabheaders" role="tablist"></div><div wj-part="tabpanes" class="wj-tabpanes"></div></div>',t}(s.Control),h=function(){function e(e,t){this._hdr=Object(s.asType)(Object(s.getElement)(e),HTMLElement),this._pane=Object(s.asType)(Object(s.getElement)(t),HTMLElement)}return Object.defineProperty(e.prototype,"tabPanel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._hdr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pane",{get:function(){return this._pane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return Object(s.hasClass)(this._hdr,"wj-state-disabled")},set:function(e){Object(s.toggleClass)(this._hdr,"wj-state-disabled",Object(s.asBoolean)(e)),this._p&&this._p._validateSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return"none"!=this._hdr.style.display},set:function(e){this._hdr.style.display=Object(s.asBoolean)(e)?"":"none",this._p&&this._p._validateSelection()},enumerable:!0,configurable:!0}),e.prototype._setParts=function(e,t){if(e=Object(s.asType)(Object(s.getElement)(e),HTMLElement),t=Object(s.asType)(Object(s.getElement)(t),HTMLElement,!1),this._hdr!==e||this._pane!==t){var i=this.isDisabled,n=this.isVisible;this._hdr=e,this._pane=t,this.isDisabled=i,this.isVisible=n;var r=this.tabPanel;r&&!r.tabs.isUpdating&&r._populateControl()}},e.prototype._setPanel=function(e){this._p=e},e}(),u="wj-state-active",d=function(e){function t(t,i,n){var r=e.call(this,t,null,!0)||this;r._panes=new s.ObservableArray,r._selectedIndex=-1,r._animated=!0,r._autoSwitch=!0,r._alCollapseAll=!1,r._alExpandMany=!1,r._autoSwitching=!1,r.selectedIndexChanged=new s.Event;var o=r.hostElement,a=r._panes,l=[];if(!n)for(;o.firstElementChild;){var c=o.firstElementChild;o.removeChild(c),l.push(c)}return Object(s.addClass)(o,"wj-control wj-accordion wj-show-icons"),o.tabIndex=-1,r.addEventListener(o,"click",r._click.bind(r)),r.addEventListener(o,"keydown",r._keydown.bind(r)),a.collectionChanged.addHandler(r._populateControl.bind(r)),a.deferUpdate((function(){l.forEach((function(e){Object(s.assert)(2==e.childElementCount,"Accordion children should contain header and pane elements"),a.push(new p(e.children[0],e.children[1]))}))})),r.initialize(i),r.selectedIndex!=(i?i.selectedIndex:null)&&r.selectedIndex<0&&a.length?r.selectedIndex=0:r.onSelectedIndexChanged(),r}return l(t,e),Object.defineProperty(t.prototype,"panes",{get:function(){return this._panes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){(e=Object(s.asInt)(e,!1))!=this._selectedIndex?(this._selectedIndex=e,this._updateContent(),this.onSelectedIndexChanged()):this._updateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedPane",{get:function(){var e=this._selectedIndex;return e>-1?this._panes[e]:null},set:function(e){for(var t=-1,i=0;i<this._panes.length&&t<0;i++)this._panes[i]==e&&(t=i);this.selectedIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animated},set:function(e){this._animated=Object(s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showIcons",{get:function(){return Object(s.hasClass)(this.hostElement,"wj-show-icons")},set:function(e){Object(s.toggleClass)(this.hostElement,"wj-show-icons",Object(s.asBoolean)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSwitch",{get:function(){return this._autoSwitch},set:function(e){e!=this._autoSwitch&&(this._autoSwitch=Object(s.asBoolean)(e),this._updateContent())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowCollapseAll",{get:function(){return this._alCollapseAll},set:function(e){this._alCollapseAll=Object(s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowExpandMany",{get:function(){return this._alExpandMany},set:function(e){var t=this;e!=this._alExpandMany&&(this._alExpandMany=e=Object(s.asBoolean)(e),e||this.panes.forEach((function(e,i){var n=i==t.selectedIndex;Object(s.toggleClass)(e.header,"wj-state-active",n),Object(s.setAttribute)(e.header,"aria-expanded",n)})))},enumerable:!0,configurable:!0}),t.prototype.getPane=function(e){for(var t=0;t<this._panes.length;t++)if((i=this._panes[t]).header.id==e||i.content.id==e)return i;for(t=0;t<this._panes.length;t++){var i;if((i=this._panes[t]).header.textContent==e)return i}return null},t.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},t.prototype._populateControl=function(){var e=this,t=-1,i=this.hostElement;this._panes.forEach((function(n,r){Object(s.assert)(n instanceof p,"panes array must contain AccordionPane objects."),n._setAccordion(e);var o=n.header;Object(s.addClass)(o,"wj-header"),Object(s.setAttribute)(o,"role","button"),i.appendChild(o);var a=n.content;Object(s.addClass)(a,"wj-content"),Object(s.setAttribute)(a,"role","region"),Object(s.setAttribute)(a,"aria-labelledby",o.id?o.id:null),i.appendChild(a),t<0&&(Object(s.hasClass)(o,u)||"true"==o.getAttribute("aria-expanded"))&&(t=r)})),t>-1?this.selectedIndex=t:this.selectedIndex>-1&&this.selectedIndex<this._panes.length&&this._updateContent(),this._validateSelection()},t.prototype._validateSelection=function(){var e=this.selectedPane;if(e&&(e.isDisabled||!e.isVisible)){var t=this._getNextIndex(this.selectedIndex,1);t<0&&(t=this._getNextIndex(this.selectedIndex,-1)),this.selectedIndex=t}},t.prototype._updateContent=function(){var e=this,t=Object(s.contains)(this.hostElement,Object(s.getActiveElement)()),i=this._selectedIndex,n=[];this._panes.forEach((function(r,o){var a=r.header,l=o==i,c=Object(s.hasClass)(a,u),h=l||c&&e._alExpandMany&&r!=e._hidePane,d=h&&!c;e._animated&&(d||c&&!h)&&n.push({show:d,pane:r}),Object(s.setAttribute)(a,"aria-expanded",h),e._animated||Object(s.toggleClass)(a,u,h),a.tabIndex=l||!e._autoSwitch?e._orgTabIndex:-1,l&&(t&&a.focus(),e._szObserver||s.Control.invalidateAll(r.content))})),this._animated&&n.length&&(n.forEach((function(e){Object(s.toggleClass)(e.pane.header,u,!0),e.height=e.pane.content.offsetHeight,e.show&&(e.pane.content.style.height="0")})),Object(s.animate)((function(e){n.forEach(e<1?function(t){t.pane.content.style.height=(t.height*(t.show?e:1-e)).toFixed(0)+"px"}:function(e){e.pane.content.style.height="",Object(s.toggleClass)(e.pane.header,u,e.show)})}))),this._hidePane=null},t.prototype._click=function(e){var t=this._getPaneIndex(e.target);if(t>-1){var i=this._panes,n=i[t];if(!n.isDisabled&&n.isVisible)if(!Object(s.hasClass)(n.header,u)||this._autoSwitching)this.selectedIndex=t;else{for(var r=-1,o=1;o<i.length;o++){var a=(t+o)%i.length,l=i[a];if(Object(s.hasClass)(l.header,u)){r=a;break}}(r>-1||this._alCollapseAll)&&(this._hidePane=n,this.selectedIndex=r)}}},t.prototype._keydown=function(e){if(!e.defaultPrevented){var t=this._getPaneIndex(Object(s.getActiveElement)());if(t>-1){var i=this._getKeyCode(e);switch(i){case s.Key.Left:case s.Key.Up:case s.Key.Right:case s.Key.Down:case s.Key.Home:case s.Key.PageUp:case s.Key.End:case s.Key.PageDown:switch(i){case s.Key.Left:case s.Key.Up:t=this._getNextIndex(t,-1);break;case s.Key.Right:case s.Key.Down:t=this._getNextIndex(t,1);break;case s.Key.Home:case s.Key.PageUp:t=this._getNextIndex(-1,1);break;case s.Key.End:case s.Key.PageDown:t=this._getNextIndex(this._panes.length,-1)}if(t>-1){var n=this._panes[t];this._autoSwitch?(this._autoSwitching=!0,n.header.click(),this._autoSwitching=!1):n.header.focus()}e.preventDefault();break;case s.Key.Enter:case s.Key.Space:t>-1&&(n=this._panes[t]).header.click(),e.preventDefault()}}}},t.prototype._getPaneIndex=function(e){var t=Object(s.closest)(e,".wj-header");if(t&&Object(s.closest)(t,".wj-accordion")==this.hostElement)for(var i=0;i<this._panes.length;i++)if(this._panes[i].header==t)return i;return-1},t.prototype._getNextIndex=function(e,t){for(var i=e+t;i>-1&&i<this._panes.length;i+=t){var n=this._panes[i];if(!n.isDisabled&&n.isVisible)return i}return-1},t}(s.Control),p=function(){function e(e,t){this._hdr=Object(s.asType)(Object(s.getElement)(e),HTMLElement),this._content=Object(s.asType)(Object(s.getElement)(t),HTMLElement)}return Object.defineProperty(e.prototype,"accordion",{get:function(){return this._acc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._hdr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return Object(s.hasClass)(this._hdr,"wj-state-disabled")},set:function(e){Object(s.toggleClass)(this._hdr,"wj-state-disabled",Object(s.asBoolean)(e)),this._acc&&this._acc._validateSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return"none"!=this._hdr.style.display},set:function(e){this._hdr.style.display=Object(s.asBoolean)(e)?"":"none",this._acc&&this._acc._validateSelection()},enumerable:!0,configurable:!0}),e.prototype._setParts=function(e,t){if(e=Object(s.asType)(Object(s.getElement)(e),HTMLElement),t=Object(s.asType)(Object(s.getElement)(t),HTMLElement,!1),this._hdr!==e||this._content!==t){var i=this.isDisabled,n=this.isVisible;this._hdr=e,this._content=t,this.isDisabled=i,this.isVisible=n;var r=this.accordion;r&&!r.panes.isUpdating&&r._populateControl()}},e.prototype._setAccordion=function(e){this._acc=e},e}(),f=function(e){function t(t,i,n){var r=e.call(this)||this;return r._data=t,r._e=Object(s.asType)(i,HTMLElement),r._level=n,r}return l(t,e),Object.defineProperty(t.prototype,"dataItem",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),t}(s.EventArgs),g=function(e){function t(t){var i=e.call(this)||this;return i._node=t,i}return l(t,e),Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),t}(s.CancelEventArgs),m=function(e){function t(t,i,n){var r=e.call(this)||this;return r._src=Object(s.asType)(t,b),r._tgt=Object(s.asType)(i,b),r._pos=n,r}return l(t,e),Object.defineProperty(t.prototype,"dragSource",{get:function(){return this._src},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropTarget",{get:function(){return this._tgt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(e){this._pos=Object(s.asEnum)(e,r)},enumerable:!0,configurable:!0}),t}(s.CancelEventArgs);(o=r||(r={}))[o.Before=0]="Before",o[o.After=1]="After",o[o.Into=2]="Into";var b=function(){function e(t,i){Object(s.hasClass)(i,"wj-treeview")?(t=s.Control.getControl(i),i=null):e._assertNode(i),this._t=t,this._e=i}return Object.defineProperty(e.prototype,"dataItem",{get:function(){return this._e[y._DATAITEM_KEY]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeView",{get:function(){return this._t},enumerable:!0,configurable:!0}),e.prototype.ensureVisible=function(){for(var e=this.parentNode;e;e=e.parentNode)e.isCollapsed=!1;var t=this._t.hostElement,i=this.element.getBoundingClientRect(),n=t.getBoundingClientRect();i.bottom>n.bottom?t.scrollTop+=i.bottom-n.bottom:i.top<n.top&&(t.scrollTop-=n.top-i.top)},e.prototype.equals=function(e){return null!=e&&e.element==this.element},e.prototype.select=function(){var e=this._t,t=e._selNode;this.equals(t)||(t&&(Object(s.removeClass)(t.element,y._CSEL),Object(s.setAttribute)(t.element,"aria-selected",!1)),e._selNode=this,Object(s.addClass)(this.element,y._CSEL),Object(s.setAttribute)(this.element,"aria-selected",!0),this.ensureVisible(),e._updateFocus(t),e.onSelectedItemChanged())},Object.defineProperty(e.prototype,"index",{get:function(){for(var t=0,i=this._pse(this.element);i;i=this._pse(i))e._isNode(i)&&t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){var t=null;if(this._e){var i=this._e.parentElement;e._assertNodeList(i),t=this._pse(i)}return t?new e(this._t,t):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){for(var e=-1,t=this;t;t=t.parentNode)e++;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return e._isNode(this._e)&&!e._isEmpty(this._e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChildren",{get:function(){return this.isCollapsed&&this.hasChildren&&!e._isNodeList(this.element.nextElementSibling)&&Object(s.isFunction)(this._t.lazyLoadFunction)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){return this.hasChildren?e._getChildNodes(this._t,this._e.nextSibling):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBox",{get:function(){return this._e.querySelector("input."+y._CNDC)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.hasChildren&&Object(s.hasClass)(this._e,y._CCLD)},set:function(e){if(e!=this.isCollapsed){var t=this._t,i=new g(this);t.onIsCollapsedChanging(i)&&(this.setCollapsed(Object(s.asBoolean)(e),t.isAnimated,t.autoCollapse),t.onIsCollapsedChanged(i))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChecked",{get:function(){var e=this.checkBox;return e&&!e.indeterminate?e.checked:null},set:function(e){if(e!=this.isChecked){var t=this._t,i=new g(this);t.onIsCheckedChanging(i)&&(this.setChecked(Object(s.asBoolean)(e),!0),t.onIsCheckedChanged(i))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(e){(e=Object(s.asBoolean)(e,!0))!=this.isDisabled&&Object(s.enable)(this._e,!e)},enumerable:!0,configurable:!0}),e.prototype.previous=function(t,i){var n=this._pse(this._e);if(!n&&e._isNodeList(this._e.parentElement)&&(n=this._pse(this._e.parentElement)),e._isNodeList(n)){for(;e._isNodeList(n)&&n.childElementCount;)n=n.lastChild;e._isNodeList(n)&&(n=this._pse(n))}var r=e._isNode(n)?new e(this._t,n):null;return t&&r&&!r.element.offsetHeight&&(r=r.previous(t,i)),i&&r&&r.isDisabled&&(r=r.previous(t,i)),r},e.prototype.next=function(t,i){var n=this._e.nextSibling;if(e._isNodeList(n)&&(n=n.childElementCount?n.firstChild:n.nextSibling),!n)for(var r=this._e.parentElement;!n&&e._isNodeList(r);r=r.parentElement)n=r.nextSibling;var o=e._isNode(n)?new e(this._t,n):null;return t&&o&&!o.element.offsetHeight&&(o=o.next(t,i)),i&&o&&o.isDisabled&&(o=o.next(t,i)),o},e.prototype.previousSibling=function(){for(var t=this._pse(this.element);e._isNodeList(t);)t=this._pse(t);return t?new e(this._t,t):null},e.prototype.nextSibling=function(){var t=this.element.nextSibling;return e._isNodeList(t)&&(t=t.nextSibling),t?new e(this._t,t):null},e.prototype.setCollapsed=function(t,i,n){var r=this._t,o=this._e,a=this._e.nextElementSibling,l=e._isNodeList(a);if(Object(s.setAttribute)(o,"aria-expanded",l?(!t).toString():null),t!=this.isCollapsed)if(t||l||!Object(s.isFunction)(r.lazyLoadFunction)){if(null==i&&(i=r.isAnimated),null==n&&(n=r.autoCollapse),i){if(l){var c=a.offsetHeight,h=a.style,u=r.hostElement,d=u.style;u.scrollHeight<=u.clientHeight&&(d.overflowY="hidden"),t?(Object(s.toggleClass)(o,y._CCLG,!0),Object(s.animate)((function(e){e<1?h.height=((e=1-e)*c).toFixed(0)+"px":(h.height=h.opacity=d.overflowY="",Object(s.toggleClass)(o,y._CCLD,!0),Object(s.toggleClass)(o,y._CCLG,!1))}),y._AN_DLY)):(Object(s.toggleClass)(o,y._CCLD,!1),h.height=h.opacity="0",Object(s.animate)((function(e){h.height=e>=1?h.opacity=d.overflowY="":(e*c).toFixed(0)+"px"}),y._AN_DLY))}}else Object(s.toggleClass)(o,y._CCLD,t);if(!t&&n){var p=o.parentElement;if(e._isNodeList(p))for(var f=0;f<p.children.length;f++){var g=p.children[f];g!=o&&e._isNode(g)&&(Object(s.toggleClass)(g,y._CCLD,!0),g.setAttribute("aria-expanded","false"))}}}else r._lazyLoadNode(this)},e.prototype.setChecked=function(e,t){var i=this.checkBox,n=i.checked!=e;if(Object(s.setChecked)(i,e),this.hasChildren)for(var r=0;r<this.nodes.length;r++)this.nodes[r].setChecked(e,!1);var o=this._t;if(o&&o.checkedMemberPath&&o._chkPath.setValue(this.dataItem,this.level,e),t){var a=this.parentNode;a&&a._updateCheckedState()}o&&n&&o._raiseCheckedItemsChanged()},e.prototype.remove=function(){var t=this._t,i=this.parentNode,n=this._getArray(),r=n.indexOf(this.dataItem);t.selectedNode==this&&(t.selectedNode=this.nextSibling()||this.previousSibling()||i);var o=this.element.nextSibling;e._isNodeList(o)&&Object(s.removeChild)(o),Object(s.removeChild)(this.element),i&&i._updateState(),n.splice(r,1),this._t=null},e.prototype.addChildNode=function(e,t){var i=this._t._createNode(t),n=this.nodes;return n?e<n.length?i.move(n[e],r.Before):i.move(n[n.length-1],r.After):i.move(this,r.Into),i},e.prototype.refresh=function(e){var t=this._getArray();e&&(t[this.index]=e);var i=this._t._createNode(e=t[this.index]),n=this.hasChildren&&!this.hasPendingChildren?this.element.nextSibling:null;n&&Object(s.removeChild)(n),(n=i.hasChildren&&!i.hasPendingChildren?i.element.nextSibling:null)&&this.element.parentElement.insertBefore(n,this.element.nextSibling),this.element.innerHTML=i.element.innerHTML,this._updateState()},e.prototype.move=function(t,i){if(t instanceof e&&this._contains(t))return!1;var n=this.parentNode,r=this._getArray();this._moveElements(t,i),t.treeView&&(this._t=t.treeView),n&&n._updateState();var o=this.parentNode;o&&o._updateState();var s=this.dataItem,a=r.indexOf(s),l=this._getArray();return r.splice(a,1),l.splice(this.index,0,s),!0},Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._getArray()},enumerable:!0,configurable:!0}),e.prototype._pse=function(e){return e.previousElementSibling},e.prototype._contains=function(e){for(;e;e=e.parentNode)if(e.element==this.element)return!0;return!1},e.prototype._getArray=function(){var e=this._t,t=this.parentNode,i=e.itemsSource;if(t){var n=e._itmPath;(i=n.getValue(t.dataItem,this.level))||n.setValue(t.dataItem,this.level,i=[])}return i},e.prototype._moveElements=function(t,i){var n=document.createDocumentFragment(),o=this.hasChildren&&!this.hasPendingChildren?this.element.nextSibling:null;if(n.appendChild(this.element),o&&(e._assertNodeList(o),n.appendChild(o)),t instanceof y)t._root.insertBefore(n,null);else{var a=t.element,l=a?a.parentElement:t.treeView._root;switch(e._assertNodeList(l),i){case r.Before:l.insertBefore(n,a);break;case r.After:a=(t=t.nextSibling())?t.element:null,l.insertBefore(n,a);break;case r.Into:t.hasChildren&&!t.hasPendingChildren||(o=document.createElement("div"),Object(s.addClass)(o,y._CNDL),l.insertBefore(o,a.nextSibling)),e._assertNodeList(l=t.element.nextSibling),l.insertBefore(n,null)}}},e.prototype._updateState=function(){this._updateEmptyState(),this._updateCheckedState()},e.prototype._updateEmptyState=function(){var t=this.element.nextSibling,i=!1;e._isNodeList(t)&&(t.childElementCount?i=!0:Object(s.removeChild)(t)),Object(s.toggleClass)(this.element,y._CEMP,!i),i||this.element.removeAttribute("aria-expanded")},e.prototype._updateCheckedState=function(){var e=this._t,t=this.checkBox,i=this.nodes,n=0,r=0;if(t&&i){for(var o=0;o<i.length;o++){switch(i[o].isChecked){case!0:n++;break;case!1:r++}if(n&&r)break}Object(s.setChecked)(t,n&&r?null:n>0),e&&e.checkedMemberPath&&e._chkPath.setValue(this.dataItem,this.level,t.indeterminate?null:t.checked)}var a=this.parentNode;a&&a._updateCheckedState()},e._getChildNodes=function(t,i){e._assertNodeList(i);var n=[];if(e._isNodeList(i))for(var r=i.children,o=0;o<r.length;o++){var s=r[o];e._isNode(s)&&n.push(new e(t,s))}return n},e._isNode=function(e){return e&&Object(s.hasClass)(e,y._CND)},e._isNodeList=function(e){return e&&Object(s.hasClass)(e,y._CNDL)},e._isEmpty=function(t){return e._isNode(t)&&Object(s.hasClass)(t,y._CEMP)},e._isCollapsed=function(t){return e._isNode(t)&&!e._isEmpty(t)&&Object(s.hasClass)(t,y._CCLD)},e._assertNode=function(t){Object(s.assert)(e._isNode(t),"node expected")},e._assertNodeList=function(t){Object(s.assert)(e._isNodeList(t),"nodeList expected")},e}(),_=function(){function e(e){this.path=e}return Object.defineProperty(e.prototype,"path",{get:function(){return this._path},set:function(e){if(this._path=e,Object(s.isString)(e))this._bindings=[new s.Binding(e)];else if(Object(s.isArray)(e)){this._bindings=[];for(var t=0;t<e.length;t++)this._bindings.push(new s.Binding(e[t]))}else null!=e&&Object(s.assert)(!1,"Path should be a string or an array of strings.");this._maxLevel=this._bindings?this._bindings.length-1:-1},enumerable:!0,configurable:!0}),e.prototype.getValue=function(e,t){var i=Math.min(t,this._maxLevel);return i>-1?this._bindings[i].getValue(e):null},e.prototype.setValue=function(e,t,i){var n=Math.min(t,this._maxLevel);n>-1&&this._bindings[n].setValue(e,i)},e}(),y=function(e){function t(i,n){var r=e.call(this,i)||this;r._itmPath=new _("items"),r._chkPath=new _,r._dspPath=new _("header"),r._imgPath=new _,r._html=!1,r._animated=!0,r._chkOnClick=!1,r._xpndOnClick=!0,r._xpndOnLoad=!0,r._autoColl=!0,r._showChk=!1,r._srch="",r._isReadOnly=!0,r.itemsSourceChanged=new s.Event,r.loadingItems=new s.Event,r.loadedItems=new s.Event,r.itemClicked=new s.Event,r.selectedItemChanged=new s.Event,r.checkedItemsChanged=new s.Event,r.isCollapsedChanging=new s.Event,r.isCollapsedChanged=new s.Event,r.isCheckedChanging=new s.Event,r.isCheckedChanged=new s.Event,r.formatItem=new s.Event((function(){r.invalidate()})),r.dragStart=new s.Event,r.dragOver=new s.Event,r.drop=new s.Event,r.dragEnd=new s.Event,r.nodeEditStarting=new s.Event,r.nodeEditStarted=new s.Event,r.nodeEditEnding=new s.Event,r.nodeEditEnded=new s.Event;var o=r.getTemplate();r.applyTemplate("wj-control wj-content wj-treeview",o,{_root:"root"});var a=r.hostElement;return Object(s.setAttribute)(a,"role","tree",!0),Object(s.addClass)(r._root,t._CNDL),Object(s.setAttribute)(r._root,"role","group",!0),r.addEventListener(a,"mousedown",r._mousedown.bind(r)),r.addEventListener(a,"click",r._click.bind(r)),r.addEventListener(a,"keydown",r._keydown.bind(r)),r.addEventListener(a,"keypress",r._keypress.bind(r)),r.addEventListener(a,"wheel",(function(e){a.scrollHeight>a.offsetHeight&&(e.deltaY<0&&0==a.scrollTop||e.deltaY>0&&a.scrollTop+a.offsetHeight>=a.scrollHeight)&&e.preventDefault()})),r.addEventListener(a,"blur",(function(){r._edtNode&&!Object(s.contains)(r._edtNode.element,Object(s.getActiveElement)())&&r.finishEditing()}),!0),r.addEventListener(a,"paste",(function(e){if(r._edtNode&&!r.isContentHtml){var t=(e.clipboardData||window.clipboardData).getData("text"),i=window.getSelection();t&&i.rangeCount&&(i.deleteFromDocument(),i.getRangeAt(0).insertNode(document.createTextNode(t)),e.preventDefault())}})),r.initialize(n),r.refresh(),r}return l(t,e),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._items=Object(s.asArray)(e),this.onItemsSourceChanged(),this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childItemsPath",{get:function(){return this._itmPath.path},set:function(e){e!=this.childItemsPath&&(this._itmPath.path=e,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._dspPath.path},set:function(e){e!=this.displayMemberPath&&(this._dspPath.path=e,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageMemberPath",{get:function(){return this._imgPath.path},set:function(e){e!=this.imageMemberPath&&(this._imgPath.path=e,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){return this._chkPath.path},set:function(e){e!=this.checkedMemberPath&&(this._chkPath.path=e,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(e){e!=this._html&&(this._html=Object(s.asBoolean)(e),this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCheckboxes",{get:function(){return this._showChk},set:function(e){e!=this._showChk&&(this._showChk=Object(s.asBoolean)(e),this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoCollapse",{get:function(){return this._autoColl},set:function(e){this._autoColl=Object(s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animated},set:function(e){this._animated=Object(s.asBoolean)(e),Object(s.toggleClass)(this.hostElement,"wj-animated",this._animated)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._isReadOnly},set:function(e){this._isReadOnly=Object(s.asBoolean)(e),Object(s.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),t.prototype.startEditing=function(e){if(this.isReadOnly)return!1;if(e||(e=this.selectedNode),!e||e.isDisabled)return!1;if(!this.finishEditing())return!1;var i=e.element.querySelector("."+t._CNDT);if(!i)return!1;var n=new g(e);if(!this.onNodeEditStarting(n))return!1;i.tabIndex=0,i.focus(),i.contentEditable="true",i.style.cursor="auto";var r=document.createRange();r.selectNodeContents(i);var o=getSelection();return o.removeAllRanges(),o.addRange(r),i.focus(),Object(s.setAttribute)(i,"autocomplete","off"),Object(s.setAttribute)(i,"autocorrect","off"),this._edtNode=e,this.onNodeEditStarted(n),!0},t.prototype.finishEditing=function(e){var i=this._edtNode;if(i){var n=i.element.querySelector("."+t._CNDT);if(!n)return!1;var r=new g(i);if(!this.onNodeEditEnding(r))return!1;var o=i.dataItem,s=i.level;this.isContentHtml?e?n.innerHTML=this._dspPath.getValue(o,s):this._dspPath.setValue(o,s,n.innerHTML):e?n.textContent=this._dspPath.getValue(o,s):this._dspPath.setValue(o,s,n.textContent),document.createRange().selectNodeContents(n),getSelection().removeAllRanges(),n.contentEditable="false",n.style.cursor="",this._edtNode=null,this.onNodeEditEnded(r)}return!0},Object.defineProperty(t.prototype,"allowDragging",{get:function(){return null!=this._dd},set:function(e){if(e!=this.allowDragging){Object(s.asBoolean)(e)?this._dd=new v(this):(this._dd.dispose(),this._dd=null);for(var i=this.hostElement.querySelectorAll("."+t._CND),n=0;n<i.length;n++){var r=i[n];Object(s.setAttribute)(r,"draggable",!!this._dd||null)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkOnClick",{get:function(){return this._chkOnClick},set:function(e){this._chkOnClick=Object(s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandOnClick",{get:function(){return this._xpndOnClick},set:function(e){this._xpndOnClick=Object(s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandOnLoad",{get:function(){return this._xpndOnLoad},set:function(e){this._xpndOnLoad=Object(s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._selNode?this._selNode.dataItem:null},set:function(e){e!=this.selectedItem&&(this.selectedNode=e?this.getNode(e):null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedNode",{get:function(){return this._selNode},set:function(e){if(e!=this.selectedNode)if(this._prevSel=this._selNode,e)e.select();else if(this._selNode){var i=this._selNode.element;Object(s.removeClass)(i,t._CSEL),Object(s.setAttribute)(i,"aria-selected",!1),this._selNode=null,this._updateFocus(this._prevSel),this.onSelectedItemChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedPath",{get:function(){for(var e=[],t=this.selectedNode;t;t=t.parentNode){var i=this._dspPath.getValue(t.dataItem,t.level);e.splice(0,0,i)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){if(null==this._chkItems){var e=t,i=this._root.querySelectorAll("."+e._CND+"."+e._CEMP+" > input:checked."+e._CNDC);this._chkItems=[];for(var n=0;n<i.length;n++)this._chkItems.push(i[n].parentElement[e._DATAITEM_KEY])}return this._chkItems},set:function(e){if(this.showCheckboxes)for(var i=this._root.querySelectorAll("."+t._CND+"."+t._CEMP),n=0;n<i.length;n++){var r=new b(this,i[n]),o=e.indexOf(r.dataItem)>-1;r.isChecked!=o&&(r.isChecked=o)}},enumerable:!0,configurable:!0}),t.prototype.checkAllItems=function(e){if(this.showCheckboxes)for(var i=this._root.querySelectorAll("."+t._CND+"."+t._CEMP),n=0;n<i.length;n++){var r=new b(this,i[n]);r.isChecked!=e&&(r.isChecked=e)}},Object.defineProperty(t.prototype,"totalItemCount",{get:function(){return this.hostElement.querySelectorAll("."+t._CND).length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lazyLoadFunction",{get:function(){return this._lazyLoad},set:function(e){e!=this._lazyLoad&&(this._lazyLoad=Object(s.asFunction)(e),this._reload())},enumerable:!0,configurable:!0}),t.prototype.getFirstNode=function(e,i){var n=this.hostElement.querySelector("."+t._CND),r=n?new b(this,n):null;return e&&r&&!r.element.offsetHeight&&(r=r.next(e,i)),i&&r&&r.isDisabled&&(r=r.next(e,i)),r},t.prototype.getLastNode=function(e,i){var n=this.hostElement.querySelectorAll("."+t._CND+":last-child"),r=n.length?new b(this,n[n.length-1]):null;return e&&r&&!r.element.offsetHeight&&(r=r.previous(e,i)),i&&r&&r.isDisabled&&(r=r.previous(e,i)),r},Object.defineProperty(t.prototype,"nodes",{get:function(){return b._getChildNodes(this,this._root)},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e){this._isDirty&&this._loadTree();for(var i=this.hostElement.querySelectorAll("."+t._CND),n=0;n<i.length;n++){var r=i[n];if(r[t._DATAITEM_KEY]==e)return new b(this,r)}return null},t.prototype.addChildNode=function(e,t){var i=this._createNode(t),n=this.nodes;return n?e<n.length?i.move(n[e],r.Before):i.move(n[n.length-1],r.After):i.move(this,r.Into),i},t.prototype.collapseToLevel=function(e){var t=this._animated,i=this._autoColl;this._animated=this._autoColl=!1,this._collapseToLevel(this.nodes,e,0),this._animated=t,this._autoColl=i},t.prototype.loadTree=function(e){this._loadTree(e)},t.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},t.prototype.onLoadingItems=function(e){return this.loadingItems.raise(this,e),!e.cancel},t.prototype.onLoadedItems=function(e){this.loadedItems.raise(this,e)},t.prototype.onItemClicked=function(e){this.itemClicked.raise(this,e)},t.prototype.onSelectedItemChanged=function(e){this.selectedItemChanged.raise(this,e)},t.prototype.onCheckedItemsChanged=function(e){this._chkItems=null,this.checkedItemsChanged.raise(this,e)},t.prototype.onIsCollapsedChanging=function(e){return this.isCollapsedChanging.raise(this,e),!e.cancel},t.prototype.onIsCollapsedChanged=function(e){this.isCollapsedChanged.raise(this,e)},t.prototype.onIsCheckedChanging=function(e){return this.isCheckedChanging.raise(this,e),!e.cancel},t.prototype.onIsCheckedChanged=function(e){this.isCheckedChanged.raise(this,e)},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype.onDragStart=function(e){return this.dragStart.raise(this,e),!e.cancel},t.prototype.onDragOver=function(e){return this.dragOver.raise(this,e),!e.cancel},t.prototype.onDrop=function(e){return this.drop.raise(this,e),!e.cancel},t.prototype.onDragEnd=function(e){this.dragEnd.raise(this,e)},t.prototype.onNodeEditStarting=function(e){return this.nodeEditStarting.raise(this,e),!e.cancel},t.prototype.onNodeEditStarted=function(e){this.nodeEditStarted.raise(this,e)},t.prototype.onNodeEditEnding=function(e){return this.nodeEditEnding.raise(this,e),!e.cancel},t.prototype.onNodeEditEnded=function(e){this.nodeEditEnded.raise(this,e)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),!this.isUpdating&&this._isDirty&&this._loadTree()},t.prototype._updateFocus=function(e){var t=this._selNode;t&&(t.element.tabIndex=this._orgTabIndex),this.hostElement.tabIndex=t?-1:this._orgTabIndex,this.containsFocus()&&(t?t.element.focus():this.hostElement.focus()),e&&(e.element.tabIndex=-1)},t.prototype._raiseCheckedItemsChanged=function(){var e=this;this._toItemsChanged&&clearTimeout(this._toItemsChanged),this._toItemsChanged=setTimeout((function(){e._toItemsChanged=null,e.onCheckedItemsChanged()}),10)},t.prototype._reload=function(){this._isDirty=!0,this.invalidate()},t.prototype._createNode=function(e){return new t(document.createElement("div"),{expandOnLoad:this.expandOnLoad,allowDragging:this.allowDragging,childItemsPath:this.childItemsPath,displayMemberPath:this.displayMemberPath,imageMemberPath:this.imageMemberPath,isContentHtml:this.isContentHtml,showCheckboxes:this.showCheckboxes,itemsSource:[e]}).getFirstNode()},t.prototype._mousedown=function(e){if(!e.defaultPrevented){var i=Object(s.closestClass)(e.target,t._CND),n=i?new b(this,i):null;n&&!n.isDisabled&&(this.selectedNode=n)}},t.prototype._click=function(e){if(!e.defaultPrevented){var i=Object(s.closestClass)(e.target,t._CND);if(i){var n=new b(this,i),r="input."+t._CNDC,o=Object(s.closest)(e.target,r),a=i.getBoundingClientRect(),l=this.rightToLeft?a.right-e.clientX:e.clientX-a.left;if(n.isDisabled)return;if(!o&&n.equals(this._edtNode))return;if(!o&&this._chkOnClick&&(!n.hasChildren||l>i.offsetHeight)&&(o=i.querySelector(r)),i.focus(),o&&(e.preventDefault(),e.stopPropagation(),setTimeout((function(){n.isChecked=!n.isChecked}))),!o){var c=(e.ctrlKey||e.metaKey)&&!n.hasPendingChildren,h=!1;l<=i.offsetHeight?(c?this.collapseToLevel(n.isCollapsed?n.level+1:n.level):n.isCollapsed=!n.isCollapsed,h=!0):this.expandOnClick&&n.isCollapsed&&(c?this.collapseToLevel(n.level):n.isCollapsed=!1,h=!0),h&&c&&this.selectedNode&&this.selectedNode.ensureVisible(),h||this.isReadOnly||this.selectedNode&&this.selectedNode.equals(this._prevSel)&&this.startEditing()}this.selectedItem&&this.onItemClicked()}}},t.prototype._keydown=function(e){if(!e.defaultPrevented){var t=this._getKeyCode(e),i=this._selNode,n=void 0,r=!0;if(!i)switch(t){case s.Key.Up:case s.Key.Down:case s.Key.Left:case s.Key.Right:case s.Key.Enter:case s.Key.Home:case s.Key.End:if(n=this.getFirstNode(!0,!0))return this.selectedNode=n,void e.preventDefault()}if(i&&!i.isDisabled){switch(t){case s.Key.F2:this.startEditing(),e.preventDefault();break;case s.Key.Escape:this.finishEditing(!0),e.preventDefault();break;case s.Key.Up:case s.Key.Down:this.finishEditing();break;case s.Key.Enter:this._edtNode?(this.finishEditing(),t=s.Key.Down):(this.startEditing(),e.preventDefault())}if(this._edtNode)return;if(this.rightToLeft)switch(t){case s.Key.Left:t=s.Key.Right;break;case s.Key.Right:t=s.Key.Left}switch(t){case s.Key.Left:!i.isCollapsed&&i.hasChildren?i.isCollapsed=!0:(i=i.parentNode)&&i.select();break;case s.Key.Right:i.isCollapsed&&i.hasChildren&&(i.isCollapsed=!1);break;case s.Key.Up:n=i.previous(!0,!0);break;case s.Key.Down:n=i.next(!0,!0);break;case s.Key.Home:n=this.getFirstNode(!0,!0);break;case s.Key.End:n=this.getLastNode(!0,!0);break;case s.Key.Space:if(this.selectedItem){var o=i.checkBox;o&&(i.isChecked=o.indeterminate||!o.checked)}break;case s.Key.Enter:this.selectedItem&&this.onItemClicked();break;default:r=!1}r&&(e.preventDefault(),n&&n.select())}}},t.prototype._keypress=function(e){var i=this;if(!e.defaultPrevented){if(e.ctrlKey||e.metaKey||e.altKey)return;if(e.target instanceof HTMLInputElement)return;if(this._edtNode)return;if(e.charCode>32&&this.startEditing(this.selectedNode)){var n=Object(s.getActiveElement)();if(Object(s.contains)(this._edtNode.element,n)){n.textContent=String.fromCharCode(e.charCode),e.preventDefault();var r=document.createRange();r.selectNodeContents(n),r.collapse(!1);var o=getSelection();o.removeAllRanges(),o.addRange(r)}return}if(e.charCode>32||32==e.charCode&&this._srch){e.preventDefault(),this._srch+=String.fromCharCode(e.charCode).toLowerCase(),this._toSrch&&clearTimeout(this._toSrch),this._toSrch=setTimeout((function(){i._toSrch=null,i._srch=""}),t._AS_DLY);var a=this._findNext();null==a&&this._srch.length>1&&(this._srch=this._srch[this._srch.length-1],a=this._findNext()),null!=a&&(this.selectedItem=a)}}},t.prototype._findNext=function(){if(this.hostElement&&this.selectedItem){var e=this.getNode(this.selectedItem),t=e,i=!1,n=!1;for(1==this._srch.length&&(n=!0);t;){if(!t.isDisabled&&!n&&0==t.element.textContent.trim().toLowerCase().indexOf(this._srch))return t.dataItem;var r=t.next(!0,!0);if(r==e&&i)break;r||i||(r=this.getFirstNode(!0,!0),i=!0),t=r,n=!1}}return null},t.prototype._loadTree=function(e){var i=this,n=this._root;if(n){if(!this.onLoadingItems(new s.CancelEventArgs))return;this._isDirty=!1;var r=this.containsFocus(),o=this.selectedItem;this.selectedItem=null,this._chkItems=null,this._ldLvl=-1;var a=void 0;if(e&&Object(s.isFunction)(window.Map)){a=new Map;for(var l=this.hostElement.querySelectorAll("."+t._CND),c=0;c<l.length;c++){var h=l[c];Object(s.hasClass)(h,t._CCLD)&&a.set(h[t._DATAITEM_KEY],!0)}}if(n.innerHTML="",this._items&&this._items.forEach((function(e){i._addItem(n,0,e)})),a)for(l=this.hostElement.querySelectorAll("."+t._CND),c=0;c<l.length;c++){var u=b._isNodeList(h=l[c]),d=a.get(h[t._DATAITEM_KEY]);Object(s.toggleClass)(h,t._CCLD,1==d),Object(s.setAttribute)(h,"aria-expanded",u?(!d).toString():null)}r&&!this.containsFocus()&&this.focus(),this.selectedItem=o,this.onLoadedItems(),this._ldLvl=-1}},t.prototype._addItem=function(e,i,n){var r,o=this._dspPath.getValue(n,i),a=this._imgPath.getValue(n,i),l=Object(s.asArray)(this._itmPath.getValue(n,i),!0),c=document.createElement("div");Object(s.addClass)(c,t._CND),c.tabIndex=-1,Object(s.setAttribute)(c,"role","treeitem",!0),Object(s.setAttribute)(c,"aria-selected",!1);var h=document.createElement("span");if(this.isContentHtml?h.innerHTML=o:h.textContent=o,Object(s.addClass)(h,t._CNDT),c.appendChild(h),a){var u=document.createElement("img");u.src=a,c.insertBefore(u,c.firstChild)}if(this._showChk&&!this._lazyLoad&&((r=document.createElement("input")).type="checkbox",r.tabIndex=-1,Object(s.addClass)(r,t._CNDC),c.insertBefore(r,c.firstChild)),this._dd&&c.setAttribute("draggable","true"),e.appendChild(c),c[t._DATAITEM_KEY]=n,l&&0==l.length&&!this.lazyLoadFunction&&(l=null),l){var d=this.expandOnLoad;if(i>this._ldLvl&&d?(this._ldLvl=i,0==l.length&&(d=!1,Object(s.addClass)(c,t._CCLD))):(d=!1,Object(s.addClass)(c,t._CCLD),i<this._ldLvl&&(this._ldLvl=100)),l.length>0){var p=document.createElement("div");p.tabIndex=-1,Object(s.addClass)(p,t._CNDL);for(var g=0;g<l.length;g++)this._addItem(p,i+1,l[g]);e.appendChild(p),Object(s.setAttribute)(c,"aria-expanded",d.toString(),!0),Object(s.setAttribute)(p,"role","group",!0)}}else Object(s.addClass)(c,t._CEMP);r&&this.checkedMemberPath&&(l&&l.length?new b(this,c)._updateCheckedState():r.checked=this._chkPath.getValue(n,i)),this.formatItem.hasHandlers&&this.onFormatItem(new f(n,c,i))},t.prototype._collapseToLevel=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];r.hasPendingChildren||(r.isCollapsed=i>=t,r.hasChildren&&this._collapseToLevel(r.nodes,t,i+1))}},t.prototype._lazyLoadNode=function(e){var i=this.hostElement;Object(s.hasClass)(i,t._CLDG)||(Object(s.addClass)(i,t._CLDG),Object(s.addClass)(e.element,t._CLDG),this.lazyLoadFunction(e,this._lazyLoadCallback.bind(e)))},t.prototype._lazyLoadCallback=function(e){this.treeView._lazyLoadNodeDone(this,e)},t.prototype._lazyLoadNodeDone=function(e,i){var n=t;Object(s.removeClass)(e.element,n._CLDG),Object(s.removeClass)(this.hostElement,n._CLDG);var r=e.dataItem,o=e.level,a=Object(s.asArray)(i,!0);if(null==a||0==a.length)this._itmPath.setValue(r,o,null),Object(s.addClass)(e.element,n._CEMP);else if(a.length){this._itmPath.setValue(r,o,a);var l=document.createElement("div"),c=e.element;Object(s.addClass)(l,n._CNDL),c.parentElement.insertBefore(l,c.nextSibling);for(var h=0;h<a.length;h++)this._addItem(l,o+1,a[h]);e.isCollapsed=!1}},t._DATAITEM_KEY="wj-Data-Item",t._AS_DLY=600,t._AN_DLY=200,t._CND="wj-node",t._CNDL="wj-nodelist",t._CEMP="wj-state-empty",t._CNDT="wj-node-text",t._CNDC="wj-node-check",t._CSEL="wj-state-selected",t._CCLD="wj-state-collapsed",t._CCLG="wj-state-collapsing",t._CLDG="wj-state-loading",t.controlTemplate='<div wj-part="root"></div>',t}(s.Control),v=function(){function e(e){this._tree=Object(s.asType)(e,y),this._dragstartBnd=this._dragstart.bind(this),this._dragoverBnd=this._dragover.bind(this),this._dropBnd=this._drop.bind(this),this._dragendBnd=this._dragend.bind(this);var t=this._tree,i=t.hostElement;t.addEventListener(i,"dragstart",this._dragstartBnd),t.addEventListener(i,"dragover",this._dragoverBnd),t.addEventListener(i,"dragleave",this._dragoverBnd),t.addEventListener(i,"drop",this._dropBnd),t.addEventListener(i,"dragend",this._dragendBnd),t.addEventListener(i,"keydown",this._keydown)}return e.prototype.dispose=function(){var e=this._tree,t=e.hostElement;e.removeEventListener(t,"dragstart",this._dragstartBnd),e.removeEventListener(t,"dragover",this._dragoverBnd),e.removeEventListener(t,"dragleave",this._dragoverBnd),e.removeEventListener(t,"drop",this._dropBnd),e.removeEventListener(t,"dragend",this._dragendBnd),e.removeEventListener(t,"keydown",this._keydown),this._showDragMarker()},e.prototype._dragstart=function(t){if(!t.defaultPrevented){var i=this._tree,n=Object(s.closestClass)(t.target,y._CND),r=e;if(r._drgSrc=b._isNode(n)?new b(i,n):null,r._drgSrc){var o=new g(r._drgSrc);i.onDragStart(o)||(r._drgSrc=null)}r._drgSrc&&t.dataTransfer?(Object(s._startDrag)(t.dataTransfer,"copyMove"),t.stopPropagation()):t.preventDefault()}},e.prototype._dragover=function(e){this._handleDragDrop(e,!1)},e.prototype._drop=function(e){this._handleDragDrop(e,!0)},e.prototype._dragend=function(t){e._drgSrc=null,this._showDragMarker(),this._tree.onDragEnd()},e.prototype._keydown=function(e){e.defaultPrevented||e.keyCode==s.Key.Escape&&this._dragendBnd(null)},e.prototype._handleDragDrop=function(t,i){var n,o,a=this._tree,l=e,c=r,h=c.Into;if(!t.defaultPrevented&&l._drgSrc){var u=document.elementFromPoint(t.clientX,t.clientY),d=Object(s.closestClass)(u,y._CND);if(null==d){var p=s.Control.getControl(Object(s.closest)(u,".wj-treeview"));p instanceof y&&0==p.totalItemCount&&(d=p.hostElement)}if(d==l._drgSrc.element&&(d=null),d){o=d.getBoundingClientRect();var f=new b(a,d),g=f.hasPendingChildren?o.height/2:o.height/3;null==f.element?((o=s.Rect.fromBoundingRect(o)).inflate(-12,-12),h=c.Before):t.clientY<o.top+g?h=c.Before:(t.clientY>o.bottom-g||f.hasPendingChildren)&&(h=c.After,!f.hasChildren||f.isCollapsed||f.hasPendingChildren||(h=c.Before,o=(d=(f=f.next(!0,!1)).element).getBoundingClientRect())),l._drgSrc._contains(f)?d=null:((n=new m(l._drgSrc,f,h)).cancel=l._drgSrc.treeView!=f.treeView,a.onDragOver(n)||(d=null))}if(d)if((h=n.position)==c.Before){var _=n.dragSource.next(!0,!1);_&&_.element==d&&(d=null)}else if(h==c.After){var v=n.dragSource.previous(!0,!1);v&&v.element==d&&(d=null)}if(d&&!i?(t.dataTransfer.dropEffect="move",t.preventDefault(),t.stopPropagation(),this._showDragMarker(o,h)):this._showDragMarker(),d&&i&&a.onDrop(n)){a.hostElement.focus();var x=n.dragSource;x.move(n.dropTarget,n.position),x.ensureVisible(),x.select()}}},e.prototype._showDragMarker=function(t,i){var n=this._tree,o=e._dMarker.parentElement;if(t){var a=n.hostElement.getBoundingClientRect(),l={top:Math.round((i==r.After?t.bottom:t.top)-a.top+n.hostElement.scrollTop-2),width:"75%",height:i==r.Into?t.height:4,opacity:i==r.Into?"0.15":""};n.rightToLeft?l.right=Math.round(a.right-t.right):l.left=Math.round(t.left-a.left),Object(s.setCss)(e._dMarker,l),o!=n._root&&n._root.appendChild(e._dMarker)}else o&&o.removeChild(e._dMarker)},e._dMarker="undefined"!=typeof window?Object(s.createElement)('<div class="wj-marker">&nbsp;</div>'):null,e}();Object(s._registerModule)("wijmo.nav",a)},JUga:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.APP="Application",e.DB="DataBase",e.SQLQuery="SQLQuery",e}({})},KYMM:function(e,t,i){"use strict";i.d(t,"a",(function(){return U})),i.d(t,"b",(function(){return q}));var n=i("mrSG"),r=i("eIep"),o=i("tcrU"),s=i("lMX+"),a=i("eY+I"),l=i("ztEp"),c=i("TwVa"),h=i("M0ag"),u=i("iFvM"),d=i("Czp8"),p=i("0SAw"),f=i("a5yf"),g=i("vg9S"),m=i("4CEX"),b=i("LXVg"),_=i("iLQq"),y=i("SvZ3"),v=i("fXoL"),x=i("ZF+8"),w=i("OLrf"),S=i("ofXK"),C=i("fEDK"),O=i("RsUz"),j=i("s90X"),T=i("dZIy"),N=i("oksU"),A=i("tyNb"),M=i("EDFS");function E(e,t){if(1&e&&v.Ob(0,"i"),2&e){var i=v.dc(2);v.Db(i.properties.titleIcon)}}function P(e,t){if(1&e&&v.Ob(0,"dc-text",30),2&e){var i=v.dc(2);v.jc("uiModel",i.titleConfig)}}function I(e,t){if(1&e){var i=v.Ub();v.Tb(0,"button",31),v.bc("click",(function(){return v.vc(i),v.dc(2).saveData()})),v.Ec(1,"Save"),v.Sb()}if(2&e){var n=v.dc(2);v.jc("disabled",!(n.changedData&&n.changedData.length))}}function D(e,t){if(1&e){var i=v.Ub();v.Tb(0,"button",32),v.bc("click",(function(){return v.vc(i),v.dc(2).onAdd()})),v.Ec(1,"Add"),v.Sb()}}function k(e,t){if(1&e){var i=v.Ub();v.Tb(0,"ul",33),v.Tb(1,"li",34),v.Tb(2,"a",35),v.bc("click",(function(){return v.vc(i),v.dc(2).exportToExcel()})),v.Ec(3,"Export to Excel"),v.Sb(),v.Sb(),v.Tb(4,"li",34),v.Tb(5,"a",35),v.bc("click",(function(){return v.vc(i),v.dc(2).exportToCSV()})),v.Ec(6,"Export to CSV"),v.Sb(),v.Sb(),v.Sb()}}function L(e,t){if(1&e){var i=v.Ub();v.Tb(0,"div",19),v.Cc(1,E,1,2,"i",20),v.Cc(2,P,1,1,"dc-text",21),v.Tb(3,"app-filters",22),v.bc("changed",(function(e){return v.vc(i),v.dc().onFiltersChange(e)})),v.Sb(),v.Ob(4,"span",23),v.Cc(5,I,2,1,"button",24),v.Cc(6,D,2,0,"button",25),v.Tb(7,"span",26),v.Tb(8,"button",27),v.Ob(9,"i",28),v.Sb(),v.Cc(10,k,7,0,"ul",29),v.Sb(),v.Sb()}if(2&e){var n=v.dc();v.Bb(1),v.jc("ngIf",n.properties.titleIcon),v.Bb(1),v.jc("ngIf",n.properties.title),v.Bb(1),v.jc("initFilters",n.properties.initFilters)("fields",n.columnsList)("defaultFilters",n.defaultFilters)("currentFilters",n.filters)("dataObject",n.dataObject)("queryData",n.queryData)("connection",n.properties.source.connection),v.Bb(2),v.jc("ngIf",!n.properties.isReadOnly),v.Bb(1),v.jc("ngIf",n.properties.onAdd)}}function F(e,t){1&e&&(v.Tb(0,"div",36),v.Tb(1,"div",37),v.Tb(2,"span",38),v.Ec(3,"Loading..."),v.Sb(),v.Sb(),v.Sb())}function R(e,t){if(1&e){var i=v.Ub();v.Tb(0,"app-filter",44),v.bc("apply",(function(e){v.vc(i);var t=v.dc(2).$implicit;return v.dc().onApply(e,t)})),v.Sb()}if(2&e){var n=v.dc(2).$implicit,r=v.dc();v.jc("field",n)("icon",!0)("dataObject",r.dataObject)("connection",r.properties.source.connection)("currentFilters",r.filters)("defaultFilters",r.defaultFilters)("queryData",r.queryData)}}function B(e,t){if(1&e&&(v.Tb(0,"div",42),v.Ec(1),v.Sb(),v.Cc(2,R,1,7,"app-filter",43)),2&e){var i=v.dc().$implicit,n=v.dc();v.jc("title",n.getDefaultHeader(i)),v.Bb(1),v.Fc(n.getDefaultHeader(i)),v.Bb(1),v.jc("ngIf",!i.text)}}function z(e,t){if(1&e&&(v.Tb(0,"a",46),v.Ec(1),v.Sb()),2&e){var i=t.item,n=v.dc(2).$implicit,r=v.dc();v.jc("routerLink",r.getLink(n,i))("queryParams",r.getColumnQueryParams(n,i)),v.Bb(1),v.Fc(n.text||i[n.bindingName])}}function V(e,t){1&e&&v.Cc(0,z,2,3,"ng-template",45)}function H(e,t){if(1&e&&(v.Rb(0),v.Tb(1,"wj-flex-grid-column",39),v.Cc(2,B,3,3,"ng-template",40),v.Cc(3,V,1,0,void 0,41),v.Sb(),v.Qb()),2&e){var i=t.$implicit,n=v.dc();v.Bb(1),v.jc("header",n.getDefaultHeader(i))("binding",i.bindingName)("dataType",i.dataType||n.properties.dataType)("width",i.width||n.properties.colWidth||null)("format",i.displayFormat||n.properties.displayFormat)("dataMap",i.dataMap)("format",i.displayFormat)("isReadOnly",i.isReadOnly)("minWidth",i.minWidth)("maxWidth",i.maxWidth),v.Bb(1),v.jc("cellType","ColumnHeader"),v.Bb(1),v.jc("ngIf",i.link)}}function X(e,t){if(1&e&&v.Ob(0,"i",47),2&e){v.dc();var i=v.sc(26);v.jc("popover",i)}}function G(e,t){if(1&e&&(v.Tb(0,"li"),v.Tb(1,"b"),v.Ec(2),v.Sb(),v.Ec(3),v.Sb()),2&e){var i=t.$implicit;v.Bb(2),v.Fc(i.fieldName),v.Bb(1),v.Gc(": ",i.value," ")}}function W(e,t){if(1&e&&(v.Tb(0,"ul",49),v.Cc(1,G,4,2,"li",14),v.Sb()),2&e){var i=v.dc(2);v.Bb(1),v.jc("ngForOf",i.filtersList)}}function Y(e,t){if(1&e&&(v.Tb(0,"h6"),v.Ec(1,"Applied Filters"),v.Sb(),v.Cc(2,W,2,1,"ul",48)),2&e){var i=v.dc();v.Bb(2),v.jc("ngIf",i.filters)}}var U=function(e){function t(t,i,n,r){var o=e.call(this,t,i,r)||this;return o.fileService=t,o.dialogService=i,o.sqlService=n,o.authService=r,o.data=[],o.loading=!1,o.filters={},o}return Object(n.d)(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.uiModel||(this.uiModel={type:"vendor-data-grid",itemProperties:{source:{connection:null,name:null,schemaName:null},selectionMode:s.SelectionMode.Cell}}),this.uiModel.itemProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleConfig",{get:function(){var e;return{type:"text",itemProperties:(e={text:this.properties.title},e["text-style"]=this.properties.titleStyle,e)}},enumerable:!1,configurable:!0}),t.prototype.getSource=function(){var e,t;t=this.properties.source.connection;var i=this.properties.source.name;return{schemaName:(e=Object(u.x)(i))[0],name:e[1],connection:t,query:this.properties.source.query}},t.prototype.setQueryData=function(e){this.properties.source.connection=e.connection,this.properties.source.name=e.schemaName+"."+e.objectName,this.queryData=e.selectBody,this.loadData()},t.prototype.saveData=function(){return Object(n.b)(this,void 0,void 0,(function(){var e;return Object(n.e)(this,(function(t){switch(t.label){case 0:return this.properties.onSave?(this.emitEvent(this.properties.onSave,this.changedData),[3,3]):[3,1];case 1:return[4,this.sqlService.mergeInData$((e=this.properties.source).connection,e.name,{tableData:Object(l.toTable)(this.changedData)}).toPromise()];case 2:t.sent(),this.loadData(),t.label=3;case 3:return[2]}}))}))},t.prototype.ngOnInit=function(){var t;return Object(n.b)(this,void 0,void 0,(function(){var i,r,o,s;return Object(n.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.ngOnInit.call(this)];case 1:return n.sent(),this.properties.source?(i=this.getSource(),r=i.connection,this.dataObject={schemaName:o=i.schemaName,objectName:s=i.name},this.localGridConfig=new b.a(r+"-"+o+"-"+s,(null===(t=this.uiModel)||void 0===t?void 0:t.id)||"data-grid"),this.flex=g.b.show,this.loadData(),[2]):[2]}}))}))},t.prototype.ngOnChanges=function(t){return Object(n.b)(this,void 0,void 0,(function(){var i;return Object(n.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.ngOnChanges.call(this,t)];case 1:return n.sent(),i=t.uiModel,JSON.stringify(null==i?void 0:i.previousValue.itemProperties.source)!==JSON.stringify(this.properties.source)&&this.loadData(),[2]}}))}))},t.prototype.refresh=function(){this.loadData()},t.prototype.getColumns=function(t){var i,n=this;if(this.properties.columns&&Array.isArray(this.properties.columns))return this.properties.columns.map((function(e){return e.headerText||(e.headerText=n.getColumnHeader(e.bindingName)),e.dataType=n.getColumnType(e.bindingName)||o.DataType[e.dataType],e.width=n.getColumnWidth(e.bindingName,e.width||150),e.displayFormat=[o.DataType.Date,o.DataType.Number].includes(e.dataType)?n.getColumnDisplayFormat(e.bindingName)||e.displayFormat:null,e}));var r=(null===(i=this.dbFields)||void 0===i?void 0:i.length)?this.dbFields:e.prototype.getColumns.call(this,t);return this.queryData&&r.forEach((function(e){var t=n.queryData.fields.find((function(t){return Object(u.j)(t.fieldExpression)===e.bindingName}));t&&(e.fieldExpression=t.fieldExpression)})),r},t.prototype.onAdd=function(){this.emitEvent(this.properties.onAdd)},t.prototype.loadData=function(){var e,t;return Object(n.b)(this,void 0,void 0,(function(){var i,r,o,s,a,u,d,p,f=this;return Object(n.e)(this,(function(g){return i=this.getSource(),r=i.connection,a=i.query,this.dataObject={schemaName:s=i.schemaName,objectName:o=i.name},r&&s&&o&&(this.loading=!0,u={},d=Object(h.i)(this.filters)||[],this.queryData?(p=Array.isArray(this.queryData.filters)?this.queryData.filters:[],u=Object(y.d)(Object(n.a)(Object(n.a)({},this.queryData),{filters:Object(n.g)(p,d)}))):a?(a.filters&&(d=Object(n.g)(d,a.filters)),u=Object(n.a)(Object(n.a)({},a),{filters:d})):u={filters:d},null===(e=this.gridContext)||void 0===e||e.clear(),u.filterString="string"==typeof(null===(t=this.queryData)||void 0===t?void 0:t.filters)?this.queryData.filters:"",this.sqlService.selectSqlObjectData$(r,s,o,u).subscribe((function(e){f.changedData=null,f.deletedData=null,(null==e?void 0:e.fieldNames)&&(f.dbFields=e.fieldNames.map((function(t,i){return{headerText:f.getColumnHeader(t)||t,bindingName:t,width:f.getColumnWidth(t),dataType:f.getColumnType(t)||c.DataTypeNameToDataType[e.fieldDataTypes[i]],displayFormat:f.getColumnDisplayFormat(t)}}))),f.renderData(Object(l.fromTable)(e)),setTimeout((function(){return f.loading=!1}),200)}),(function(e){f.changedData=null,f.deletedData=null,f.loading=!1}))),[2]}))}))},t.prototype.getColumnQueryParams=function(e,t){var i=d.a.resolveString(e.link.replace(/.*\?/,""),t);return Object(h.j)(null,i)},t.prototype.getLink=function(e,t){return d.a.resolveString(e.link.replace(/\?.*/,""),t)},Object.defineProperty(t.prototype,"defaultFilters",{get:function(){var e=this.properties.source.query;return e&&e.filters},enumerable:!1,configurable:!0}),t.prototype.onCtxMenuClicked=function(e){switch(e.value){case"edit-column":this.editColumn();break;case"fill-all":this.fillRows("all");break;case"fill-empty":this.fillRows("empty")}},t.prototype.onFiltersChange=function(e){this.filters=Object(n.a)({},e),this.loadData()},t.prototype.onApply=function(e,t){var i;this.filters=Object(n.a)(Object(n.a)({},this.filters),((i={})[t.fieldExpression||t.bindingName]=e,i)),this.loadData()},Object.defineProperty(t.prototype,"filtersList",{get:function(){var e=this;return Object.entries(this.filters).filter((function(e){return Boolean(e[1])})).map((function(t){var i=t[0];return{fieldName:i,value:t[1].map((function(t){if(e.localGridConfig.getColumn(i).dataType===o.DataType.Date){var n=e.localGridConfig.getColumn(i).displayFormat;return Object(u.d)(t,n)}return t instanceof Date?Object(l.dateToString)(t):null===t?"[NULL]":t})).join(", ")}}))},enumerable:!1,configurable:!0}),t.prototype.editColumn=function(){var e=this,t=this.dialogService.open(m.a,{class:"modal-lg"});t.config=[this.columnToEdit],t.init.pipe(Object(r.a)((function(){return t.component.save}))).subscribe((function(t){t.forEach((function(t){e.localGridConfig.saveColumn(t.bindingName,t)}));var i=t[0],n=e.columnsList.findIndex((function(e){return e.bindingName===i.bindingName}));Object.assign(e.columnsList[n],i)}))},t.prototype.fillRows=function(e){var t=this,i=!1;this.grid.collectionView.sourceCollection.forEach((function(n){var r=t.columnToEdit.bindingName,o=n[r];t.updateCondition(o,e)&&(n[r]=t.contextMenuValue,t.gridContext.setEditValue(n,r,o,t.contextMenuValue),i=!0)})),i&&(this.grid.refresh(!0),this.changeHandler())},t.prototype.updateCondition=function(e,t){switch(t){case"all":return e!==this.contextMenuValue;case"empty":return[null,void 0,""].includes(e);default:return!0}},t.prototype.initializedGrid=function(e){var t=this;this.gridContext=Object(f.c)(e),e.cellEditEnded.addHandler((function(){return t.changeHandler()})),e.deletedRow.addHandler((function(){return t.changeHandler()})),e.addEventListener(e.hostElement,"contextmenu",(function(i){var n=e.hitTest(i),r=n.col>-1?n.col:e.columns.length-1;t.columnToEdit=t.columnsList.find((function(e,t){return r===t}));var o=t.grid.collectionView.items[n.row];o&&(t.contextMenuValue=o[t.columnToEdit.bindingName])}));var i=e.itemFormatter;e.itemFormatter=function(t,n,r,o){i(t,n,r,o);var a=t.columns[r].binding;if(t.cellType===s.CellType.ColumnHeader&&o.firstChild instanceof HTMLElement){var l=o.firstChild.querySelector("#sort-icon");l&&o.firstChild.removeChild(l);var c=e.collectionView.sortDescriptions[0];if(c&&c.property===a){var h=document.createElement("SPAN");h.id="sort-icon",h.className=c.ascending?"wj-glyph-up":"wj-glyph-down",o.firstChild.appendChild(h)}}},e.sortingColumn.addHandler((function(e,t){t.data.target.classList.contains("fa-filter")&&(t.cancel=!0)})),e.resizingColumn.addHandler((function(i,n){t.localGridConfig&&t.localGridConfig.saveColumn(e.columns[n.col].binding,{width:e.columns[n.col].renderWidth})}))},t.prototype.changeHandler=function(){var e=this.gridContext.state,t=e.added,i=e.edited,r=e.deleted,o=[];i&&(o=Object(n.g)(o,i)),t&&(o=Object(n.g)(o,t)),r&&(this.deletedData=r),this.changedData=o},t.\u0275fac=function(e){return new(e||t)(v.Nb(x.c),v.Nb(x.b),v.Nb(x.f),v.Nb(w.b))},t.\u0275cmp=v.Hb({type:t,selectors:[["dc-data-grid"]],features:[v.yb,v.zb],decls:27,vars:15,consts:[["class","row mx-0",4,"ngIf"],[1,"position-relative","d-flex","flex-column","h-100","overflow-hidden"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],["value","edit-column"],[1,"px-2"],[1,"fa","fa-columns","mr-1","my-2"],["value","fill-all"],[1,"fa","fa-file-o","mr-1","my-2"],["value","fill-empty"],[1,"fa","fa-files-o","mr-1","my-2"],[1,"data-grid","h-100","w-100","d-flex","flex-column",3,"wjContextMenu","itemsSource","allowAddNew","allowDelete","selectionMode","headersVisibility","isReadOnly","itemsSourceChange","initialized"],["grid",""],[4,"ngFor","ngForOf"],[1,"row","m-0","align-items-center"],["class","fa fa-filter cursor-pointer px-1","triggers","mouseenter:mouseleave",3,"popover",4,"ngIf"],[1,"ml-auto","mr-1"],["popTemplate",""],[1,"row","mx-0"],[3,"class",4,"ngIf"],["class","mr-2",3,"uiModel",4,"ngIf"],[3,"initFilters","fields","defaultFilters","currentFilters","dataObject","queryData","connection","changed"],[1,"ml-auto"],["type","button","class","btn btn-primary mx-2 align-self-baseline mb-2",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-light align-self-baseline mb-2",3,"click",4,"ngIf"],["dropdown","","placement","top left",1,"d-flex","position-relative","px-2","mb-2"],["dropdownToggle","","type","button",1,"btn","py-0"],[1,"fa","fa-ellipsis-v"],["class","dropdown-menu left-menu","role","menu",4,"dropdownMenu"],[1,"mr-2",3,"uiModel"],["type","button",1,"btn","btn-primary","mx-2","align-self-baseline","mb-2",3,"disabled","click"],["type","button",1,"btn","btn-light","align-self-baseline","mb-2",3,"click"],["role","menu",1,"dropdown-menu","left-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"header","binding","dataType","width","format","dataMap","isReadOnly","minWidth","maxWidth"],["wjFlexGridCellTemplate","",3,"cellType"],[4,"ngIf"],[1,"text-normal",3,"title"],[3,"field","icon","dataObject","connection","currentFilters","defaultFilters","queryData","apply",4,"ngIf"],[3,"field","icon","dataObject","connection","currentFilters","defaultFilters","queryData","apply"],["wjFlexGridCellTemplate","","cellType","Cell"],[3,"routerLink","queryParams"],["triggers","mouseenter:mouseleave",1,"fa","fa-filter","cursor-pointer","px-1",3,"popover"],["class","applied-filters-list px-0",4,"ngIf"],[1,"applied-filters-list","px-0"]],template:function(e,t){if(1&e){var i=v.Ub();v.Cc(0,L,11,11,"div",0),v.Tb(1,"div",1),v.Cc(2,F,4,0,"div",2),v.Tb(3,"wj-menu",3,4),v.bc("itemClicked",(function(){v.vc(i);var e=v.sc(4);return t.onCtxMenuClicked(e)})),v.Tb(5,"wj-menu-item",5),v.Tb(6,"span",6),v.Ob(7,"i",7),v.Ec(8,"Format Column"),v.Sb(),v.Sb(),v.Tb(9,"wj-menu-item",8),v.Tb(10,"span",6),v.Ob(11,"i",9),v.Ec(12,"Fill all rows"),v.Sb(),v.Sb(),v.Tb(13,"wj-menu-item",10),v.Tb(14,"span",6),v.Ob(15,"i",11),v.Ec(16,"Fill empty rows"),v.Sb(),v.Sb(),v.Sb(),v.Tb(17,"wj-flex-grid",12,13),v.bc("itemsSourceChange",(function(e){return t.collectionView=e}))("initialized",(function(){v.vc(i);var e=v.sc(18);return t.initializedGrid(e)})),v.Cc(19,H,4,12,"ng-container",14),v.Sb(),v.Tb(20,"div",15),v.Cc(21,X,1,1,"i",16),v.Tb(22,"span",17),v.Ec(23),v.ec(24,"number"),v.Sb(),v.Sb(),v.Sb(),v.Cc(25,Y,3,1,"ng-template",null,18,v.Dc)}if(2&e){var n=v.sc(4);v.jc("ngIf",t.properties.source&&!t.properties.hideHeader),v.Bb(2),v.jc("ngIf",t.loading),v.Bb(1),v.jc("isButton",!0),v.Bb(14),v.jc("wjContextMenu",n)("itemsSource",t.collectionView)("allowAddNew",!!t.properties.allowAddNew)("allowDelete",!!t.properties.allowDelete)("selectionMode",t.properties.selectionMode)("headersVisibility",t.properties.headersVisibility||"All")("isReadOnly",!!t.properties.isReadOnly),v.Bb(2),v.jc("ngForOf",t.columnsList),v.Bb(2),v.jc("ngIf",t.filters),v.Bb(2),v.Gc("Rows: ",v.fc(24,13,t.collectionView.items.length),"")}},directives:[S.m,C.d,C.e,O.a,C.a,S.l,j.a,T.a,T.d,T.b,a.v,O.c,O.b,N.a,A.h,M.a],pipes:[S.f],styles:["[_nghost-%COMP%]{flex-direction:column}.data-grid[_ngcontent-%COMP%]{height:calc(100% - 25px);margin:auto;width:auto}.data-grid[_ngcontent-%COMP%]   app-filter[_ngcontent-%COMP%]{order:1}.data-grid[_ngcontent-%COMP%]     .wj-cell.wj-header>div{align-items:center;display:flex;height:100%;max-height:50px}.applied-filters-list[_ngcontent-%COMP%]{list-style-type:none}.text-normal[_ngcontent-%COMP%]{-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:2;max-height:50px;overflow:hidden;padding-right:5px;text-align:center;text-overflow:ellipsis;white-space:normal;width:100%;word-break:break-word}"]}),t}(p.a),q={name:"vendor-data-grid",packageName:"vendor",label:"Data grid",category:"Data table",description:"Data Grid component",parseUIModel:function(e){var t,i={source:{query:{}}},n=i.source.query;e.attrs.initFilters&&(i.initFilters=e.attrs.initFilters.split(",").map((function(e){return e.trim()})));var r=e.attrs.colWidth;return r&&(i.colWidth=r.includes("*")?r:Number(r)),i.selectionMode=e.attrs.selectionMode||s.SelectionMode.Cell,i.isReadOnly="false"!==e.attrs.isReadOnly,(null===(t=e.childNodes)||void 0===t?void 0:t.length)&&(e.childNodes.forEach((function(e){var t=Object(a.u)(e);if("source"===t.type)Object.assign(i.source,t.attrs);else if("query"===t.type)t.childNodes.forEach((function(e){var t=Object(a.u)(e);"filter"===t.type?(n.filters=n.filters||[],n.filters.push(t.attrs)):"order"===t.type&&(n.orderBy=n.orderBy=[],n.orderBy.push(t.attrs))}));else if("column"===t.type){var r=Object(f.a)(t,i);r.override||(n.fields=n.fields||[],n.fields.push(r.bindingName))}})),e.childNodes=null),{type:"vendor-data-grid",itemProperties:i}},itemProperties:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),Object(n.c)([Object(a.r)({description:"Source",example:'{connection: "conectionName", owner: "OwnerName", name: "TableName"}'}),Object(n.f)("design:type",Object)],t.prototype,"source",void 0),Object(n.c)([Object(a.r)({description:"Specifies list of columns to display.",example:"[{\n      headerText: 'Header title',\n      bindingName: 'propName',\n      dataType: 'Number'\n    }]"}),Object(n.f)("design:type",Array)],t.prototype,"columns",void 0),Object(n.c)([Object(a.r)({description:"Initial header filters",example:'["Name", "Country"]'}),Object(n.f)("design:type",Array)],t.prototype,"initFilters",void 0),Object(n.c)([Object(a.r)({description:"Save data handler",example:"onDataSave(data)",type:a.i.EVENT}),Object(n.f)("design:type",String)],t.prototype,"onSave",void 0),Object(n.c)([Object(a.r)({description:"Add data handler",example:"onAdd()",type:a.i.EVENT}),Object(n.f)("design:type",String)],t.prototype,"onAdd",void 0),Object(n.c)([Object(a.r)({description:"Whether to hide grid header functionality (title, filters, save, export)",example:"true"}),Object(n.f)("design:type",Boolean)],t.prototype,"hideHeader",void 0),t}(p.b),component:U,example:[{title:"Data grid example",uiModel:'<vendor-data-grid title="Contacts" titleStyle="h2" titleIcon="c-icon c-icon-2xl cil-diamond" class="overflow-hidden">\n  <source connection="public-data-connect" name="publicData.contacts"/>\n</vendor-data-grid>\n  ',dataModel:null,description:"\n  Data Grid source is defined in <i>source</i> tag.\n  <br/>\n  Title is defined with tags <i>title</i>, <i>titleStyle</i>, <i>titleIcon</i>.\n  "},{title:"Data grid columns definition example",uiModel:'<vendor-data-grid headersVisibility="Column" title="Contacts" class="overflow-hidden">\n  <source connection="public-data-connect" name="publicData.contacts"/>\n  <column bindingName="FirstName" width="120" />\n  <column bindingName="LastName" width="120" />\n  <column bindingName="Email" width="*" minWidth="200"/>\n  <column bindingName="Mobile" width="120"/>\n  <column bindingName="Country" width="120" />\n</vendor-data-grid>\n  ',dataModel:null,description:"Data Grid columns are defined with <i>column</i> tag."},{title:"Data grid with inner filter example",uiModel:'<vendor-data-grid title="Contacts from USA and UK" class="overflow-hidden" height="300px">\n    <source connection="public-data-connect" name="publicData.contacts"/>\n    <query>\n      <filter AndOr="Or" fieldName="Country" operation="Equal" value="USA"/>\n      <filter AndOr="Or" fieldName="Country" operation="Equal" value="UK"/>\n      <order fieldName="FirstName" direction="asc" />\n    </query>\n  </vendor-data-grid>\n  ',dataModel:null,description:"Data Grid with defined inner query filter and order field"}],children:[{tag:"source",properties:[{name:"connection"},{name:"schemaName"},{name:"name"},{name:"query"}]},{tag:"query",properties:[],hasChildren:!0},_.a],defaultModel:'<vendor-data-grid class="overflow-hidden">\n  <source connection="sql-shared" name="dbo.TableName"/>\n</vendor-data-grid>'}},KtZj:function(e,t,i){"use strict";var n,r;"undefined"!=typeof window&&window,void 0===(r="function"==typeof(n=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function n(e,t){var i=Object.prototype.toString.call(e),n="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,r=0,o=e.length;if(n)for(;r<o;r++)t(e[r]);else t(e)}function r(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function o(e,t){Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}var s=function e(s,a){var l=0;function c(){var e,t,i=[];this.add=function(e){i.push(e)},this.call=function(n){for(e=0,t=i.length;e<t;e++)i[e].call(this,n)},this.remove=function(n){var r=[];for(e=0,t=i.length;e<t;e++)i[e]!==n&&r.push(i[e]);i=r},this.length=function(){return i.length}}n(s,(function(e){!function(e,i){if(e)if(e.resizedAttached)e.resizedAttached.add(i);else{e.resizedAttached=new c,e.resizedAttached.add(i),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var n={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},s={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(e.resizeSensor,n);var a=document.createElement("div");a.className="resize-sensor-expand",o(a,n);var h=document.createElement("div");o(h,s),a.appendChild(h);var u=document.createElement("div");u.className="resize-sensor-shrink",o(u,n);var d=document.createElement("div");o(d,s),o(d,{width:"200%",height:"200%"}),u.appendChild(d),e.resizeSensor.appendChild(a),e.resizeSensor.appendChild(u),e.appendChild(e.resizeSensor);var p=window.getComputedStyle(e),f=p?p.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(e.style.position="relative");var g=!1,m=0,b=r(e),_=0,y=0,v=!0;l=0;var x=function i(){if(v){if(0===e.offsetWidth&&0===e.offsetHeight)return void(l||(l=t((function(){l=0,i()}))));v=!1}var n,r;r=e.offsetHeight,h.style.width=(n=e.offsetWidth)+10+"px",h.style.height=r+10+"px",a.scrollLeft=n+10,a.scrollTop=r+10,u.scrollLeft=n+10,u.scrollTop=r+10};e.resizeSensor.resetSensor=x;var w=function(){m=0,g&&(_=b.width,y=b.height,e.resizedAttached&&e.resizedAttached.call(b))},S=function(){b=r(e),(g=b.width!==_||b.height!==y)&&!m&&(m=t(w)),x()},C=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)};C(a,"scroll",S),C(u,"scroll",S),l=t((function(){l=0,x()}))}}(e,a)})),this.detach=function(t){l||(i(l),l=0),e.detach(s,t)},this.reset=function(){s.resizeSensor.resetSensor()}};if(s.reset=function(e){n(e,(function(e){e.resizeSensor.resetSensor()}))},s.detach=function(e,t){n(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver){var a=new MutationObserver((function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i=e[t].addedNodes,n=0;n<i.length;n++)i[n].resizeSensor&&s.reset(i[n])}));document.addEventListener("DOMContentLoaded",(function(e){a.observe(document.body,{childList:!0,subtree:!0})}))}return s})?n.call(t,i,t,e):n)||(e.exports=r)},LXVg:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("mrSG"),r=function(){function e(e,t){this.dataKey=e,this.gridId=t,this.initConfig()}return e.prototype.getColumn=function(e,t){if(void 0===t&&(t="root"),this.gridConfig[t]&&this.gridConfig[t][e]){var i=this.gridConfig[t][e];return{headerText:i.headerText,width:i.width,dataType:i.dataType?Number(i.dataType):null,displayFormat:i.displayFormat||null,bindingName:e}}return{dataType:null,bindingName:e}},e.prototype.saveColumn=function(e,t,i){var r,o;void 0===i&&(i="root"),this.gridConfig[i]?this.gridConfig[i][e]=Object(n.a)(Object(n.a)({},this.gridConfig[i][e]),t):this.gridConfig[i]=((r={})[e]=Object(n.a)({},t),r);var s=this.getConfigs();this.dataKey&&this.gridId&&(s[this.dataKey]?s[this.dataKey][this.gridId]=this.gridConfig:s[this.dataKey]=((o={})[this.gridId]=this.gridConfig,o),localStorage.setItem("grid-configs",JSON.stringify(s)))},e.prototype.initConfig=function(){var e,t=this.getConfigs();this.dataKey&&this.gridId?(t[this.dataKey]?t[this.dataKey][this.gridId]||(t[this.dataKey][this.gridId]={}):t[this.dataKey]=((e={})[this.gridId]={},e),this.gridConfig=t[this.dataKey][this.gridId]):this.gridConfig={}},e.prototype.getConfigs=function(){var e=localStorage.getItem("grid-configs"),t={};if(e)try{t=JSON.parse(e)||{}}catch(i){t={}}return t},e}()},OaQ9:function(e,t,i){"use strict";i.d(t,"a",(function(){return qt}));var n={};i.r(n),i.d(n,"softFinancial",(function(){return V})),i.d(n,"softRadar",(function(){return H})),i.d(n,"Easing",(function(){return s})),i.d(n,"AnimationMode",(function(){return l})),i.d(n,"ChartAnimation",(function(){return X}));var r={};i.r(r),i.d(r,"MouseAction",(function(){return $})),i.d(r,"InteractiveAxes",(function(){return J})),i.d(r,"ChartGestures",(function(){return ne})),i.d(r,"_RangeSlider",(function(){return re})),i.d(r,"Orientation",(function(){return ie})),i.d(r,"RangeSelector",(function(){return oe}));var o,s,a,l,c=i("ofXK"),h=i("3Pt+"),u=i("tyNb"),d=i("4D4C"),p=i("RsUz"),f=i("fEDK"),g=i("3s35"),m=i("fXoL"),b=i("JIag"),_=i("lgZ4"),y=["*"],v=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),x=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},w=function(e,t){return function(i,n){t(i,n,e)}},S={selector:"wj-flex-chart",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","renderEngine","isDisabled","binding","footer","header","selectionMode","palette","plotMargin","footerStyle","headerStyle","tooltipContent","itemsSource","bindingX","interpolateNulls","legendToggle","symbolSize","options","selection","itemFormatter","labelContent","chartType","rotated","stacking"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","invalidInputNg: invalidInput","renderingNg: rendering","renderedNg: rendered","selectionChangedNg: selectionChanged","selectionChangePC: selectionChange","itemsSourceChangingNg: itemsSourceChanging","itemsSourceChangedNg: itemsSourceChanged","seriesVisibilityChangedNg: seriesVisibilityChanged"],providers:[{provide:h.h,useFactory:b.b,multi:!0,deps:["WjComponent"]}]},C=function(e){function t(t,i,n){var r=e.call(this,b.a.getHostElement(t,i))||this;return r.isInitialized=!1,r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;return v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.addEventListener=function(t,i,n,r){var o=this;void 0===r&&(r=!1);var s=b.a,a=s.ngZone;a&&s.outsideZoneEvents[i]?a.runOutsideAngular((function(){e.prototype.addEventListener.call(o,t,i,n,r)})):e.prototype.addEventListener.call(this,t,i,n,r)},Object.defineProperty(t.prototype,"tooltipContent",{get:function(){return this.tooltip.content},set:function(e){this.tooltip.content=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelContent",{get:function(){return this.dataLabel.content},set:function(e){this.dataLabel.content=e},enumerable:!0,configurable:!0}),t.meta={outputs:S.outputs,changeEvents:{selectionChanged:["selection"]}},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart"]],inputs:{asyncBindings:"asyncBindings",wjModelProperty:"wjModelProperty",renderEngine:"renderEngine",isDisabled:"isDisabled",binding:"binding",footer:"footer",header:"header",selectionMode:"selectionMode",palette:"palette",plotMargin:"plotMargin",footerStyle:"footerStyle",headerStyle:"headerStyle",tooltipContent:"tooltipContent",itemsSource:"itemsSource",bindingX:"bindingX",interpolateNulls:"interpolateNulls",legendToggle:"legendToggle",symbolSize:"symbolSize",options:"options",selection:"selection",itemFormatter:"itemFormatter",labelContent:"labelContent",chartType:"chartType",rotated:"rotated",stacking:"stacking"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",invalidInputNg:"invalidInput",renderingNg:"rendering",renderedNg:"rendered",selectionChangedNg:"selectionChanged",selectionChangePC:"selectionChange",itemsSourceChangingNg:"itemsSourceChanging",itemsSourceChangedNg:"itemsSourceChanged",seriesVisibilityChangedNg:"seriesVisibilityChanged"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(S.providers))],ngContentSelectors:y,decls:2,vars:0,template:function(e,t){1&e&&(m.ic(),m.Tb(0,"div"),m.hc(1),m.Sb())},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.FlexChart),O={selector:"wj-flex-pie",template:"<div><ng-content></ng-content></div>",inputs:["wjModelProperty","isDisabled","binding","footer","header","selectionMode","palette","plotMargin","footerStyle","headerStyle","tooltipContent","itemsSource","bindingName","innerRadius","isAnimated","offset","reversed","startAngle","selectedIndex","selectedItemPosition","selectedItemOffset","itemFormatter","labelContent","titles"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","refreshingNg: refreshing","refreshedNg: refreshed","invalidInputNg: invalidInput","renderingNg: rendering","renderedNg: rendered","selectionChangedNg: selectionChanged","itemsSourceChangingNg: itemsSourceChanging","itemsSourceChangedNg: itemsSourceChanged"],providers:[{provide:h.h,useFactory:b.b,multi:!0,deps:["WjComponent"]}]},j=function(e){function t(t,i,n){var r=e.call(this,b.a.getHostElement(t,i))||this;return r.isInitialized=!1,r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;return v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.addEventListener=function(t,i,n,r){var o=this;void 0===r&&(r=!1);var s=b.a,a=s.ngZone;a&&s.outsideZoneEvents[i]?a.runOutsideAngular((function(){e.prototype.addEventListener.call(o,t,i,n,r)})):e.prototype.addEventListener.call(this,t,i,n,r)},Object.defineProperty(t.prototype,"tooltipContent",{get:function(){return this.tooltip.content},set:function(e){this.tooltip.content=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelContent",{get:function(){return this.dataLabel.content},set:function(e){this.dataLabel.content=e},enumerable:!0,configurable:!0}),t.meta={outputs:O.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-pie"]],inputs:{wjModelProperty:"wjModelProperty",isDisabled:"isDisabled",binding:"binding",footer:"footer",header:"header",selectionMode:"selectionMode",palette:"palette",plotMargin:"plotMargin",footerStyle:"footerStyle",headerStyle:"headerStyle",tooltipContent:"tooltipContent",itemsSource:"itemsSource",bindingName:"bindingName",innerRadius:"innerRadius",isAnimated:"isAnimated",offset:"offset",reversed:"reversed",startAngle:"startAngle",selectedIndex:"selectedIndex",selectedItemPosition:"selectedItemPosition",selectedItemOffset:"selectedItemOffset",itemFormatter:"itemFormatter",labelContent:"labelContent",titles:"titles"},outputs:{initialized:"initialized",gotFocusNg:"gotFocus",lostFocusNg:"lostFocus",refreshingNg:"refreshing",refreshedNg:"refreshed",invalidInputNg:"invalidInput",renderingNg:"rendering",renderedNg:"rendered",selectionChangedNg:"selectionChanged",itemsSourceChangingNg:"itemsSourceChanging",itemsSourceChangedNg:"itemsSourceChanged"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(O.providers))],ngContentSelectors:y,decls:2,vars:0,template:function(e,t){1&e&&(m.ic(),m.Tb(0,"div"),m.hc(1),m.Sb())},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.FlexPie),T={selector:"wj-flex-chart-axis",template:"",inputs:["wjProperty","axisLine","format","labels","majorGrid","majorTickMarks","majorUnit","max","min","position","reversed","title","labelAngle","minorGrid","minorTickMarks","minorUnit","origin","logBase","plotArea","labelAlign","name","overlappingLabels","labelPadding","itemFormatter","itemsSource","binding"],outputs:["initialized","rangeChangedNg: rangeChanged"],providers:[]},N=function(e){function t(t,i,n){var r=e.call(this)||this;return r.isInitialized=!1,r.wjProperty="axes",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;return v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:T.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-axis"]],inputs:{wjProperty:"wjProperty",axisLine:"axisLine",format:"format",labels:"labels",majorGrid:"majorGrid",majorTickMarks:"majorTickMarks",majorUnit:"majorUnit",max:"max",min:"min",position:"position",reversed:"reversed",title:"title",labelAngle:"labelAngle",minorGrid:"minorGrid",minorTickMarks:"minorTickMarks",minorUnit:"minorUnit",origin:"origin",logBase:"logBase",plotArea:"plotArea",labelAlign:"labelAlign",name:"name",overlappingLabels:"overlappingLabels",labelPadding:"labelPadding",itemFormatter:"itemFormatter",itemsSource:"itemsSource",binding:"binding"},outputs:{initialized:"initialized",rangeChangedNg:"rangeChanged"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(T.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.Axis),A={selector:"wj-flex-chart-legend",template:"",inputs:["wjProperty","orientation","position","title","titleAlign"],outputs:["initialized"],providers:[]},M=function(e){function t(t,i,n){var r=e.call(this,n)||this;return r.isInitialized=!1,r.wjProperty="legend",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;return v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:A.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-legend"]],inputs:{wjProperty:"wjProperty",orientation:"orientation",position:"position",title:"title",titleAlign:"titleAlign"},outputs:{initialized:"initialized"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(A.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.Legend),E={selector:"wj-flex-chart-data-label",template:"",inputs:["wjProperty","content","border","offset","connectingLine","position"],outputs:["initialized","renderingNg: rendering"],providers:[]},P=(function(e){function t(t,i,n){var r=e.call(this)||this;return r.isInitialized=!1,r.wjProperty="dataLabel",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:E.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-data-label"]],inputs:{wjProperty:"wjProperty",content:"content",border:"border",offset:"offset",connectingLine:"connectingLine",position:"position"},outputs:{initialized:"initialized",renderingNg:"rendering"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(E.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.DataLabel),{selector:"wj-flex-pie-data-label",template:"",inputs:["wjProperty","content","border","offset","connectingLine","position"],outputs:["initialized","renderingNg: rendering"],providers:[]}),I=(function(e){function t(t,i,n){var r=e.call(this)||this;return r.isInitialized=!1,r.wjProperty="dataLabel",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:P.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-pie-data-label"]],inputs:{wjProperty:"wjProperty",content:"content",border:"border",offset:"offset",connectingLine:"connectingLine",position:"position"},outputs:{initialized:"initialized",renderingNg:"rendering"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(P.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.PieDataLabel),{selector:"wj-flex-chart-series",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjProperty","axisX","axisY","binding","bindingX","cssClass","name","style","altStyle","symbolMarker","symbolSize","symbolStyle","visibility","itemsSource","interpolateNulls","tooltipContent","itemFormatter","chartType"],outputs:["initialized","renderingNg: rendering","renderedNg: rendered","visibilityChangePC: visibilityChange"],providers:[]}),D=function(e){function t(t,i,n){var r=e.call(this)||this;return r.isInitialized=!1,r.wjProperty="series",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;return v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:I.outputs,changeEvents:{"chart.seriesVisibilityChanged":["visibility"]},siblingId:"series"},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-series"]],inputs:{asyncBindings:"asyncBindings",wjProperty:"wjProperty",axisX:"axisX",axisY:"axisY",binding:"binding",bindingX:"bindingX",cssClass:"cssClass",name:"name",style:"style",altStyle:"altStyle",symbolMarker:"symbolMarker",symbolSize:"symbolSize",symbolStyle:"symbolStyle",visibility:"visibility",itemsSource:"itemsSource",interpolateNulls:"interpolateNulls",tooltipContent:"tooltipContent",itemFormatter:"itemFormatter",chartType:"chartType"},outputs:{initialized:"initialized",renderingNg:"rendering",renderedNg:"rendered",visibilityChangePC:"visibilityChange"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(I.providers))],ngContentSelectors:y,decls:2,vars:0,template:function(e,t){1&e&&(m.ic(),m.Tb(0,"div"),m.hc(1),m.Sb())},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.Series),k={selector:"wj-flex-line-marker",template:"",inputs:["wjProperty","isVisible","seriesIndex","horizontalPosition","content","verticalPosition","alignment","lines","interaction","dragLines","dragThreshold","dragContent"],outputs:["initialized","positionChangedNg: positionChanged"],providers:[]},L=(function(e){function t(t,i,n){var r=e.call(this,n)||this;return r.isInitialized=!1,r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:k.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-line-marker"]],inputs:{wjProperty:"wjProperty",isVisible:"isVisible",seriesIndex:"seriesIndex",horizontalPosition:"horizontalPosition",content:"content",verticalPosition:"verticalPosition",alignment:"alignment",lines:"lines",interaction:"interaction",dragLines:"dragLines",dragThreshold:"dragThreshold",dragContent:"dragContent"},outputs:{initialized:"initialized",positionChangedNg:"positionChanged"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(k.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.LineMarker),{selector:"wj-flex-chart-data-point",template:"",inputs:["wjProperty","x","y"],outputs:["initialized"],providers:[]}),F=(function(e){function t(t,i,n){var r=e.call(this)||this;return r.isInitialized=!1,r.wjProperty="",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:L.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-data-point"]],inputs:{wjProperty:"wjProperty",x:"x",y:"y"},outputs:{initialized:"initialized"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(L.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.DataPoint),{selector:"wj-flex-chart-plot-area",template:"",inputs:["wjProperty","column","height","name","row","style","width"],outputs:["initialized"],providers:[]}),R=(function(e){function t(t,i,n){var r=e.call(this)||this;return r.isInitialized=!1,r.wjProperty="plotAreas",r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;v(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:F.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-plot-area"]],inputs:{wjProperty:"wjProperty",column:"column",height:"height",name:"name",row:"row",style:"style",width:"width"},outputs:{initialized:"initialized"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(F.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=x([,w(0,Object(m.r)(m.n)),w(1,Object(m.r)(m.t)),w(2,Object(m.r)("WjComponent")),w(2,Object(m.L)()),w(2,Object(m.D)())],t)}(_.PlotArea),function(){function e(){}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[c.c]]}),e}()),B=i("tcrU"),z=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function V(){return Object(B._getModule)("wijmo.chart.finance")}function H(){return Object(B._getModule)("wijmo.chart.radar")}(a=s||(s={}))[a.Linear=0]="Linear",a[a.Swing=1]="Swing",a[a.EaseInQuad=2]="EaseInQuad",a[a.EaseOutQuad=3]="EaseOutQuad",a[a.EaseInOutQuad=4]="EaseInOutQuad",a[a.EaseInCubic=5]="EaseInCubic",a[a.EaseOutCubic=6]="EaseOutCubic",a[a.EaseInOutCubic=7]="EaseInOutCubic",a[a.EaseInQuart=8]="EaseInQuart",a[a.EaseOutQuart=9]="EaseOutQuart",a[a.EaseInOutQuart=10]="EaseInOutQuart",a[a.EaseInQuint=11]="EaseInQuint",a[a.EaseOutQuint=12]="EaseOutQuint",a[a.EaseInOutQuint=13]="EaseInOutQuint",a[a.EaseInSine=14]="EaseInSine",a[a.EaseOutSine=15]="EaseOutSine",a[a.EaseInOutSine=16]="EaseInOutSine",a[a.EaseInExpo=17]="EaseInExpo",a[a.EaseOutExpo=18]="EaseOutExpo",a[a.EaseInOutExpo=19]="EaseInOutExpo",a[a.EaseInCirc=20]="EaseInCirc",a[a.EaseOutCirc=21]="EaseOutCirc",a[a.EaseInOutCirc=22]="EaseInOutCirc",a[a.EaseInBack=23]="EaseInBack",a[a.EaseOutBack=24]="EaseOutBack",a[a.EaseInOutBack=25]="EaseInOutBack",a[a.EaseInBounce=26]="EaseInBounce",a[a.EaseOutBounce=27]="EaseOutBounce",a[a.EaseInOutBounce=28]="EaseInOutBounce",a[a.EaseInElastic=29]="EaseInElastic",a[a.EaseOutElastic=30]="EaseOutElastic",a[a.EaseInOutElastic=31]="EaseInOutElastic",function(e){e[e.All=0]="All",e[e.Point=1]="Point",e[e.Series=2]="Series"}(l||(l={}));var X=function(){function e(e,t){this._play=!0,this.ended=new B.Event;var i=this,n=e.hostElement,r=new B.Size(n.offsetWidth,n.offsetHeight);i._chart=e,i._updateEventArgs=[],e instanceof _.FlexPie?i._animation=new W(e,i._updateEventArgs):(i._animation=H()&&e instanceof H().FlexRadar?new U(e,i._updateEventArgs):new Y(e,i._updateEventArgs),i._chartType=e.chartType),i._initOptions(t),e.beginUpdate(),window.setTimeout((function(){e.rendered.addHandler(i._playAnimation,i),e.endUpdate()}),0),i._setCV(e.collectionView),window.addEventListener("resize",(function(e){var t=new B.Size(n.offsetWidth,n.offsetHeight);r.equals(t)||(i._play=!1,r=t)}))}return e.prototype._initOptions=function(e){e&&(e.duration&&(this.duration=e.duration),e.easing&&(this.easing=e.easing),e.animationMode&&(this.animationMode=e.animationMode))},e.prototype._setCV=function(e){this._cv=e,this._animation._clearState()},Object.defineProperty(e.prototype,"animationMode",{get:function(){return this._animation.animationMode},set:function(e){(e=Object(B.asEnum)(e,l))!=this.animationMode&&(this._animation.animationMode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"easing",{get:function(){return this._animation.easing},set:function(e){(e=Object(B.asEnum)(e,s))!=this.easing&&(this._animation.easing=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._animation.duration},set:function(e){(e=Object(B.asNumber)(e))!=this.duration&&(this._animation.duration=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisAnimation",{get:function(){return this._animation.axisAnimation},set:function(e){(e=Object(B.asBoolean)(e))!=this.axisAnimation&&(this._animation.axisAnimation=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),e.prototype._playAnimation=function(){var e=this,t=e._chart,i=t.chartType;e._cv!==t.collectionView&&e._setCV(t.collectionView),null!=e._chartType&&e._chartType!==i&&(e._chartType=i,e._animation._clearState()),e._play?e._animation.playAnimation((function(){return e.ended.raise(e,B.EventArgs.empty)})):e._play=!0},e.prototype.animate=function(){var e=this._chart;if(e){var t=e.itemsSource;e.beginUpdate(),e.itemsSource=null,e.itemsSource=t,e.endUpdate()}},e}(),G=function(){function e(e,t){this._axisAnimation=!0,this._chart=e,this._timers=[]}return Object.defineProperty(e.prototype,"animationMode",{get:function(){return this._animationMode||l.All},set:function(e){(e=Object(B.asEnum)(e,l,!1))!==this._animationMode&&(this._clearState(),this._animationMode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"easing",{get:function(){return null==this._easing?s.Swing:this._easing},set:function(e){e!==this._easing&&(this._easing=Object(B.asEnum)(e,s,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration||400},set:function(e){e!==this._duration&&(this._duration=Object(B.asNumber)(e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisAnimation",{get:function(){return!!this._axisAnimation},set:function(e){e!==this._axisAnimation&&(this._axisAnimation=Object(B.asBoolean)(e,!1))},enumerable:!0,configurable:!0}),e.prototype.playAnimation=function(e){},e.prototype._clearState=function(){this._previousState&&(this._previousState=null),this._currentState&&(this._currentState=null)},e.prototype._setInitState=function(e,t,i){var n=q.parseAttrs(t,i);q.setElementAttr(e,n,0)},e.prototype._getAnimation=function(e,t){return e[t]||(e[t]=[]),e[t]},e.prototype._toggleVisibility=function(e,t){t?q.playAnimation(e,{opacity:0},{opacity:1},null,s.Swing,100):e.setAttribute("opacity","0")},e.prototype._toggleDataLabelVisibility=function(e){var t=this._chart.hostElement,i=t&&t.querySelector(".wj-data-labels");i&&this._toggleVisibility(i,e)},e.prototype._playAnimation=function(e,t){var i,n=this,r=this,o=r.duration,s=r.easing,a=e.length;r._toggleDataLabelVisibility(!1),i=r._getDurationAndDelay(e.length,o),this._timers&&this._timers.length&&(this._timers.forEach((function(e){return window.clearInterval(e)})),this._timers.length=0),e.forEach((function(e,o){var l;e&&(l=window.setTimeout((function(){var l;e.forEach((function(e,c){if(e&&e.ele){if(o===a-1&&0===c){var h=e.done;e.done=function(){r._toggleDataLabelVisibility(!0),h&&h(),t&&t()}}Object(B.isArray)(e.ele)?(l=q.playAnimations(e.ele,e.from,e.to,e.done,s,i.duration),n._timers=n._timers.concat.apply(l)):(l=q.playAnimation(e.ele,e.from,e.to,e.done,s,i.duration),n._timers.push(l))}}))}),i.delay*o),n._timers.push(l))}))},e.prototype._getDurationAndDelay=function(e,t){var i={duration:t,delay:0};return e>1&&(this._previousState?(i.duration=t/e,i.delay=t/e):(i.duration=.5*t,i.delay=.5*t/(e-1))),i},e}(),W=function(e){function t(t,i){var n=e.call(this,t,i)||this;return t.selectionChanged.addHandler(n._selectionChanged,n),n}return z(t,e),t.prototype._selectionChanged=function(){this._isSelectionChanged=!0},t.prototype._clearState=function(){e.prototype._clearState.call(this),this._isSelectionChanged=!1},t.prototype._getElementRotate=function(e){var t,i=e.getAttribute("transform");return i&&i.indexOf("rotate")>-1?1==(i=(i=i.replace("rotate(","").replace(")","")).indexOf(",")>-1?i.split(",").map((function(e){return+e})):i.split(" ").map((function(e){return+e}))).length&&i.push((t=this._chart._areas[0].center).x,t.y):i=[0,(t=this._chart._areas[0].center).x,t.y],i},t.prototype._getDurationAndDelay=function(e,t){var i={duration:t,delay:0};return this.animationMode===l.Point&&e>1&&(i.duration=t/e,i.delay=t/e),i},t.prototype.playAnimation=function(t){e.prototype.playAnimation.call(this,t);var i=[];this._playPieAnimation(i),i.length&&this._playAnimation(i,t)},t.prototype._playPieAnimation=function(e){var t=this._chart,i=!0;this._previousState=this._currentState,this._currentState={areas:t._areas,pels:t._pels,rotate:t._pels.length&&this._getElementRotate(t._pels[0].parentNode)},this._previousState&&(i=!1),this._isSelectionChanged?(t.isAnimated||this._playSelectPieAnimation(e),this._isSelectionChanged=!1):i?this._playLoadPieAnimation(e):this._playUpdatePieAnimation(e)},t.prototype._playSelectPieAnimation=function(e){if(null!=this._previousState){var t,i,n,r=this._chart._pels[0].parentNode,o=this._previousState.rotate,s=this._getElementRotate(r),a=o[0],l=s[0];a!==l&&(a-l>180?s[0]+=360:l-a>180&&(o[0]+=360),t=this._getAnimation(e,0),this._setInitState(r,i={rotate:o},n={rotate:s}),t.push({ele:r,from:i,to:n}))}},t.prototype._playUpdatePieAnimation=function(e){var t,i,n,r,o=this._chart,s=this._previousState,a=o._areas,l=o._pels,c=s.areas.length,h=a.length,u=Math.max(h,c),d=this._getAnimation(e,0),p=0;if(0!==h&&0!==c)for(this._playSelectPieAnimation(e),t=0;t<u;t++)i={},l[t]&&l[t].childNodes&&l[t].childNodes.length>0&&(t<h&&t<c&&(n=a[0],0===t&&(p=n.angle),l[t].childNodes[0].setAttribute("d",1===c?q.getPathDescOfPie(n.center.x,n.center.y,n.radius,p,2*Math.PI,n.innerRadius||0):s.pels[t].childNodes[0].getAttribute("d"))),t<h?(i.to={pie:[(n=a[t]).center.x,n.center.y,n.radius,n.angle,n.sweep,n.innerRadius||0]},i.ele=l[t].childNodes[0]):(r=s.pels[t],i.to={pie:[(n=a[0]).center.x,n.center.y,n.radius,p+2*Math.PI,0,n.innerRadius||0]},l[0].parentNode.appendChild(r),i.done=function(e){return function(){e.parentNode.removeChild(e)}}(r),i.ele=r.childNodes[0]),t<c?i.from={pie:[(n=s.areas[t]).center.x,n.center.y,n.radius,n.angle,n.sweep,n.innerRadius||0]}:(l[t].childNodes[0].setAttribute("d",q.getPathDescOfPie(n.center.x,n.center.y,n.radius,2*Math.PI+p,0,n.innerRadius||0)),i.from={pie:[(n=s.areas[0]).center.x,n.center.y,n.radius,2*Math.PI+p,0,n.innerRadius||0]}),d.push(i))},t.prototype._playLoadPieAnimation=function(e){var t=this,i=t._chart,n=t.animationMode,r=i._areas;i._pels.forEach((function(i,o){var s,a=i.childNodes[0],c={},h={};a&&(n===l.Point?(t._parsePathByAngle(r[o],c,h),s=t._getAnimation(e,o)):(t._parsePathByRadius(r[o],c,h),s=t._getAnimation(e,0)),t._setInitState(a,c,h),s.push({ele:a,from:c,to:h}))}))},t.prototype._parsePathByRadius=function(e,t,i){var n,r=e.center.x,o=e.center.y,s=e.angle,a=e.sweep;n=[r,o,e.radius,s,a,e.innerRadius||0],t.pie=[r,o,0,s,a,0],i.pie=n},t.prototype._parsePathByAngle=function(e,t,i){var n,r=e.center.x,o=e.center.y,s=e.radius,a=e.angle,l=e.innerRadius;n=[r,o,s,a,e.sweep,l||0],t.pie=[r,o,s,a,0,l||0],t["stroke-width"]=0,i.pie=n,i["stroke-width"]=1},t}(G),Y=function(e){function t(t,i){return e.call(this,t,i)||this}return z(t,e),t.prototype._clearState=function(){e.prototype._clearState.call(this),this._prevAxesStates&&(this._prevAxesStates=null),this._currAxesStates&&(this._currAxesStates=null)},t.prototype.playAnimation=function(t){e.prototype.playAnimation.call(this,t);var i,n,r,o,s,a,l,c,h,u=!0,d=this._chart,p=V()&&d instanceof V().FinancialChart,f=d.series,g=f.length,m=[];for(this._previousState=this._currentState,this._previousXVal=this._currentXVal,this._currentState=[],this._addStart=0,this._removeStart=0,this._currentXVal=d._xlabels.slice(),this._previousState&&this._previousState.length&&(u=!1,s=(a=this._previousState).length,c=this._currentXVal,(l=this._previousXVal).length>2&&c.length>2&&((i=c.indexOf(l[0]))>0&&i<c.length-2?c[i+1]===l[1]&&c[i+2]===l[2]&&(this._addStart=i):(i=l.indexOf(c[0]))>0&&i<l.length-2&&l[i+1]===c[1]&&l[i+2]===c[2]&&(this._removeStart=i))),i=0;i<g;i++)if(o=null!=(n=f[i])._getChartType()?n._getChartType():d._getChartType(),r=this._getChartType(o),this._currentState.push({seriesType:o,ele:n.hostElement}),p)this._playDefaultAnimation(m,i);else{if(h=a&&a[i],"Default"===r){this._playDefaultAnimation(m,i);continue}if(u||h&&h.seriesType!==o||h&&h.ele&&(""==h.ele.innerHTML||0===h.ele.childNodes.length))this._playLoadAnimation(m,i,r);else if(this._playUpdateAnimation(m,i,r,n,h&&h.ele||null),i===g-1&&i<s-1)for(i++;i<=s-1;i++)this._playUpdateAnimation(m,i,r,null,h.ele)}this._adjustAnimations(r,m),m.length&&this._playAnimation(m,t),this.axisAnimation&&!p&&this._playAxesAnimation()},t.prototype._playAxesAnimation=function(){var e,t,i,n=this._chart.axes,r=n.length;for(this._prevAxesStates=this._currAxesStates,this._currAxesStates=[],t=0;t<r;t++)(e=n[t]).hostElement&&this._currAxesStates.push({ele:e.hostElement,vals:e._vals,axis:e,maxValue:Object(B.isDate)(e.actualMax)?e.actualMax.getTime():e.actualMax,minValue:Object(B.isDate)(e.actualMin)?e.actualMin.getTime():e.actualMin});if(this._prevAxesStates)for(i=Math.max(this._prevAxesStates.length,this._currAxesStates.length),t=0;t<i;t++)this._playAxisAnimation(this._prevAxesStates[t],this._currAxesStates[t])},t.prototype._playAxisAnimation=function(e,t){var i,n=[],r=[];t&&t.maxValue-t.minValue&&(i=this._parseAxisState(t),this._convertAxisAnimation(n,i.major,t.axis,e.maxValue,e.minValue),this._convertAxisAnimation(n,i.minor,t.axis,e.maxValue,e.minValue)),e&&e.maxValue-e.minValue&&(i=this._parseAxisState(e),this._convertAxisAnimation(r,i.major,e.axis),this._convertAxisAnimation(r,i.minor,e.axis)),n&&r&&this._combineAxisAnimations(n,r),this._playCurrAxisAnimation(n),this._playPrevAxisAnimation(r)},t.prototype._combineAxisAnimations=function(e,t){var i,n,r=this;for(i=t.length-1;i>=0;i--)(n=t[i]).text&&e.some((function(e){if(e.text&&e.text===n.text)return r._combineAxisAnimation(e,n),t.splice(i,1),!0}))},t.prototype._combineAxisAnimation=function(e,t){var i=this;["label","majorGrid","tick"].forEach((function(n){e[n]&&t[n]&&i._resetExistAxisAttrs(e[n],t[n])}))},t.prototype._resetExistAxisAttrs=function(e,t){var i=e.ele,n=t.ele,r={},o={};["x","y","x1","x2","y1","y2"].forEach((function(e){var t=i.getAttribute(e),s=n.getAttribute(e);t!==s&&(r[e]=s,o[e]=t)})),e.calcPos=r,e.elePos=o},t.prototype._convertAxisAnimation=function(e,t,i,n,r){var o,s=this,a=i.hostElement,l=i.axisType==_.AxisType.Y;t.forEach((function(t,c){var h=i.convert(t.val,n,r);isNaN(h)||(o={},t.majorGrid&&(o.majorGrid=s._getAxisAnimationAttrs(t.majorGrid,a,h,l)),t.label&&(o.label=s._getAxisAnimationAttrs(t.label,a,h,l),o.text=t.label.innerHTML||t.label.textContent),t.tick&&(o.tick=s._getAxisAnimationAttrs(t.tick,a,h,l)),e.push(o))}))},t.prototype._getAxisAnimationAttrs=function(e,t,i,n){var r,o,s;return r={ele:e,parent:t,elePos:{},calcPos:{}},"text"===e.nodeName?(o=n?"y":"x",s=Number(e.getAttribute(o)),r.elePos[o]=s,r.calcPos[o]=i):(o=n?"y1":"x1",s=Number(e.getAttribute(o)),n?(r.elePos={y1:s,y2:s},r.calcPos={y1:i,y2:i}):(r.elePos={x1:s,x2:s},r.calcPos={x1:i,x2:i})),r.elePos.opacity=1,r.calcPos.opacity=0,r},t.prototype._playCurrAxisAnimation=function(e){var t=this.duration;e&&0!==e.length&&e.forEach((function(e){["majorGrid","label","tick"].forEach((function(i){var n=e[i];n&&q.playAnimation(n.ele,n.calcPos,n.elePos,null,s.Swing,t)}))}))},t.prototype._playPrevAxisAnimation=function(e){var t=this.duration;e&&0!==e.length&&e.forEach((function(e){["majorGrid","label","tick"].forEach((function(i){var n=e[i];if(n){var r=n.parent,o=n.ele,a=n.elePos,l=n.calcPos;r.appendChild(o),q.playAnimation(o,a,l,(function(){o.parentNode===r&&r.removeChild(o)}),s.Swing,t)}}))}))},t.prototype._parseAxisState=function(e){if(null==e)return null;var t=e.vals,i=e.axis,n=i.axisType==_.AxisType.Y,r=e.ele.childNodes,o=0,s=t.major,a=t.minor,l=t.hasLbls,c=[],h=[];return s&&s.forEach((function(e,t){var s,a={},h=!!l[t];c.push(a),a.val=e,s=r[o],i.majorGrid&&Object(B.hasClass)(s,_.FlexChart._CSS_GRIDLINE)&&(a.majorGrid=s,s=r[++o]),n?(h&&s&&i.majorTickMarks!==_.TickMark.None&&Object(B.hasClass)(s,_.FlexChart._CSS_TICK)&&(a.tick=s,s=r[++o]),h&&s&&(Object(B.hasClass)(s,_.FlexChart._CSS_LABEL)||s.querySelector("."+_.FlexChart._CSS_LABEL))&&(a.label=s,o++)):(h&&s&&(Object(B.hasClass)(s,_.FlexChart._CSS_LABEL)||s.querySelector("."+_.FlexChart._CSS_LABEL))&&(a.label=s,s=r[++o]),h&&s&&i.majorTickMarks!==_.TickMark.None&&Object(B.hasClass)(s,_.FlexChart._CSS_TICK)&&(a.tick=s,o++))})),a&&a.forEach((function(e,t){var n,s={};h.push(s),s.val=e,n=r[o],i.minorTickMarks!==_.TickMark.None&&Object(B.hasClass)(n,_.FlexChart._CSS_TICK_MINOR)&&(s.tick=n,n=r[++o]),i.minorGrid&&Object(B.hasClass)(n,_.FlexChart._CSS_GRIDLINE_MINOR)&&(s.majorGrid=n,o++)})),{major:c,minor:h}},t.prototype._playLoadAnimation=function(e,t,i){this["_playLoad"+i+"Animation"](e,t)},t.prototype._playUpdateAnimation=function(e,t,i,n,r){null==n||null==r?null==n?this["_play"+i+"RemoveAnimation"](e,r):this["_play"+i+"AddAnimation"](e,n):this["_play"+i+"MoveAnimation"](e,n,r)},t.prototype._adjustAnimations=function(e,t){var i;if("Column"===e||"Bar"===e)for(i=t.length-1;i>=0;i--)null==t[i]&&t.splice(i,1)},t.prototype._getChartType=function(e){var t="Default",i=this._chart._isRotated();switch(e){case _.ChartType.Scatter:case _.ChartType.Bubble:case _.ChartType.Candlestick:case _.ChartType.HighLowOpenClose:t="Scatter";break;case _.ChartType.Column:case _.ChartType.Bar:t=i?"Bar":"Column";break;case _.ChartType.Line:case _.ChartType.LineSymbols:case _.ChartType.Area:case _.ChartType.Spline:case _.ChartType.SplineSymbols:case _.ChartType.SplineArea:t="Line";break;default:t="Default"}return t},t.prototype._playLoadLineAnimation=function(e,t){var i,n=this,r=n.animationMode,o=n._chart.series[t].hostElement;r===l.Point?n._playDefaultAnimation(e,t):(i=n._getAnimation(e,r===l.All?0:t),[].slice.call(o.childNodes).forEach((function(e){n._setLineRiseDiveAnimation(i,e,!0)})))},t.prototype._setLineRiseDiveAnimation=function(e,t,i){var n,r,o,s,a,l,c,h=this,u=this,d=u._chart,p=t.nodeName,f=[],g=[],m=u._chart._plotRect,b=m.top+m.height,_=m.left,y={},v={};if("g"===p&&t.childNodes)[].slice.call(t.childNodes).forEach((function(t){h._setLineRiseDiveAnimation(e,t,i)}));else{if("polyline"===p||"polygon"===p){for(o=(l=t.points).length||l.numberOfItems,s=0;s<o;s++)a=l[s]||l.getItem(s),f.push(d.rotated?{x:_,y:a.y}:{x:a.x,y:b}),g.push({x:a.x,y:a.y});y[p]=f,v[p]=g}else"ellipse"===p&&(u._toggleVisibility(t,!1),i&&(c=function(){u._toggleVisibility(t,!0)}));u._setInitState(t,n=i?y:v,r=i?v:y),e.push({ele:t,from:n,to:r,done:c})}},t.prototype._setLineMoveAnimation=function(e,t,i,n,r){if(null!=t&&null!=i){var o,s,a,l,c,h,u,d,p,f=t.nodeName,g=[],m=[],b={},_={};for(p="polygon"===f,o=(a=t.points).length||a.numberOfItems,l=(h=i.points).length||h.numberOfItems,d=Math.max(o,l),u=0;u<d;u++)u<o&&(s=a[u]||a.getItem(u),g.push({x:s.x,y:s.y})),u<l&&(c=h[u]||h.getItem(u),m.push({x:c.x,y:c.y}));this._addStart?(this._adjustStartLinePoints(this._addStart,g,a),o+=this._addStart):this._removeStart&&(this._adjustStartLinePoints(this._removeStart,m,h),l+=this._removeStart),l>o?this._adjustEndLinePoints(l,o,g,a,p):l<o&&this._adjustEndLinePoints(o,l,m,h,p),b[f]=g,_[f]=m,this._setInitState(n,b,_),e.push({ele:n,from:b,to:_,done:r})}},t.prototype._adjustStartLinePoints=function(e,t,i){for(var n=i[0]||i.getItem(0);e;)t.splice(0,0,{x:n.x,y:n.y}),e--},t.prototype._adjustEndLinePoints=function(e,t,i,n,r){var o,s,a;for(r&&(n.length>=3||n.numberOfItems>=3)?(s=i.pop(),o=i.pop(),a=n[n.length-3]||n.getItem(n.numberOfItems-3)):(n.length>0||n.numberOfItems>0)&&(a=n[n.length-1]||n.getItem(n.numberOfItems-1));e>t&&a;)i.push({x:a.x,y:a.y}),t++;r&&s&&o&&(i.push(o),i.push(s))},t.prototype._playLineRemoveAnimation=function(e,t){var i,n=this,r=n._chart.series[0].hostElement.parentNode,o=n._getAnimation(e,0);r.appendChild(t),[].slice.call(t.childNodes).forEach((function(e){n._setLineRiseDiveAnimation(o,e,!1)})),o.length&&(i=o[0].done,o[0].done=function(){t&&t.parentNode===r&&r.removeChild(t),i&&i()})},t.prototype._playLineAddAnimation=function(e,t){var i=this,n=t.hostElement,r=this._getAnimation(e,0);[].slice.call(n.childNodes).forEach((function(e){i._setLineRiseDiveAnimation(r,e,!0)}))},t.prototype._playLineMoveAnimation=function(e,t,i){var n,r,o,s,a=this,l=a._getAnimation(e,0),c=[];n=t.hostElement,r=[].slice.call(i.childNodes),[].slice.call(n.childNodes).forEach((function(e,t){o=r[t],"g"===(s=e.nodeName)&&e.nodeChilds?[].slice.call(e.nodeChilds).forEach((function(e,t){o&&(c.push(e),a._toggleVisibility(e,!1))})):"polygon"===s||"polyline"===s?a._setLineMoveAnimation(l,o,e,e,0===t?function(){c.forEach((function(e){a._toggleVisibility(e,!0)})),c=null}:null):o&&(c.push(e),a._toggleVisibility(e,!1))}))},t.prototype._playLoadColumnAnimation=function(e,t){this._playLoadBarAnimation(e,t,!0)},t.prototype._playLoadBarAnimation=function(e,t,i){void 0===i&&(i=!1);var n=this,r=n.animationMode;[].slice.call(n._chart.series[t].hostElement.childNodes).forEach((function(o,s){var a,c=o.nodeName;a=n._getAnimation(e,r===l.Point?s:r===l.Series?t:0),"g"===c?o.childNodes&&[].slice.call(o.childNodes).forEach((function(e,t){n._setLoadBarAnimation(a,e,i)})):n._setLoadBarAnimation(a,o,i)}))},t.prototype._setBarAnimation=function(e,t,i,n,r){this._setInitState(t,i,n),e.push({ele:t,from:i,to:n,done:r})},t.prototype._setLoadBarAnimation=function(e,t,i,n,r){void 0===n&&(n=!1);var o,s,a=this,l=i?"height":"width",c=i?"y":"x",h=t.getAttribute(l),u=t.getAttribute(c),d=i?"top":"left",p=a._chart._plotRect,f={},g={};f[l]=0,g[l]=Number(h),i&&(f[c]=p[l]+p[d],g[c]=Number(u)),o=n?g:f,s=n?f:g,"g"===t.nodeName?t.childNodes&&[].slice.call(t.childNodes).forEach((function(t){a._setBarAnimation(e,t,o,s,r)})):a._setBarAnimation(e,t,o,s,r)},t.prototype._setMoveBarAnimation=function(e,t,i){var n={},r={};null!=t&&null!=i&&(["width","height","x","y","top","left"].forEach((function(e){var o=t.getAttribute(e),s=i.getAttribute(e);o!==s&&(n[e]=Number(o),r[e]=Number(s))})),this._setInitState(i,n,r),e.push({ele:i,from:n,to:r}))},t.prototype._playColumnRemoveAnimation=function(e,t){this._playBarRemoveAnimation(e,t,!0)},t.prototype._playColumnAddAnimation=function(e,t){this._playBarAddAnimation(e,t,!0)},t.prototype._playColumnMoveAnimation=function(e,t,i){this._playBarMoveAnimation(e,t,i,!0)},t.prototype._playBarRemoveAnimation=function(e,t,i){void 0===i&&(i=!1);var n=this,r=n._chart.series[0].hostElement.parentNode,o=n._getAnimation(e,0);r.appendChild(t),[].slice.call(t.childNodes).forEach((function(e){n._setLoadBarAnimation(o,e,i,!0)})),o.length&&(o[0].done=function(){t&&t.parentNode===r&&r.removeChild(t)})},t.prototype._playBarAddAnimation=function(e,t,i){var n=this;void 0===i&&(i=!1);var r=t.hostElement,o=this._getAnimation(e,2);[].slice.call(r.childNodes).forEach((function(e){n._setLoadBarAnimation(o,e,i,!1)}))},t.prototype._playBarMoveAnimation=function(e,t,i,n){void 0===n&&(n=!1);var r,o,s,a,l,c,h,u=this;if(r=t.hostElement,s=[].slice.call(i.childNodes),u._addStart)for(h=0,a=s[0];h<u._addStart;)s.splice(0,0,a),h++;if(u._removeStart)for(h=0,a=s[s.length-1];h<u._removeStart;){var d=s.shift();s.push(d),h++}l=s.length,o=[].slice.call(r.childNodes),c=o.length,o.forEach((function(t,i){var r;if(i<l){if(a=s[i],i<u._addStart?(r=u._getAnimation(e,2),u._setLoadBarAnimation(r,t,n,!1)):i>=l-u._removeStart?(r=u._getAnimation(e,2),u._setLoadBarAnimation(r,t,n,!1),r=u._getAnimation(e,0),u._removeBarAnimation(r,t,a,n)):(r=u._getAnimation(e,1),u._setMoveBarAnimation(r,a,t)),i===c-1&&i<l-1)for(r=u._getAnimation(e,0),i++;i<l;i++)u._removeBarAnimation(r,t,a=s[i],n)}else r=u._getAnimation(e,2),u._setLoadBarAnimation(r,t,n,!1)}))},t.prototype._removeBarAnimation=function(e,t,i,n){var r=t.parentNode;r.appendChild(i),this._setLoadBarAnimation(e,i,n,!0,function(e){return function(){e.parentNode&&e.parentNode===r&&r.removeChild(e)}}(i))},t.prototype._playLoadScatterAnimation=function(e,t){var i=this,n=i._chart,r=n.series[t],o=i.animationMode,s=r._xValues||n._xvals;0===s.length&&(s=r._pointIndexes),[].slice.call(r.hostElement.childNodes).forEach((function(n,r){var a;a=o===l.Point?i._getScatterAnimation(e,s[r]):i._getAnimation(e,o===l.Series?t:0),i._setLoadScatterAnimation(a,n,!1)}))},t.prototype._setLoadScatterAnimation=function(e,t,i,n){var r=this;void 0===i&&(i=!1);var o,s,a={},l={};"g"===t.nodeName&&t.childNodes?[].slice.call(t.childNodes).forEach((function(t){r._setLoadScatterAnimation(e,t,i,n)})):(["rx","ry","stroke-width"].forEach((function(e){var i=t.getAttribute(e);a[e]=0,l[e]=Number(i)})),this._setInitState(t,o=i?l:a,s=i?a:l),e.push({ele:t,from:o,to:s,done:n}))},t.prototype._setUpdateScatterAnimation=function(e,t,i,n){var r={},o={};["cx","cy"].forEach((function(e){var n=t.getAttribute(e),s=i.getAttribute(e);n!==s&&(r[e]=Number(n),o[e]=Number(s))})),this._setInitState(i,r,o),e.push({ele:i,from:r,to:o,done:n})},t.prototype._getScatterAnimation=function(e,t){var i=this._getScatterAnimationIndex(e,t);return e[i]||(e[i]=[]),e[i]},t.prototype._getScatterAnimationIndex=function(e,t){var i=this._chart.axisX,n=null==i.min?i.actualMin:i.min;return Math.ceil((t-n)/(((null==i.max?i.actualMax:i.max)-n)/20))},t.prototype._playScatterRemoveAnimation=function(e,t){var i=this,n=i._chart.series[0].hostElement.parentNode,r=i._getAnimation(e,0);n.appendChild(t),[].slice.call(t.childNodes).forEach((function(e){i._setLoadScatterAnimation(r,e,!0)})),r.length&&(r[0].done=function(){t&&t.parentNode===n&&n.removeChild(t)})},t.prototype._playScatterAddAnimation=function(e,t){var i=this,n=t.hostElement,r=this._getAnimation(e,0);[].slice.call(n.childNodes).forEach((function(e){i._setLoadScatterAnimation(r,e,!1)}))},t.prototype._playScatterMoveAnimation=function(e,t,i){var n,r,o,s,a,l,c,h=this,u=h._getAnimation(e,0);if(n=t.hostElement,o=[].slice.call(i.childNodes),h._addStart)for(c=0,s=o[0];c<h._addStart;)o.splice(0,0,s),c++;if(h._removeStart)for(c=0,s=o[o.length-1];c<h._removeStart;){var d=o.shift();o.push(d),c++}a=o.length,r=[].slice.call(n.childNodes),l=r.length,r.forEach((function(e,t){if(t<a){if(t<h._addStart?h._setLoadScatterAnimation(u,e,!1):t>=a-h._removeStart?(h._setLoadScatterAnimation(u,e,!1),h._removeScatterAnimation(u,e,s=o[t])):h._setUpdateScatterAnimation(u,s=o[t],e),t===l-1&&t<a-1)for(t++;t<a;t++)h._removeScatterAnimation(u,e,s=o[t])}else h._setLoadScatterAnimation(u,e,!1)}))},t.prototype._removeScatterAnimation=function(e,t,i){var n=t.parentNode;n.appendChild(i),this._setLoadScatterAnimation(e,i,!0,function(e){return function(){e.parentNode&&e.parentNode===n&&n.removeChild(e)}}(i))},t.prototype._playDefaultAnimation=function(e,t){var i,n=this._chart,r=n.series[t].hostElement,o=n._plotRect,s=n._currentRenderEngine,a=r.getAttribute("clip-path"),l="clipPath"+(1e6*Math.random()).toFixed();s.addClipRect(new B.Rect(o.left,o.top,0,o.height),l),r.setAttribute("clip-path","url(#"+l+")"),i=n.hostElement.querySelector("#"+l),this._getAnimation(e,0).push({ele:i.querySelector("rect"),from:{width:0},to:{width:o.width},done:function(){r&&(a?r.setAttribute("clip-path",a):r.removeAttribute("clip-path"),i&&i.parentNode&&i.parentNode.removeChild(i))}})},t}(G),U=function(e){function t(t,i){return e.call(this,t,i)||this}return z(t,e),t.prototype._getDurationAndDelay=function(t,i){var n=e.prototype._getDurationAndDelay.call(this,t,i);return this.animationMode===l.Point&&(n.duration=i/t,n.delay=i/t),n},t.prototype._playAxesAnimation=function(){},t.prototype._getChartType=function(t){var i=e.prototype._getChartType.call(this,t);return"Bar"===i&&(i="Column"),i},t.prototype._playLoadLineAnimation=function(e,t){var i,n,r,o=this,s=o._chart.series[t],a=s._xValues||o._chart._xvals,c=o.animationMode,h=s.hostElement;c===l.Point?(0===a.length&&(a=s._pointIndexes),r=[].slice.call(h.childNodes),n=r.length-h.querySelectorAll("ellipse").length,r.forEach((function(t,i){o._setRadarLinePointAnimation(e,t,i,a,n)}))):(i=o._getAnimation(e,c===l.All?0:t),[].slice.call(h.childNodes).forEach((function(e){o._setLineRiseDiveAnimation(i,e,!0)})))},t.prototype._setRadarLinePointAnimation=function(e,t,i,n,r){var o,s,a,l,c,h,u,d=this,p=d._chart,f=t.nodeName,g=[],m=[],b=[],_=[],y=p._center,v=[],x=!1,w={},S={},C=0;if("polyline"===f||"polygon"===f){for(o=(l=t.points).length||l.numberOfItems,s=0;s<o;s++)v[u=d._getScatterAnimationIndex(e,n[s])]||(v[u]=[]),v[u].push(s),a=l[s]||l.getItem(s),g.push({x:y.x,y:y.y}),m.push({x:a.x,y:a.y});for(s=0,o=v.length;s<o;s++)v[s]&&(h=d._getAnimation(e,C),b=_.length?_.slice():g.slice(),_=b.slice(),v[s].forEach((function(e){var t=m[e];_[e]={x:t.x,y:t.y}})),S={},(w={})[f]=b,S[f]=_,x||(d._setInitState(t,w,S),x=!0),h.push({ele:t,from:w,to:S,done:c}),C++)}else if("ellipse"===f){if((s=i-(r||0))<0)return;h=d._getScatterAnimation(e,p._isPolar?n[s]:s),d._toggleVisibility(t,!1),h.push({ele:t,from:w,to:S,done:c=function(){d._toggleVisibility(t,!0)}})}},t.prototype._setLineRiseDiveAnimation=function(e,t,i){var n,r,o,s,a,l,c,h=this,u=t.nodeName,d=[],p=[],f=h._chart._center,g={},m={};if("polyline"===u||"polygon"===u){for(o=(l=t.points).length||l.numberOfItems,s=0;s<o;s++)a=l[s]||l.getItem(s),d.push({x:f.x,y:f.y}),p.push({x:a.x,y:a.y});g[u]=d,m[u]=p}else"ellipse"===u&&(h._toggleVisibility(t,!1),i&&(c=function(){h._toggleVisibility(t,!0)}));h._setInitState(t,n=i?g:m,r=i?m:g),e.push({ele:t,from:n,to:r,done:c})},t.prototype._parsePathByRadius=function(e,t,i){var n,r=e.center.x,o=e.center.y,s=e.angle,a=e.sweep;n=[r,o,e.radius,s,a,e.innerRadius||0],t.pie=[r,o,0,s,a,0],i.pie=n},t.prototype._playUpdateAnimation=function(t,i,n,r,o){if("Bar"===n||"Column"===n){if(null==r)return;this._playLoadBarAnimation(t,i,!1)}else e.prototype._playUpdateAnimation.call(this,t,i,n,r,o)},t.prototype._playLoadBarAnimation=function(e,t,i){void 0===i&&(i=!1);var n=this,r=n._chart,o=r._areas[t],s=n.animationMode;[].slice.call(r.series[t].hostElement.childNodes).forEach((function(i,r){var a,c={},h={};a=n._getAnimation(e,s===l.Point?r:s===l.Series?t:0),n._parsePathByRadius(o[r],c,h),n._setInitState(i,c,h),a.push({ele:i,from:c,to:h})}))},t}(Y),q=function(){function e(){}return e.playAnimations=function(t,i,n,r,o,a,l){void 0===o&&(o=s.Swing);var c=t.length,h=0,u=[];return t.forEach((function(t,s){var d=e.playAnimation(t,i[s],n[s],(function(){h===c-1&&r&&r(),h++}),o,a,l);u.push(d)})),u},e.playAnimation=function(t,i,n,r,o,a,l){void 0===o&&(o=s.Swing);var c=e.parseAttrs(i,n);return e.animate((function(i){e.setElementAttr(t,c,i)}),r,o,a,l)},e.setElementAttr=function(t,i,n){var r,o;for(o in i)e.calcValue(r=i[o],n),t.setAttribute(o,r.getValue(r.value,n))},e.getPathDescOfPie=function(e,t,i,n,r,o){void 0===o&&(o=0);var s=!1;r>=2*Math.PI&&(s=!0,r=2*Math.PI-.001);var a=new B.Point(e,t);a.x+=i*Math.cos(n),a.y+=i*Math.sin(n);var l=n+r,c=new B.Point(e,t);if(c.x+=i*Math.cos(l),c.y+=i*Math.sin(l),o){var h=new B.Point(e,t);h.x+=o*Math.cos(l),h.y+=o*Math.sin(l);var u=new B.Point(e,t);u.x+=o*Math.cos(n),u.y+=o*Math.sin(n)}var d=" 0 0,1 ",p=" 0 0,0 ";Math.abs(r)>Math.PI&&(d=" 0 1,1 ",p=" 0 1,0 ");var f="M "+a.x.toFixed(3)+","+a.y.toFixed(3);return f+=" A "+i.toFixed(3)+","+i.toFixed(3)+d,f+=c.x.toFixed(3)+","+c.y.toFixed(3),o?(f+=s?" M "+h.x.toFixed(3)+","+h.y.toFixed(3):" L "+h.x.toFixed(3)+","+h.y.toFixed(3),f+=" A "+o.toFixed(3)+","+o.toFixed(3)+p,f+=u.x.toFixed(3)+","+u.y.toFixed(3)):f+=" L "+e.toFixed(3)+","+t.toFixed(3),s||(f+=" z"),f},e.parseAttrs=function(t,i){var n={};for(var r in t)if(null!=i[r])switch(r){case"polyline":n.points=e.parseAttr(t[r],i[r],(function(e,t){if(1===t){for(var i,n,r;e.length>1;){if((n=e[0]).x!==(r=e[1]).x||n.y!==r.y){n=null,r=null;break}e.splice(1,1)}for(i=e.length-1;i>0;i--)if(n=r,r=e[i],n){if(n.x!==r.x||n.y!==r.y)break;e.pop()}}return e.map((function(e){return e.x+","+e.y})).join(" ")}));break;case"polygon":n.points=e.parseAttr(t[r],i[r],(function(e,t){if(1===t){var i,n,r,o,s;for(o=e.pop(),s=e.pop();e.length>1;){if((n=e[0]).x!==(r=e[1]).x||n.y!==r.y){n=null,r=null;break}e.splice(1,1)}for(i=e.length-1;i>=0;i--)if(n=r,r=e[i],n){if(n.x!==r.x||n.y!==r.y)break;e.splice(i,1)}e.push(s),e.push(o)}return e.map((function(e){return e.x+","+e.y})).join(" ")}));break;case"d":n[r]=e.parseAttr(t[r],i[r],(function(e){return e.map((function(e){return"string"==typeof e?e:e[0]+","+e[1]})).join(" ")}));break;case"pie":n.d=e.parseAttr(t[r],i[r],(function(t){return e.getPathDescOfPie.apply(e,t)}));break;case"rotate":n.transform=e.parseAttr(t[r],i[r],(function(e){return"rotate("+e.join(" ")+")"}));break;case"width":case"height":case"rx":case"ry":case"stroke-width":n[r]=e.parseAttr(t[r],i[r],(function(e){return Math.abs(e)}));break;default:n[r]=e.parseAttr(t[r],i[r])}return n},e.animate=function(e,t,i,n,r){void 0===i&&(i=s.Swing),void 0===n&&(n=400),void 0===r&&(r=16),Object(B.asFunction)(e),Object(B.asNumber)(n,!1,!0),Object(B.asNumber)(r,!1,!0);var o=0,a=setInterval((function(){Date.now();var l=o/n;l=K[s[i]](l),e(l),(o+=r)>=n&&(clearInterval(a),(l<1||l>1)&&e(1),t&&t())}),r);return a},e.calcValue=function(t,i){var n=t.from,r=t.diff,o=t.value;Object(B.isNumber)(n)?t.value=0===r?n:n+r*i:Object(B.isArray)(n)&&e.parseArrayAttr(o,n,r,(function(e,t){return"number"==typeof e?e+t*i:e}))},e.parseAttr=function(t,i,n){var r,o,s,a;return Object(B.isArray)(t)&&Object(B.isArray)(i)?(o=i,s=[],a=(r=t).slice(),e.parseArrayAttr(s,r,o,(function(e,t){return e===t?0:t-e}))):(a=r=Number(t),s=(o=Number(i))-r),{from:r,to:o,value:a,diff:s,getValue:n||function(e,t){return e}}},e.parseArrayAttr=function(e,t,i,n){t.forEach((function(t,r){var o={},s=[],a=i[r];Object(B.isNumber)(t)||"string"==typeof t?e[r]=n(t,a):Object(B.isArray)(t)?(t.forEach((function(e,i){s[i]=n(t[i],a[i])})),e[r]=s):(Object.getOwnPropertyNames(t).forEach((function(e){o[e]=n(t[e],a[e])})),e[r]=o)}))},e}(),K=function(){function e(){}return e.Linear=function(e){return e},e.Swing=function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},e.EaseInQuad=function(e){return e*e},e.EaseOutQuad=function(e){return e*(2-e)},e.EaseInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},e.EaseInCubic=function(e){return e*e*e},e.EaseOutCubic=function(e){return--e*e*e+1},e.EaseInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},e.EaseInQuart=function(e){return e*e*e*e},e.EaseOutQuart=function(e){return 1- --e*e*e*e},e.EaseInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},e.EaseInQuint=function(e){return e*e*e*e*e},e.EaseOutQuint=function(e){return 1+--e*e*e*e*e},e.EaseInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},e.EaseInSine=function(e){return 1-Math.cos(e*(Math.PI/2))},e.EaseOutSine=function(e){return Math.sin(e*(Math.PI/2))},e.EaseInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.EaseInExpo=function(e){return 0==e?0:Math.pow(2,10*(e-1))},e.EaseOutExpo=function(e){return 1==e?1:1-Math.pow(2,-10*e)},e.EaseInOutExpo=function(e){return e==!!e?e:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},e.EaseInCirc=function(e){return-(Math.sqrt(1-e*e)-1)},e.EaseOutCirc=function(e){return Math.sqrt(1-Math.pow(e-1,2))},e.EaseInOutCirc=function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.EaseInBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},e.EaseOutBack=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},e.EaseInOutBack=function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},e.EaseInBounce=function(t){return 1-e.EaseOutBounce(1-t)},e.EaseOutBounce=function(e){var t=7.5625;return e<1/2.75?t*e*e:e<2/2.75?t*(e-=1.5/2.75)*e+.75:e<2.5/2.75?t*(e-=2.25/2.75)*e+.9375:t*(e-=2.625/2.75)*e+.984375},e.EaseInOutBounce=function(t){return t<.5?.5*e.EaseInBounce(2*t):.5*e.EaseOutBounce(2*t-1)+.5},e.EaseInElastic=function(e){return e==!!e?e:-Math.pow(2,10*(e-=1))*Math.sin((e-.075)*(2*Math.PI)/.3)},e.EaseOutElastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},e.EaseInOutElastic=function(e){return e==!!e?e:(e*=2)<1?Math.pow(2,10*(e-=1))*Math.sin((e-.1125)*(2*Math.PI)/.45)*-.5:Math.pow(2,-10*(e-=1))*Math.sin((e-.1125)*(2*Math.PI)/.45)*.5+1},e}();Object(B._registerModule)("wijmo.chart.animation",n);var $,J,Q=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Z=function(e,t){return function(i,n){t(i,n,e)}},ee={selector:"wj-flex-chart-animation",template:"",inputs:["wjProperty","animationMode","easing","duration","axisAnimation"],outputs:["initialized"],providers:[]},te=(function(e){function t(t,i,n){var r=e.call(this,n)||this;return r.isInitialized=!1,r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;Q(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:ee.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-animation"]],inputs:{wjProperty:"wjProperty",animationMode:"animationMode",easing:"easing",duration:"duration",axisAnimation:"axisAnimation"},outputs:{initialized:"initialized"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(ee.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}([,Z(0,Object(m.r)(m.n)),Z(1,Object(m.r)(m.t)),Z(2,Object(m.r)("WjComponent")),Z(2,Object(m.L)()),Z(2,Object(m.D)())],t)}(X),function(){function e(){}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[c.c]]}),e}());!function(e){e[e.Zoom=0]="Zoom",e[e.Pan=1]="Pan"}($||($={})),function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.XY=2]="XY"}(J||(J={}));var ie,ne=function(){function e(e,t){this._chart=null,this._zoomEle=null,this._overlayEle=null,this._wrapperMousedown=null,this._wrapperMouseMove=null,this._wrapperMouseup=null,this._wrapperPointerdown=null,this._wrapperPointerMove=null,this._wrapperPointerup=null,this._wrapperTouchStart=null,this._wrapperTouchMove=null,this._wrapperTouchEnd=null,this._wrapperMouseWheel=null,this._startFirstPt=null,this._minX=null,this._maxX=null,this._minY=null,this._maxY=null,this._threadHold=20,this._clip={},this._selection={},this._startPointers=[],this._mvPointers=[],this._pinchStartEvents=[],this._minXRange=null,this._minYRange=null,this._innerUpdating=!1,this._lastMinX=null,this._lastMaxX=null,this._lastMinY=null,this._lastMaxY=null,this._mouseAction=$.Zoom,this._interactiveAxes=J.X,this._enable=!0,this._scaleX=1,this._scaleY=1,this._posX=0,this._posY=0,e||Object(B.assert)(!1,"The FlexChart cannot be null."),this._chart=e,Object(B.copy)(this,t),this._initialize()}return Object.defineProperty(e.prototype,"mouseAction",{get:function(){return this._mouseAction},set:function(e){this._mouseAction=Object(B.asEnum)(e,$)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactiveAxes",{get:function(){return this._interactiveAxes},set:function(e){e!==this._interactiveAxes&&(this._interactiveAxes=Object(B.asEnum)(e,J))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enable",{get:function(){return this._enable},set:function(e){e!==this._enable&&(this._enable=Object(B.asBoolean)(e,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},set:function(e){e!==this._scaleX&&(this._scaleX=e<0?0:e>1?1:Object(B.asNumber)(e),this._seriesGroup&&this._initAxisRangeWithPosAndScale(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},set:function(e){e!==this._scaleY&&(this._scaleY=e<0?0:e>1?1:Object(B.asNumber)(e),this._seriesGroup&&this._initAxisRangeWithPosAndScale(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"posX",{get:function(){return this._posX},set:function(e){e!==this._posX&&(this._posX=e<0?0:e>1?1:Object(B.asNumber)(e),this._seriesGroup&&this._initAxisRangeWithPosAndScale(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"posY",{get:function(){return this._posY},set:function(e){e!==this._posY&&(this._posY=e<0?0:e>1?1:Object(B.asNumber)(e),this._seriesGroup&&this._initAxisRangeWithPosAndScale(!1))},enumerable:!0,configurable:!0}),e.prototype.remove=function(){this._zoomEle&&(this._chart.hostElement.removeChild(this._zoomEle),this._zoomEle=null),Object(B.removeClass)(this._chart.hostElement,e._CSS_TOUCH_DISABLED),this._switchEvent(!1),this._wrapperMousedown=null,this._wrapperMouseMove=null,this._wrapperMouseup=null,this._wrapperPointerdown=null,this._wrapperPointerMove=null,this._wrapperPointerup=null,this._wrapperTouchStart=null,this._wrapperTouchMove=null,this._wrapperTouchEnd=null,this._wrapperMouseWheel=null},e.prototype.reset=function(){var e=this._chart,t=e.axisX,i=e.axisY;this._maxX&&(t.max=this._maxX),this._minX&&(t.min=this._minX),this._maxY&&(i.max=this._maxY),this._minY&&(i.min=this._minY),this._initAxisRangeWithPosAndScale(!0),this._initAxisRangeWithPosAndScale(!1)},e.prototype._refreshChart=function(){var e=this._chart,t=e.axisX,i=e.axisY;this._minX=this._getAxisMin(t),this._maxX=this._getAxisMax(t),this._minY=this._getAxisMin(i),this._maxY=this._getAxisMax(i),this._minXRange=.005*(this._maxX-this._minX),this._minYRange=.005*(this._maxY-this._minY),this._initAxisRangeWithPosAndScale(!0),this._initAxisRangeWithPosAndScale(!1)},e.prototype._initialize=function(){var t=this._chart.hostElement;this._zoomEle=Object(B.createElement)('<div class="'+e._CSS_ZOOM+'"><div class="'+e._CSS_ZOOM_OVERLAY+'"></div>'),this._zoomEle.style.visibility="visible",t.appendChild(this._zoomEle),Object(B.addClass)(t,e._CSS_TOUCH_DISABLED),this._overlayEle=this._zoomEle.querySelector("."+e._CSS_ZOOM_OVERLAY),this._wrapperMousedown=this._onMousedown.bind(this),this._wrapperMouseMove=this._onMouseMove.bind(this),this._wrapperMouseup=this._onMouseup.bind(this),this._wrapperPointerdown=this._onPointerdown.bind(this),this._wrapperPointerMove=this._onPointerMove.bind(this),this._wrapperPointerup=this._onPointerup.bind(this),this._wrapperMouseWheel=this._onMouseWheel.bind(this),this._wrapperTouchStart=this._onTouchStart.bind(this),this._wrapperTouchMove=this._onTouchMove.bind(this),this._wrapperTouchEnd=this._onTouchEnd.bind(this),this._switchEvent(!0)},e.prototype._switchEvent=function(e){var t=this._chart.hostElement,i=e?"addEventListener":"removeEventListener",n=e?"addHandler":"removeHandler";t&&(t[i]("mousedown",this._wrapperMousedown),t[i]("mousemove",this._wrapperMouseMove),document[i]("mouseup",this._wrapperMouseup),"onpointerdown"in window&&(t[i]("pointerdown",this._wrapperPointerdown),t[i]("pointermove",this._wrapperPointerMove),document[i]("pointerup",this._wrapperPointerup)),t[i]("wheel",this._wrapperMouseWheel),"ontouchstart"in window&&(t[i]("touchstart",this._wrapperTouchStart),t[i]("touchmove",this._wrapperTouchMove),document[i]("touchend",this._wrapperTouchEnd)),this._chart.rendered[n](this._refresh,this))},e.prototype._refresh=function(){var e,t,i,n=this._chart,r=n.axisX,o=n.axisY,s=n.hostElement;this._seriesGroup=s.querySelector(".wj-series-group"),e=s.querySelector("."+_.FlexChart._CSS_PLOT_AREA),this._plotOffset=Object(B.getElementRect)(e),this._plotBox=e.getBBox(),this._zoomEleOffset=Object(B.getElementRect)(this._zoomEle),this._overlayEle&&this._overlayEle.removeAttribute("style"),this._innerUpdating?this._innerUpdating=!1:(t=!1,i=!1,(null===this._minX||isNaN(this._minX)||0===this._minX||-1===this._minX||this._lastMinX!==this._getAxisMin(r))&&(this._minX=this._getAxisMin(r),null===this._minX||isNaN(this._minX)||0===this._minX||-1===this._minX||(t=!0)),(null===this._maxX||isNaN(this._maxX)||0===this._maxX||-1===this._maxX||this._lastMaxX!==this._getAxisMax(r))&&(this._maxX=this._getAxisMax(r),null===this._maxX||isNaN(this._maxX)||0===this._maxX||-1===this._maxX||(t=!0)),(null===this._minY||isNaN(this._minY)||this._lastMinY!==this._getAxisMin(o))&&(this._minY=this._getAxisMin(o),isNaN(this._minY)||(i=!0)),(null===this._maxY||isNaN(this._maxY)||this._lastMaxY!==this._getAxisMax(o))&&(this._maxY=this._getAxisMax(o),isNaN(this._maxY)||(i=!0)),this._minXRange=.005*(this._maxX-this._minX),this._minYRange=.005*(this._maxY-this._minY),t&&null!=this._scaleX&&1!==this._scaleX&&null!=this._posX&&0!==this._posX&&this._initAxisRangeWithPosAndScale(!0),i&&null!=this._scaleY&&1!==this._scaleY&&null!=this._posY&&0!==this._posY&&this._initAxisRangeWithPosAndScale(!1))},e.prototype._onMousedown=function(e){this._enable&&(this._disabledOthersInteraction(!0),this._mouseDown(e),e.preventDefault())},e.prototype._onMouseMove=function(e){this._enable&&(this._mouseMove(e),e.preventDefault())},e.prototype._onMouseup=function(e){this._enable&&(this._mouseup(e),this._disabledOthersInteraction(!1))},e.prototype._onMouseWheel=function(e){var t=-e.deltaY>0?.05:-.05;this._enable&&(this._scaling=!0,this._interactiveAxes!==J.X&&this._interactiveAxes!==J.XY||this._updateAxisByChg(!0,t,-t),this._interactiveAxes!==J.Y&&this._interactiveAxes!==J.XY||this._updateAxisByChg(!1,t,-t),this._scaling=!1,e.preventDefault())},e.prototype._mouseDown=function(t){this._startFirstPt=this._getPoint(t),this._updatePoint(this._startFirstPt),this._mouseAction===$.Zoom?this._initOverlay():(this._seriesGroup.setAttribute("clip-path","url(#"+this._chart._plotrectId+")"),Object(B.toggleClass)(this._chart.hostElement,e._CSS_PANABLE,this._mouseAction===$.Pan))},e.prototype._mouseMove=function(e){var t;this._startFirstPt&&(t=this._getPoint(e),this._updatePoint(t),this._endPoint=new B.Point(t.x,t.y),this._mouseAction===$.Zoom?this._updateOverLay(t):(this._panning=!0,this._panningChart(t.x-this._startFirstPt.x,t.y-this._startFirstPt.y)))},e.prototype._mouseup=function(t){var i=this._endPoint;this._startFirstPt&&i?(this._mouseAction===$.Zoom?(this._zoomedChart(i),this._reset()):(this._pannedChart(i.x-this._startFirstPt.x,i.y-this._startFirstPt.y),this._reset()),Object(B.removeClass)(this._chart.hostElement,e._CSS_PANABLE)):(Object(B.removeClass)(this._chart.hostElement,e._CSS_PANABLE),this._reset())},e.prototype._onPointerdown=function(e){if(this._enable){switch(this._disabledOthersInteraction(!0),e.pointerType){case"touch":this._pointerDown(e);break;case"mouse":this._mouseDown(e)}e.preventDefault()}},e.prototype._onPointerMove=function(e){if(this._enable){switch(e.pointerType){case"touch":this._pointerMove(e);break;case"mouse":this._mouseMove(e)}e.preventDefault()}},e.prototype._onPointerup=function(e){if(this._enable){switch(e.pointerType){case"touch":this._pointerUp(e);break;case"mouse":this._mouseup(e)}this._disabledOthersInteraction(!1),e.preventDefault()}},e.prototype._pointerDown=function(e){e.preventManipulation&&e.preventManipulation(),this._seriesGroup.setAttribute("clip-path","url(#"+this._chart._plotrectId+")"),this._startPointers.push({id:e.pointerId,x:e.pageX,y:e.pageY}),1===this._startPointers.length?(this._scaling=!1,this._panning=!0):2===this._startPointers.length&&(this._panning=!1,this._scaling=!0,this._startDistance={x:this._startPointers[0].x-this._startPointers[1].x,y:this._startPointers[0].y-this._startPointers[1].y})},e.prototype._pointerMove=function(e){var t,i,n,r,o=new B.Point(e.pageX,e.pageY),s={},a={};if(e.preventManipulation&&e.preventManipulation(),this._panning){if(!this._pointInPlotArea(o))return;this._endPoint=new B.Point(e.pageX,e.pageY),this._panningChart(this._endPoint.x-this._startPointers[0].x,this._endPoint.y-this._startPointers[0].y)}else this._scaling&&(t=this._startPointers[0].id+"",i=this._startPointers[1].id+"",this._mvPointers[e.pointerId+""]={x:e.pageX,y:e.pageY},this._mvPointers[t]&&this._mvPointers[i]&&(Math.abs(this._startDistance.x)>this._threadHold&&this._interactiveAxes!==J.Y&&(n=this._mvPointers[t].x-this._plotOffset.left,r=this._startPointers[0].x-this._plotOffset.left,a.x=Math.abs((this._mvPointers[t].x-this._mvPointers[i].x)/this._startDistance.x),s.x=n-a.x*r,this._clip.x=(this._plotBox.x-n)/a.x+r,this._selection.w=this._plotBox.width/a.x),Math.abs(this._startDistance.y)>this._threadHold&&this._interactiveAxes!==J.X&&(n=this._mvPointers[t].y-this._plotOffset.top,r=this._startPointers[0].y-this._plotOffset.top,a.y=Math.abs((this._mvPointers[t].y-this._mvPointers[i].y)/this._startDistance.y),s.y=n-a.y*r,this._clip.y=(this._plotBox.y-n)/a.y+r,this._selection.h=this._plotBox.height/a.y),this._scalingChart(a,s)))},e.prototype._pointerUp=function(e){e.preventManipulation&&e.preventManipulation(),this._panning?(this._endPoint&&this._pannedChart(this._endPoint.x-this._startPointers[0].x,this._endPoint.y-this._startPointers[0].y),this._reset()):this._scaling&&(this._scaledChart(e),this._reset())},e.prototype._onTouchStart=function(e){if(this._enable)return this._disabledOthersInteraction(!0),1==e.touches.length?(this._scaling=!1,this._panning=!0,this._startFirstPt=this._getPoint(e)):2==e.touches.length&&(this._pinchStartEvents=this._getTouchPair(e),this._startDistance=this._touchDistance(e),this._panning=!1,this._scaling=!0),this._seriesGroup&&this._seriesGroup.setAttribute("clip-path","url(#"+this._chart._plotrectId+")"),this._chart._hideToolTip(),!0},e.prototype._onTouchMove=function(e){if(this._enable){var t,i,n,r,o,s={},a={},l=e.touches[0],c=new B.Point(l.pageX,l.pageY);if(e.preventDefault(),this._panning){if(this._startFirstPt){if(!this._pointInPlotArea(c))return;this._endPoint=new B.Point(l.pageX,l.pageY),this._panningChart(this._endPoint.x-this._startFirstPt.x,this._endPoint.y-this._startFirstPt.y)}}else this._scaling&&(n=this._touchDistance(e),r=this._getTouchPair(e)[0],o=this._pinchStartEvents[0],Math.abs(this._startDistance.x)>this._threadHold&&this._interactiveAxes!==J.Y&&(t=r.pageX-this._plotOffset.left,i=o.pageX-this._plotOffset.left,s.x=Math.abs(n.x/this._startDistance.x),a.x=t-s.x*i,this._clip.x=(this._plotBox.x-t)/s.x+i,this._selection.w=this._plotBox.width/s.x),Math.abs(this._startDistance.y)>this._threadHold&&this._interactiveAxes!==J.X&&(t=r.pageY-this._plotOffset.top,i=o.pageY-this._plotOffset.top,s.y=Math.abs(n.y/this._startDistance.y),a.y=t-s.y*i,this._clip.y=(this._plotBox.y-t)/s.y+i,this._selection.h=this._plotBox.height/s.y),this._scalingChart(s,a));return!0}},e.prototype._onTouchEnd=function(e){if(this._enable){var t=this._endPoint;if(this._panning){if(!this._startFirstPt||!t)return void this._reset();this._pannedChart(t.x-this._startFirstPt.x,t.y-this._startFirstPt.y)}else this._scaling&&this._scaledChart(e);return this._reset(),this._disabledOthersInteraction(!1),!0}},e.prototype._initOverlay=function(){switch(this._zoomEle.style.visibility="visible",this._interactiveAxes){case J.X:this._overlayEle.style.left=this._startFirstPt.x-this._zoomEleOffset.left+"px",this._overlayEle.style.top=this._plotOffset.top-this._zoomEleOffset.top+"px";break;case J.Y:this._overlayEle.style.left=this._plotBox.x+"px",this._overlayEle.style.top=this._startFirstPt.y-this._zoomEleOffset.top+"px";break;case J.XY:this._overlayEle.style.left=this._startFirstPt.x-this._zoomEleOffset.left+"px",this._overlayEle.style.top=this._startFirstPt.y-this._zoomEleOffset.top+"px"}},e.prototype._updateOverLay=function(e){var t=this._startFirstPt.x-e.x,i=this._startFirstPt.y-e.y,n={};switch(this._interactiveAxes){case J.X:if(Math.abs(t)<this._threadHold)return;n=t<=0?{width:Math.abs(t)+"px",height:this._plotBox.height+"px"}:{left:e.x-this._zoomEleOffset.left+"px",width:t+"px",height:this._plotBox.height+"px"};break;case J.Y:if(Math.abs(i)<this._threadHold)return;n=i<=0?{height:Math.abs(i)+"px",width:this._plotBox.width+"px"}:{top:e.y-this._zoomEleOffset.top+"px",height:i+"px",width:this._plotBox.width+"px"};break;case J.XY:Math.abs(t)>=this._threadHold&&(n.width=Math.abs(t)+"px",t>0&&(n.left=e.x-this._zoomEleOffset.left+"px")),Math.abs(i)>=this._threadHold&&(n.height=Math.abs(i)+"px",i>0&&(n.top=e.y-this._zoomEleOffset.top+"px"))}Object(B.setCss)(this._overlayEle,n)},e.prototype._updatePoint=function(e){var t=this._plotOffset;e.x<t.left&&(e.x=t.left),e.x>t.left+t.width&&(e.x=t.left+t.width),e.y<t.top&&(e.y=t.top),e.y>t.top+t.height&&(e.y=t.top+t.height)},e.prototype._pointInPlotArea=function(e){var t=this._plotOffset;return e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height},e.prototype._zoomedChart=function(e){e&&(this._interactiveAxes!==J.X&&this._interactiveAxes!==J.XY||this._zoomedAxis(e,!0),this._interactiveAxes!==J.Y&&this._interactiveAxes!==J.XY||this._zoomedAxis(e,!1),this._startFirstPt=null)},e.prototype._zoomedAxis=function(e,t){var i,n,r=t?this._chart.axisX:this._chart.axisY,o=t?"x":"y",s=t?"left":"top";e&&Math.abs(this._startFirstPt[o]-e[o])>this._threadHold&&(i=r.convertBack(this._startFirstPt[o]-this._plotOffset[s]+this._plotBox[o]),(n=r.convertBack(e[o]-this._plotOffset[s]+this._plotBox[o]))-i!=0&&this._updateAxisRange(r,Math.min(i,n),Math.max(i,n)))},e.prototype._panningChart=function(e,t){var i=this._chart.axisX,n=this._chart.axisY,r=this._getTransFormGroups();e=Math.abs(e)<this._threadHold?0:e,t=Math.abs(t)<this._threadHold?0:t,this._interactiveAxes===J.X&&(t=0),this._interactiveAxes===J.Y&&(e=0),e>0&&i.actualMin.valueOf()===this._minX&&(e=0),e<0&&i.actualMax.valueOf()===this._maxX&&(e=0),t>0&&n.actualMax.valueOf()===this._maxY&&(t=0),t<0&&n.actualMin.valueOf()===this._minY&&(t=0);for(var o=0;o<r.length;o++)r[o].setAttribute("transform","translate("+e+","+t+")")},e.prototype._pannedChart=function(e,t){this._interactiveAxes!==J.X&&this._interactiveAxes!==J.XY||this._updateAxisByDistance(!0,e),this._interactiveAxes!==J.Y&&this._interactiveAxes!==J.XY||this._updateAxisByDistance(!1,-t)},e.prototype._scalingChart=function(e,t){var i,n,r,o=this._chart.axisX,s=this._chart.axisY,a=void 0!==t.x?t.x:0,l=void 0!==t.y?t.y:0;if(e){i=this._getTransFormGroups(),void 0!==e.x&&e.x<1&&o.actualMin.valueOf()===this._minX&&o.actualMax.valueOf()===this._maxX&&(e.x=1,a=0),void 0!==e.y&&e.y<1&&s.actualMin.valueOf()===this._minY&&s.actualMax.valueOf()===this._maxY&&(e.y=1,l=0),n=void 0!==e.x?e.x:1,r=void 0!==e.y?e.y:1;for(var c=0;c<i.length;c++)i[c].setAttribute("transform","translate("+a+", "+l+") scale("+n+", "+r+")")}},e.prototype._scaledChart=function(e){var t,i,n=this._chart,r=n.axisX,o=n.axisY;if(this._clip){if(this._interactiveAxes!==J.Y&&void 0!==this._clip.x){if((t=Math.max(this._minX,r.convertBack(this._clip.x)))>(i=Math.min(this._maxX,r.convertBack(this._clip.x+this._selection.w)))){var s=t;t=i,i=s}t-i!=0&&this._updateAxisRange(r,t,i)}this._interactiveAxes!==J.X&&void 0!==this._clip.y&&(i=Math.min(this._maxY,o.convertBack(this._clip.y)),(t=Math.max(this._minY,o.convertBack(this._clip.y+this._selection.h)))>i&&(s=t,t=i,i=s),t-i!=0&&this._updateAxisRange(o,t,i))}},e.prototype._updateAxisByDistance=function(e,t){var i,n=e?this._chart.axisX:this._chart.axisY,r=e?this._minX:this._minY,o=e?this._maxX:this._maxY,s=n.actualMin.valueOf(),a=n.actualMax.valueOf();0!==t&&(t>0&&r===s||t<0&&o===a?(this._innerUpdating=!0,this._chart.invalidate()):this._updateAxisByChg(e,-(i=t/(e?this._plotBox.width:this._plotBox.height)),-i))},e.prototype._updateAxisByChg=function(e,t,i){var n,r,o=e?this._chart.axisX:this._chart.axisY,s=e?this._minX:this._minY,a=e?this._maxX:this._maxY,l=(o.actualMin.valueOf(),o.actualMax.valueOf(),this._chart._plotRect),c=e?l.left:l.top,h=e?l.width:l.height,u=e?this._minXRange:this._minYRange;if(!isNaN(t)&&!isNaN(i)){if(this._panning){if(t<0?(n=o.convertBack(e?c+t*h:c+h-t*h))<s?(n=s,r=o.convertBack(e?o.convert(n)+h:o.convert(n)-h)):r=o.convertBack(e?c+h+i*h:c-i*h):(r=o.convertBack(e?c+h+i*h:c-i*h))>a?(r=a,n=o.convertBack(e?o.convert(r)-h:o.convert(r)+h)):n=o.convertBack(e?c+t*h:c+h-t*h),n>r){var d=n;n=r,r=d}}else this._scaling&&((n=o.convertBack(e?c+t*h:c+h-t*h))>(r=o.convertBack(e?c+h+i*h:c-i*h))&&(d=n,n=r,r=d),n<s&&(n=s),r>a&&(r=a),r-n<u&&(n=r-u));this._updateAxisRange(o,n,r)}},e.prototype._initAxisRangeWithPosAndScale=function(e){var t,i,n,r;e?(t=this._maxX-this._minX,isNaN(t)||(r=(n=this._minX+this._posX*(t-(i=t*this._scaleX)))+i,this._innerUpdating=!0,this._chart.axisX.min=n,this._chart.axisX.max=r,this._lastMinX=n,this._lastMaxX=r)):(t=this._maxY-this._minY,isNaN(t)||(r=(n=this._minY+this._posY*(t-(i=t*this._scaleY)))+i,this._innerUpdating=!0,this._chart.axisY.min=n,this._chart.axisY.max=r,this._lastMinY=n,this._lastMaxY=r))},e.prototype._updateAxisRange=function(e,t,i){this._chart.beginUpdate(),e.min=t,e.max=i,e===this._chart.axisX?(this._lastMinX=t,this._lastMaxX=i):(this._lastMinY=t,this._lastMaxY=i),this._innerUpdating=!0,this._chart.endUpdate()},e.prototype._reset=function(){this._scaling=!1,this._panning=!1,this._startDistance=0,this._startFirstPt=null,this._pinchStartEvents=[],this._startPointers=[],this._mvPointers=[],this._endPoint=null,this._clip={},this._selection={}},e.prototype._getAxisMin=function(e){return Object(B.isDate)(e.actualMin)?e.actualMin.valueOf():e.actualMin},e.prototype._getAxisMax=function(e){return Object(B.isDate)(e.actualMax)?e.actualMax.valueOf():e.actualMax},e.prototype._getTransFormGroups=function(){var e=this._seriesGroup.querySelectorAll("g[clip-path]");return 0===e.length&&(e=this._seriesGroup.querySelectorAll("g")),e},e.prototype._disabledOthersInteraction=function(t){var i=this._chart.hostElement;if(null!=i)for(var n=i.querySelectorAll(".wj-chart-linemarker-container"),r=0;r<n.length;r++)t?Object(B.addClass)(n[r],e._CSS_BLOCK_INTERACTION):Object(B.removeClass)(n[r],e._CSS_BLOCK_INTERACTION)},e.prototype._getPoint=function(e){return e instanceof MouseEvent?new B.Point(e.pageX,e.pageY):new B.Point(e.changedTouches[0].pageX,e.changedTouches[0].pageY)},e.prototype._getTouchPair=function(e){var t=[];return Object(B.isArray)(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t},e.prototype._touchDistance=function(e){var t=this._getTouchPair(e),i=0,n=0;return t[0]&&void 0!==t[0].pageX&&t[1]&&void 0!==t[1].pageX&&(i=t[0].pageX-t[1].pageX),t[0]&&void 0!==t[0].pageY&&t[1]&&void 0!==t[1].pageY&&(n=t[0].pageY-t[1].pageY),{x:i,y:n}},e._CSS_ZOOM="wj-zoom",e._CSS_ZOOM_OVERLAY="wj-zoom-overlay",e._CSS_PANABLE="wj-panable",e._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled",e._CSS_BLOCK_INTERACTION="wj-block-other-interaction",e}(),re=function(){function e(e,t,i,n){this._isVisible=!0,this._buttonsVisible=!0,this._minScale=0,this._maxScale=1,this._seamless=!1,this._rsContainer=null,this._rsEle=null,this._decBtn=null,this._incBtn=null,this._rsContent=null,this._minHandler=null,this._rangeHandler=null,this._maxHandler=null,this._wrapperSliderMousedown=null,this._wrapperDocMouseMove=null,this._wrapperDocMouseup=null,this._wrapperBtnMousedown=null,this._wrapperRangeSpaceMousedown=null,this._wrapperRangeMouseleave=null,this._isTouch=!1,this._slidingInterval=null,this._rangeSliderRect=null,this._isHorizontal=!0,this._isBtnMousedown=!1,this._needSpaceClick=!1,this._hasButtons=!0,this._movingEle=null,this._movingOffset=null,this._range=null,this._startPt=null,this._minPos=0,this._maxPos=1,this.rangeChanged=new B.Event,this.rangeChanging=new B.Event,e||Object(B.assert)(!1,"The container cannot be null."),this._isTouch="ontouchstart"in window,this._needSpaceClick=t,this._hasButtons=i,Object(B.copy)(this,n),this._createSlider(e)}return Object.defineProperty(e.prototype,"buttonsVisible",{get:function(){return this._buttonsVisible},set:function(e){if(e!=this._buttonsVisible){if(this._buttonsVisible=Object(B.asBoolean)(e),!this._rsContainer||!this._hasButtons)return;this._refresh()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHorizontal",{get:function(){return this._isHorizontal},set:function(e){if(e!=this._isHorizontal){if(this._isHorizontal=Object(B.asBoolean)(e),!this._rsContainer)return;this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){if(e!=this._isVisible){if(this._isVisible=Object(B.asBoolean)(e),!this._rsContainer)return;this._rsContainer.style.visibility=this._isVisible?"visible":"hidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minScale",{get:function(){return this._minScale},set:function(e){e>=0&&e!=this._minScale&&(this._minScale=Object(B.asNumber)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxScale",{get:function(){return this._maxScale},set:function(e){e>=0&&e!=this._maxScale&&(this._maxScale=Object(B.asNumber)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seamless",{get:function(){return this._seamless},set:function(e){e!=this._seamless&&(this._seamless=Object(B.asBoolean)(e))},enumerable:!0,configurable:!0}),e.prototype.onRangeChanged=function(e){this.rangeChanged.raise(this,e)},e.prototype.onRangeChanging=function(e){this.rangeChanging.raise(this,e)},Object.defineProperty(e.prototype,"_isSliding",{get:function(){return null!==this._startPt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_handleWidth",{get:function(){return this._minHandler.offsetWidth},enumerable:!0,configurable:!0}),e.prototype._createSlider=function(t){var i=this._isHorizontal?e._HRANGESLIDER:e._VRANGESLIDER,n=this._isHorizontal?"wj-glyph-left":"wj-glyph-down",r=this._isHorizontal?"wj-glyph-right":"wj-glyph-up";this._rsContainer=t,this._rsContainer.style.visibility=this._isVisible?"visible":"hidden",this._rsEle=Object(B.createElement)('<div class="wj-chart-rangeslider '+i+'"></div>'),this._rsContainer.appendChild(this._rsEle),this._hasButtons&&(this._decBtn=Object(B.createElement)('<button class="wj-rangeslider-decbtn wj-btn wj-btn-default" type="button" tabindex="-1"><span class="'+n+" "+e._RANGESLIDER_DECBTN+'"></span></button>'),this._rsEle.appendChild(this._decBtn),this._incBtn=Object(B.createElement)('<button class="wj-rangeslider-incbtn wj-btn wj-btn-default" type="button" tabindex="-1"><span class="'+r+" "+e._RANGESLIDER_INCBTN+'"></span></button>'),this._rsEle.appendChild(this._incBtn)),this._rsContent=Object(B.createElement)('<div class="wj-rangeslider-content"><div class="wj-rangeslider-rangehandle"></div><div class="wj-rangeslider-minhandle"></div><div class="wj-rangeslider-maxhandle"></div>'),this._rsEle.appendChild(this._rsContent),this._minHandler=this._rsContent.querySelector("."+e._RANGESLIDER_MINHANDLE),this._rangeHandler=this._rsContent.querySelector("."+e._RANGESLIDER_RANGEHANDLE),this._maxHandler=this._rsContent.querySelector("."+e._RANGESLIDER_MAXHANDLE),this._wrapperSliderMousedown=this._onSliderMousedown.bind(this),this._wrapperDocMouseMove=this._onDocMouseMove.bind(this),this._wrapperDocMouseup=this._onDocMouseup.bind(this),this._wrapperRangeSpaceMousedown=this._onRangeSpaceMousedown.bind(this),this._wrapperRangeMouseleave=this._onRangeMouseleave.bind(this),this._wrapperBtnMousedown=this._onBtnMousedown.bind(this),this._switchEvent(!0)},e.prototype._switchEvent=function(e){var t=e?"addEventListener":"removeEventListener";this._rsContainer&&(this._needSpaceClick&&this._rsEle[t]("mousedown",this._wrapperRangeSpaceMousedown),this._rsEle[t]("mouseleave",this._wrapperRangeMouseleave),this._rsContent[t]("mousedown",this._wrapperSliderMousedown),this._hasButtons&&(this._decBtn[t]("mousedown",this._wrapperBtnMousedown),this._incBtn[t]("mousedown",this._wrapperBtnMousedown)),document[t]("mousemove",this._wrapperDocMouseMove),document[t]("mouseup",this._wrapperDocMouseup),"ontouchstart"in window&&(this._needSpaceClick&&this._rsEle[t]("touchstart",this._wrapperRangeSpaceMousedown),this._rsContent[t]("touchstart",this._wrapperSliderMousedown),this._hasButtons&&(this._decBtn[t]("touchstart",this._wrapperBtnMousedown),this._incBtn[t]("touchstart",this._wrapperBtnMousedown)),document[t]("touchmove",this._wrapperDocMouseMove),document[t]("touchend",this._wrapperDocMouseup)))},e.prototype._onSliderMousedown=function(t){this._isVisible&&(this._movingEle=t.srcElement||t.target,this._startPt=t instanceof MouseEvent?new B.Point(t.pageX,t.pageY):new B.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY),Object(B.removeClass)(this._minHandler,e._RANGESLIDER_HANDLE_ACTIVE),Object(B.removeClass)(this._maxHandler,e._RANGESLIDER_HANDLE_ACTIVE),this._movingOffset=Object(B.getElementRect)(this._movingEle),this._movingEle!=this._rangeHandler?(this._isHorizontal?this._movingOffset.left+=.5*this._movingEle.offsetWidth:this._movingOffset.top+=.5*this._movingEle.offsetHeight,Object(B.addClass)(this._movingEle,e._RANGESLIDER_HANDLE_ACTIVE)):this._range=this._maxPos-this._minPos,t.preventDefault())},e.prototype._onDocMouseMove=function(e){if(this._isVisible&&this._startPt){var t=e instanceof MouseEvent?new B.Point(e.pageX,e.pageY):new B.Point(e.changedTouches[0].pageX,e.changedTouches[0].pageY);this._onMove(t)}},e.prototype._onMove=function(t){var i,n=this._startPt,r=this._movingOffset,o=this._plotBox,s=this._range,a=this._movingEle,l=this._minHandler,c=this._rangeHandler,h=this._maxHandler;n&&r&&((i=this._isHorizontal?(r.left+t.x-n.x-o.x)/o.width:1-(r.top+t.y-n.y-o.y)/o.height)<0?i=0:i>1&&(i=1),a===l?this._seamless&&0===this._minScale&&i>=this._maxPos?(this._minPos=this._maxPos,this._movingEle=h,Object(B.removeClass)(this._minHandler,e._RANGESLIDER_HANDLE_ACTIVE),Object(B.addClass)(this._maxHandler,e._RANGESLIDER_HANDLE_ACTIVE)):(i>this._maxPos-this._minScale&&(i=this._maxPos-this._minScale),i<this._maxPos-this._maxScale&&(i=this._maxPos-this._maxScale),this._minPos=i):a===h?this._seamless&&0===this._minScale&&i<=this._minPos?(this._maxPos=this._minPos,this._movingEle=l,Object(B.removeClass)(this._maxHandler,e._RANGESLIDER_HANDLE_ACTIVE),Object(B.addClass)(this._minHandler,e._RANGESLIDER_HANDLE_ACTIVE)):(i<this._minPos+this._minScale&&(i=this._minPos+this._minScale),i>this._minPos+this._maxScale&&(i=this._minPos+this._maxScale),this._maxPos=i):a===c&&(this._isHorizontal?(this._minPos=i,this._maxPos=this._minPos+s,this._maxPos>=1&&(this._maxPos=1,this._minPos=this._maxPos-s)):(this._maxPos=i,this._minPos=this._maxPos-s,this._minPos<=0&&(this._minPos=0,this._maxPos=this._minPos+s))),this._updateElesPosition(),this.onRangeChanging())},e.prototype._onDocMouseup=function(t){this._isVisible&&(this._clearInterval(),this._isBtnMousedown=!1,this._startPt&&(this.onRangeChanged(),this._startPt=null,this._movingOffset=null),Object(B.removeClass)(this._minHandler,e._RANGESLIDER_HANDLE_ACTIVE),Object(B.removeClass)(this._maxHandler,e._RANGESLIDER_HANDLE_ACTIVE))},e.prototype._onRangeSpaceMousedown=function(e){var t=e instanceof MouseEvent?new B.Point(e.pageX,e.pageY):new B.Point(e.changedTouches[0].pageX,e.changedTouches[0].pageY),i=Object(B.getElementRect)(this._rsContent),n=Object(B.getElementRect)(this._rangeHandler),r=e.srcElement||e.target,o=0;e.stopPropagation(),e.preventDefault(),r!==this._rsContent&&r!==this._rsEle||(this._isHorizontal?(o=n.width/i.width,t.x<n.left?o*=-1:t.x>n.left+n.width&&(o*=1)):(o=n.height/i.height,t.y<n.top?o*=1:t.y>n.top+n.height&&(o*=-1)),0!==o&&this._doSliding(o,t))},e.prototype._onRangeMouseleave=function(e){e.stopPropagation(),e.preventDefault(),this._isBtnMousedown&&(this._clearInterval(),this.onRangeChanged())},e.prototype._onBtnMousedown=function(t){var i=t.srcElement||t.target,n=0;if(t.stopPropagation(),t.preventDefault(),Object(B.hasClass)(i,e._RANGESLIDER_DECBTN)){if(0===this._minPos)return;n=-.05}else if(Object(B.hasClass)(i,e._RANGESLIDER_INCBTN)){if(1===this._maxPos)return;n=.05}this._isBtnMousedown=!0,0!==n&&this._doSliding(n)},e.prototype._refresh=function(e){var t,i,n=0,r=Object(B.getElementRect)(this._rsContainer);e&&(this._rangeSliderRect=e),this._rangeSliderRect&&(this._hasButtons&&this._buttonsVisible?(this._decBtn.style.display="block",this._incBtn.style.display="block",n=this._isHorizontal?this._decBtn.offsetWidth+this._minHandler.offsetWidth/2:this._decBtn.offsetHeight+this._minHandler.offsetHeight/2):(this._hasButtons&&(this._decBtn.style.display="none",this._incBtn.style.display="none"),n=this._isHorizontal?this._minHandler.offsetWidth/2:this._minHandler.offsetHeight/2),t=this._getRsRect(),this._isHorizontal?(t.left-=this._minHandler.offsetWidth/2,t.width+=this._minHandler.offsetWidth,i={left:n,width:t.width-2*n}):(t.top-=this._minHandler.offsetHeight/2,t.height+=this._minHandler.offsetHeight,i={top:n,height:t.height-2*n}),Object(B.setCss)(this._rsEle,t),Object(B.setCss)(this._rsContent,i),r=Object(B.getElementRect)(this._rsContent),this._plotBox={x:r.left,y:r.top,width:r.width,height:r.height},this._updateElesPosition())},e.prototype._updateElesPosition=function(){var e=this._minHandler,t=this._maxHandler,i=this._plotBox,n=this._isHorizontal;i&&this._refreshSlider(n?{left:this._minPos*i.width-.5*e.offsetWidth}:{top:(1-this._minPos)*i.height-.5*t.offsetHeight},n?{left:this._minPos*i.width,width:(this._maxPos-this._minPos)*i.width}:{top:(1-this._maxPos)*i.height,height:(this._maxPos-this._minPos)*i.height},n?{left:this._maxPos*i.width-.5*t.offsetWidth}:{top:(1-this._maxPos)*i.height-.5*e.offsetHeight})},e.prototype._refreshSlider=function(e,t,i){Object(B.setCss)(this._minHandler,e),Object(B.setCss)(this._rangeHandler,t),Object(B.setCss)(this._maxHandler,i)},e.prototype._invalidate=function(){var t,i;this._rsContainer&&(t=this._isHorizontal?e._HRANGESLIDER:e._VRANGESLIDER,i=this._isHorizontal?e._VRANGESLIDER:e._HRANGESLIDER,Object(B.removeClass)(this._rsEle,i),Object(B.addClass)(this._rsEle,t),[this._rsEle,this._rsContent,this._minHandler,this._maxHandler,this._rangeHandler].forEach((function(e){e.removeAttribute("style")})),this._refresh())},e.prototype._changeRange=function(e){var t=this._maxPos-this._minPos;e<0&&0===this._minPos||e>0&&1===this._maxPos||(e<0?(this._minPos+=e,this._minPos=this._minPos<0?0:this._minPos,this._maxPos=this._minPos+t):(this._maxPos+=e,this._maxPos=this._maxPos>1?1:this._maxPos,this._minPos=this._maxPos-t),this._updateElesPosition())},e.prototype._doSliding=function(e,t){Object(B.getElementRect)(this._rsContent),Object(B.getElementRect)(this._rangeHandler),this._clearInterval(),this._startPt=new B.Point,this._changeRange(e),this.onRangeChanged(),this._setSlidingInterval(e,t)},e.prototype._setSlidingInterval=function(e,t){var i,n=this;this._slidingInterval=window.setInterval((function(){if(t)if(Object(B.getElementRect)(n._rsContent),i=Object(B.getElementRect)(n._rangeHandler),n._isHorizontal){if(t.x>=i.left&&t.x<=i.left+i.width)return void n._clearInterval()}else if(t.y>=i.top&&t.y<=i.top+i.height)return void n._clearInterval();n._changeRange(e),n.onRangeChanged()}),200)},e.prototype._clearInterval=function(){this._slidingInterval&&window.clearInterval(this._slidingInterval)},e.prototype._getRsRect=function(){var e=this._rangeSliderRect,t={};if(e)return["left","top","width","height"].forEach((function(i){e[i]&&(t[i]=e[i])})),t},e._HRANGESLIDER="wj-chart-hrangeslider",e._VRANGESLIDER="wj-chart-vrangeslider",e._RANGESLIDER_DECBTN="wj-rangeslider-decbtn",e._RANGESLIDER_INCBTN="wj-rangeslider-incbtn",e._RANGESLIDER_RANGEHANDLE="wj-rangeslider-rangehandle",e._RANGESLIDER_MINHANDLE="wj-rangeslider-minhandle",e._RANGESLIDER_MAXHANDLE="wj-rangeslider-maxhandle",e._RANGESLIDER_HANDLE_ACTIVE="wj-rangeslider-handle-active",e}();!function(e){e[e.X=0]="X",e[e.Y=1]="Y"}(ie||(ie={}));var oe=function(){function e(e,t){this._isVisible=!0,this._orientation=ie.X,this._seamless=!1,this._minScale=0,this._maxScale=1,this.rangeChanged=new B.Event,this._chart=Object(B.asType)(e,_.FlexChartCore,!1),this._createRangeSelector(),Object(B.copy)(this,t)}return Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){e!=this._isVisible&&(this._isVisible=Object(B.asBoolean)(e),this._rangeSlider&&(this._rangeSlider.isVisible=e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){if((e=Object(B.asNumber)(e,!0,!1))!=this._min){var t=!1;(null==e||void 0===e||isNaN(e)||null==this._max||e<=this._max||void 0===this._max)&&(this._min=e,t=!0),this._rangeSlider&&t&&this._changeRange()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){if((e=Object(B.asNumber)(e,!0,!1))!=this._max){var t=!1;(null==e||isNaN(e)||e>=this._min||void 0===this._min)&&(this._max=e,t=!0),this._rangeSlider&&t&&this._changeRange()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(e){(e=Object(B.asEnum)(e,ie))!==this._orientation&&(this._orientation=e,this._rangeSlider&&(this._rangeSlider.isHorizontal=e==ie.X))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seamless",{get:function(){return this._seamless},set:function(e){(e=Object(B.asBoolean)(e,!0))!=this._seamless&&(this._seamless=e,this._rangeSlider&&(this._rangeSlider.seamless=e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minScale",{get:function(){return this._minScale},set:function(e){(e=Object(B.asNumber)(e))<=1&&e>=0&&e!=this._minScale&&e<this._maxScale&&(this._minScale=e,this._rangeSlider&&(this._rangeSlider.minScale=Object(B.asNumber)(e),this._updateMinAndMaxWithScale(!0)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxScale",{get:function(){return this._maxScale},set:function(e){(e=Object(B.asNumber)(e))<=1&&e>=0&&e!=this._maxScale&&e>this._minScale&&(this._maxScale=e,this._rangeSlider&&(this._rangeSlider.maxScale=Object(B.asNumber)(e),this._updateMinAndMaxWithScale(!0)))},enumerable:!0,configurable:!0}),e.prototype.remove=function(){this._rangeSelectorEle&&(this._chart.hostElement.removeChild(this._rangeSelectorEle),this._switchEvent(!1),this._rangeSelectorEle=null,this._rangeSlider=null)},e.prototype.onRangeChanged=function(e){this.rangeChanged.raise(this,e)},e.prototype._createRangeSelector=function(){var e=this._chart.hostElement,t=this._orientation===ie.X;this._rangeSelectorEle=Object(B.createElement)('<div class="wj-chart-rangeselector-container"></div>'),this._rangeSlider=new re(this._rangeSelectorEle,!1,!1,{isHorizontal:t,isVisible:this._isVisible,seamless:this._seamless}),e.appendChild(this._rangeSelectorEle),this._switchEvent(!0)},e.prototype._switchEvent=function(e){var t=e?"addHandler":"removeHandler";this._chart.hostElement&&(this._rangeSlider.rangeChanged[t](this._updateRange,this),this._chart.rendered[t](this._refresh,this))},e.prototype._refresh=function(){var e,t,i,n=this._chart.hostElement,r=Object(B.getElementRect)(this._rangeSelectorEle);e=n.querySelector("."+_.FlexChart._CSS_PLOT_AREA),t=Object(B.getElementRect)(e),(i=e.getBBox())&&i.width&&i.height&&(this._adjustMinAndMax(),this._rangeSlider._refresh({left:i.x,top:t.top-r.top,width:i.width,height:i.height}))},e.prototype._adjustMinAndMax=function(){var e=this._chart,t=this._rangeSlider,i=this._min,n=this._max,r=this._orientation===ie.X?e.axisX:e.axisY,o=Object(B.isDate)(r.actualMin)?r.actualMin.valueOf():r.actualMin,s=Object(B.isDate)(r.actualMax)?r.actualMax.valueOf():r.actualMax;this._min=null===i||isNaN(i)||void 0===i||i<o||i>s?o:i,this._max=null===n||isNaN(n)||void 0===n||n<o||n>s?s:n;var a=this._chart._plotRect;if(a){var l=void 0,c=void 0;this._orientation===ie.X?(l=(r.convert(this._min)-a.left)/a.width,c=(r.convert(this._max)-a.left)/a.width):(l=(a.top-r.convert(this._min))/a.height+1,c=(a.top-r.convert(this._max))/a.height+1),t._minPos=isNaN(l)?0:l,t._maxPos=isNaN(c)?1:c,this._updateMinAndMaxWithScale(!1)}},e.prototype._updateMinAndMaxWithScale=function(e){var t,i=this._rangeSlider,n=!1;if(0!==this._minScale&&i._minPos+this._minScale>i._maxPos&&((t=i._minPos+this._minScale)>1?(i._maxPos=1,i._minPos=1-this._minScale):i._maxPos=t,n=!0),1!==this._maxScale&&i._minPos+this._maxScale<i._maxPos&&((t=i._minPos+this._maxScale)>1?(i._maxPos=1,i._minPos=1-this._maxScale):i._maxPos=t,n=!0),n){var r=this._getMinAndMax();this._min=r.min,this._max=r.max,e&&this._rangeSelectorEle&&(this._rangeSlider._refresh(),this.onRangeChanged())}},e.prototype._changeRange=function(){this._adjustMinAndMax(),this._rangeSelectorEle&&(this._rangeSlider._refresh(),this.onRangeChanged())},e.prototype._updateRange=function(){var e=this._getMinAndMax();this._min=e.min,this._max=e.max,this.onRangeChanged()},e.prototype._getMinAndMax=function(){var e=this._rangeSlider,t=this._chart,i=t._plotRect,n=null,r=null;return i&&(this._orientation===ie.X?(n=t.axisX.convertBack(i.left+e._minPos*i.width),r=t.axisX.convertBack(i.left+e._maxPos*i.width)):(n=t.axisY.convertBack(i.top+(1-e._minPos)*i.height),r=t.axisY.convertBack(i.top+(1-e._maxPos)*i.height))),{min:n,max:r}},e}();Object(B._registerModule)("wijmo.chart.interaction",r);var se=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ae=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},le=function(e,t){return function(i,n){t(i,n,e)}},ce={selector:"wj-flex-chart-range-selector",template:"",inputs:["wjProperty","isVisible","min","max","orientation","seamless","minScale","maxScale"],outputs:["initialized","rangeChangedNg: rangeChanged"],providers:[]},he=function(e){function t(t,i,n){var r=e.call(this,n)||this;return r.isInitialized=!1,r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;return se(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:ce.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-range-selector"]],inputs:{wjProperty:"wjProperty",isVisible:"isVisible",min:"min",max:"max",orientation:"orientation",seamless:"seamless",minScale:"minScale",maxScale:"maxScale"},outputs:{initialized:"initialized",rangeChangedNg:"rangeChanged"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(ce.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=ae([,le(0,Object(m.r)(m.n)),le(1,Object(m.r)(m.t)),le(2,Object(m.r)("WjComponent")),le(2,Object(m.L)()),le(2,Object(m.D)())],t)}(oe),ue={selector:"wj-flex-chart-gestures",template:"",inputs:["wjProperty","mouseAction","interactiveAxes","enable","scaleX","scaleY","posX","posY"],outputs:["initialized"],providers:[]},de=(function(e){function t(t,i,n){var r=e.call(this,n)||this;return r.isInitialized=!1,r._wjBehaviour=b.a.attach(r,t,i,n),r.created(),r}var i;se(t,e),i=t,t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:ue.outputs},t.\u0275fac=function(e){return new(e||t)(m.Nb(m.n),m.Nb(m.t),m.Nb("WjComponent",12))},t.\u0275cmp=m.Hb({type:t,selectors:[["wj-flex-chart-gestures"]],inputs:{wjProperty:"wjProperty",mouseAction:"mouseAction",interactiveAxes:"interactiveAxes",enable:"enable",scaleX:"scaleX",scaleY:"scaleY",posX:"posX",posY:"posY"},outputs:{initialized:"initialized"},features:[m.Ab([{provide:"WjComponent",useExisting:Object(m.V)((function(){return i}))}].concat(ue.providers))],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t=i=ae([,le(0,Object(m.r)(m.n)),le(1,Object(m.r)(m.t)),le(2,Object(m.r)("WjComponent")),le(2,Object(m.L)()),le(2,Object(m.D)())],t)}(ne),function(){function e(){}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[c.c]]}),e}()),pe=i("BOKU"),fe=i("dZIy"),ge=i("EDFS"),me=i("eY+I"),be=i("efbX"),_e=i("0SAw"),ye=i("mrSG"),ve=i("eIep"),xe=i("0Qfz"),we=i("ztEp"),Se=i("iFvM"),Ce=i("ZF+8"),Oe=(i("K3ix"),function(e){return e.Column="Column",e.Bar="Bar",e.Scatter="Scatter",e.Line="Line",e.LineSymbols="LineSymbols",e.Area="Area",e.Bubble="Bubble",e.Candlestick="Candlestick",e.HighLowOpenClose="HighLowOpenClose",e.Spline="Spline",e.SplineSymbols="SplineSymbols",e.SplineArea="SplineArea",e.Funnel="Funnel",e.Step="Step",e.StepSymbols="StepSymbols",e.StepArea="StepArea",e}({})),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),Object(ye.c)([Object(me.r)({description:"Chart header",example:"New chart"}),Object(ye.f)("design:type",String)],t.prototype,"header",void 0),Object(ye.c)([Object(me.r)({description:"Selection in Chart",example:"Point|Series|None",link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Advanced/Selection"}),Object(ye.f)("design:type",Number)],t.prototype,"selectionMode",void 0),Object(ye.c)([Object(me.r)({description:"Legend position",example:"Bottom",link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Advanced/Legend-Titles#setting-the-legend-title-position"}),Object(ye.f)("design:type",Object)],t.prototype,"legendPosition",void 0),Object(ye.c)([Object(me.r)({description:"On selection handler",example:"onSelect",type:me.i.EVENT}),Object(ye.f)("design:type",String)],t.prototype,"onSelect",void 0),t}(me.e),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),Object(ye.c)([Object(me.r)({description:"Chart X axis",example:"propName",link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Basic/Data-Binding#data-binding-in-flexchart"}),Object(ye.f)("design:type",String)],t.prototype,"bindingX",void 0),Object(ye.c)([Object(me.r)({description:"Chart series",example:'[{name: "Name", binding: "propName"}]',link:"https://www.grapecity.com/wijmo/docs/Topics/Chart/Advanced/Legend-Titles#setting-the-legend-title-position"}),Object(ye.f)("design:type",Array)],t.prototype,"series",void 0),Object(ye.c)([Object(me.r)({description:"ChartType Enumeration",example:"5",link:"https://www.grapecity.com/wijmo/api/enums/wijmo_chart.charttype.html"}),Object(ye.f)("design:type",Number)],t.prototype,"chartType",void 0),Object(ye.c)([Object(me.r)({description:"Has range selector",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_chart_interaction.rangeselector.html"}),Object(ye.f)("design:type",Boolean)],t.prototype,"hasRangeSelector",void 0),Object(ye.c)([Object(me.r)({description:"Determines whether and how the series objects are stacked.",example:"true",link:"https://www.grapecity.com/wijmo/api/classes/wijmo_chart.flexchart.html#stacking"}),Object(ye.f)("design:type",Number)],t.prototype,"stacking",void 0),Object(ye.c)([Object(me.r)({description:"Determines whether all row data should be presented in tooltip.",example:"true"}),Object(ye.f)("design:type",Boolean)],t.prototype,"rowTooltip",void 0),t}(je);function Ne(e,t){if(1&e&&(m.Tb(0,"option",28),m.Ec(1),m.Sb()),2&e){var i=t.$implicit;m.jc("value",i),m.Bb(1),m.Fc(i)}}function Ae(e,t){if(1&e&&(m.Tb(0,"option",28),m.Ec(1),m.Sb()),2&e){var i=t.$implicit;m.jc("value",i),m.Bb(1),m.Fc(i)}}function Me(e,t){if(1&e&&(m.Tb(0,"option",28),m.Ec(1),m.Sb()),2&e){var i=t.$implicit;m.jc("value",i),m.Bb(1),m.Fc(i)}}function Ee(e,t){if(1&e){var i=m.Ub();m.Tb(0,"select",35),m.bc("change",(function(e){m.vc(i);var t=m.dc().$implicit;return m.dc().onBubbleSizeChange(e,t)})),m.Cc(1,Me,2,2,"option",9),m.Sb()}if(2&e){var n=m.dc(),r=n.index,o=n.$implicit,s=m.dc();m.lc("name","bubble-size-binding-",r,""),m.jc("ngModel",s.getBubbleSize(o)),m.Bb(1),m.jc("ngForOf",s.config.fields)}}function Pe(e,t){if(1&e&&(m.Tb(0,"option",28),m.Ec(1),m.Sb()),2&e){var i=t.$implicit;m.jc("value",i),m.Bb(1),m.Fc(i)}}function Ie(e,t){if(1&e){var i=m.Ub();m.Tb(0,"div",18),m.Tb(1,"div",11),m.Tb(2,"select",29),m.bc("change",(function(e){m.vc(i);var n=t.$implicit;return m.dc().onBindingChange(e,n)})),m.Cc(3,Ae,2,2,"option",9),m.Sb(),m.Cc(4,Ee,2,3,"select",30),m.Sb(),m.Tb(5,"div",13),m.Tb(6,"select",31),m.bc("change",(function(){m.vc(i);var e=t.$implicit;return m.dc().onChartTypeChange(e)}))("ngModelChange",(function(e){return m.vc(i),t.$implicit.chartType=e})),m.Cc(7,Pe,2,2,"option",9),m.Sb(),m.Sb(),m.Tb(8,"div",14),m.Tb(9,"input",32),m.bc("ngModelChange",(function(e){return m.vc(i),t.$implicit.secondaryAxis=e})),m.Sb(),m.Sb(),m.Tb(10,"button",33),m.bc("click",(function(){m.vc(i);var e=t.index;return m.dc().removeSerie(e)})),m.Ob(11,"i",34),m.Sb(),m.Sb()}if(2&e){var n=t.$implicit,r=t.index,o=m.dc();m.Bb(2),m.lc("name","serie-binding-",r,""),m.jc("ngModel",o.getSerieBinding(n)),m.Bb(1),m.jc("ngForOf",o.config.fields),m.Bb(1),m.jc("ngIf","Bubble"===n.chartType),m.Bb(2),m.lc("name","serie-type-",r,""),m.jc("ngModel",n.chartType),m.Bb(1),m.jc("ngForOf",o.chartTypes),m.Bb(2),m.lc("name","serie-2y-",r,""),m.jc("ngModel",n.secondaryAxis)}}function De(e,t){if(1&e&&(m.Tb(0,"option",28),m.Ec(1),m.Sb()),2&e){var i=t.$implicit;m.jc("value",i),m.Bb(1),m.Fc(i)}}var ke=function(){function e(){this.save=new m.p,this.chartTypes=this.getTypes(_.ChartType),this.legendPositions=this.getTypes(_.Position),this.settings={bindingX:null,series:[]}}return e.prototype.ngOnInit=function(){this.settings=Object(we.deepClone)(this.config),this.settings.series.forEach((function(e){e.chartType||(e.chartType=Oe.Line)}))},e.prototype.saveSettings=function(){this.save.emit(this.settings),this.modalRef.hide()},e.prototype.removeSerie=function(e){this.settings.series.splice(e,1)},e.prototype.addSerie=function(){this.settings.series.push({binding:null,chartType:Oe.Line})},e.prototype.getBubbleSize=function(e){var t;return null===(t=e.binding)||void 0===t?void 0:t.split(",")[1]},e.prototype.getSerieBinding=function(e){var t;return null===(t=e.binding)||void 0===t?void 0:t.split(",")[0]},e.prototype.onChartTypeChange=function(e){var t;(null===(t=e.binding)||void 0===t?void 0:t.includes(","))&&![_.ChartType.Bubble,Oe.Bubble].includes(e.chartType)&&(e.binding=e.binding.split(",")[0])},e.prototype.onBindingChange=function(e,t){var i,n=e.target.value;t.binding=t.chartType===Oe.Bubble?n+","+(null===(i=t.binding)||void 0===i?void 0:i.split(",")[1]):n},e.prototype.onBubbleSizeChange=function(e,t){var i;t.binding=(null===(i=t.binding)||void 0===i?void 0:i.split(",")[0])+","+e.target.value},e.prototype.getTypes=function(e){return Object.keys(e).filter((function(e){return isNaN(e)}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Hb({type:e,selectors:[["app-chart-settings"]],inputs:{config:"config",modalRef:"modalRef"},outputs:{save:"save"},decls:43,vars:6,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column"],[1,"position-relative","h-100"],[1,"form-group","mx-0","mb-2"],["for","field-name",1,"col-form-label","px-0"],["name","bindingX",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row","mx-0","mb-0"],[1,"col-5","px-0"],[1,"col-form-label","px-0"],[1,"col-5","px-0","pl-2","align-self-center"],[1,"col-1","px-2","mx-0","d-flex","flex-column"],["class","form-group row mx-0 mb-2",4,"ngFor","ngForOf"],[1,"form-group","row","mx-0"],["type","button",1,"btn","btn-primary","mb-2","ml-auto",3,"click"],[1,"form-group","row","mx-0","mb-2"],["for","type-selection",1,"col-form-label","col-sm-3","px-0"],["id","type-selection","name","legend-position",1,"form-control","col-sm-9",3,"ngModel","ngModelChange"],[1,"form-group","row","mx-0","mb-2","align-items-center"],["for","type-selection",1,"col-form-label","px-0","col-5","col-lg-3"],["type","checkbox","name","has-range-selector",3,"ngModel","ngModelChange"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-primary","ml-auto","mr-2",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[3,"value"],[1,"form-control",3,"ngModel","name","change"],["class","form-control mt-1",3,"ngModel","name","change",4,"ngIf"],[1,"form-control",3,"ngModel","name","change","ngModelChange"],["type","checkbox",1,"h-100","mx-1",3,"ngModel","name","ngModelChange"],["type","button",1,"btn","btn-danger","btn-sm","align-self-center",3,"click"],[1,"fa","fa-remove"],[1,"form-control","mt-1",3,"ngModel","name","change"]],template:function(e,t){1&e&&(m.Tb(0,"div",0),m.Tb(1,"h4",1),m.Ec(2,"Chart settings"),m.Sb(),m.Tb(3,"button",2),m.bc("click",(function(){return t.modalRef.hide()})),m.Tb(4,"span",3),m.Ec(5,"\xd7"),m.Sb(),m.Sb(),m.Sb(),m.Tb(6,"div",4),m.Tb(7,"div",5),m.Tb(8,"form"),m.Tb(9,"div",6),m.Tb(10,"label",7),m.Ec(11,"X-Axis"),m.Sb(),m.Tb(12,"select",8),m.bc("ngModelChange",(function(e){return t.settings.bindingX=e})),m.Cc(13,Ne,2,2,"option",9),m.Sb(),m.Sb(),m.Tb(14,"div",10),m.Tb(15,"div",11),m.Tb(16,"label",12),m.Ec(17,"Series"),m.Sb(),m.Sb(),m.Tb(18,"div",13),m.Tb(19,"label",12),m.Ec(20,"Chart Type"),m.Sb(),m.Sb(),m.Tb(21,"div",14),m.Tb(22,"label",12),m.Ec(23,"2-Y"),m.Sb(),m.Sb(),m.Sb(),m.Cc(24,Ie,12,9,"div",15),m.Tb(25,"div",16),m.Tb(26,"button",17),m.bc("click",(function(){return t.addSerie()})),m.Ec(27,"Add Series"),m.Sb(),m.Sb(),m.Tb(28,"div",18),m.Tb(29,"label",19),m.Ec(30,"Legend Position"),m.Sb(),m.Tb(31,"select",20),m.bc("ngModelChange",(function(e){return t.settings.legendPosition=e})),m.Cc(32,De,2,2,"option",9),m.Sb(),m.Sb(),m.Tb(33,"div",21),m.Tb(34,"label",22),m.Ec(35,"Range Selector"),m.Sb(),m.Tb(36,"input",23),m.bc("ngModelChange",(function(e){return t.settings.hasRangeSelector=e})),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(37,"div",24),m.Tb(38,"div",25),m.Tb(39,"button",26),m.bc("click",(function(){return t.saveSettings()})),m.Ec(40,"Save"),m.Sb(),m.Tb(41,"button",27),m.bc("click",(function(){return t.modalRef.hide()})),m.Ec(42,"Cancel"),m.Sb(),m.Sb(),m.Sb()),2&e&&(m.Bb(12),m.jc("ngModel",t.settings.bindingX),m.Bb(1),m.jc("ngForOf",t.config.fields),m.Bb(11),m.jc("ngForOf",t.settings.series),m.Bb(7),m.jc("ngModel",t.settings.legendPosition),m.Bb(1),m.jc("ngForOf",t.legendPositions),m.Bb(4),m.jc("ngModel",t.settings.hasRangeSelector))},directives:[h.t,h.j,h.k,h.r,h.i,h.l,c.l,h.a,h.m,h.s,c.m],styles:[""]}),e}(),Le=i("a5yf"),Fe=["chart"],Re=["selector"];function Be(e,t){if(1&e&&m.Ob(0,"wj-flex-chart-axis",12),2&e){var i=t.ngIf;m.jc("position",i.position||"Right")("title",i.title)("format",i.format)("min",i.min)("max",i.max)("axisLine",i.axisLine||!1)}}function ze(e,t){if(1&e&&(m.Tb(0,"wj-flex-chart-series",10),m.Cc(1,Be,1,6,"wj-flex-chart-axis",11),m.Sb()),2&e){var i=t.$implicit;m.jc("name",i.name||i.binding)("binding",i.binding)("chartType",i.chartType)("tooltipContent",i.tooltipContent)("symbolSize",i.symbolSize)("visibility",i.visisbility||0),m.Bb(1),m.jc("ngIf",i.secondaryAxis)}}function Ve(e,t){if(1&e&&m.Ob(0,"wj-flex-chart-axis",13),2&e){var i=t.ngIf;m.jc("position",i.position||"Bottom")("axisLine",i.axisLine)("title",i.title)("format",i.format)("min",i.min)("max",i.max)("binding",i.binding)}}function He(e,t){if(1&e&&m.Ob(0,"wj-flex-chart-axis",14),2&e){var i=t.ngIf;m.jc("position",i.position||"Left")("axisLine",i.axisLine)("title",i.title)("format",i.format)("min",i.min)("max",i.max)("binding",i.binding)}}function Xe(e,t){1&e&&m.Ob(0,"wj-flex-chart-axis",24),2&e&&m.jc("axisLine",t.ngIf.axisLine||!1)}function Ge(e,t){if(1&e&&(m.Tb(0,"wj-flex-chart-series",22),m.Cc(1,Xe,1,1,"wj-flex-chart-axis",23),m.Sb()),2&e){var i=t.$implicit,n=m.dc(2);m.jc("name",i.name||i.binding)("binding",i.binding)("chartType",i.chartType||n.ChartType.Line)("tooltipContent",i.tooltipContent)("symbolSize",i.symbolSize),m.Bb(1),m.jc("ngIf",i.secondaryAxis)}}function We(e,t){1&e&&m.Ob(0,"wj-flex-chart-axis",25),2&e&&m.jc("binding",t.ngIf.binding)}function Ye(e,t){1&e&&m.Ob(0,"wj-flex-chart-axis",26)}function Ue(e,t){if(1&e){var i=m.Ub();m.Tb(0,"wj-flex-chart",15),m.Cc(1,Ge,2,6,"wj-flex-chart-series",16),m.Ob(2,"wj-flex-chart-legend",17),m.Cc(3,We,1,1,"wj-flex-chart-axis",18),m.Cc(4,Ye,1,0,"wj-flex-chart-axis",19),m.Tb(5,"wj-flex-chart-range-selector",20,21),m.bc("rangeChanged",(function(){m.vc(i);var e=m.sc(6);return m.dc().rangeChanged(e)})),m.Sb(),m.Sb()}if(2&e){var n=m.dc();m.jc("itemsSource",n.componentDataModel)("bindingX",n.properties.bindingX)("palette",n.palette),m.Bb(1),m.jc("ngForOf",n.properties.series),m.Bb(2),m.jc("ngIf",n.properties.yAxis),m.Bb(1),m.jc("ngIf",!n.properties.yAxis),m.Bb(1),m.jc("seamless",!0)}}var qe=function(e){return{active:e}};function Ke(e,t){if(1&e){var i=m.Ub();m.Tb(0,"button",35),m.bc("click",(function(){m.vc(i);var e=t.$implicit;return m.dc(2).setRange(e)})),m.Ec(1),m.Sb()}if(2&e){var n=t.$implicit,r=m.dc(2);m.jc("ngClass",m.nc(2,qe,r.rangeData.selectedRange===n)),m.Bb(1),m.Fc(n)}}function $e(e,t){if(1&e){var i=m.Ub();m.Tb(0,"form",27),m.Tb(1,"div",28),m.Tb(2,"div",29),m.Cc(3,Ke,2,4,"button",30),m.Sb(),m.Tb(4,"label",31),m.Ec(5,"From:"),m.Sb(),m.Tb(6,"input",32),m.bc("ngModelChange",(function(e){return m.vc(i),m.dc().rangeData.dateMin=e}))("change",(function(){return m.vc(i),m.dc().onRangeDateSelect()})),m.Sb(),m.Tb(7,"label",33),m.Ec(8,"To:"),m.Sb(),m.Tb(9,"input",34),m.bc("ngModelChange",(function(e){return m.vc(i),m.dc().rangeData.dateMax=e}))("change",(function(){return m.vc(i),m.dc().onRangeDateSelect()})),m.Sb(),m.Sb(),m.Sb()}if(2&e){var n=m.dc();m.Bb(3),m.jc("ngForOf",n.rangeData.ranges),m.Bb(3),m.jc("ngModel",n.rangeData.dateMin),m.Bb(3),m.jc("ngModel",n.rangeData.dateMax)}}var Je={name:"vendor-chart",packageName:"vendor",label:"Chart",category:"Data",description:"Chart component",itemProperties:Te,component:function(e){function t(t){var i=e.call(this)||this;return i.dialogService=t,i.ChartType=_.ChartType,i.Stacking=_.Stacking,i.rangeData={selectedRange:null,ranges:["5D","3M","6M","1Y","3Y","5Y","Max"],dateMin:null,dateMax:null},i.palette=_.Palettes.standard,i}return Object(ye.d)(t,e),t.prototype.ngOnInit=function(){var t=this;return this.setChartType(),this.properties.hasRangeSelector&&this.chart.itemsSourceChanging.addHandler((function(){t.componentDataModel.length&&(t.rangeData.dateMin=Object(Se.d)(t.componentDataModel[t.componentDataModel.length-1].Date,"yyyy-MM-dd"),t.rangeData.dateMax=Object(Se.d)(t.componentDataModel[0].Date,"yyyy-MM-dd"),t.updateYScale())})),this.properties.rowTooltip&&(this.chart.tooltip.content=function(e){var i=t.properties.bindingX,n=e.item[i];return i+": <b>"+Object(Se.f)(n)+"</b><br/>"+t.properties.series.map((function(t){var i=e.item[t.binding],n=t.name;return i instanceof Date?n+": <b>"+Object(we.dateToString)(i)+"</b>":"number"==typeof i?n+": <b>"+i.toFixed()+"</b>":n+": <b>"+(null==i?"":i)+"</b>"})).join("<br/>")}),e.prototype.ngOnInit.call(this)},t.prototype.rangeChanged=function(e){var t,i=this.chart;i.beginUpdate(),i.axisX.min=e.min,i.axisX.max=e.max;var n=this.componentDataModel.findIndex((function(t){var i=Object(we.parseDatetimeOrNull)(t.Date);return!i||i.getTime()<=e.max})),r=this.componentDataModel.findIndex((function(t){var i=Object(we.parseDatetimeOrNull)(t.Date);return!i||i.getTime()<=e.min}));-1===r&&(r=this.componentDataModel.length-1);var o=this.componentDataModel.slice(n,r),s=this.properties.series.filter((function(e){return!e.secondaryAxis}));t=this.getSeriesMinMax(s,o),i.axisY.min=t[0],i.axisY.max=t[1];var a=this.properties.series.filter((function(e){return e.secondaryAxis})),l=a.find((function(e){return"object"==typeof e.secondaryAxis})),c=this.getSeriesMinMax(a,o),h=c[0],u=c[1];a.forEach((function(e){!0===e.secondaryAxis&&(e.secondaryAxis=l),"object"==typeof e.secondaryAxis&&(e.secondaryAxis.min=h,e.secondaryAxis.max=u)})),this.rangeData.dateMin=Object(Se.d)(new Date(e.min),"yyyy-MM-dd"),this.rangeData.dateMax=Object(Se.d)(new Date(e.max),"yyyy-MM-dd"),i.endUpdate()},t.prototype.setRange=function(e){var t=this.properties.bindingX,i=new Date;if(this.rangeData.dateMax=Object(Se.d)(i,"yyyy-MM-dd"),this.selector.max=i.getTime(),this.rangeData.selectedRange=e,"Max"===e)this.selector.min=this.componentDataModel[this.componentDataModel.length-1][t].getTime();else{switch(e){case"5D":i.setDate(i.getDate()-5);break;case"3M":i.setMonth(i.getMonth()-3);break;case"6M":i.setMonth(i.getMonth()-6);break;case"1Y":i.setFullYear(i.getFullYear()-1);break;case"3Y":i.setFullYear(i.getFullYear()-3);break;case"5Y":i.setFullYear(i.getFullYear()-5)}var n=(this.componentDataModel.find((function(e){var n=Object(we.parseDatetimeOrNull)(e[t]);return!n||n.getTime()<=i.getTime()}))||this.componentDataModel[this.componentDataModel.length-1])[t];this.rangeData.dateMin=Object(Se.d)(n,"yyyy-MM-dd"),this.selector.min=n.getTime()}},t.prototype.onRangeDateSelect=function(){if(this.rangeData.dateMin&&this.rangeData.dateMax){var e=new Date(this.rangeData.dateMin),t=new Date(this.rangeData.dateMax),i=this.componentDataModel.find((function(t){var i=Object(we.parseDatetimeOrNull)(t.Date);return!i||i.getTime()<=e.getTime()}))||this.componentDataModel[this.componentDataModel.length-1];this.selector.min=i.Date.getTime();var n=this.componentDataModel.find((function(e){var i=Object(we.parseDatetimeOrNull)(e.Date);return!i||i.getTime()<=t.getTime()}))||this.componentDataModel[0];this.selector.max=n.Date.getTime()}},t.prototype.onSelection=function(){this.emitEvent(this.properties.onSelect,this.chart.collectionView.currentItem)},t.prototype.toggleSerie=function(e){e.visisbility=e.visisbility===_.SeriesVisibility.Hidden?_.SeriesVisibility.Visible:_.SeriesVisibility.Hidden},t.prototype.showSettings=function(){var e=this,t=this.dialogService.open(ke);t.config=Object(ye.a)(Object(ye.a)({},this.properties),{fields:this.getFields()}),t.init.pipe(Object(ve.a)((function(){return t.component.save}))).subscribe((function(t){e.uiModel.itemProperties=Object(ye.a)(Object(ye.a)({},e.uiModel.itemProperties),t),e.setChartType(),e.properties.hasRangeSelector&&e.updateYScale()}))},t.prototype.getFields=function(){if(Array.isArray(this.componentDataModel)&&this.componentDataModel.length)return Object.keys(this.componentDataModel[0])},t.prototype.getSeriesMinMax=function(e,t){var i=function(e){var t;return e.chartType===Oe.Bubble?null===(t=e.binding)||void 0===t?void 0:t.split(",")[0]:e.binding},n=Object(xe.min)(e.map((function(e){var n=i(e);return Object(xe.min)(t,n)}))),r=Object(xe.max)(e.map((function(e){var n=i(e);return Object(xe.max)(t,n)})));return[n-.02*n,r+.02*r]},t.prototype.setChartType=function(){this.properties.series&&this.properties.series.some((function(e){return[_.ChartType.Bubble,Oe.Bubble].includes(e.chartType)}))&&(this.properties.chartType=_.ChartType.Bubble)},t.prototype.updateYScale=function(){var e,t=this.properties.series.filter((function(e){return!e.secondaryAxis}));e=this.getSeriesMinMax(t,this.componentDataModel),this.chart.axisY.min=e[0],this.chart.axisY.max=e[1]},t.\u0275fac=function(e){return new(e||t)(m.Nb(Ce.b))},t.\u0275cmp=m.Hb({type:t,selectors:[["dc-chart"]],viewQuery:function(e,t){var i;1&e&&(m.Ac(Fe,!0),m.Jc(Re,!0)),2&e&&(m.rc(i=m.cc())&&(t.chart=i.first),m.rc(i=m.cc())&&(t.selector=i.first))},features:[m.yb],decls:10,vars:14,consts:[[1,"d-flex","flex-column","h-100","w-100","mb-0","pb-0","position-relative"],[1,"fa","fa-cog","fa-lg","cursor-pointer","position-absolute","p-2",3,"click"],[1,"w-100","flex-fill","mb-3","p-0",3,"chartType","header","bindingX","selectionMode","stacking","itemsSource","palette","legendToggle","selectionChanged"],["chart",""],[3,"position"],[3,"name","binding","chartType","tooltipContent","symbolSize","visibility",4,"ngFor","ngForOf"],["minorTickMarks","Outside","wjProperty","axisX",3,"position","axisLine","title","format","min","max","binding",4,"ngIf"],["wjProperty","axisY",3,"position","axisLine","title","format","min","max","binding",4,"ngIf"],["class","chart-selector m-0 p-0","plotMargin","NaN 30 NaN 30",3,"itemsSource","bindingX","palette",4,"ngIf"],["class","form-inline",4,"ngIf"],[3,"name","binding","chartType","tooltipContent","symbolSize","visibility"],["wjProperty","axisY",3,"position","title","format","min","max","axisLine",4,"ngIf"],["wjProperty","axisY",3,"position","title","format","min","max","axisLine"],["minorTickMarks","Outside","wjProperty","axisX",3,"position","axisLine","title","format","min","max","binding"],["wjProperty","axisY",3,"position","axisLine","title","format","min","max","binding"],["plotMargin","NaN 30 NaN 30",1,"chart-selector","m-0","p-0",3,"itemsSource","bindingX","palette"],[3,"name","binding","chartType","tooltipContent","symbolSize",4,"ngFor","ngForOf"],["position","None"],["wjProperty","axisY","position","None",3,"binding",4,"ngIf"],["wjProperty","axisY","position","None",4,"ngIf"],[3,"seamless","rangeChanged"],["selector",""],[3,"name","binding","chartType","tooltipContent","symbolSize"],["wjProperty","axisY","position","None",3,"axisLine",4,"ngIf"],["wjProperty","axisY","position","None",3,"axisLine"],["wjProperty","axisY","position","None",3,"binding"],["wjProperty","axisY","position","None"],[1,"form-inline"],[1,"form-group","mt-2","w-100"],[1,"btn-group"],["class","btn btn-secondary btn-sm","type","button",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ml-auto","mx-1"],["type","date","name","date-min",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[1,"mx-1"],["type","date","name","date-max",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngClass","click"]],template:function(e,t){1&e&&(m.Tb(0,"div",0),m.Tb(1,"i",1),m.bc("click",(function(){return t.showSettings()})),m.Sb(),m.Tb(2,"wj-flex-chart",2,3),m.bc("selectionChanged",(function(){return t.onSelection()})),m.Ob(4,"wj-flex-chart-legend",4),m.Cc(5,ze,2,7,"wj-flex-chart-series",5),m.Cc(6,Ve,1,7,"wj-flex-chart-axis",6),m.Cc(7,He,1,7,"wj-flex-chart-axis",7),m.Sb(),m.Cc(8,Ue,7,7,"wj-flex-chart",8),m.Cc(9,$e,10,3,"form",9),m.Sb()),2&e&&(m.Bb(2),m.jc("chartType",t.properties.chartType||t.ChartType.Line)("header",t.properties.header)("bindingX",t.properties.bindingX)("selectionMode",t.properties.selectionMode||0)("stacking",t.properties.stacking||t.Stacking.None)("itemsSource",t.componentDataModel)("palette",t.palette)("legendToggle",!0),m.Bb(2),m.jc("position",t.properties.legendPosition||"None"),m.Bb(1),m.jc("ngForOf",t.properties.series),m.Bb(1),m.jc("ngIf",t.properties.xAxis),m.Bb(1),m.jc("ngIf",t.properties.yAxis),m.Bb(1),m.jc("ngIf",t.properties.hasRangeSelector),m.Bb(1),m.jc("ngIf",t.properties.hasRangeSelector))},directives:[C,M,c.l,c.m,D,N,he,h.t,h.j,h.k,h.b,h.i,h.l,c.k],styles:[".chart-selector[_ngcontent-%COMP%]{height:90px}.legend-item[_ngcontent-%COMP%]{display:inline-block;height:10px;width:10px}i.fa[_ngcontent-%COMP%]{right:0}"]}),t}(me.a),example:[{title:"Chart example",uiModel:'\n  <vendor-chart binding="$.chartData" header="Countries"\n    bindingX="country" selectionMode="Point" legendPosition="Bottom">\n    <series name="2014" binding="2014"/>\n    <series name="2015" binding="2015"/>\n    <series name="2016" binding="2016"/>\n  </vendor-chart>\n  ',dataModel:{chartData:[{country:"United States",2014:17348075,2015:18036650,2016:18624450},{country:"China",2014:10356508,2015:11181556,2016:11232110},{country:"Japan",2014:4602367,2015:4124211,2016:4936540},{country:"Germany",2014:3874437,2015:3365293,2016:3479230},{country:"United Kingdom",2014:2950039,2015:2858482,2016:2629190},{country:"France",2014:2833687,2015:2420163,2016:2466470},{country:"India",2014:2051228,2015:2073002,2016:2263790},{country:"Italy",2014:2147744,2015:1815759,2016:1850740}]},description:"Default chart type is <i>Bar</i>. Try to set <i>chartType</i> property, options you can find in table below."}],parseUIModel:function(e){var t={bindingX:e.attrs.bindingX,hasRangeSelector:"true"===e.attrs.hasRangeSelector};return!e.attrs.columns&&e.childNodes&&(e.childNodes.forEach((function(e){var i=Object(me.u)(e);if("series"===i.type){var n=Object(ye.a)({},i.attrs);t.series=t.series||[],t.series.push(n)}})),e.childNodes=null),{type:"vendor-grid",itemProperties:t}},children:[{tag:"series",properties:[{name:"binding",label:"Series binding"},{name:"name"},{name:"secondaryAxis",values:[!0,!1]},{name:"chartType",values:Object(Le.b)(_.ChartType)},{name:"tooltipContent"},{name:"symbolSize"},{name:"visisbility",values:Object(Le.b)(_.SeriesVisibility)}]}],propertiesDescriptor:[["chartType",{name:"chartType",label:"Type",category:me.j.Main,values:Object(Le.b)(_.ChartType)}],["hasRangeSelector",{name:"hasRangeSelector",label:"Has range selector",category:me.j.Main,values:[!0,!1]}],["selectionMode",{name:"selectionMode",values:Object(Le.b)(_.SelectionMode)}],["legendPosition",{name:"legendPosition",values:Object(Le.b)(_.Position)}],["stacking",{name:"stacking",values:Object(Le.b)(_.Stacking)}]]},Qe=i("KYMM"),Ze=["treeview"],et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),t.prototype.checkedItems=function(e){this.emitEvent(this.properties.onCheck,{checked:e.checkedItems})},t.\u0275fac=function(e){return tt(e||t)},t.\u0275cmp=m.Hb({type:t,selectors:[["dc-treeview"]],viewQuery:function(e,t){var i;1&e&&m.Ac(Ze,!0),2&e&&m.rc(i=m.cc())&&(t.treeview=i.first)},features:[m.yb],decls:2,vars:5,consts:[[3,"itemsSource","displayMemberPath","childItemsPath","showCheckboxes","checkedItems","checkedItemsChanged"],["treeview",""]],template:function(e,t){if(1&e){var i=m.Ub();m.Tb(0,"wj-tree-view",0,1),m.bc("checkedItemsChanged",(function(){m.vc(i);var e=m.sc(1);return t.checkedItems(e)})),m.Sb()}2&e&&m.jc("itemsSource",t.componentDataModel)("displayMemberPath",t.properties.displayMemberPath)("childItemsPath",t.properties.childItemsPath)("showCheckboxes",!0)("checkedItems",t.properties.checkedItems)},directives:[pe.b],styles:[""]}),t}(me.a),tt=m.Vb(et),it={name:"vendor-treeview",packageName:"vendor",label:"Treeview",category:"Data",description:"Treeview component",itemProperties:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),Object(ye.c)([Object(me.r)({description:"Defines the name of the property in the items that contains the text to be displayed in the tree nodes.",example:"label"}),Object(ye.f)("design:type",String)],t.prototype,"displayMemberPath",void 0),Object(ye.c)([Object(me.r)({description:"Defines the name of the property in the items that contains the array of child nodes.",example:"children"}),Object(ye.f)("design:type",String)],t.prototype,"childItemsPath",void 0),Object(ye.c)([Object(me.r)({description:"On check handler",example:"onItemsCheck",type:me.i.EVENT}),Object(ye.f)("design:type",String)],t.prototype,"onCheck",void 0),t}(me.e),component:et,example:{title:"Treeview example",uiModel:'\n  <vendor-treeview binding="$.treeData" displayMemberPath="name" childItemsPath="children"></vendor-treeview>\n  ',dataModel:{treeData:[{name:"United States",children:[{name:"New York"},{name:"Los Angeles"},{name:"San Francisco"},{name:"Chicago"}]},{name:"United Kingdom",children:[{name:"London"},{name:"Liverpool"},{name:"Manchester"}]},{name:"China",children:[{name:"Beijing"},{name:"Chongqing"},{name:"Shanghai"}]}]}},children:!1},nt=i("lMX+"),rt=["grid"],ot=["pop"];function st(e,t){1&e&&(m.Tb(0,"div",24),m.Tb(1,"div",25),m.Tb(2,"span",26),m.Ec(3,"Loading..."),m.Sb(),m.Sb(),m.Sb())}function at(e,t){if(1&e){var i=m.Ub();m.Tb(0,"div",6),m.Cc(1,st,4,0,"div",7),m.Tb(2,"div",8),m.Tb(3,"div",9),m.Tb(4,"div",10),m.Ob(5,"i",11),m.Sb(),m.Sb(),m.Tb(6,"input",12),m.bc("input",(function(e){return m.vc(i),m.dc().onSearch(e.target.value)})),m.Sb(),m.Sb(),m.Tb(7,"wj-flex-grid",13,14),m.bc("sortingColumn",(function(e){m.vc(i);var t=m.sc(8);return m.dc().sortingHandler(t,e)}))("initialized",(function(){m.vc(i);var e=m.sc(8);return m.dc().onGridInit(e)})),m.Ob(9,"wj-flex-grid-column",15),m.Ob(10,"wj-flex-grid-column",16),m.Ob(11,"wj-flex-grid-column",17),m.Sb(),m.Tb(12,"div",18),m.Tb(13,"div",19),m.Tb(14,"span",20),m.Ec(15),m.Sb(),m.Sb(),m.Sb(),m.Tb(16,"div",21),m.Tb(17,"button",22),m.bc("click",(function(){return m.vc(i),m.dc().onClear()})),m.Ec(18,"Clear"),m.Sb(),m.Tb(19,"button",23),m.bc("click",(function(){return m.vc(i),m.dc().onApply()})),m.Ec(20,"Apply"),m.Sb(),m.Tb(21,"button",22),m.bc("click",(function(){return m.vc(i),m.dc(),m.sc(2).hide()})),m.Ec(22,"Close"),m.Sb(),m.Sb(),m.Sb()}if(2&e){var n=m.dc();m.Bb(1),m.jc("ngIf",n.loading),m.Bb(6),m.jc("allowDelete",!1)("allowAddNew",!1)("selectionMode",3)("itemsSource",n.itemsSource),m.Bb(2),m.jc("isReadOnly",!1)("width",50),m.Bb(1),m.jc("isReadOnly",!0)("dataType",n.properties.field.dataType)("format",n.properties.field.displayFormat),m.Bb(1),m.jc("isReadOnly",!0)("width",80),m.Bb(4),m.Gc("Rows: ",n.rows,"")}}var lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=!0,t}return Object(ye.d)(t,e),t.prototype.ngOnInit=function(){return this.initCollection(),e.prototype.ngOnInit.call(this)},t.prototype.onShown=function(){return Object(ye.b)(this,void 0,void 0,(function(){return Object(ye.e)(this,(function(e){this.loading=!0;try{this._collectionView.sourceCollection=Object(ye.g)(this._collectionView.sourceCollection),this.emitEvent(this.properties.onShow)}catch(t){console.error(t)}finally{this.loading=!1}return[2]}))}))},Object.defineProperty(t.prototype,"rows",{get:function(){return this._collectionView?this._collectionView.items.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){var e=this,t=Object(me.s)(this.dataModel,this.properties.selectedPath),i=this.properties.field.bindingName,n=i;return t&&t.length&&(i=(n=i+": "+t.map((function(e){return e})).join(", ")).length>50?n.substring(0,47)+"...":n),this.title!==n&&(this.selected=t,window.requestAnimationFrame((function(){e.title=n}))),i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){var e=this;if(this.componentDataModel===this._componentDataModel)return this._collectionView;this._componentDataModel=this.componentDataModel;var t=this.componentDataModel;return window.requestAnimationFrame((function(){e._collectionView.sourceCollection=t||[],t&&e.setFooter(e.grid)})),this._collectionView},enumerable:!1,configurable:!0}),t.prototype.sortingHandler=function(e,t){var i=e.columns[t.col],n=this._collectionView.sortDescriptions,r=new B.SortDescription(i.binding,"+"!==i.currentSort);this._collectionView.deferUpdate((function(){n.clear(),n.push(new B.SortDescription("applied",!1)),n.push(r)})),t.cancel=!0},t.prototype.onGridInit=function(e){e.columnFooters.rows.push(new nt.Row({count:0})),e.groupHeaderFormat="<b>{value}</b>",e.formatItem.addHandler((function(e,t){var i=t.panel,n=i.rows[t.row].dataItem,r=i.columns[t.col].binding;i.cellType===nt.CellType.Cell&&n&&"value"===r&&null===n[r]&&(t.cell.innerHTML="[NULL]")})),e.hostElement.addEventListener("click",(function(e){"INPUT"===e.target.tagName&&e.stopPropagation()})),this.selected&&this._collectionView.sortDescriptions.push(new B.SortDescription("applied",!1))},t.prototype.onSearch=function(e){this.search=e,this._collectionView.refresh()},t.prototype.onHidden=function(){},t.prototype.onApply=function(){this.selected=this._collectionView.items.filter((function(e){return e.selected})).map((function(e){return e.value})),this.selected.length||(this.selected=null),this.pop.hide(),Object(me.t)(this.dataModel,this.properties.selectedPath,this.selected),this.emitEvent(this.properties.onApply,this.selected)},t.prototype.onClear=function(){this.selected=null,this.componentDataModel.forEach((function(e){return e.selected=!1})),this.onHidden(),this.pop.hide(),Object(me.t)(this.dataModel,this.properties.selectedPath,this.selected),this.emitEvent(this.properties.onApply,this.selected)},t.prototype.setFooter=function(e){if(e)try{e.columnFooters.setCellData(0,2,this._collectionView.sourceCollection.reduce((function(e,t){return e+t.count}),0))}catch(t){}},t.prototype.initCollection=function(){var e=this;this._collectionView=new B.CollectionView,this._collectionView.sourceCollection=[],this._collectionView.filter=function(t){var i=t.value,n=e.properties.field.dataType;return n&&"Number"===n.toString()&&(i=t.value.toString()),!e.search||-1!==i.toLowerCase().indexOf(e.search.trim().toLowerCase())};var t=new B.PropertyGroupDescription("applied",(function(t,i){return e.isSelected(t.value)?"Applied items":"Select items"}));this._collectionView.groupDescriptions.push(t),this._collectionView.sortConverter=function(t,i,n){return"applied"===t.property&&e.selected?e.isSelected(i.value):n}},t.prototype.isSelected=function(e){return!!this.selected&&(e instanceof Date?this.selected.some((function(t){return t.getTime()===e.getTime()})):this.selected.includes(e))},t.\u0275fac=function(e){return ct(e||t)},t.\u0275cmp=m.Hb({type:t,selectors:[["dc-filter"]],viewQuery:function(e,t){var i;1&e&&(m.Jc(rt,!0),m.Jc(ot,!0)),2&e&&(m.rc(i=m.cc())&&(t.grid=i.first),m.rc(i=m.cc())&&(t.pop=i.first))},features:[m.yb],decls:8,vars:4,consts:[[1,"d-flex","border","border-secondary","rounded"],["containerClass","filter-component","placement","bottom",1,"d-flex",3,"popover","outsideClick","onHidden","onShown"],["pop","bs-popover"],[1,"col-form-label","px-1","cursor-pointer",3,"title"],[1,"fa","fa-angle-down"],["popTemplate",""],[1,"container","p-0","h-100","d-flex","flex-column"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","placeholder","Search",1,"form-control","form-control-sm",3,"input"],["headersVisibility","Column",1,"h-100","flex-fill",3,"allowDelete","allowAddNew","selectionMode","itemsSource","sortingColumn","initialized"],["grid",""],["header","?","binding","selected","dataType","Boolean",3,"isReadOnly","width"],["header","Value","binding","value","width","*",3,"isReadOnly","dataType","format"],["header","Count","binding","count","dataType","Number",3,"isReadOnly","width"],[1,"row","flex-column","m-0","my-2"],[1,"d-flex","justify-content-between","mb-2"],[1,"ml-auto"],[1,"d-flex"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","ml-auto","mr-2",3,"click"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){if(1&e&&(m.Tb(0,"div",0),m.Tb(1,"div",1,2),m.bc("onHidden",(function(){return t.onHidden()}))("onShown",(function(){return t.onShown()})),m.Tb(3,"label",3),m.Ec(4),m.Ob(5,"i",4),m.Sb(),m.Sb(),m.Sb(),m.Cc(6,at,23,13,"ng-template",null,5,m.Dc)),2&e){var i=m.sc(7);m.Bb(1),m.jc("popover",i)("outsideClick",!1),m.Bb(2),m.jc("title",t.title),m.Bb(1),m.Gc("",t.label," ")}},directives:[ge.a,c.m,p.a,p.c],styles:['[_ngcontent-%COMP%]:root{--bg:#fff;--body-bg:#e4e5e6;--header-bg:#ebedef;--color:#4f5d73;--border-color:#c4c9d0;--wj-alt:#f7f7f7;--form-input-bg:#fff;--form-input-color:#768192;--nav-link-color:#8a93a2;--secondary-color:#c4c9d0;--opacity:0.05;--hover:"#f0f3f5"}  .filter-component{height:450px;min-width:450px}  .filter-component .popover-content.popover-body{background-color:var(--bg);color:var(--color);height:100%;padding:.5rem}.fa-filter[_ngcontent-%COMP%]{color:#8a93a2}.fa-filter.selected[_ngcontent-%COMP%]{color:#636f83}']}),t}(me.a),ct=m.Vb(lt),ht={name:"vendor-filter",label:"Filter",packageName:"vendor",parseUIModel:function(e){var t={};if(!e.attrs.columns&&e.childNodes&&e.childNodes.length){var i=Object(me.u)(e.childNodes[0]);t.field=Object(ye.a)({},i.attrs),e.childNodes=null}return{type:"vendor-grid",itemProperties:t}},category:"Custom Controls",description:"Filter component",itemProperties:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),Object(ye.c)([Object(me.r)({description:"Displays properties data.",example:'{bindingName: "prop"}'}),Object(ye.f)("design:type",Object)],t.prototype,"field",void 0),Object(ye.c)([Object(me.r)({description:"Path for filter value in dataModel.",example:"$.selectedFilter"}),Object(ye.f)("design:type",String)],t.prototype,"selectedPath",void 0),Object(ye.c)([Object(me.r)({description:"On show handler",example:"onShowFilter",type:me.i.EVENT}),Object(ye.f)("design:type",String)],t.prototype,"onShow",void 0),Object(ye.c)([Object(me.r)({description:"On apply handler",example:"onApplyFilter",type:me.i.EVENT}),Object(ye.f)("design:type",String)],t.prototype,"onApply",void 0),t}(me.e),component:lt,example:{title:"Text compoent example",uiModel:'\n  <vendor-filter binding="$.countries" selectedPath="$.selectedFilter">\n    <field bindingName="Country"/>\n  </vendor-filter>\n  ',dataModel:{countries:[{value:"Ukraine",count:10,selected:!1},{value:"USA",count:16,selected:!1},{value:"United Kingdom",count:12,selected:!1}]}}},ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.palette=_.Palettes.standard,t}return Object(ye.d)(t,e),t.prototype.onSelection=function(e){this.emitEvent(this.properties.onSelect,e.collectionView.currentItem)},t.\u0275fac=function(e){return dt(e||t)},t.\u0275cmp=m.Hb({type:t,selectors:[["app-pie-chart"]],features:[m.yb],decls:3,vars:15,consts:[[3,"itemsSource","binding","bindingName","innerRadius","offset","startAngle","reversed","header","footer","selectionMode","selectedItemPosition","selectedItemOffset","isAnimated","palette","selectionChanged"],["pie",""],[3,"position"]],template:function(e,t){if(1&e){var i=m.Ub();m.Tb(0,"wj-flex-pie",0,1),m.bc("selectionChanged",(function(){m.vc(i);var e=m.sc(1);return t.onSelection(e)})),m.Ob(2,"wj-flex-chart-legend",2),m.Sb()}2&e&&(m.jc("itemsSource",t.componentDataModel)("binding",t.properties.value)("bindingName",t.properties.bindingName)("innerRadius",t.properties.innerRadius)("offset",t.properties.offset||0)("startAngle",t.properties.startAngle||0)("reversed",t.properties.reversed)("header",t.properties.header)("footer",t.properties.footer)("selectionMode",t.properties.selectionMode||0)("selectedItemPosition",t.properties.selectedPosition||"Auto")("selectedItemOffset",t.properties.selectedOffset)("isAnimated",t.properties.isAnimated)("palette",t.palette),m.Bb(2),m.jc("position",t.properties.legendPosition||"Auto"))},directives:[j,M],encapsulation:2}),t}(me.a),dt=m.Vb(ut),pt={name:"vendor-pie-chart",packageName:"vendor",label:"Pie Chart",category:"Data",description:"Pie Chart component",itemProperties:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),Object(ye.c)([Object(me.r)({description:"Chart binding name property",example:"name"}),Object(ye.f)("design:type",String)],t.prototype,"bindingName",void 0),Object(ye.c)([Object(me.r)({description:"Chart binding value property",example:"value"}),Object(ye.f)("design:type",String)],t.prototype,"value",void 0),Object(ye.c)([Object(me.r)({description:"Specifies the control's inner radius to support donut charts.",example:"20"}),Object(ye.f)("design:type",Number)],t.prototype,"innerRadius",void 0),Object(ye.c)([Object(me.r)({description:"Specifies the offset of the pie slices from the center of the control.",example:"20"}),Object(ye.f)("design:type",Number)],t.prototype,"offset",void 0),Object(ye.c)([Object(me.r)({description:"Starting at the nine o'clock position, specifies the angle to start drawing pie slices.",example:"90"}),Object(ye.f)("design:type",Number)],t.prototype,"startAngle",void 0),Object(ye.c)([Object(me.r)({description:"Determines whether the control should draw pie slices clockwise (false) or counterclockwise (true).",example:"false"}),Object(ye.f)("design:type",Boolean)],t.prototype,"reversed",void 0),Object(ye.c)([Object(me.r)({description:"Chart footer",example:"chart footer"}),Object(ye.f)("design:type",String)],t.prototype,"footer",void 0),Object(ye.c)([Object(me.r)({description:"Specifies the offset of the selected pie slice from the center of the control.",example:"30"}),Object(ye.f)("design:type",Number)],t.prototype,"selectedOffset",void 0),Object(ye.c)([Object(me.r)({description:"Specifies the position of the selected pie slice. Options: Top, Bottom, Left, Right, and None (default).",example:"Top"}),Object(ye.f)("design:type",Number)],t.prototype,"selectedPosition",void 0),Object(ye.c)([Object(me.r)({description:"Determines whether or not to animate the selection.",example:"true",defaultValue:"false"}),Object(ye.f)("design:type",Boolean)],t.prototype,"isAnimated",void 0),t}(je),component:ut,parseUIModel:function(e){var t={value:e.attrs.value};return t.isAnimated="true"===e.attrs.isAnimated,{type:"vendor-pie-chart",itemProperties:t}},example:{title:"Pie chart example",uiModel:'\n  <vendor-pie-chart binding="$.chartData" selectionMode="Point" selectedPosition="Top" header="Countries" bindingName="country" value="value"></vendor-pie-chart>\n  ',dataModel:{chartData:[{country:"United States",value:17348075},{country:"China",value:10356508},{country:"Japan",value:4602367},{country:"Germany",value:3874437},{country:"United Kingdom",value:2950039},{country:"France",value:2833687},{country:"India",value:2051228},{country:"Italy",value:2147744}]}},children:!1},ft=i("TwVa"),gt=i("M0ag"),mt=i("Czp8"),bt=i("vg9S"),_t=i("4CEX"),yt=i("LXVg"),vt=i("SvZ3"),xt={"inner-join":ft.JoinType.Inner,"left-join":ft.JoinType.Left,"right-join":ft.JoinType.Right,"full-join":ft.JoinType.Full},wt=i("dDP7"),St=i("OLrf"),Ct=i("s90X"),Ot=i("oksU");function jt(e,t){if(1&e&&m.Ob(0,"i"),2&e){var i=m.dc(2);m.Db(i.properties.titleIcon)}}function Tt(e,t){if(1&e&&m.Ob(0,"dc-text",25),2&e){var i=m.dc(2);m.jc("uiModel",i.titleConfig)}}function Nt(e,t){if(1&e){var i=m.Ub();m.Tb(0,"app-filters",26),m.bc("changed",(function(e){return m.vc(i),m.dc(2).onFiltersChange(e)})),m.Sb()}if(2&e){var n=m.dc(2);m.jc("initFilters",n.properties.initFilters)("fields",n.columnsList)("defaultFilters",n.defaultFilters)("currentFilters",n.filters)("dataObject",n.dataObject)("queryData",n.queryData)("connection",n.properties.tableSource.connection)}}function At(e,t){if(1&e){var i=m.Ub();m.Tb(0,"button",27),m.bc("click",(function(){return m.vc(i),m.dc(2).onAdd()})),m.Ec(1,"Add"),m.Sb()}}function Mt(e,t){if(1&e){var i=m.Ub();m.Tb(0,"ul",32),m.Tb(1,"li",33),m.Tb(2,"a",34),m.bc("click",(function(){return m.vc(i),m.dc(3).exportToExcel()})),m.Ec(3,"Export to Excel"),m.Sb(),m.Sb(),m.Tb(4,"li",33),m.Tb(5,"a",34),m.bc("click",(function(){return m.vc(i),m.dc(3).exportToCSV()})),m.Ec(6,"Export to CSV"),m.Sb(),m.Sb(),m.Sb()}}function Et(e,t){1&e&&(m.Tb(0,"span",28),m.Tb(1,"button",29),m.Ob(2,"i",30),m.Sb(),m.Cc(3,Mt,7,0,"ul",31),m.Sb())}function Pt(e,t){if(1&e){var i=m.Ub();m.Tb(0,"button",35),m.bc("click",(function(){return m.vc(i),m.dc(2).openQueryManager()})),m.Ob(1,"i",36),m.Sb()}}function It(e,t){if(1&e&&(m.Tb(0,"div",17),m.Cc(1,jt,1,2,"i",18),m.Cc(2,Tt,1,1,"dc-text",19),m.Cc(3,Nt,1,7,"app-filters",20),m.Ob(4,"span",21),m.Cc(5,At,2,0,"button",22),m.Cc(6,Et,4,0,"span",23),m.Cc(7,Pt,2,0,"button",24),m.Sb()),2&e){var i=m.dc();m.Bb(1),m.jc("ngIf",i.properties.titleIcon),m.Bb(1),m.jc("ngIf",i.properties.title),m.Bb(1),m.jc("ngIf",i.properties.showHeaderRowFilter),m.Bb(2),m.jc("ngIf",i.properties.onAdd),m.Bb(1),m.jc("ngIf",i.properties.showMenu),m.Bb(1),m.jc("ngIf",i.properties.showQueryManager)}}function Dt(e,t){1&e&&(m.Tb(0,"div",37),m.Tb(1,"div",38),m.Tb(2,"span",39),m.Ec(3,"Loading..."),m.Sb(),m.Sb(),m.Sb())}function kt(e,t){if(1&e){var i=m.Ub();m.Tb(0,"app-filter",45),m.bc("apply",(function(e){m.vc(i);var t=m.dc(3).$implicit;return m.dc().onApply(e,t)})),m.Sb()}if(2&e){var n=m.dc(3).$implicit,r=m.dc();m.jc("field",n)("icon",!0)("dataObject",r.dataObject)("connection",r.properties.tableSource.connection)("currentFilters",r.filters)("queryData",r.queryData)}}function Lt(e,t){if(1&e&&(m.Tb(0,"div",43),m.Ec(1),m.Sb(),m.Cc(2,kt,1,6,"app-filter",44)),2&e){var i=m.dc(2).$implicit,n=m.dc();m.jc("title",n.getDefaultHeader(i)),m.Bb(1),m.Fc(n.getDefaultHeader(i)),m.Bb(1),m.jc("ngIf",!i.text)}}function Ft(e,t){1&e&&m.Cc(0,Lt,3,3,"ng-template",42),2&e&&m.jc("cellType","ColumnHeader")}function Rt(e,t){if(1&e&&(m.Tb(0,"a",47),m.Ec(1),m.Sb()),2&e){var i=t.item,n=m.dc(2).$implicit,r=m.dc();m.jc("routerLink",r.getLink(n,i))("queryParams",r.getColumnQueryParams(n,i)),m.Bb(1),m.Fc(n.text||i[n.bindingName])}}function Bt(e,t){1&e&&m.Cc(0,Rt,2,3,"ng-template",46)}function zt(e,t){if(1&e&&(m.Rb(0),m.Tb(1,"wj-flex-grid-column",40),m.Cc(2,Ft,1,1,void 0,41),m.Cc(3,Bt,1,0,void 0,41),m.Sb(),m.Qb()),2&e){var i=t.$implicit,n=m.dc();m.Bb(1),m.jc("header",n.getDefaultHeader(i))("binding",i.bindingName)("dataType",i.dataType||n.properties.dataType)("width",i.width||n.properties.colWidth||null)("format",i.displayFormat||n.properties.displayFormat)("dataMap",i.dataMap)("format",i.displayFormat)("isReadOnly",i.isReadOnly)("minWidth",i.minWidth)("maxWidth",i.maxWidth),m.Bb(1),m.jc("ngIf",n.properties.showGridFilter),m.Bb(1),m.jc("ngIf",i.link)}}function Vt(e,t){if(1&e&&m.Ob(0,"i",51),2&e){m.dc(2);var i=m.sc(22);m.jc("popover",i)}}function Ht(e,t){if(1&e&&(m.Tb(0,"div",48),m.Cc(1,Vt,1,1,"i",49),m.Tb(2,"span",50),m.Ec(3),m.ec(4,"number"),m.Sb(),m.Sb()),2&e){var i=m.dc();m.Bb(1),m.jc("ngIf",i.filters),m.Bb(2),m.Gc("Rows: ",m.fc(4,2,i.collectionView.items.length),"")}}function Xt(e,t){if(1&e&&(m.Tb(0,"li"),m.Tb(1,"b"),m.Ec(2),m.Sb(),m.Ec(3),m.Sb()),2&e){var i=t.$implicit;m.Bb(2),m.Fc(i.fieldName),m.Bb(1),m.Gc(": ",i.value," ")}}function Gt(e,t){if(1&e&&(m.Tb(0,"ul",53),m.Cc(1,Xt,4,2,"li",14),m.Sb()),2&e){var i=m.dc(2);m.Bb(1),m.jc("ngForOf",i.filtersList)}}function Wt(e,t){if(1&e&&(m.Tb(0,"h6"),m.Ec(1,"Applied Filters"),m.Sb(),m.Cc(2,Gt,2,1,"ul",52)),2&e){var i=m.dc();m.Bb(2),m.jc("ngIf",i.filters)}}var Yt=function(e){function t(t,i,n,r,o){var s=e.call(this,t,i,n)||this;return s.fileService=t,s.dialogService=i,s.authService=n,s.sqlService=r,s.notificationService=o,s.data=[],s.loading=!1,s.filters={},s}return Object(ye.d)(t,e),Object.defineProperty(t.prototype,"titleConfig",{get:function(){var e;return{type:"text",itemProperties:(e={text:this.properties.title},e["text-style"]=this.properties.titleStyle,e)}},enumerable:!1,configurable:!0}),t.prototype.saveData=function(){return Object(ye.b)(this,void 0,void 0,(function(){return Object(ye.e)(this,(function(e){return console.log("Save data =>",this.changedData,this.deletedData),[2]}))}))},t.prototype.ngOnInit=function(){var t;return Object(ye.b)(this,void 0,void 0,(function(){var i,n,r;return Object(ye.e)(this,(function(o){switch(o.label){case 0:return[4,e.prototype.ngOnInit.call(this)];case 1:return o.sent(),this.setQueryData(),this.properties.tableSource?(i=this.properties.tableSource.connection,n=this.properties.tableSource.name,r=Object(Se.x)(n),this.dataObject={schemaName:r[0],objectName:r[1]},this.localGridConfig=new yt.a(i+"-"+n,(null===(t=this.uiModel)||void 0===t?void 0:t.id)||"data-grid"),this.flex=bt.b.show,[4,this.loadData()]):[2];case 2:return o.sent(),[2]}}))}))},t.prototype.ngOnChanges=function(t){return Object(ye.b)(this,void 0,void 0,(function(){var i;return Object(ye.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.ngOnChanges.call(this,t)];case 1:return n.sent(),i=t.uiModel,JSON.stringify(null==i?void 0:i.previousValue.itemProperties)!==JSON.stringify(this.properties)&&this.loadData(),[2]}}))}))},t.prototype.refresh=function(){this.setQueryData(),this.loadData()},t.prototype.getChanges=function(){return{changedData:this.changedData,deletedData:this.deletedData}},t.prototype.setQueryData=function(){var e,t=this.properties;this.queryData={fields:null===(e=t.fields)||void 0===e?void 0:e.map((function(e){return{fieldName:e.bindingName,fieldExpression:e.sqlExpression,groupBy:e.groupBy}})),filterString:t.filterString,filterParams:t.filterParams,tablesJoin:t.tableSource.tablesJoin,mainTableAlias:t.tableSource.alias}},t.prototype.getColumns=function(t){var i,n=this;return this.properties.fields&&this.properties.fields.length?this.properties.fields.map((function(e){return e.headerText||(e.headerText=n.getColumnHeader(e.bindingName)),e.dataType=n.getColumnType(e.bindingName)||B.DataType[e.dataType],e.width=n.getColumnWidth(e.bindingName,e.width||150),e.displayFormat=[B.DataType.Date,B.DataType.Number].includes(e.dataType)?n.getColumnDisplayFormat(e.bindingName)||e.displayFormat:null,e})):(null===(i=this.dbFields)||void 0===i?void 0:i.length)?this.dbFields:e.prototype.getColumns.call(this,t)},t.prototype.onAdd=function(){this.emitEvent(this.properties.onAdd)},t.prototype.loadData=function(){var e;return Object(ye.b)(this,void 0,void 0,(function(){var t,i,n,r,o,s,a,l,c,h,u,d=this;return Object(ye.e)(this,(function(p){switch(p.label){case 0:if(i=(t=this.properties.tableSource).connection,n=t.name,r=Object(Se.x)(n),this.dataObject={schemaName:o=r[0],objectName:s=r[1]},!(i&&o&&s))return[3,4];this.loading=!0,a=Object(gt.i)(this.filters)||[],l=Object(vt.d)(Object(ye.a)(Object(ye.a)({},this.queryData),{orderBy:this.properties.orderBy,limitRowsCount:this.properties.limitRows,filters:Object(ye.g)(a)})),null===(e=this.gridContext)||void 0===e||e.clear(),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.sqlService.selectSqlObjectData$(i,o,s,l).toPromise()];case 2:return c=p.sent(),this.changedData=null,this.deletedData=null,this.dbFields=c.fieldNames.map((function(e,t){return{headerText:d.getColumnHeader(e)||e,bindingName:e,width:d.getColumnWidth(e),dataType:d.getColumnType(e)||ft.DataTypeNameToDataType[c.fieldDataTypes[t]],displayFormat:d.getColumnDisplayFormat(e)}})),h=Object(we.fromTable)(c),this.renderData(h),this.loading=!1,[2,h];case 3:return u=p.sent(),this.changedData=null,this.deletedData=null,this.loading=!1,this.notificationService.error(u),[3,4];case 4:return[2,null]}}))}))},t.prototype.getColumnQueryParams=function(e,t){var i=mt.a.resolveString(e.link.replace(/.*\?/,""),t);return Object(gt.j)(null,i)},t.prototype.getLink=function(e,t){return mt.a.resolveString(e.link.replace(/\?.*/,""),t)},t.prototype.onCtxMenuClicked=function(e){switch(e.value){case"edit-column":this.editColumn();break;case"fill-all":this.fillRows("all");break;case"fill-empty":this.fillRows("empty")}},t.prototype.onFiltersChange=function(e){return Object(ye.b)(this,void 0,void 0,(function(){return Object(ye.e)(this,(function(t){switch(t.label){case 0:return this.filters=Object(ye.a)({},e),[4,this.loadData()];case 1:return t.sent(),[2]}}))}))},t.prototype.onApply=function(e,t){return Object(ye.b)(this,void 0,void 0,(function(){var i;return Object(ye.e)(this,(function(n){switch(n.label){case 0:return this.filters=Object(ye.a)(Object(ye.a)({},this.filters),((i={})[t.fieldExpression||t.bindingName]=e,i)),[4,this.loadData()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"filtersList",{get:function(){var e=this;return Object.entries(this.filters).filter((function(e){return Boolean(e[1])})).map((function(t){var i=t[0];return{fieldName:i,value:t[1].map((function(t){if(e.localGridConfig.getColumn(i).dataType===B.DataType.Date){var n=e.localGridConfig.getColumn(i).displayFormat;return Object(Se.d)(t,n)}return t instanceof Date?Object(we.dateToString)(t):null===t?"[NULL]":t})).join(", ")}}))},enumerable:!1,configurable:!0}),t.prototype.openQueryManager=function(){var e=this,t=this.dialogService.open(wt.a,{class:"modal-xl full-height",keyboard:!1});t.config=Object(ye.a)({connection:this.properties.tableSource.connection,selectBody:this.queryData},this.dataObject),t.init.pipe(Object(ve.a)((function(){return t.component.save}))).subscribe((function(t){var i=t;e.properties.tableSource={alias:i.selectBody.mainTableAlias,connection:i.connection,name:i.schemaName+"."+i.objectName,tablesJoin:i.selectBody.tablesJoin},e.properties.fields=i.selectBody.fields.map((function(e){return{bindingName:e.fieldName,sqlExpression:e.fieldExpression,groupBy:e.groupBy}})),e.properties.filterString=i.selectBody.filterString,e.properties.filterParams=i.selectBody.filterParams,e.properties.orderBy=i.selectBody.orderBy,e.properties.limitRows=i.selectBody.limitRowsCount,e.refresh()}))},t.prototype.editColumn=function(){var e=this,t=this.dialogService.open(_t.a,{class:"modal-lg"});t.config=[this.columnToEdit],t.init.pipe(Object(ve.a)((function(){return t.component.save}))).subscribe((function(t){t.forEach((function(t){e.localGridConfig.saveColumn(t.bindingName,t)}));var i=t[0],n=e.columnsList.findIndex((function(e){return e.bindingName===i.bindingName}));Object.assign(e.columnsList[n],i)}))},t.prototype.fillRows=function(e){var t=this,i=!1;this.grid.collectionView.sourceCollection.forEach((function(n){var r=t.columnToEdit.bindingName,o=n[r];t.updateCondition(o,e)&&(n[r]=t.contextMenuValue,t.gridContext.setEditValue(n,r,o,t.contextMenuValue),i=!0)})),i&&(this.grid.refresh(!0),this.changeHandler())},t.prototype.updateCondition=function(e,t){switch(t){case"all":return e!==this.contextMenuValue;case"empty":return[null,void 0,""].includes(e);default:return!0}},t.prototype.initializedGrid=function(e){var t=this;this.gridContext=Object(Le.c)(e),e.cellEditEnded.addHandler((function(){return t.changeHandler()})),e.deletedRow.addHandler((function(){return t.changeHandler()})),e.addEventListener(e.hostElement,"contextmenu",(function(i){var n=e.hitTest(i),r=n.col>-1?n.col:e.columns.length-1;t.columnToEdit=t.columnsList.find((function(e,t){return r===t}));var o=t.grid.collectionView.items[n.row];o&&(t.contextMenuValue=o[t.columnToEdit.bindingName])}));var i=e.itemFormatter;e.itemFormatter=function(t,n,r,o){i(t,n,r,o);var s=t.columns[r].binding;if(t.cellType===nt.CellType.ColumnHeader&&o.firstChild instanceof HTMLElement){var a=o.firstChild.querySelector("#sort-icon");a&&o.firstChild.removeChild(a);var l=e.collectionView.sortDescriptions[0];if(l&&l.property===s){var c=document.createElement("SPAN");c.id="sort-icon",c.className=l.ascending?"wj-glyph-up":"wj-glyph-down",o.firstChild.appendChild(c)}}},e.sortingColumn.addHandler((function(e,t){t.data.target.classList.contains("fa-filter")&&(t.cancel=!0)})),e.resizingColumn.addHandler((function(i,n){t.localGridConfig&&t.localGridConfig.saveColumn(e.columns[n.col].binding,{width:e.columns[n.col].renderWidth})}))},t.prototype.changeHandler=function(){var e=this.gridContext.state,t=e.added,i=e.edited,n=e.deleted,r=[];i&&(r=Object(ye.g)(r,i)),t&&(r=Object(ye.g)(r,t)),n&&(this.deletedData=n),this.changedData=r},t.\u0275fac=function(e){return new(e||t)(m.Nb(Ce.c),m.Nb(Ce.b),m.Nb(St.b),m.Nb(Ce.f),m.Nb(Ce.e))},t.\u0275cmp=m.Hb({type:t,selectors:[["dc-db-grid"]],features:[m.yb,m.zb],decls:23,vars:12,consts:[["class","row mx-0",4,"ngIf"],[1,"position-relative","d-flex","flex-column","h-100","overflow-hidden"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],["value","edit-column"],[1,"px-2"],[1,"fa","fa-columns","mr-1","my-2"],["value","fill-all"],[1,"fa","fa-file-o","mr-1","my-2"],["value","fill-empty"],[1,"fa","fa-files-o","mr-1","my-2"],[1,"data-grid","h-100","w-100","d-flex","flex-column",3,"wjContextMenu","itemsSource","allowAddNew","isReadOnly","selectionMode","allowDelete","headersVisibility","itemsSourceChange","initialized"],["grid",""],[4,"ngFor","ngForOf"],["class","row m-0 align-items-center",4,"ngIf"],["popTemplate",""],[1,"row","mx-0"],[3,"class",4,"ngIf"],["class","mr-2",3,"uiModel",4,"ngIf"],[3,"initFilters","fields","defaultFilters","currentFilters","dataObject","queryData","connection","changed",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn btn-light align-self-baseline mb-2",3,"click",4,"ngIf"],["dropdown","","class","d-flex position-relative px-2 mb-2","placement","top left",4,"ngIf"],["class","btn mb-2",3,"click",4,"ngIf"],[1,"mr-2",3,"uiModel"],[3,"initFilters","fields","defaultFilters","currentFilters","dataObject","queryData","connection","changed"],["type","button",1,"btn","btn-light","align-self-baseline","mb-2",3,"click"],["dropdown","","placement","top left",1,"d-flex","position-relative","px-2","mb-2"],["dropdownToggle","","type","button",1,"btn","py-0"],[1,"fa","fa-ellipsis-v"],["class","dropdown-menu left-menu","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu","left-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"btn","mb-2",3,"click"],[1,"fa","fa-cog"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"header","binding","dataType","width","format","dataMap","isReadOnly","minWidth","maxWidth"],[4,"ngIf"],["wjFlexGridCellTemplate","",3,"cellType"],[1,"text-normal",3,"title"],[3,"field","icon","dataObject","connection","currentFilters","queryData","apply",4,"ngIf"],[3,"field","icon","dataObject","connection","currentFilters","queryData","apply"],["wjFlexGridCellTemplate","","cellType","Cell"],[3,"routerLink","queryParams"],[1,"row","m-0","align-items-center"],["class","fa fa-filter cursor-pointer px-1","triggers","mouseenter:mouseleave",3,"popover",4,"ngIf"],[1,"ml-auto","mr-1"],["triggers","mouseenter:mouseleave",1,"fa","fa-filter","cursor-pointer","px-1",3,"popover"],["class","applied-filters-list px-0",4,"ngIf"],[1,"applied-filters-list","px-0"]],template:function(e,t){if(1&e){var i=m.Ub();m.Cc(0,It,8,6,"div",0),m.Tb(1,"div",1),m.Cc(2,Dt,4,0,"div",2),m.Tb(3,"wj-menu",3,4),m.bc("itemClicked",(function(){m.vc(i);var e=m.sc(4);return t.onCtxMenuClicked(e)})),m.Tb(5,"wj-menu-item",5),m.Tb(6,"span",6),m.Ob(7,"i",7),m.Ec(8,"Format Column"),m.Sb(),m.Sb(),m.Tb(9,"wj-menu-item",8),m.Tb(10,"span",6),m.Ob(11,"i",9),m.Ec(12,"Fill all rows"),m.Sb(),m.Sb(),m.Tb(13,"wj-menu-item",10),m.Tb(14,"span",6),m.Ob(15,"i",11),m.Ec(16,"Fill empty rows"),m.Sb(),m.Sb(),m.Sb(),m.Tb(17,"wj-flex-grid",12,13),m.bc("itemsSourceChange",(function(e){return t.collectionView=e}))("initialized",(function(){m.vc(i);var e=m.sc(18);return t.initializedGrid(e)})),m.Cc(19,zt,4,12,"ng-container",14),m.Sb(),m.Cc(20,Ht,5,4,"div",15),m.Sb(),m.Cc(21,Wt,3,1,"ng-template",null,16,m.Dc)}if(2&e){var n=m.sc(4);m.jc("ngIf",t.properties.tableSource&&t.properties.showHeader),m.Bb(2),m.jc("ngIf",t.loading),m.Bb(1),m.jc("isButton",!0),m.Bb(14),m.jc("wjContextMenu",n)("itemsSource",t.collectionView)("allowAddNew",!!t.properties.allowAddNew)("isReadOnly",!!t.properties.isReadOnly)("selectionMode",t.properties.selectionMode)("allowDelete",!!t.properties.allowDelete)("headersVisibility",t.properties.headersVisibility||"All"),m.Bb(2),m.jc("ngForOf",t.columnsList),m.Bb(1),m.jc("ngIf",t.properties.showFooterRow)}},directives:[c.m,f.d,f.e,p.a,f.a,c.l,me.v,Ct.a,fe.a,fe.d,fe.b,p.c,p.b,Ot.a,u.h,ge.a],pipes:[c.f],styles:["[_nghost-%COMP%]{flex-direction:column}.data-grid[_ngcontent-%COMP%]{height:calc(100% - 25px);margin:auto;width:auto}.data-grid[_ngcontent-%COMP%]   app-filter[_ngcontent-%COMP%]{order:1}.data-grid[_ngcontent-%COMP%]     .wj-cell.wj-header>div{align-items:center;display:flex;height:100%;max-height:50px}.applied-filters-list[_ngcontent-%COMP%]{list-style-type:none}.text-normal[_ngcontent-%COMP%]{-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:2;max-height:50px;overflow:hidden;padding-right:5px;text-align:center;text-overflow:ellipsis;white-space:normal;width:100%;word-break:break-word}"]}),t}(_e.a),Ut=[be.c,_e.c,Je,pt,Qe.b,it,ht,{name:"db-grid",packageName:"vendor",label:"DB grid",category:"Data table",description:"DB Grid component",parseUIModel:function(e){var t,i={tableSource:{tablesJoin:[]},fields:[],orderBy:[]};e.attrs.initFilters&&(i.initFilters=e.attrs.initFilters.split(",").map((function(e){return e.trim()}))),e.attrs.limitRows&&(i.limitRows=Number(e.attrs.limitRows));var n=e.attrs.colWidth;return n&&(i.colWidth=n.includes("*")?n:Number(n)),i.selectionMode=e.attrs.selectionMode||nt.SelectionMode.Cell,i.isReadOnly="false"!==e.attrs.isReadOnly,i.showHeader="false"!==e.attrs.showHeader,i.showHeaderRowFilter="true"===e.attrs.showHeaderRowFilter,i.showFooterRow="false"!==e.attrs.showFooterRow,i.showGridFilter="false"!==e.attrs.showGridFilter,i.showMenu="false"!==e.attrs.showMenu,i.showQueryManager="true"===e.attrs.showQueryManager,i.allowDelete="true"===e.attrs.allowDelete,i.allowAddNew="true"===e.attrs.allowAddNew,(null===(t=e.childNodes)||void 0===t?void 0:t.length)&&(e.childNodes.forEach((function(e){var t,n,r,o=Object(me.u)(e);"table-source"===o.type?(Object.assign(i.tableSource,o.attrs),null===(t=o.childNodes)||void 0===t||t.forEach((function(e){var t=Object(me.u)(e);t.type in xt&&i.tableSource.tablesJoin.push(Object(ye.a)({joinType:xt[t.type]},t.attrs))}))):"fields"===o.type?null===(n=o.childNodes)||void 0===n||n.forEach((function(e){var t=function(e){var t=Object(ye.a)({},e.attrs);return t.width&&"*"!==t.width&&(t.width=Number(t.width)),t.minWidth&&(t.minWidth=Number(t.minWidth)),t.maxWidth&&(t.maxWidth=Number(t.maxWidth)),t.isReadOnly="true"===e.attrs.isReadOnly,t.multiLine="true"===e.attrs.multiLine,t.text=e.attrs.text,t.groupBy="true"===e.attrs.groupBy,t.fieldExpression=t.sqlExpression,t}(Object(me.u)(e));i.fields.push(t)})):"filter-string"===o.type?i.filterString=o.content:"filter-params"===o.type?(i.filterParams={},null===(r=o.childNodes)||void 0===r||r.forEach((function(e){var t=Object(me.u)(e);"param"===t.type&&(i.filterParams[t.attrs.name]=t.attrs.value)}))):"orderby"===o.type&&o.content.split(",").forEach((function(e){var t=e.trim().split(/\s{1,}/);i.orderBy.push({fieldName:t[0],direction:"DESC"===t[1]?"DESC":"ASC"})}))})),e.childNodes=null),{type:"db-grid",itemProperties:i}},itemProperties:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(ye.d)(t,e),Object(ye.c)([Object(me.r)({description:"Table Source",example:'{connection: "conectionName", name: "schema.TableName"}'}),Object(ye.f)("design:type",Object)],t.prototype,"tableSource",void 0),Object(ye.c)([Object(me.r)({description:"Specifies list of columns to display.",example:"[{\n      headerText: 'Header title',\n      bindingName: 'propName',\n      dataType: 'Number'\n    }]"}),Object(ye.f)("design:type",Array)],t.prototype,"fields",void 0),Object(ye.c)([Object(me.r)({description:"Initial header filters",example:'["Name", "Country"]'}),Object(ye.f)("design:type",Array)],t.prototype,"initFilters",void 0),Object(ye.c)([Object(me.r)({description:"Save data handler",example:"onDataSave(data)",type:me.i.EVENT}),Object(ye.f)("design:type",String)],t.prototype,"onSave",void 0),Object(ye.c)([Object(me.r)({description:"Add data handler",example:"onAdd()",type:me.i.EVENT}),Object(ye.f)("design:type",String)],t.prototype,"onAdd",void 0),Object(ye.c)([Object(me.r)({description:"Whether to hide grid header filters",example:"true",defaultValue:"false"}),Object(ye.f)("design:type",Boolean)],t.prototype,"showHeaderRowFilter",void 0),Object(ye.c)([Object(me.r)({description:"Whether to show grid header functionality (title, filters, save, export)",example:"true",defaultValue:"true"}),Object(ye.f)("design:type",Boolean)],t.prototype,"showHeader",void 0),Object(ye.c)([Object(me.r)({description:"Whether to show grid footer functionality (filters state, rows count)",example:"true",defaultValue:"true"}),Object(ye.f)("design:type",Boolean)],t.prototype,"showFooterRow",void 0),Object(ye.c)([Object(me.r)({description:"Whether to show filter in grid columns",example:"true",defaultValue:"true"}),Object(ye.f)("design:type",Boolean)],t.prototype,"showGridFilter",void 0),Object(ye.c)([Object(me.r)({description:"Whether to show grid export menu",example:"true",defaultValue:"true"}),Object(ye.f)("design:type",Boolean)],t.prototype,"showMenu",void 0),Object(ye.c)([Object(me.r)({description:"Whether to show grid query manager",example:"true",defaultValue:"false"}),Object(ye.f)("design:type",Boolean)],t.prototype,"showQueryManager",void 0),Object(ye.c)([Object(me.r)({description:"DB grid data filter",example:"e.Country = @country"}),Object(ye.f)("design:type",String)],t.prototype,"filterString",void 0),Object(ye.c)([Object(me.r)({description:"DB grid data filter parameters values map",example:'{country: "uk"}'}),Object(ye.f)("design:type",Object)],t.prototype,"filterParams",void 0),Object(ye.c)([Object(me.r)({description:"Order by list",example:'[{fieldName: "country", direction: "ASC"}]'}),Object(ye.f)("design:type",Array)],t.prototype,"orderBy",void 0),Object(ye.c)([Object(me.r)({description:"Limit rows count",example:"100"}),Object(ye.f)("design:type",Number)],t.prototype,"limitRows",void 0),t}(_e.b),component:Yt,example:[{title:"DB grid example",uiModel:'<db-grid class="overflow-hidden">\n  <table-source connection="sql-shared" name="test1.NorthwindOrders" alias="e"/>\n</db-grid>\n  ',dataModel:null,description:"\n  DB Grid source is defined in <i>table-source</i> tag.\n  <br/>\n  Title can be defined with tags <i>title</i>, <i>titleStyle</i>, <i>titleIcon</i>.\n  "},{title:"DB grid with join tables",uiModel:'<db-grid class="overflow-hidden" showHeaderRowFilter="true" showQueryManager="true">\n  <table-source connection="sql-shared" name="test1.NorthwindOrders" alias="mt">\n    <left-join tableName="test1.NorthwindEmployees" tableAlias="e" joinCondition="mt.EmployeeID = e.EmployeeID"/>\n    <left-join tableName="test1.NorthwindOrderDetails" tableAlias="o" joinCondition="mt.OrderID = o.OrderID"/>\n  </table-source>\n</db-grid>\n  ',dataModel:null,description:"\n  You can join tables using special tags (<i>&lt;left-join&gt;</i>, <i>&lt;right-join&gt;</i>, <i>&lt;full-join&gt;</i>, <i>&lt;inner-join&gt;</i>) inside <i>table-source</i> tag.\n  <br/>\n  Use attributes tableName, tableAlias, joinCondition to configure join details.\n  "},{title:"DB grid fields",uiModel:'<db-grid class="overflow-hidden">\n  <table-source connection="sql-shared" name="test1.NorthwindOrders" alias="mt">\n    <left-join tableName="test1.NorthwindEmployees" tableAlias="e" joinCondition="mt.EmployeeID = e.EmployeeID"/>\n    <left-join tableName="test1.NorthwindOrderDetails" tableAlias="o" joinCondition="mt.OrderID = o.OrderID"/>\n  </table-source>\n  <fields>\n    <field bindingName="OrderID" sqlExpression="mt.OrderID" width="100" groupBy="false" />\n    <field bindingName="EmployeeId" sqlExpression="e.EmployeeId" width="120" />\n    <field bindingName="Name"  sqlExpression="e.LastName + \',  \' + e.FirstName Name"\n      link="../employee-details?EmployeeID={{EmployeeId}}" width="*" minWidth="120" />\n  </fields>\n</db-grid>\n  ',dataModel:null,description:"DB Grid fields are defined with <i>&lt;field&gt;</i> tag inside <i>&lt;fields&gt;</i> tag.\n  <br/>\n  Use attributes bindingName, sqlExpression... to configure field details.\n  "},{title:"DB grid with inner filter",uiModel:'<db-grid class="overflow-hidden">\n  <table-source connection="sql-shared" name="test1.NorthwindOrders" alias="mt">\n    <left-join tableName="test1.NorthwindEmployees" tableAlias="e" joinCondition="e.EmployeeID = mt.EmployeeID"/>\n    <left-join tableName="test1.NorthwindOrderDetails" tableAlias="o" joinCondition="o.OrderID = mt.OrderID"/>\n  </table-source>\n  <filter-string>e.EmployeeID = @employeeID</filter-string>\n  <filter-params>\n     <param name="employeeID" value="5"/>\n  </filter-params>\n  <orderby>RequiredDate DESC,OrderDate DESC</orderby>\n</db-grid>\n  ',dataModel:null,description:"DB Grid inner filter is defined with tag <i>&lt;filter-string&gt;</i> and tag <i>&lt;filter-params&gt;</i>\n  <br/>\n  Use tag <i>&lt;orderby&gt;</i> to define order priorities."}],children:[{tag:"table-source",properties:[{name:"connection"},{name:"name"}],hasChildren:!0},{tag:"fields",properties:[],hasChildren:!0},{tag:"orderby",properties:[]}],defaultModel:'<db-grid class="overflow-hidden">\n    <table-source connection="sql-shared" name="dbo.TableName" alias="mt"></table-source>\n</db-grid>'}],qt=function(){function e(){Ut.forEach((function(e){return me.d.registerComponent(e)}))}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[c.c,p.d,f.c,g.b,R,te,de,pe.a,u.i,h.d,gt.c,fe.c.forRoot(),ge.b.forRoot(),d.a,me.g]]}),e}()},SvZ3:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"f",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"g",(function(){return d})),i.d(t,"d",(function(){return p}));var n=i("mrSG"),r=i("0Qfz"),o=i("JUga"),s=i("ztEp");function a(e,t){if(e.contentId&&t.contentId)return e.contentId===t.contentId;var i=function(e){return e.folder+e.name+e.contentType};return i(e)===i(t)}function l(e,t){return e&&t?e.connectionName+"."+t.schemaName+"."+t.objectName+"."+t.objectType:null}function c(e,t){return l(e.connection,e.sqlObject)===l(t.connection,t.sqlObject)}function h(e){var t=e.split(".");if(1===t.length)return{sqlObject:null,connection:{connectionName:t[0],connectionId:null,defaultSchema:null}};var i=t.pop(),n=t.pop(),r=t.pop();return{connection:{connectionName:t.pop(),connectionId:null,defaultSchema:r},sqlObject:{objectType:i,objectName:n,schemaName:r}}}function u(e,t,i){return e===t||(i===o.a.APP?a(e,t):i===o.a.DB&&c(e,t))}function d(e){if(!e)return[];var t=e.map((function(e){return function(e){var t=(e.folder||"").split("/"),i=t.shift();if(!t.length)return{label:e.folder||e.name+"."+e.contentType,link:e};var n={label:i,child:{label:null}};return t.reduce((function(i,n,r){if(i.label=n,r!==t.length-1)return i.child={label:null},i.child;Object.assign(i,{folder:n,link:e})}),n.child),n}(e)}));return Object(r.groupBy)(t,"label").map((function(e){return function(e){var t,i,o=this,s={label:e[0].label};if(1===e.length){var a=e[0];if(a.label===(null===(t=a.link)||void 0===t?void 0:t.name)+"."+(null===(i=a.link)||void 0===i?void 0:i.contentType))return s.link=a.link,s}var l=e.filter((function(e){return e.link})).map((function(e){var t=e.link;return{label:t.name+"."+t.contentType,link:t}})),c=Object(r.groupBy)(e.filter((function(e){return e.child})).map((function(e){return e.child})),"label").map((function(e){return o.getTreeLink(e)}));return l.length&&(s.children=Object(r.sort)(l,"label ASC")),c.length&&(s.children=Object(n.g)(c,s.children||[])),s}(e)}))}function p(e){var t,i=Object(s.deepClone)(e);return i.fields=null===(t=i.fields)||void 0===t?void 0:t.map((function(e){return e.groupBy?"GroupBy|"+e.fieldExpression:e.fieldExpression})),i}},a5yf:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var n=i("mrSG"),r=i("lMX+"),o=i("ztEp");function s(e){var t,i=new Set,s=new Map,a=[];function l(e,t,i,n){var r,o,a=s.get(e)||{};a.hasOwnProperty(t)||(a[t]=i),o=n,((r=a[t])instanceof Date&&o instanceof Date?r.getTime()===o.getTime():r===o)&&delete a[t],Object.keys(a).length?s.set(e,a):s.delete(e)}return e.rowAdded.addHandler((function(t,n){i.add(e.collectionView.currentAddItem),e.refreshCells(!1)})),e.pasting.addHandler((function(i,r){var s=Object(n.g)(e.rows);void 0===s[s.length-1].dataItem&&s.splice(-1),t=Object(o.deepClone)(s.map((function(e){return e.dataItem})))})),e.pasted.addHandler((function(n,r){for(var o=r.range,s=o.row2,a=function(n){var r=e.rows[n].dataItem;if(t.length<=n)i.add(r);else if(!i.has(r)){var o=t[n];Object.keys(r).forEach((function(e){l(r,e,o[e],r[e])}))}},c=o.row;c<=s;c++)a(c);e.refreshCells(!1),t=null})),e.deletingRow.addHandler((function(t,n){var r=e.collectionView.currentItem||e.rows[n.range.row].dataItem;i.has(r)?i.delete(r):a.push(r),s.delete(r)})),e.itemFormatter=function(e,t,n,o){var a=e.rows[t].dataItem,l=e.columns[n].binding,c=s.get(a);e.cellType===r.CellType.Cell&&a&&(i.has(a)?o.classList.add("added-item"):c&&c.hasOwnProperty(l)?o.classList.add("edited-item"):(o.classList.remove("added-item"),o.classList.remove("edited-item")))},e.cellEditEnded.addHandler((function(t,n){var r=e.collectionView.currentEditItem;if(!i.has(r)){var o=e.columns[n.col].binding;l(r,o,n.data,e.rows[n.row].dataItem[o])}e.refreshCells(!1)})),{clear:function(){s.clear(),i.clear(),a=[]},get state(){var e,t=Array.from(i.values()),n=Array.from(s.keys()),r=Array.from(s.values());if(!t.length){var o=new Set;r.forEach((function(e){return Object.keys(e).forEach((function(e){return o.add(e)}))})),e=Array.from(o.values())}return{oldValues:r,edited:n,added:t,deleted:a,columns:e}},setEditValue:l}}function a(e){return Object.values(e).filter((function(e){return"string"==typeof e}))}function l(e,t){var i=Object(n.a)({},e.attrs);return i.width&&"*"!==i.width&&(i.width=Number(i.width)),i.minWidth&&(i.minWidth=Number(i.minWidth)),i.maxWidth&&(i.maxWidth=Number(i.maxWidth)),i.isReadOnly="true"===e.attrs.isReadOnly,i.multiLine="true"===e.attrs.multiLine,i.text=e.attrs.text,"true"===i.override?(t.overrideColumns=t.overrideColumns||[],t.overrideColumns.push(i)):(t.columns=t.columns||[],t.columns.push(i)),i}},dDP7:function(e,t,i){"use strict";i.d(t,"a",(function(){return ne}));var n=i("mrSG"),r=i("fXoL"),o=i("K3ix"),s=i("TwVa"),a=i("ztEp"),l=i("ZF+8"),c=i("2Vo4"),h=i("LRne"),u=i("EY2u"),d=i("itXk"),p=i("lJxs"),f=i("JX91"),g=i("eIep"),m=i("JIr8"),b=i("vkgz"),_=(i("lMX+"),i("tcrU")),y=i("FQei"),v=i("iFvM"),x=i("ZOsW"),w=i("3Pt+"),S=i("ofXK"),C=i("RsUz"),O=["selectConnection"],j=["selectTable"],T=["availableGrid"],N=["selectedGrid"],A=["expressionInput"];function M(e,t){if(1&e&&r.Ec(0),2&e){var i=t.item;r.Hc("",i.schemaName,".",i.objectName,"")}}function E(e,t){if(1&e&&r.Ec(0),2&e){var i=t.item;r.Hc("",i.schemaName,".",i.objectName,"")}}function P(e,t){if(1&e&&r.Ec(0),2&e){var i=t.item;r.Hc("",i.fieldName,".",i.direction,"")}}function I(e,t){if(1&e&&r.Ec(0),2&e){var i=t.item;r.Hc("",i.fieldName,".",i.direction,"")}}function D(e,t){if(1&e&&(r.Tb(0,"div",35),r.Tb(1,"span"),r.Ec(2),r.Tb(3,"b"),r.Ec(4),r.Sb(),r.Ec(5),r.Sb(),r.Sb()),2&e){var i=t.$implicit,n=r.dc(2);r.Bb(2),r.Gc("",n.formatLabel(i.joinType).toUpperCase()," to "),r.Bb(2),r.Hc("",n.query.selectBody.mainTableAlias,".",null==i.table?null:i.table.objectName," "),r.Bb(1),r.Ic(" on ",n.query.selectBody.mainTableAlias,".",i.leftFieldName," = ",i.tableAlias||i.table.schemaName+"."+i.table.objectName,".",i.rightFieldName,"")}}function k(e,t){if(1&e&&(r.Tb(0,"div",25),r.Cc(1,D,6,7,"div",34),r.Sb()),2&e){var i=t.ngIf;r.Bb(1),r.jc("ngForOf",i)}}function L(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",61),r.Tb(1,"div",27),r.Tb(2,"div",25),r.Tb(3,"label",62),r.Ec(4,"Field Expression"),r.Sb(),r.Tb(5,"div",63),r.Tb(6,"input",64),r.bc("ngModelChange",(function(e){return r.vc(i),r.dc(3).selectedField.groupBy=e})),r.Sb(),r.Tb(7,"label",65),r.Ec(8,"group by"),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(9,"div",27),r.Tb(10,"input",66),r.bc("input",(function(){return r.vc(i),r.dc(3).onFieldExpression()}))("ngModelChange",(function(e){return r.vc(i),r.dc(3).selectedField.fieldExpression=e})),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=r.dc(3);r.Bb(6),r.jc("ngModel",n.selectedField.groupBy),r.Bb(4),r.jc("ngModel",n.selectedField.fieldExpression)}}function F(e,t){if(1&e){var i=r.Ub();r.Rb(0),r.Tb(1,"div",39),r.Tb(2,"h5"),r.Ec(3,"Available"),r.Sb(),r.Tb(4,"wj-flex-grid",40,41),r.Ob(6,"wj-flex-grid-column",42),r.Sb(),r.Tb(7,"div",25),r.Tb(8,"div",2),r.Tb(9,"div",43),r.Tb(10,"input",44),r.bc("change",(function(){return r.vc(i),r.dc(2).onRemoveSelectedChange(!0)})),r.Sb(),r.Tb(11,"label",45),r.Ec(12,"Remove Selected"),r.Sb(),r.Sb(),r.Tb(13,"div",46),r.Tb(14,"input",47),r.bc("change",(function(){return r.vc(i),r.dc(2).onRemoveSelectedChange(!1)})),r.Sb(),r.Tb(15,"label",48),r.Ec(16,"Show All"),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(17,"div",49),r.Tb(18,"button",50),r.bc("click",(function(){return r.vc(i),r.dc(2).addFields()})),r.Ob(19,"i",51),r.Sb(),r.Tb(20,"button",52),r.bc("click",(function(){return r.vc(i),r.dc(2).removeFields()})),r.Ob(21,"i",53),r.Sb(),r.Sb(),r.Tb(22,"div",54),r.Tb(23,"h5"),r.Ec(24,"Selected"),r.Sb(),r.Tb(25,"wj-flex-grid",55,56),r.bc("selectionChanged",(function(){return r.vc(i),r.dc(2).onFieldSelect()})),r.Ob(27,"wj-flex-grid-column",57),r.Sb(),r.Cc(28,L,11,2,"div",58),r.Sb(),r.Tb(29,"div",49),r.Tb(30,"button",50),r.bc("click",(function(){return r.vc(i),r.dc(2).movePrev()})),r.Ob(31,"i",59),r.Sb(),r.Tb(32,"button",52),r.bc("click",(function(){return r.vc(i),r.dc(2).moveNext()})),r.Ob(33,"i",60),r.Sb(),r.Sb(),r.Qb()}if(2&e){var n=r.dc().ngIf,o=r.dc();r.Bb(4),r.jc("showGroups",!0)("itemsSource",n),r.Bb(2),r.jc("isReadOnly",!0)("width","*"),r.Bb(4),r.jc("value",!0)("checked",o.removeSelected$.value),r.Bb(4),r.jc("value",!1)("checked",!o.removeSelected$.value),r.Bb(11),r.jc("isReadOnly",!0)("itemsSource",o.selectedFields),r.Bb(2),r.jc("width","*"),r.Bb(1),r.jc("ngIf",o.selectedField)}}function R(e,t){1&e&&(r.Tb(0,"div",67),r.Tb(1,"div",68),r.Tb(2,"span",69),r.Ec(3,"Loading..."),r.Sb(),r.Sb(),r.Sb())}function B(e,t){if(1&e&&(r.Tb(0,"div",36),r.Cc(1,F,34,12,"ng-container",37),r.Cc(2,R,4,0,"div",38),r.Sb()),2&e){var i=t.ngIf,n=r.dc();r.Bb(1),r.jc("ngIf",i.length||(null==n.selectedFields?null:n.selectedFields.length)),r.Bb(1),r.jc("ngIf",n.loading)}}function z(e,t){if(1&e&&(r.Tb(0,"label",102),r.Ec(1,"Join Type"),r.Sb()),2&e){var i=r.dc().index;r.lc("for","join-table-type-",i,"")}}function V(e,t){if(1&e&&(r.Tb(0,"option",103),r.Ec(1),r.Sb()),2&e){var i=t.$implicit,n=r.dc(3);r.jc("value",i),r.Bb(1),r.Fc(n.formatLabel(i))}}function H(e,t){if(1&e&&(r.Tb(0,"label",104),r.Ec(1,"Table Name"),r.Sb()),2&e){var i=r.dc().index;r.lc("for","join-table-name-",i,"")}}function X(e,t){if(1&e&&r.Ec(0),2&e){var i=t.item;r.Hc("",i.schemaName,".",i.objectName,"")}}function G(e,t){if(1&e&&r.Ec(0),2&e){var i=t.item;r.Hc("",i.schemaName,".",i.objectName,"")}}function W(e,t){1&e&&(r.Tb(0,"div"),r.Ec(1,"Table name is required."),r.Sb())}function Y(e,t){if(1&e&&(r.Tb(0,"div",105),r.Cc(1,W,2,0,"div",37),r.Sb()),2&e){r.dc();var i=r.sc(12);r.Bb(1),r.jc("ngIf",i.errors.required)}}function U(e,t){if(1&e&&(r.Tb(0,"label",104),r.Ec(1,"Alias"),r.Sb()),2&e){var i=r.dc().index;r.lc("for","join-table-alias-",i,"")}}function q(e,t){1&e&&(r.Tb(0,"label",106),r.Ec(1,"Left Field Name"),r.Sb())}function K(e,t){1&e&&(r.Tb(0,"div"),r.Ec(1,"Left Field Name is required."),r.Sb())}function $(e,t){if(1&e&&(r.Tb(0,"div",105),r.Cc(1,K,2,0,"div",37),r.Sb()),2&e){r.dc();var i=r.sc(27);r.Bb(1),r.jc("ngIf",i.errors.required)}}function J(e,t){1&e&&(r.Tb(0,"label",107),r.Ec(1,"Right Field Name"),r.Sb())}function Q(e,t){1&e&&(r.Tb(0,"div"),r.Ec(1,"Right Field Name is required."),r.Sb())}function Z(e,t){if(1&e&&(r.Tb(0,"div",105),r.Cc(1,Q,2,0,"div",37),r.Sb()),2&e){r.dc();var i=r.sc(34);r.Bb(1),r.jc("ngIf",i.errors.required)}}var ee=function(e){return{"mb-2 align-self-end":e}};function te(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",77),r.Tb(1,"div",78),r.Tb(2,"div",79),r.Cc(3,z,2,1,"label",80),r.Tb(4,"div",81),r.Tb(5,"select",82),r.bc("ngModelChange",(function(e){return r.vc(i),t.$implicit.joinType=e})),r.Cc(6,V,2,2,"option",83),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(7,"div",84),r.Tb(8,"div",79),r.Cc(9,H,2,1,"label",85),r.Tb(10,"div",81),r.Tb(11,"ng-select",86,87),r.bc("change",(function(){r.vc(i);var e=t.$implicit;return r.dc(2).onJoinTableSelect(e)}))("ngModelChange",(function(e){return r.vc(i),t.$implicit.table=e})),r.Cc(14,X,1,2,"ng-template",12),r.Cc(15,G,1,2,"ng-template",13),r.Sb(),r.Cc(16,Y,2,1,"div",88),r.Sb(),r.Sb(),r.Sb(),r.Tb(17,"div",89),r.Tb(18,"div",90),r.Cc(19,U,2,1,"label",85),r.Tb(20,"div",81),r.Tb(21,"input",91),r.bc("ngModelChange",(function(e){return r.vc(i),t.$implicit.tableAlias=e})),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(22,"div",92),r.Tb(23,"div",79),r.Cc(24,q,2,0,"label",93),r.Tb(25,"div",81),r.Tb(26,"ng-select",94,95),r.bc("ngModelChange",(function(e){return r.vc(i),t.$implicit.leftFieldName=e})),r.Sb(),r.Cc(28,$,2,1,"div",88),r.Sb(),r.Sb(),r.Sb(),r.Tb(29,"div",92),r.Tb(30,"div",79),r.Cc(31,J,2,0,"label",96),r.Tb(32,"div",81),r.Tb(33,"ng-select",97,98),r.bc("ngModelChange",(function(e){return r.vc(i),t.$implicit.rightFieldName=e})),r.Sb(),r.Cc(35,Z,2,1,"div",88),r.Sb(),r.Sb(),r.Sb(),r.Tb(36,"div",99),r.Tb(37,"button",100),r.bc("click",(function(){r.vc(i);var e=t.index;return r.dc(2).removeItem(e)})),r.Ob(38,"i",101),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=t.$implicit,o=t.index,s=r.sc(12),a=r.sc(27),l=r.sc(34),c=r.dc(2);r.Bb(3),r.jc("ngIf",0===o),r.Bb(2),r.lc("name","join-table-type-",o,""),r.lc("id","join-table-type-",o,""),r.jc("ngModel",n.joinType),r.Bb(1),r.jc("ngForOf",c.joinTypes),r.Bb(3),r.jc("ngIf",0===o),r.Bb(2),r.lc("name","oin-table-name-",o,""),r.lc("id","join-table-name-",o,""),r.jc("items",c.tables)("searchFn",c.tableSearchFn)("ngModel",n.table),r.Bb(5),r.jc("ngIf",s.invalid&&(s.dirty||s.touched)),r.Bb(3),r.jc("ngIf",0===o),r.Bb(2),r.lc("name","join-table-alias-",o,""),r.lc("id","join-table-alias-",o,""),r.jc("ngModel",n.tableAlias),r.Bb(3),r.jc("ngIf",0===o),r.Bb(2),r.lc("name","left-field-name-",o,""),r.jc("ngModel",n.leftFieldName)("items",c.mainTableFields),r.Bb(2),r.jc("ngIf",a.invalid&&(a.dirty||a.touched)),r.Bb(3),r.jc("ngIf",0===o),r.Bb(2),r.lc("name","right-field-name-",o,""),r.jc("ngModel",n.rightFieldName)("items",n.columns),r.Bb(2),r.jc("ngIf",l.invalid&&(l.dirty||l.touched)),r.Bb(1),r.jc("ngClass",r.nc(27,ee,0===o))}}function ie(e,t){if(1&e){var i=r.Ub();r.Tb(0,"form",70,71),r.bc("ngSubmit",(function(){r.vc(i);var e=r.sc(1);return r.dc().saveJoinTables(e)})),r.Tb(2,"div",0),r.Tb(3,"h4",1),r.Ec(4,"Join Tables"),r.Sb(),r.Tb(5,"button",72),r.bc("click",(function(){return r.vc(i),r.dc().onJoinDialogCancel()})),r.Tb(6,"span",6),r.Ec(7,"\xd7"),r.Sb(),r.Sb(),r.Sb(),r.Tb(8,"div",73),r.Cc(9,te,39,29,"div",74),r.Sb(),r.Tb(10,"div",75),r.Tb(11,"button",17),r.bc("click",(function(){return r.vc(i),r.dc().onAddJoinTable()})),r.Ec(12,"Add"),r.Sb(),r.Tb(13,"button",76),r.Ec(14,"OK"),r.Sb(),r.Tb(15,"button",32),r.bc("click",(function(){return r.vc(i),r.dc().onJoinDialogCancel()})),r.Ec(16,"Cancel"),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=r.sc(1),o=r.dc();r.Bb(9),r.jc("ngForOf",o.tablesToJoin),r.Bb(4),r.jc("disabled",!n.valid)}}var ne=function(){function e(e,t,i,o){this.dbConnectionsService=e,this.sqlService=t,this.notificationService=i,this.modalService=o,this.save=new r.p,this.selectedFieldsChanged$=new r.p,this.loading=!1,this.selectedFields=[],this.removeSelected$=new c.a(!0),this.query={connection:null,objectName:null,schemaName:null,selectBody:{fields:[],mainTableAlias:"mt",tablesJoin:[]}},this.tableToJoin={tableAlias:null,joinType:null,table:null,leftFieldName:null,rightFieldName:null,columns:null},this.tablesToJoin=[Object(n.a)({},this.tableToJoin)],this.joinTypes=Object.values(s.JoinType),this.savedTablesToJoin$=new c.a([]),this.formatLabel=y.formatCamelStr}return e.prototype.ngOnInit=function(){var e,t;return Object(n.b)(this,void 0,void 0,(function(){var i,r=this;return Object(n.e)(this,(function(o){switch(o.label){case 0:return this.dbConnectionsService.loadMyDbConnections().toPromise(),this.dbConnections$=this.dbConnectionsService.myConnections$.pipe(Object(p.a)((function(e){return e.map((function(e){return e.connectionName}))}))),this.config?(this.query=Object(a.deepClone)(this.config),(null===(e=this.query.selectBody.tablesJoin)||void 0===e?void 0:e.length)?(this.loading=!0,i=this,[4,this.getJoinTables(this.query.selectBody.tablesJoin)]):[3,2]):[3,3];case 1:i.tablesToJoin=o.sent(),this.savedTablesToJoin$.next(Object(a.deepClone)(this.tablesToJoin)),this.loading=!1,o.label=2;case 2:(null===(t=this.query.selectBody.fields)||void 0===t?void 0:t.length)&&(this.selectedFields=this.query.selectBody.fields.map((function(e){return{fieldName:e.fieldName,fieldExpression:e.fieldExpression,groupBy:e.groupBy,displayName:Object(v.j)(e.fieldExpression)}})),this.selectedField=this.selectedFields[0],this.setSortByList(this.selectedFields)),this.selectedTable={objectName:this.query.objectName,schemaName:this.query.schemaName},o.label=3;case 3:return this.tables$=this.selectConnection.changeEvent.pipe(Object(f.a)(this.query.connection),Object(p.a)((function(e){return r.query.connection=e,r.selectTable&&r.selectTable.clearModel(),r.query.connection})),Object(g.a)((function(e){return(e?r.sqlService.getObjects(e):Object(h.a)([])).pipe(Object(m.a)((function(e){return r.notificationService.error(e),u.a})))}))),this.mainTableFields$=this.selectTable.changeEvent.pipe(Object(f.a)({schemaName:this.query.schemaName,objectName:this.query.objectName}),Object(b.a)((function(e){var t=e||{},i=t.schemaName,n=t.objectName;r.query.objectName!==n&&(r.selectedFields=[],n&&(r.query.selectBody.mainTableAlias=r.getDefaultAlias(n))),i&&n&&(r.loading=!0),r.query.schemaName=i,r.query.objectName=n})),Object(g.a)((function(){return(r.query.schemaName&&r.query.objectName?r.sqlService.getMetaDataObject(r.query.connection,r.query.schemaName,r.query.objectName):Object(h.a)({fields:[]})).pipe(Object(p.a)((function(e){return e.fields.map((function(e){return Object(n.a)(Object(n.a)({},e),{tableName:r.query.schemaName+"."+r.query.objectName})}))})),Object(b.a)((function(){if(!r.selectedTable&&r.selectTable.items){var e=r.query,t=e.schemaName,i=e.objectName,n=r.selectTable.items.find((function(e){return e.schemaName===t&&e.objectName===i}));r.selectedTable=n}r.loading=!1})),Object(m.a)((function(e){return r.notificationService.error(e),u.a})))}))),this.tables$.subscribe((function(e){return r.tables=e})),this.availableFields$=Object(d.a)([this.mainTableFields$,this.savedTablesToJoin$,this.selectedFieldsChanged$.pipe(Object(f.a)(!0))]).pipe(Object(p.a)((function(e){var t=e[0];r.mainTableFields=t;var i=r.savedTablesToJoin$.value.reduce((function(e,t){return Object(n.g)(e,t.columns)}),[]),o=t.map((function(e){return{fieldName:e.fieldName,dataType:e.dataType,tableName:r.selectedTable.schemaName+"."+r.selectedTable.objectName,tableAlias:r.query.selectBody.mainTableAlias}}));return i.length&&(window.requestAnimationFrame((function(){r.availableGrid.collectionView.groupDescriptions.length||r.availableGrid.collectionView.groupDescriptions.push(new _.PropertyGroupDescription("tableName",(function(e){return e.tableName+" as "+e.tableAlias})))})),o=Object(n.g)(o,i)),o})),Object(g.a)((function(e){return r.removeSelected$.pipe(Object(p.a)((function(t){var i;if(window.requestAnimationFrame((function(){r.savedTablesToJoin$.value.length&&r.availableGrid.collectionView.groupDescriptions.push(new _.PropertyGroupDescription("tableName",(function(e){return e.tableName+" as "+e.tableAlias})))})),t){var n=((null===(i=r.selectedGrid)||void 0===i?void 0:i.collectionView.items)||r.selectedFields).map((function(e){return e.fieldExpression}));return e.filter((function(e){return!n.includes(e.tableAlias+"."+e.fieldName)}))}return e})))}))),[2]}}))}))},e.prototype.onRemoveSelectedChange=function(e){this.removeSelected$.next(e)},e.prototype.joinTable=function(e){this.tableToJoin=Object(a.deepClone)(this.savedTablesToJoin$.value),0===this.tablesToJoin.length&&(this.tablesToJoin=[Object(n.a)({},this.tableToJoin)]),this.joinModalRef=this.modalService.show(e,{class:"modal-lg",ignoreBackdropClick:!0})},e.prototype.onAddJoinTable=function(){this.tablesToJoin.push(Object(n.a)({},this.tableToJoin))},e.prototype.onJoinDialogCancel=function(){this.tablesToJoin=Object(a.deepClone)(this.savedTablesToJoin$.value),this.joinModalRef.hide()},e.prototype.onFieldExpression=function(){this.selectedField.displayName=Object(v.j)(this.selectedField.fieldExpression),this.selectedGrid.refresh()},e.prototype.onJoinTableSelect=function(e){return Object(n.b)(this,void 0,void 0,(function(){var t,i,r,o;return Object(n.e)(this,(function(s){switch(s.label){case 0:return e.table?[4,this.sqlService.getMetaDataObject(this.query.connection,i=(t=e.table).schemaName,r=t.objectName).toPromise()]:[3,2];case 1:return o=s.sent(),e.columns=o.fields.map((function(e){return Object(n.a)(Object(n.a)({},e),{tableName:i+"."+r})})),e.tableAlias=this.getDefaultAlias(r),[3,3];case 2:e.columns=[],s.label=3;case 3:return[2]}}))}))},e.prototype.removeItem=function(e){this.tablesToJoin.splice(e,1)},e.prototype.saveJoinTables=function(e){var t=this;if(e.valid){var i=Array.from(new Set(this.tablesToJoin.map((function(e){return e.tableAlias}))));i.length!==this.tablesToJoin.length||i.includes(this.query.selectBody.mainTableAlias)?this.notificationService.error(null,"Table Aliases should be unique!"):(this.tablesToJoin.forEach((function(e){e.columns.forEach((function(t){t.tableAlias=e.tableAlias}))})),this.savedTablesToJoin$.next(Object(n.g)(this.tablesToJoin)),this.selectedFields=[],this.selectedField=null,this.joinModalRef.hide(),window.requestAnimationFrame((function(){t.selectedFieldsChanged$.emit()})))}},e.prototype.moveNext=function(){var e=this.selectedGrid.collectionView.sourceCollection,t=this.selectedGrid.collectionView.currentPosition,i=e.slice(0,t);t<e.length-1&&(this.selectedGrid.collectionView.sourceCollection=Object(n.g)(i,[e[t+1],this.selectedGrid.collectionView.currentItem],e.slice(t+2,e.length)),this.selectedGrid.collectionView.moveCurrentToPosition(i.length+1))},e.prototype.movePrev=function(){var e=this.selectedGrid.collectionView.sourceCollection,t=this.selectedGrid.collectionView.currentPosition,i=e.slice(0,t-1);0!==t&&(this.selectedGrid.collectionView.sourceCollection=Object(n.g)(i,[this.selectedGrid.collectionView.currentItem,e[t-1]],e.slice(t+1,e.length)),this.selectedGrid.collectionView.moveCurrentToPosition(i.length))},e.prototype.onFieldSelect=function(){this.selectedGrid&&(this.selectedField=this.selectedGrid.selectedItems[0])},e.prototype.tableSearchFn=function(e,t){return e=e.toLowerCase(),(t.schemaName.toLowerCase()+"."+t.objectName.toLowerCase()).includes(e)},e.prototype.connectionSearchFn=function(e,t){return e=e.toLowerCase(),t.connectionName.toLowerCase().includes(e)},e.prototype.addFields=function(){var e=this;this.availableGrid.selectedItems.forEach((function(t){var i=t.fieldName,r=t.tableAlias+"."+i;e.selectedGrid.collectionView.sourceCollection=Object(n.g)(e.selectedGrid.collectionView.sourceCollection,[{fieldName:i,groupBy:!1,fieldExpression:r,displayName:i}])})),this.removeSelected$.value&&this.availableGrid.selectedItems&&this.availableGrid.selectedRows.map((function(t){return e.availableGrid.rows.remove(t)})),this.setSortByList(this.selectedGrid.collectionView.sourceCollection)},e.prototype.removeFields=function(){var e=this.selectedGrid.selectedItems.map((function(e){return e.fieldName}));this.selectedGrid.collectionView.sourceCollection=this.selectedGrid.collectionView.items.filter((function(t){return!e.includes(t.fieldName)})),this.selectedFieldsChanged$.emit(),this.setSortByList(this.selectedGrid.collectionView.sourceCollection)},e.prototype.onSave=function(){this.query.selectBody.fields=this.selectedGrid.collectionView.items,this.query.selectBody.tablesJoin=this.getTablesJoinDto(this.savedTablesToJoin$.value),this.save.emit(this.query),this.modalRef.hide()},e.prototype.setSortByList=function(e){this.sortByList=e.map((function(e){var t=e.fieldExpression;return["ASC","DESC"].map((function(e){return{fieldName:Object(v.j)(t),direction:e}}))})).reduce((function(e,t){return Object(n.g)(e,t)}),[])},e.prototype.getDefaultAlias=function(e){return Array.from(e).filter((function(e){return e.match(/[A-Z]/)})).join("")||e[0]},e.prototype.getTablesJoinDto=function(e){var t=this;return e.map((function(e){var i=e.table.schemaName+"."+e.table.objectName;return{tableName:i,joinType:e.joinType,tableAlias:e.tableAlias,joinCondition:t.query.selectBody.mainTableAlias+"."+e.leftFieldName+" = "+(e.tableAlias||i)+"."+e.rightFieldName}}))},e.prototype.getJoinTables=function(e){return Object(n.b)(this,void 0,void 0,(function(){var t=this;return Object(n.e)(this,(function(i){return e?[2,Promise.all(e.map((function(e){return Object(n.b)(t,void 0,void 0,(function(){var t,i,r,o,s,a,l;return Object(n.e)(this,(function(c){switch(c.label){case 0:return t=e.joinCondition.split(" = "),i=t[0],r=t[1],o=e.tableName.split("."),s=o[0],a=o[1],i=i.replace(this.query.selectBody.mainTableAlias+".",""),r=r.replace(e.tableAlias+".",""),[4,this.sqlService.getMetaDataObject(this.query.connection,s,a).pipe(Object(p.a)((function(t){return t.fields.map((function(t){return Object(n.a)(Object(n.a)({},t),{tableName:e.tableName,tableAlias:e.tableAlias})}))}))).toPromise()];case 1:return l=c.sent(),[2,{joinType:e.joinType,tableAlias:e.tableAlias,rightFieldName:r,leftFieldName:i,table:{objectName:a,schemaName:s},columns:l}]}}))}))})))]:[2,[]]}))}))},e.\u0275fac=function(t){return new(t||e)(r.Nb(l.a),r.Nb(l.f),r.Nb(l.e),r.Nb(o.a))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-query-dialog"]],viewQuery:function(e,t){var i;1&e&&(r.Ac(O,!0),r.Ac(j,!0),r.Jc(T,!0),r.Jc(N,!0),r.Jc(A,!0)),2&e&&(r.rc(i=r.cc())&&(t.selectConnection=i.first),r.rc(i=r.cc())&&(t.selectTable=i.first),r.rc(i=r.cc())&&(t.availableGrid=i.first),r.rc(i=r.cc())&&(t.selectedGrid=i.first),r.rc(i=r.cc())&&(t.expressionInput=i.first))},inputs:{config:"config",modalRef:"modalRef"},outputs:{save:"save"},decls:51,vars:20,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"col-auto","col-form-label","ml-auto"],["placeholder","Select connection",1,"px-0","col-sm-3",3,"ngModel","items","searchFn"],["selectConnection",""],["type","button","aria-label","Close",1,"close","pull-right","ml-2",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column","h-100","overflow-hidden"],[1,"row","mr-0"],["for","object-name",1,"col-auto","col-form-label"],["placeholder","Select table",1,"col-sm-3","px-0","auto-grow",3,"items","searchFn","ngModel"],["selectTable",""],["ng-label-tmp",""],["ng-option-tmp",""],["for","main-table-alias",1,"col-auto","col-form-label"],[1,"col","fx-120","pl-0"],["type","text","placeholder","Enter alias","name","main-table-alias","id","main-table-alias","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-light",3,"click"],["for","order-by",1,"col-auto","col-form-label"],["name","order-by","id","order-by",1,"col","px-0","auto-grow",3,"multiple","ngModel","items","ngModelChange"],["for","limit-rows-count",1,"col-auto","col-form-label"],[1,"col-sm-1","pl-0"],["type","text","name","limit-rows-count","id","limit-rows-count",1,"form-control",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],["class","row h-100 overflow-hidden position-relative",4,"ngIf"],[1,"row"],[1,"col-form-label","col-auto","h5","mb-0","py-0"],[1,"col-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-primary","ml-auto","mr-2","fx-80",3,"click"],["type","button",1,"btn","btn-light","fx-80",3,"click"],["joinTableTmpl",""],["class","col-12 my-1",4,"ngFor","ngForOf"],[1,"col-12","my-1"],[1,"row","h-100","overflow-hidden","position-relative"],[4,"ngIf"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner",4,"ngIf"],[1,"col","py-2","d-flex","flex-column","h-100","pr-0"],["headersVisibility","None",1,"h-100","w-100",3,"showGroups","itemsSource"],["availableGrid",""],["binding","fieldName","dataType","String",3,"isReadOnly","width"],[1,"form-check","form-check-inline","mr-1","ml-auto"],["id","available-remove-selected","type","radio","name","inline-radios",1,"form-check-input",3,"value","checked","change"],["for","available-remove-selected",1,"form-check-label"],[1,"form-check","form-check-inline","mr-1"],["id","available-show-all","type","radio","name","inline-radios",1,"form-check-input",3,"value","checked","change"],["for","available-show-all",1,"form-check-label"],[1,"col-auto","d-flex","flex-column","align-self-center"],[1,"btn","btn-light","mb-2",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-right","fa-lg"],[1,"btn","btn-light","mb-4",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-left","fa-lg"],[1,"col","py-2","px-0","d-flex","flex-column","h-100"],["headersVisibility","None",1,"w-100","flex-fill",3,"isReadOnly","itemsSource","selectionChanged"],["selectedGrid",""],["binding","displayName","dataType","String",3,"width"],["class","row pt-2",4,"ngIf"],["aria-hidden","true",1,"fa","fa-angle-up","fa-lg"],["aria-hidden","true",1,"fa","fa-angle-down","fa-lg"],[1,"row","pt-2"],[1,"form-check-label","col-auto","h5","mb-0"],[1,"form-check","form-check-inline","ml-auto","col-auto"],["type","checkbox","id","groupby-selection",1,"form-check-input","mr-2",3,"ngModel","ngModelChange"],["for","groupby-selection",1,"form-check-label"],["type","text","placeholder","Sql field expression",1,"form-control",3,"ngModel","input","ngModelChange"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"ngSubmit"],["joinForm","ngForm"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"modal-body"],["class","form-row mx-0",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","ml-auto","mr-2","fx-80",3,"disabled"],[1,"form-row","mx-0"],[1,"p-0","pr-1","col","fx-120"],[1,"form-group","mx-0","mb-2","flex-nowrap"],["class","col-form-label px-0",3,"for",4,"ngIf"],[1,"p-0","m-0"],["type","text",1,"form-control",3,"ngModel","name","id","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"px-1","p-0","col-sm-6","col-md-3"],["class","col col-form-label px-0",3,"for",4,"ngIf"],["required","","placeholder","Select table",1,"col","px-0","mr-3","auto-grow",3,"items","searchFn","ngModel","name","id","change","ngModelChange"],["name","ngModel","selectTable",""],["class","alert alert-danger py-1 px-2 m-0",4,"ngIf"],[1,"px-1","p-0","col","fx-80"],[1,"form-group","mb-2","flex-nowrap","mx-0"],["type","text","required","",1,"form-control",3,"ngModel","name","id","ngModelChange"],[1,"pl-1","p-0","col-sm-6","col-md"],["for","left-field-name","class","col-form-label px-0",4,"ngIf"],["placeholder","Enter Field Name","required","","id","left-field-name","bindLabel","fieldName","bindValue","fieldName",1,"px-0","w-100","auto-grow",3,"ngModel","name","items","ngModelChange"],["leftFieldName","ngModel"],["for","right-field-name","class","col-form-label px-0",4,"ngIf"],["placeholder","Enter Field Name","required","","id","right-field-name","bindLabel","fieldName","bindValue","fieldName",1,"px-0","w-100","auto-grow",3,"ngModel","name","items","ngModelChange"],["rightFieldName","ngModel"],[1,"col-auto",3,"ngClass"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-remove"],[1,"col-form-label","px-0",3,"for"],[3,"value"],[1,"col","col-form-label","px-0",3,"for"],[1,"alert","alert-danger","py-1","px-2","m-0"],["for","left-field-name",1,"col-form-label","px-0"],["for","right-field-name",1,"col-form-label","px-0"]],template:function(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",0),r.Tb(1,"h4",1),r.Ec(2,"Query Manager"),r.Sb(),r.Tb(3,"label",2),r.Ec(4,"Connection"),r.Sb(),r.Ob(5,"ng-select",3,4),r.ec(7,"async"),r.Tb(8,"button",5),r.bc("click",(function(){return t.modalRef.hide()})),r.Tb(9,"span",6),r.Ec(10,"\xd7"),r.Sb(),r.Sb(),r.Sb(),r.Tb(11,"div",7),r.Tb(12,"div",8),r.Tb(13,"label",9),r.Ec(14,"Table/View"),r.Sb(),r.Tb(15,"ng-select",10,11),r.Cc(17,M,1,2,"ng-template",12),r.Cc(18,E,1,2,"ng-template",13),r.Sb(),r.Tb(19,"label",14),r.Ec(20,"Alias"),r.Sb(),r.Tb(21,"div",15),r.Tb(22,"input",16),r.bc("ngModelChange",(function(e){return t.query.selectBody.mainTableAlias=e})),r.Sb(),r.Sb(),r.Tb(23,"button",17),r.bc("click",(function(){r.vc(i);var e=r.sc(50);return t.joinTable(e)})),r.Ec(24,"Join Table"),r.Sb(),r.Tb(25,"label",18),r.Ec(26,"Sort By"),r.Sb(),r.Tb(27,"ng-select",19),r.bc("ngModelChange",(function(e){return t.query.selectBody.orderBy=e})),r.Cc(28,P,1,2,"ng-template",12),r.Cc(29,I,1,2,"ng-template",13),r.Sb(),r.Tb(30,"label",20),r.Ec(31,"Limit"),r.Sb(),r.Tb(32,"div",21),r.Tb(33,"input",22),r.bc("ngModelChange",(function(e){return t.query.selectBody.limitRowsCount=e})),r.Sb(),r.Sb(),r.Sb(),r.Cc(34,k,2,1,"div",23),r.ec(35,"async"),r.Cc(36,B,3,2,"div",24),r.ec(37,"async"),r.Tb(38,"div",25),r.Tb(39,"label",26),r.Ec(40,"Filters"),r.Sb(),r.Tb(41,"div",27),r.Tb(42,"input",28),r.bc("ngModelChange",(function(e){return t.query.selectBody.filters=e})),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(43,"div",29),r.Tb(44,"div",30),r.Tb(45,"button",31),r.bc("click",(function(){return t.onSave()})),r.Ec(46,"OK"),r.Sb(),r.Tb(47,"button",32),r.bc("click",(function(){return t.modalRef.hide()})),r.Ec(48,"Cancel"),r.Sb(),r.Sb(),r.Sb(),r.Cc(49,ie,17,2,"ng-template",null,33,r.Dc)}2&e&&(r.Bb(5),r.jc("ngModel",t.query.connection)("items",r.fc(7,14,t.dbConnections$))("searchFn",t.connectionSearchFn),r.Bb(10),r.jc("items",t.tables)("searchFn",t.tableSearchFn)("ngModel",t.selectedTable),r.Bb(7),r.jc("ngModel",t.query.selectBody.mainTableAlias),r.Bb(5),r.jc("multiple",!0)("ngModel",t.query.selectBody.orderBy)("items",t.sortByList),r.Bb(6),r.jc("ngModel",t.query.selectBody.limitRowsCount),r.Bb(1),r.jc("ngIf",r.fc(35,16,t.savedTablesToJoin$)),r.Bb(2),r.jc("ngIf",r.fc(37,18,t.availableFields$)),r.Bb(6),r.jc("ngModel",t.query.selectBody.filters))},directives:[x.a,w.i,w.l,x.d,x.c,w.b,w.q,S.m,S.l,C.a,C.c,w.a,w.t,w.j,w.k,w.r,S.k,w.m,w.s],pipes:[S.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.fx-120[_ngcontent-%COMP%]{flex:0 0 120px}.fx-100[_ngcontent-%COMP%]{flex:0 0 100px}.fx-80[_ngcontent-%COMP%]{flex:0 0 80px}"]}),e}()},efbX:function(e,t,i){"use strict";i.d(t,"a",(function(){return X})),i.d(t,"b",(function(){return G})),i.d(t,"c",(function(){return W}));var n=i("mrSG"),r=i("tcrU"),o=i("eIep"),s=i("lMX+"),a=i("eY+I"),l=i("0Qfz"),c=i("FQei"),h=i("Czp8"),u=i("M0ag"),d=i("1ua0"),p=i("a5yf"),f=i("iLQq"),g=i("LXVg"),m=i("4CEX"),b=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"}],_=[{title:"Grid example",uiModel:'\n  <div class="h-100">\n    <vendor-grid binding="$.tableData" title="Elements" headersVisibility="Column" titleStyle="h2" titleIcon="c-icon c-icon-2xl cil-diamond"></vendor-grid>\n  </div>\n  ',dataModel:{tableData:b}},{title:"Grid columns example",uiModel:'\n  <div class="h-100">\n    <vendor-grid binding="$.tableData" title="Elements" headersVisibility="Column" titleStyle="h2" titleIcon="c-icon c-icon-2xl cil-diamond">\n      <column bindingName="name" headerText="Name" width="300"></column>\n      <column bindingName="weight" headerText="Weight" dataType="Number" displayFormat="n2" width="130"></column>\n    </vendor-grid>\n  </div>\n  ',dataModel:{tableData:b},description:"Grid with defined columns"},{title:"Grid overide columns example",uiModel:'\n  <div class="h-100">\n    <vendor-grid binding="$.tableData" title="Elements" headersVisibility="Column" titleStyle="h2" titleIcon="c-icon c-icon-2xl cil-diamond">\n      <column override="true" bindingName="name" headerText="Name" width="300"></column>\n      <column override="true" bindingName="weight" headerText="Weight" dataType="Number" displayFormat="n2" width="130"></column>\n    </vendor-grid>\n  </div>\n  ',dataModel:{tableData:b},description:"Grid with overriden columns"},{title:"Grid dynamic columns example",uiModel:'\n  <div height="500px">\n    <button onClick="addColumn()" id="addBtn" class="btn btn-success mr-2">Add column</button>\n    <button onClick="removeColumn()" id="removeBtn" class="btn btn-danger">Remove column</button>\n    <vendor-grid binding="$.tableData" id="contactsGrid" title="Elements" headersVisibility="Column" titleStyle="h2" titleIcon="c-icon c-icon-2xl cil-diamond">\n      <column bindingName="name" headerText="Name" width="300"></column>\n    </vendor-grid>\n  </div>\n  ',scripts:'\n  def addColumn():\n    columns = ["name", "weight", "position", "symbol"]\n    grid = getComponentById(rootUIModel, "contactsGrid")\n    index = grid.attrs.columns.length\n    grid.attrs.columns.push({\n      bindingName: columns[index]\n    })\n    if grid.attrs.columns.length == columns.length:\n      addBtn = getComponentById(rootUIModel, "addBtn")\n      addBtn.disabled = true\n    removeBtn = getComponentById(rootUIModel, "removeBtn")\n    removeBtn.disabled = null\n\n  def removeColumn():\n    grid = getComponentById(rootUIModel, "contactsGrid")\n    grid.attrs.columns.pop()\n    if grid.attrs.columns.length == 0:\n      removeBtn = getComponentById(rootUIModel, "removeBtn")\n      removeBtn.disabled = true\n    addBtn = getComponentById(rootUIModel, "addBtn")\n    addBtn.disabled = null\n  ',dataModel:{tableData:b},description:"Change columns dynamically"}],y=i("fXoL"),v=i("ZF+8"),x=i("ofXK"),w=i("fEDK"),S=i("RsUz"),C=i("3s35"),O=i("tyNb"),j=["filter"],T=["grid"];function N(e,t){if(1&e&&y.Ob(0,"i"),2&e){var i=y.dc(2);y.Db(i.properties.titleIcon)}}function A(e,t){if(1&e&&y.Ob(0,"dc-text",17),2&e){var i=y.dc(2);y.jc("uiModel",i.titleConfig)}}function M(e,t){if(1&e&&(y.Tb(0,"a",21),y.Ec(1),y.Sb()),2&e){var i=t.item,n=y.dc(2).$implicit,r=y.dc(2);y.jc("routerLink",r.getLink(n,i))("queryParams",r.getColumnQueryParams(n,i)),y.Bb(1),y.Gc(" ",n.text||i[n.bindingName],"")}}function E(e,t){1&e&&y.Cc(0,M,2,3,"ng-template",20)}function P(e,t){if(1&e){var i=y.Ub();y.Tb(0,"a",22),y.bc("click",(function(){y.vc(i);var e=t.item,n=y.dc(2).$implicit;return y.dc(2).onCellEvent(n.clickEvent,e)})),y.Ec(1),y.Sb()}if(2&e){var n=t.item,r=y.dc(2).$implicit;y.Bb(1),y.Gc(" ",r.text||n[r.bindingName],"")}}function I(e,t){1&e&&y.Cc(0,P,2,1,"ng-template",20)}function D(e,t){if(1&e&&y.Ec(0),2&e){var i=t.item,n=y.dc(2).$implicit;y.Gc(" ",n.calculate(i)," ")}}function k(e,t){1&e&&y.Cc(0,D,1,1,"ng-template",20)}function L(e,t){if(1&e&&(y.Rb(0),y.Tb(1,"wj-flex-grid-column",18),y.Cc(2,E,1,0,void 0,19),y.Cc(3,I,1,0,void 0,19),y.Cc(4,k,1,0,void 0,19),y.Sb(),y.Qb()),2&e){var i=t.$implicit,n=y.dc(2);y.Bb(1),y.jc("allowSorting",n.allowSorting(i.allowSorting))("header",n.getDefaultHeader(i))("binding",i.bindingName)("width",i.width||n.properties.colWidth||null)("dataMap",i.dataMap)("dataType",i.dataType||n.properties.dataType)("format",i.displayFormat||n.properties.displayFormat)("isReadOnly",i.isReadOnly||!!i.calculate||!!i.clickEvent)("minWidth",i.minWidth)("multiLine",i.multiLine)("maxWidth",i.maxWidth),y.Bb(1),y.jc("ngIf",i.link),y.Bb(1),y.jc("ngIf",i.clickEvent),y.Bb(1),y.jc("ngIf",i.calculate)}}var F=function(e){return["../",e]};function R(e,t){if(1&e&&(y.Tb(0,"a",21),y.Ec(1,"Details"),y.Sb()),2&e){var i=t.item,n=y.dc(3);y.jc("routerLink",y.nc(2,F,n.properties.details.pageName))("queryParams",n.getQueryParams(i))}}function B(e,t){1&e&&(y.Tb(0,"wj-flex-grid-column",23),y.Cc(1,R,2,4,"ng-template",20),y.Sb())}function z(e,t){if(1&e&&(y.Tb(0,"div",24),y.Tb(1,"span",25),y.Ec(2),y.ec(3,"number"),y.Sb(),y.Sb()),2&e){var i=y.dc(2);y.Bb(2),y.Gc("Rows: ",y.fc(3,1,i.itemsSource.items.length),"")}}function V(e,t){if(1&e){var i=y.Ub();y.Rb(0),y.Tb(1,"div"),y.Cc(2,N,1,2,"i",2),y.Cc(3,A,1,1,"dc-text",3),y.Sb(),y.Tb(4,"wj-menu",4,5),y.bc("itemClicked",(function(){y.vc(i);var e=y.sc(5);return y.dc().onCtxMenuClicked(e)})),y.Tb(6,"wj-menu-item",6),y.Tb(7,"span",7),y.Ob(8,"i",8),y.Ec(9,"Edit Column"),y.Sb(),y.Sb(),y.Tb(10,"wj-menu-item",9),y.Tb(11,"span",7),y.Ob(12,"i",10),y.Ec(13,"Show In Data Explorer"),y.Sb(),y.Sb(),y.Sb(),y.Tb(14,"wj-flex-grid",11,12),y.bc("initialized",(function(){y.vc(i);var e=y.sc(15);return y.dc().initializedGrid(e)})),y.Cc(16,L,5,14,"ng-container",13),y.Cc(17,B,2,0,"wj-flex-grid-column",14),y.Ob(18,"wj-flex-grid-filter",null,15),y.Sb(),y.Cc(20,z,4,3,"div",16),y.Qb()}if(2&e){var n=y.sc(5),r=y.dc();y.Bb(2),y.jc("ngIf",r.properties.titleIcon),y.Bb(1),y.jc("ngIf",r.properties.title),y.Bb(1),y.jc("isButton",!0),y.Bb(10),y.jc("wjContextMenu",n)("itemsSource",r.itemsSource)("ngStyle",r.itemStyles)("allowResizing",r.properties.allowResizing)("allowMerging",r.properties.allowMerging)("stickyHeaders",r.properties.stickyHeaders)("selectionMode",r.properties.selectionMode)("allowAddNew",!!r.properties.allowAddNew)("frozenRows",r.properties.frozenRows)("frozenColumns",r.properties.frozenColumns)("headersVisibility",r.headersVisibility)("allowDelete",r.properties.allowDelete)("isReadOnly",r.properties.isReadOnly),y.Bb(2),y.jc("ngForOf",r.columnsList),y.Bb(1),y.jc("ngIf",r.properties.details),y.Bb(3),y.jc("ngIf",!1!==r.properties.footer)}}function H(e,t){1&e&&(y.Tb(0,"div",26),y.Ec(1," Not Found\n"),y.Sb())}var X=function(e){function t(t){var i=e.call(this)||this;return i.dialogService=t,i.classAttr="flex-column h-100",i.display="flex",i.direction="column",i.localGridConfig=new g.a,i._dataProperties=[],i._columns=[],i.defaultProperties={allowResizing:s.AllowResizing.Both,allowMerging:s.AllowMerging.All,allowDelete:!1,frozenColumns:0,frozenRows:0,isReadOnly:!1,stickyHeaders:!1,selectionMode:s.SelectionMode.Cell},i}return Object(n.d)(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return Object(n.a)(Object(n.a)({},this.defaultProperties),this.uiModel.itemProperties)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsList",{get:function(){var e=this;return this.properties.columns&&this.properties.columns.length?this.properties.columns.map((function(t){var i=e.localGridConfig.getColumn(t.bindingName);return Object.assign(t,i),t})):(this.getColumns(),this._columns)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleConfig",{get:function(){var e;return{type:"text",itemProperties:(e={text:this.properties.title},e["text-style"]=this.properties.titleStyle,e)}},enumerable:!1,configurable:!0}),t.prototype.initializedGrid=function(e){var t=this;this.gridContext=Object(p.c)(e),e.cellEditEnded.addHandler((function(){return t.changeHandler()})),e.deletedRow.addHandler((function(){return t.changeHandler()})),e.pasted.addHandler((function(){return t.changeHandler()})),Array.isArray(this.properties.groups)&&this.properties.groups.forEach((function(e){var i=new r.PropertyGroupDescription(e);t._collectionView.groupDescriptions.push(i)})),e.addEventListener(this.grid.hostElement,"contextmenu",(function(i){var n=t.grid.hitTest(i);t.gridHitCell=n;var r=n.col>-1?n.col:e.columns.length-1,o=t.grid.columns.find((function(e,t){return r===t}));t.columnToEdit=t.columnsList.find((function(e){return e.bindingName===(null==o?void 0:o.binding)}));var s=t.grid.collectionView.items[n.row];s&&(t.contextMenuValue=s[o.binding])}))},t.prototype.allowSorting=function(e){return"boolean"!=typeof e||e},t.prototype.onCtxMenuClicked=function(e){"edit"===e.value?this.editColumn():"data-explorer"===e.value&&this.dataExplorer()},t.prototype.editColumn=function(){var e=this,t=this.dialogService.open(m.a,{class:"modal-lg"});t.config=[this.columnToEdit],t.init.pipe(Object(o.a)((function(){return t.component.save}))).subscribe((function(t){t.forEach((function(t){e.localGridConfig.saveColumn(t.bindingName,t)})),e.grid.refresh(!0)}))},t.prototype.dataExplorer=function(){var e=this,t=this.dialogService.open(d.a,{class:"modal-xl full-height"});t.config={value:this.contextMenuValue,options:this.properties},t.init.pipe(Object(o.a)((function(){return t.component.save}))).subscribe((function(t){e.grid.startEditing(!1,e.gridHitCell.row,e.gridHitCell.col),e.grid.setCellData(e.gridHitCell.row,e.gridHitCell.col,t),e.grid.cellEditEnded.raise(e.grid,e.gridHitCell)}))},t.prototype.getColumns=function(){var e,t=this;if(this.getColumnsKey()!==this._columnsKey){var i=[];(null===(e=this.properties.removeColumns)||void 0===e?void 0:e.length)&&(this._dataProperties=this._dataProperties.filter((function(e){return!t.properties.removeColumns.includes(e)}))),this._dataProperties.forEach((function(e){var n=(t.properties.overrideColumns||[]).find((function(t){return t.bindingName===e}));i.push(n||{headerText:Object(c.formatCamelStr)(e),bindingName:e})})),this._columnsKey=this.getColumnsKey(),this._columns=i}},t.prototype.getColumnsKey=function(){if(this.properties.overrideColumns||this.properties.removeColumns)return JSON.stringify(this.properties.overrideColumns)+JSON.stringify(this.properties.removeColumns)+JSON.stringify(this._dataProperties)},t.prototype.changeHandler=function(){var e=this.gridContext.state,t=e.added,i=e.edited,r=[];i&&(r=Object(n.g)(r,i)),t&&(r=Object(n.g)(r,t)),this.changedData=r,this.dataModel.changedData=r},Object.defineProperty(t.prototype,"headersVisibility",{get:function(){return this.properties.hasOwnProperty("headersVisibility")?this.properties.headersVisibility:s.HeadersVisibility.All},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){var e=this;if(!this.dataModel.changedData&&this.changedData&&(this.changedData=null,this.gridContext.clear(),this.grid.refreshCells(!1)),this.componentDataModel===this._componentDataModel)return this._collectionView;this._componentDataModel=this.componentDataModel;var t=this.properties.isVertical?Object(l.transpose)(this.componentDataModel):this.componentDataModel;return t&&t.length&&(this._dataProperties=Object.keys(t[0]),this.getColumns()),this._collectionView=new r.CollectionView([]),window.requestAnimationFrame((function(){e._collectionView.sourceCollection=t||[]})),this._collectionView},enumerable:!1,configurable:!0}),t.prototype.getQueryParams=function(e){var t;return(t={})[this.properties.details.idField]=e[this.properties.details.idField],t},t.prototype.getColumnQueryParams=function(e,t){var i=h.a.resolveString(e.link.replace(/.*\?/,""),t);return Object(u.j)(null,i)},t.prototype.getLink=function(e,t){return h.a.resolveString(e.link.replace(/\?.*/,""),t)},t.prototype.getDefaultHeader=function(e){return e.headerText||Object(c.formatCamelStr)(e.bindingName)},t.prototype.onCellEvent=function(e,t){this.emitEvent(e,t)},t.\u0275fac=function(e){return new(e||t)(y.Nb(v.b))},t.\u0275cmp=y.Hb({type:t,selectors:[["dc-grid"]],viewQuery:function(e,t){var i;1&e&&(y.Jc(j,!0),y.Jc(T,!0)),2&e&&(y.rc(i=y.cc())&&(t.filter=i.first),y.rc(i=y.cc())&&(t.grid=i.first))},hostVars:6,hostBindings:function(e,t){2&e&&(y.Db(t.classAttr),y.Bc("display",t.display)("flex-direction",t.direction))},features:[y.yb],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["empty",""],[3,"class",4,"ngIf"],["class","mr-2",3,"uiModel",4,"ngIf"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],["value","edit"],[1,"px-2"],[1,"fa","fa-edit","mr-1","my-2"],["value","data-explorer"],[1,"fa","fa-file-code-o","mr-1","my-2"],[1,"h-100","w-100",3,"wjContextMenu","itemsSource","ngStyle","allowResizing","allowMerging","stickyHeaders","selectionMode","allowAddNew","frozenRows","frozenColumns","headersVisibility","allowDelete","isReadOnly","initialized"],["grid",""],[4,"ngFor","ngForOf"],["header","Actions",4,"ngIf"],["filter",""],["class","row m-0 align-items-center",4,"ngIf"],[1,"mr-2",3,"uiModel"],[3,"allowSorting","header","binding","width","dataMap","dataType","format","isReadOnly","minWidth","multiLine","maxWidth"],[4,"ngIf"],["wjFlexGridCellTemplate","","cellType","Cell"],[3,"routerLink","queryParams"],["href","javascript:void(0)",3,"click"],["header","Actions"],[1,"row","m-0","align-items-center"],[1,"ml-auto","mt-1"],[1,"text-center"]],template:function(e,t){if(1&e&&(y.Cc(0,V,21,19,"ng-container",0),y.Cc(1,H,2,0,"ng-template",null,1,y.Dc)),2&e){var i=y.sc(2);y.jc("ngIf",null==t.itemsSource?null:t.itemsSource.items.length)("ngIfElse",i)}},directives:[x.m,w.d,w.e,S.a,w.a,x.n,x.l,C.a,a.v,S.c,S.b,O.h],pipes:[x.f],encapsulation:2}),t}(a.a),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),Object(n.c)([Object(a.r)({description:"Allow resizing",example:"3"}),Object(n.f)("design:type",Number)],t.prototype,"allowResizing",void 0),Object(n.c)([Object(a.r)({description:"Specifies constants that define the selection behavior.",example:"5"}),Object(n.f)("design:type",Number)],t.prototype,"selectionMode",void 0),Object(n.c)([Object(a.r)({description:"Specifies constants that define which areas of the grid support cell merging.",example:"7"}),Object(n.f)("design:type",Number)],t.prototype,"allowMerging",void 0),Object(n.c)([Object(a.r)({description:"Property to ensure column headers remain visible when you scroll the document.",example:"true"}),Object(n.f)("design:type",Boolean)],t.prototype,"stickyHeaders",void 0),Object(n.c)([Object(a.r)({description:"Specifies list of columns to display.",example:"[{\n      headerText: 'Header title',\n      bindingName: 'propName',\n      dataType: 'Number'\n    }]"}),Object(n.f)("design:type",Array)],t.prototype,"columns",void 0),Object(n.c)([Object(a.r)({description:"Amount of first frozen rows.",example:"3"}),Object(n.f)("design:type",Object)],t.prototype,"frozenRows",void 0),Object(n.c)([Object(a.r)({description:"Amount of first frozen columns.",example:"2"}),Object(n.f)("design:type",Object)],t.prototype,"frozenColumns",void 0),Object(n.c)([Object(a.r)({description:"Specifies constants that define the visibility of row and column headers.",example:"Column"}),Object(n.f)("design:type",Number)],t.prototype,"headersVisibility",void 0),Object(n.c)([Object(a.r)({description:"Specifies if row can be deleted. Default false",example:"true"}),Object(n.f)("design:type",Boolean)],t.prototype,"allowDelete",void 0),Object(n.c)([Object(a.r)({description:"Determines whether the user can modify cell. Default false",example:"true"}),Object(n.f)("design:type",Boolean)],t.prototype,"isReadOnly",void 0),Object(n.c)([Object(a.r)({description:"Specify if grid should render data vertically",example:"true"}),Object(n.f)("design:type",Boolean)],t.prototype,"isVertical",void 0),Object(n.c)([Object(a.r)({description:"Specifies list of columns that should be overriden.",example:"[{\n      headerText: 'Header title',\n      bindingName: 'propName',\n      dataType: 'Number'\n    }]"}),Object(n.f)("design:type",Array)],t.prototype,"overrideColumns",void 0),Object(n.c)([Object(a.r)({description:"Specifies list of columns that should be removed.",example:"['prop1', 'prop2']"}),Object(n.f)("design:type",Array)],t.prototype,"removeColumns",void 0),Object(n.c)([Object(a.r)({description:"Specifies grid title",example:"Table name"}),Object(n.f)("design:type",String)],t.prototype,"title",void 0),Object(n.c)([Object(a.r)({description:"Specifies grid title icon",example:"c-icon c-icon-2xl cil-diamond"}),Object(n.f)("design:type",String)],t.prototype,"titleIcon",void 0),Object(n.c)([Object(a.r)({description:"Specifies grid title style",example:"h2"}),Object(n.f)("design:type",String)],t.prototype,"titleStyle",void 0),Object(n.c)([Object(a.r)({description:"Specifies grid grouping columns",example:'["Month"]'}),Object(n.f)("design:type",Array)],t.prototype,"groups",void 0),Object(n.c)([Object(a.r)({description:"Specify if grid footer should be renderd.",example:"false"}),Object(n.f)("design:type",Boolean)],t.prototype,"footer",void 0),Object(n.c)([Object(a.r)({description:"Default grid cell dataType.",example:"Number"}),Object(n.f)("design:type",Number)],t.prototype,"dataType",void 0),Object(n.c)([Object(a.r)({description:"Default grid cell dataType.",example:"c0"}),Object(n.f)("design:type",String)],t.prototype,"displayFormat",void 0),Object(n.c)([Object(a.r)({description:"Default grid column width.",example:"100"}),Object(n.f)("design:type",Object)],t.prototype,"colWidth",void 0),t}(a.e),W={name:"vendor-grid",packageName:"vendor",label:"DataGrid",category:"Data",parseUIModel:function(e){var t={};!e.attrs.columns&&e.childNodes&&(e.childNodes.forEach((function(e){var i=Object(a.u)(e);"column"===i.type&&Object(p.a)(i,t)})),e.childNodes=null);var i=e.attrs.colWidth;return i&&(t.colWidth=i.includes("*")?i:Number(i)),t.isReadOnly="true"===e.attrs.isReadOnly,e.attrs.groups&&(t.groups=e.attrs.groups.split(",")),"false"===e.attrs.footer&&(t.footer=!1),{type:"vendor-grid",itemProperties:t}},description:"Data table component",itemProperties:G,component:X,example:_,children:[f.a]}},h9Sk:function(e,t,i){e.exports={ResizeSensor:i("KtZj"),ElementQueries:i("rnKy")}},iLQq:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("tcrU"),r=i("a5yf"),o={tag:"column",properties:[{name:"headerText",label:"Column header"},{name:"bindingName",label:"Binding property"},{name:"dataType",label:"Column data type",values:Object(r.b)(n.DataType)},{name:"displayFormat",label:"Display format"},{name:"width",label:"Column width"},{name:"minWidth",label:"Column min width"},{name:"maxWidth",label:"Column max width"},{name:"override",label:"Override default column",values:[!0,!1]},{name:"link",label:"Cell link",values:["relative/path/page","../path?param={{ItemProp}}"]},{name:"multiLine",label:"Multiline column",values:[!0,!1]},{name:"text",label:"Static text"},{name:"clickEvent",label:"Column click event handler"},{name:"isReadOnly",label:"Defines wheather column is readonly"}]}},lgZ4:function(e,t,i){"use strict";i.r(t),i.d(t,"_VolumeHelper",(function(){return c})),i.d(t,"_Spline",(function(){return h})),i.d(t,"Palettes",(function(){return u})),i.d(t,"PlotArea",(function(){return d})),i.d(t,"PlotAreaCollection",(function(){return p})),i.d(t,"_SvgRenderEngine",(function(){return y})),i.d(t,"SvgRenderEngine",(function(){return x})),i.d(t,"Legend",(function(){return w})),i.d(t,"DataPoint",(function(){return S})),i.d(t,"RenderEventArgs",(function(){return C})),i.d(t,"SeriesRenderingEventArgs",(function(){return O})),i.d(t,"ImageFormat",(function(){return f})),i.d(t,"SelectionMode",(function(){return g})),i.d(t,"Position",(function(){return m})),i.d(t,"Orientation",(function(){return b})),i.d(t,"FlexChartBase",(function(){return N})),i.d(t,"_KeyWords",(function(){return A})),i.d(t,"ChartTooltip",(function(){return E})),i.d(t,"LabelPosition",(function(){return j})),i.d(t,"PieLabelPosition",(function(){return T})),i.d(t,"DataLabelRenderEventArgs",(function(){return k})),i.d(t,"DataLabelBase",(function(){return L})),i.d(t,"DataLabel",(function(){return F})),i.d(t,"PieDataLabel",(function(){return R})),i.d(t,"AxisType",(function(){return P})),i.d(t,"OverlappingLabels",(function(){return I})),i.d(t,"TickMark",(function(){return D})),i.d(t,"Axis",(function(){return z})),i.d(t,"AxisCollection",(function(){return V})),i.d(t,"_DataPoint",(function(){return W})),i.d(t,"_MeasureOption",(function(){return H})),i.d(t,"_RectArea",(function(){return U})),i.d(t,"_CircleArea",(function(){return q})),i.d(t,"_LinesArea",(function(){return K})),i.d(t,"_HitResult",(function(){return $})),i.d(t,"_HitTester",(function(){return J})),i.d(t,"ChartElement",(function(){return Y})),i.d(t,"HitTestInfo",(function(){return ee})),i.d(t,"SeriesVisibility",(function(){return Q})),i.d(t,"Marker",(function(){return Z})),i.d(t,"DataArray",(function(){return ne})),i.d(t,"SeriesEventArgs",(function(){return re})),i.d(t,"SeriesBase",(function(){return oe})),i.d(t,"Series",(function(){return se})),i.d(t,"FlexPie",(function(){return ae})),i.d(t,"_PieSegment",(function(){return ce})),i.d(t,"_DonutSegment",(function(){return he})),i.d(t,"_BasePlotter",(function(){return ue})),i.d(t,"ChartType",(function(){return te})),i.d(t,"Stacking",(function(){return ie})),i.d(t,"FlexChartCore",(function(){return ge})),i.d(t,"_DataInfo",(function(){return be})),i.d(t,"FlexChart",(function(){return _e})),i.d(t,"_AreaPlotter",(function(){return ye})),i.d(t,"_BarPlotter",(function(){return ve})),i.d(t,"_FunnelPlotter",(function(){return xe})),i.d(t,"_FunnelSegment",(function(){return we})),i.d(t,"_FinancePlotter",(function(){return Se})),i.d(t,"LineMarkerLines",(function(){return de})),i.d(t,"LineMarkerInteraction",(function(){return pe})),i.d(t,"LineMarkerAlignment",(function(){return fe})),i.d(t,"LineMarker",(function(){return Oe})),i.d(t,"_LinePlotter",(function(){return je})),i.d(t,"_BubblePlotter",(function(){return Te}));var n,r,o,s=i("tcrU"),a=i("lgZ4"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(){function e(e,t,i,n,r){this._volumes=Object(s.asArray)(e),this._xVals=Object(s.asArray)(t),this._xDataMin=Object(s.asNumber)(i,!0,!1),this._xDataMax=Object(s.asNumber)(n,!0,!1),this._xDataType=Object(s.asEnum)(r,s.DataType,!0),this._calcData=[],this._init()}return e.prototype.convert=function(t,i,n){var r=void 0,o=this._calcData.length,a=-1;if(this._hasXs&&this._xDataType===s.DataType.Date){if(-1===(a=this._xVals.indexOf(t)))for(var l=0;l<this._xVals.length;l++){if(l<this._xVals.length-1&&this._xVals[l]<=t&&t<=this._xVals[l+1]){a=l;break}if(0===l&&t<=this._xVals[l]){a=l;break}if(l===this._xVals.length-1&&this._xVals[l]<=t){a=l;break}}-1===a&&(a=this._xVals.indexOf(Math.floor(t)),a=Object(s.clamp)(a,0,o-1))}else this._hasXs?-1===(a=this._xVals.indexOf(t))&&(a=this._xVals.indexOf(Math.floor(t)),a=Object(s.clamp)(a,0,o-1)):a=Object(s.clamp)(Math.round(t),0,o-1);return 0<=a&&a<o&&(this._hasXs&&(t=e.convertToRange(t,0,o-1,this._xDataMin,this._xDataMax)),r=((r=this._calcData[a].value+(t-a)*this._calcData[a].width-.5*this._calcData[a].width)-(i=this._getXVolume(i)))/((n=this._getXVolume(n))-i)),r},e.prototype.convertBack=function(t,i,n){var r,o=void 0,s=this._calcData.length,a=-1;for(r=0;r<s;r++)if(this._calcData[r].x1<=t&&t<=this._calcData[r].x2||0===r&&t<=this._calcData[r].x2||r===s-1&&this._calcData[r].x1<=t){a=r;break}return 0<=a&&a<s&&(o=t/this._calcData[a].width-this._calcData[a].value/this._calcData[a].width+.5+r,this._hasXs&&(o=e.convertToRange(o,this._xDataMin,this._xDataMax,0,s-1))),o},e.prototype._init=function(){this._hasXs=null!==this._xVals&&this._xVals.length>0,this._hasXs&&!Object(s.isNumber)(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals)),this._hasXs&&!Object(s.isNumber)(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals)),this._hasXs&&(this._hasXs=Object(s.isNumber)(this._xDataMin)&&Object(s.isNumber)(this._xDataMax)),this._hasXs&&this._xDataType===s.DataType.Date&&this._fillGaps();var e=0,t=0,i=null!==this._volumes&&this._volumes.length>0?this._volumes.length:0;for(t=0;t<i;t++)e+=this._volumes[t]||0;var n,r,o=0;for(t=0;t<i;t++)n=o+(r=(this._volumes[t]||0)/e),this._calcData.push({value:n,width:r,x1:o,x2:n}),o=this._calcData[t].value},e.prototype._getXVolume=function(t){var i=this._calcData.length,n=-1;if(this._hasXs){n=this._xVals.indexOf(t);for(var r=0;r<this._xVals.length;r++){if(r<this._xVals.length-1&&this._xVals[r]<=t&&t<=this._xVals[r+1]){n=r;break}if(0===r&&t<=this._xVals[r]){n=r;break}if(r===this._xVals.length-1&&this._xVals[r]<=t){n=r;break}}}return this._hasXs&&(t=e.convertToRange(t,0,i-1,this._xDataMin,this._xDataMax)),-1===n&&(n=Object(s.clamp)(Math.round(t),0,i-1)),this._calcData[n].value+(t-n)*this._calcData[n].width-.5*this._calcData[n].width},e.convertToRange=function(e,t,i,n,r){return t===i||n===r?0:(e-n)*(i-t)/(r-n)+t},e.prototype._fillGaps=function(){if(!(this._xDataType!==s.DataType.Date||null===this._xVals||this._xVals.length<=0)){var e,t=this._xDataMin,i=this._xDataMax;for(e=1;t<i;e++)(t=new Date(t)).setDate(t.getDate()+1),(t=t.valueOf())!==this._xVals[e]&&(this._xVals.splice(e,0,t),this._volumes.splice(e,0,0))}},e}(),h=function(){function e(e,t,i){this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]],this._x=e,this._y=t;var n=this._len=i||Math.min(e.length,t.length);if(n>3)for(var r=0;r<n-1;r++){var o=0==r?new s.Point(e[r],t[r]):new s.Point(e[r-1],t[r-1]),a=new s.Point(e[r],t[r]),l=new s.Point(e[r+1],t[r+1]),c=r==n-2?new s.Point(e[r+1],t[r+1]):new s.Point(e[r+2],t[r+2]),h=new s.Point,u=new s.Point,d=new s.Point,p=new s.Point;h.x=o.x*this.m[0][0]+a.x*this.m[0][1]+l.x*this.m[0][2]+c.x*this.m[0][3],u.x=o.x*this.m[1][0]+a.x*this.m[1][1]+l.x*this.m[1][2]+c.x*this.m[1][3],d.x=o.x*this.m[2][0]+a.x*this.m[2][1]+l.x*this.m[2][2]+c.x*this.m[2][3],p.x=o.x*this.m[3][0]+a.x*this.m[3][1]+l.x*this.m[3][2]+c.x*this.m[3][3],h.y=o.y*this.m[0][0]+a.y*this.m[0][1]+l.y*this.m[0][2]+c.y*this.m[0][3],u.y=o.y*this.m[1][0]+a.y*this.m[1][1]+l.y*this.m[1][2]+c.y*this.m[1][3],d.y=o.y*this.m[2][0]+a.y*this.m[2][1]+l.y*this.m[2][2]+c.y*this.m[2][3],p.y=o.y*this.m[3][0]+a.y*this.m[3][1]+l.y*this.m[3][2]+c.y*this.m[3][3],this._a.push(h),this._b.push(u),this._c.push(d),this._d.push(p)}}return e.prototype.calculatePoint=function(e){var t=Math.floor(e);t<0&&(t=0),t>this._len-2&&(t=this._len-2);var i=e-t;return{x:((this._a[t].x*i+this._b[t].x)*i+this._c[t].x)*i+this._d[t].x,y:((this._a[t].y*i+this._b[t].y)*i+this._c[t].y)*i+this._d[t].y}},e.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};var e=[],t=[],i=this.calculatePoint(0);e.push(i.x),t.push(i.y);for(var n=this._len*this.k,r=n;r<=this._len-1;r+=n){var o=this.calculatePoint(r);(Math.abs(i.x-o.x)>=3||Math.abs(i.y-o.y)>=3)&&(e.push(o.x),t.push(o.y),i=o)}return{xs:e,ys:t}},e}(),u=function(){function e(){}return e.standard=["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"],e.cocoa=["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872","#73b22b","#b87320","#141414"],e.coral=["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2","#ede9d0","#e96b7d","#888888"],e.dark=["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c","#d5a211","#dc0127","#000000"],e.highcontrast=["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a","#607efd","#1b7700","#000000"],e.light=["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7","#9e95c7","#95b0c7","#9b9b9b"],e.midnight=["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7","#d89c54","#e86996","#2c343b"],e.modern=["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6","#d0c041","#e35855","#68706a"],e.organic=["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0","#61bbd8","#e2d76f","#80715a"],e.slate=["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4","#bacc5c","#e5746a","#505d65"],e.zen=["#7bb5ae","#e2d287","#92b8da","#eac4cb","#7b8bbd","#c7d189","#b9a0c8","#dfb397","#a9a9a9"],e.cyborg=["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3","#3d6dcc","#525252","#000000"],e.superhero=["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c","#b6b86e","#4e5d6c","#2b3e4b"],e.flatly=["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5","#e74c3c","#8a9899","#2c3e50"],e.darkly=["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3","#b08725","#4a4949","#000000"],e.cerulan=["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323","#e3bb00","#cccccc","#222222"],e}(),d=function(){function e(e){this._row=0,this._col=0,this._rect=new s.Rect(0,0,0,0),Object(s.copy)(this,e)}return Object.defineProperty(e.prototype,"row",{get:function(){return this._row},set:function(e){e!=this._row&&(this._row=Object(s.asInt)(e,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._col},set:function(e){e!=this._col&&(this._col=Object(s.asInt)(e,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){e!=this._name&&(this._name=Object(s.asString)(e,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){e!=this._height&&(this._height=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(e){e!=this._style&&(this._style=e,this._invalidate())},enumerable:!0,configurable:!0}),e.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},e.prototype._render=function(e){e.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},e.prototype._setPlotX=function(e,t){this._rect.left=e,this._rect.width=t},e.prototype._setPlotY=function(e,t){this._rect.top=e,this._rect.height=t},e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getPlotArea=function(e){var t=this.indexOf(e);return t>-1?this[t]:null},t.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t].name==e)return t;return-1},t.prototype._getWidth=function(e){for(var t=0;t<this.length;t++){var i=this[t];if(i.column==e&&0==i.row)return i.width}},t.prototype._getHeight=function(e){for(var t=0;t<this.length;t++){var i=this[t];if(i.row==e&&0==i.column)return i.height}},t.prototype._calculateWidths=function(e,t){if(t<=0)throw"ncols";for(var i=[],n=0;n<t;n++){var r=this._getWidth(n);i[n]=new _(r)}return this._calculateLengths(e,t,i)},t.prototype._calculateHeights=function(e,t){if(t<=0)throw"nrows";for(var i=[],n=0;n<t;n++){var r=this._getHeight(n);i[n]=new _(r)}return this._calculateLengths(e,t,i)},t.prototype._calculateLengths=function(e,t,i){for(var n=[t],r=0,o=0,s=0;s<t;s++)i[s].isAbsolute?(n[s]=i[s].value,r+=n[s]):i[s].isStar?o+=i[s].value:i[s].isAuto&&o++;var a=(e-r)/o;for(s=0;s<t;s++)i[s].isStar?n[s]=a*i[s].value:i[s].isAuto&&(n[s]=a),n[s]<0&&(n[s]=0);return n},t}(s.ObservableArray);(o=r||(r={}))[o.Auto=0]="Auto",o[o.Pixel=1]="Pixel",o[o.Star=2]="Star";var f,g,m,b,_=function(){function e(e){void 0===e&&(e=null),this._unitType=r.Auto,e&&((e=e.toString()).indexOf("*")>=0?(this._unitType=r.Star,e=e.replace("*",""),this._value=parseFloat(e),isNaN(this._value)&&(this._value=1)):(this._unitType=r.Pixel,this._value=parseFloat(e),isNaN(this._value)&&(this._unitType=r.Auto,this._value=1)))}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStar",{get:function(){return this._unitType==r.Star},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAbsolute",{get:function(){return this._unitType==r.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAuto",{get:function(){return this._unitType==r.Auto},enumerable:!0,configurable:!0}),e}(),y=function(){function e(t){this._strokeWidth=1,this._fontSize=null,this._fontFamily=null,this._savedGradient={},this._bbCache={},this._baseUrl="",this._cssPriority=!0,this._readOnly=!1,this._element=t,this._create(),this._element&&this._element.appendChild(this._svg);var i=navigator.userAgent.toLowerCase();void 0===e._isff&&(e._isff=i.indexOf("firefox")>=0),void 0===e._isSafari&&(e._isSafari=i.indexOf("safari")>-1&&-1==i.indexOf("chrome")),this._baseUrl=window.location.pathname.replace(window.location.hash,""),"file:"==window.location.protocol&&(Object(s.isIE)()||Object(s.isEdge)())&&(this._baseUrl="file:"+this._baseUrl)}return e.prototype.attach=function(e){this._element=e,e&&(e.insertBefore(this._svg,e.childNodes[0]),e.appendChild(this._svg))},e.prototype.detach=function(){for(this._element&&this._element.removeChild(this._svg);this._svg.firstChild;)Object(s.removeChild)(this._svg.firstChild)},e.prototype.beginRender=function(){for(;this._svg.firstChild;)Object(s.removeChild)(this._svg.firstChild);this._savedGradient={},this._bbCache={},this._svg.appendChild(this._defs),this._svg.appendChild(this._textGroup)},e.prototype.endRender=function(){Object(s.removeChild)(this._textGroup)},e.prototype.setViewportSize=function(e,t){this._svg.setAttribute("width",e.toString()),this._svg.setAttribute("height",t.toString())},Object.defineProperty(e.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){this._stroke=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFill",{get:function(){return this._textFill},set:function(e){this._textFill=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssPriority",{get:function(){return this._cssPriority},set:function(e){this._cssPriority=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=e},enumerable:!0,configurable:!0}),e.prototype.addClipRect=function(t,i){if(t&&i){var n=document.createElementNS(e.svgNS,"clipPath"),r=document.createElementNS(e.svgNS,"rect");r.setAttribute("x",(t.left-1).toFixed()),r.setAttribute("y",(t.top-1).toFixed()),r.setAttribute("width",(t.width+2).toFixed()),r.setAttribute("height",(t.height+2).toFixed()),n.appendChild(r),n.setAttribute("id",i),this._svg.appendChild(n)}},e.prototype.drawEllipse=function(t,i,n,r,o,s){var a=document.createElementNS(e.svgNS,"ellipse");return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill),a.setAttribute("cx",t.toFixed(1)),a.setAttribute("cy",i.toFixed(1)),a.setAttribute("rx",n.toFixed(1)),a.setAttribute("ry",r.toFixed(1)),o&&a.setAttribute("class",o),this._applyStyle(a,s),this._appendChild(a),a},e.prototype.drawRect=function(t,i,n,r,o,s,a){var l=document.createElementNS(e.svgNS,"rect");return this._applyColor(l,"fill",this._fill),this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(l,"stroke-width",this._strokeWidth.toString()),l.setAttribute("x",t.toFixed(1)),l.setAttribute("y",i.toFixed(1)),l.setAttribute("width",n>0&&n<.05?"0.1":n.toFixed(1)),l.setAttribute("height",r>0&&r<.05?"0.1":r.toFixed(1)),a&&this._setClipPath(l,a),o&&l.setAttribute("class",o),this._applyStyle(l,s),this._appendChild(l),l},e.prototype.drawLine=function(t,i,n,r,o,s){var a=document.createElementNS(e.svgNS,"line");return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString()),a.setAttribute("x1",t.toFixed(1)),a.setAttribute("x2",n.toFixed(1)),a.setAttribute("y1",i.toFixed(1)),a.setAttribute("y2",r.toFixed(1)),o&&a.setAttribute("class",o),this._applyStyle(a,s),this._appendChild(a),a},e.prototype.drawLines=function(t,i,n,r,o,s){if(t&&i){var a=s||Math.min(t.length,i.length);if(a>0){var l=document.createElementNS(e.svgNS,"polyline");this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(l,"stroke-width",this._strokeWidth.toString()),l.setAttribute("fill","none");for(var c="",h=0;h<a;h++)c+=t[h].toFixed(1)+","+i[h].toFixed(1)+" ";return l.setAttribute("points",c),n&&l.setAttribute("class",n),o&&this._setClipPath(l,o),this._applyStyle(l,r),this._appendChild(l),l}}return null},e.prototype.drawSplines=function(t,i,n,r,o,s){if(t&&i){var a=new h(t,i,s).calculate(),l=a.xs,c=a.ys,u=Math.min(l.length,c.length);if(u>0){var d=document.createElementNS(e.svgNS,"polyline");this._applyColor(d,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(d,"stroke-width",this._strokeWidth.toString()),d.setAttribute("fill","none");for(var p="",f=0;f<u;f++)p+=l[f].toFixed(1)+","+c[f].toFixed(1)+" ";return d.setAttribute("points",p),n&&d.setAttribute("class",n),o&&this._setClipPath(d,o),this._applyStyle(d,r),this._appendChild(d),d}}return null},e.prototype.drawPolygon=function(t,i,n,r,o){if(t&&i){var s=Math.min(t.length,i.length);if(s>0){var a=document.createElementNS(e.svgNS,"polygon");this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill);for(var l="",c=0;c<s;c++)l+=t[c].toFixed(1)+","+i[c].toFixed(1)+" ";return a.setAttribute("points",l),n&&a.setAttribute("class",n),o&&this._setClipPath(a,o),this._applyStyle(a,r),this._appendChild(a),a}}return null},e.prototype.drawPieSegment=function(t,i,n,r,o,a,l,c){if(o>=2*Math.PI)return this.drawEllipse(t,i,n,n,a,l);var h=document.createElementNS(e.svgNS,"path");this._applyColor(h,"fill",this._fill),this._applyColor(h,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(h,"stroke-width",this._strokeWidth.toString());var u=new s.Point(t,i);u.x+=n*Math.cos(r),u.y+=n*Math.sin(r);var d=r+o,p=new s.Point(t,i);p.x+=n*Math.cos(d),p.y+=n*Math.sin(d);var f=" 0 0,1 ";Math.abs(o)>Math.PI&&(f=" 0 1,1 ");var g="M "+u.x.toFixed(1)+","+u.y.toFixed(1);return g+=" A "+n.toFixed(1)+","+n.toFixed(1)+f,g+=p.x.toFixed(1)+","+p.y.toFixed(1),g+=" L "+t.toFixed(1)+","+i.toFixed(1)+" z",h.setAttribute("d",g),c&&this._setClipPath(h,c),a&&h.setAttribute("class",a),this._applyStyle(h,l),this._appendChild(h),h},e.prototype.drawDonutSegment=function(t,i,n,r,o,a,l,c,h){var u=!1;a>=2*Math.PI&&(u=!0,a-=.001);var d=document.createElementNS(e.svgNS,"path");this._applyColor(d,"fill",this._fill),this._applyColor(d,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(d,"stroke-width",this._strokeWidth.toString());var p=new s.Point(t,i);p.x+=n*Math.cos(o),p.y+=n*Math.sin(o);var f=o+a,g=new s.Point(t,i);g.x+=n*Math.cos(f),g.y+=n*Math.sin(f);var m=new s.Point(t,i);m.x+=r*Math.cos(f),m.y+=r*Math.sin(f);var b=new s.Point(t,i);b.x+=r*Math.cos(o),b.y+=r*Math.sin(o);var _=" 0 0,1 ",y=" 0 0,0 ";Math.abs(a)>Math.PI&&(_=" 0 1,1 ",y=" 0 1,0 ");var v="M "+p.x.toFixed(3)+","+p.y.toFixed(3);return v+=" A "+n.toFixed(3)+","+n.toFixed(3)+_,v+=g.x.toFixed(3)+","+g.y.toFixed(3),v+=u?" M "+m.x.toFixed(3)+","+m.y.toFixed(3):" L "+m.x.toFixed(3)+","+m.y.toFixed(3),v+=" A "+r.toFixed(3)+","+r.toFixed(3)+y,v+=b.x.toFixed(3)+","+b.y.toFixed(3),u||(v+=" z"),d.setAttribute("d",v),h&&this._setClipPath(d,h),l&&d.setAttribute("class",l),this._applyStyle(d,c),this._appendChild(d),d},e.prototype.drawString=function(e,t,i,n){var r=this._createText(t,e);i&&r.setAttribute("class",i),this._applyStyle(r,n),this._appendChild(r);var o,a=this._getKey(e,i,this._groupCls);return this._bbCache[a]?r.setAttribute("y",(t.y-((o=this._bbCache[a]).y+o.height)).toFixed(1)):(o=this._getBBox(r),r.setAttribute("y",(t.y-(o.y+o.height-t.y)).toFixed(1))),this._element&&"rtl"==this._element.dir&&!Object(s.isIE)()&&r.setAttribute("x",(t.x+o.width).toFixed(1)),r},e.prototype.drawStringRotated=function(t,i,n,r,o,a){var l=this._createText(i,t);o&&l.setAttribute("class",o),this._applyStyle(l,a);var c=document.createElementNS(e.svgNS,"g");c.setAttribute("transform","rotate("+r.toFixed(1)+","+n.x.toFixed(1)+","+n.y.toFixed(1)+")"),c.appendChild(l),this._appendChild(c);var h=this._getBBox(l);return l.setAttribute("y",(i.y-(h.y+h.height-i.y)).toFixed(1)),this._element&&"rtl"==this._element.dir&&!Object(s.isIE)()&&l.setAttribute("x",(i.x+h.width).toFixed(1)),l},e.prototype.measureString=function(e,t,i,n){var r=new s.Size(0,0);if(!this._fontFamily&&!this._fontSize){var o=this._getKey(e,t,i);if(this._bbCache[o])return this._bbCache[o]}if(this.cssPriority)this._fontSize&&this._text.setAttribute("font-size",this._fontSize),this._fontFamily&&this._text.setAttribute("font-family",this._fontFamily);else{var a="";this._fontSize&&(a+="font-size:"+this._fontSize+";"),this._fontFamily&&(a+="font-family:"+this._fontFamily+";"),a.length>0&&this._text.setAttribute("style",a)}t&&this._text.setAttribute("class",t),i&&this._textGroup.setAttribute("class",i),this._applyStyle(this._text,n),this._setText(this._text,e);var l=this._getBBox(this._text);if(r.width=l.width,r.height=l.height,this._text.removeAttribute("font-size"),this._text.removeAttribute("font-family"),this._text.removeAttribute("class"),this._text.removeAttribute("style"),n)for(var c in n)this._text.removeAttribute(this._deCase(c));if(this._textGroup.removeAttribute("class"),this._text.textContent=null,!this._fontFamily&&!this._fontSize){var h=this._getKey(e,t,i);this._bbCache[h]={x:l.x,y:l.y+1e3,width:l.width,height:l.height}}return r},e.prototype.startGroup=function(t,i,n){void 0===n&&(n=!1);var r=document.createElementNS(e.svgNS,"g");return t&&(r.setAttribute("class",t),this._groupCls=t),i&&this._setClipPath(r,i),this._appendChild(r),n&&r.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=r,r},e.prototype.endGroup=function(){if(this._group){var e=this._group.parentNode;e==this._svg?(this._group=null,this._groupCls=null):(this._group=e,this._groupCls=this._getClass(this._group))}},e.prototype.drawImage=function(t,i,n,r,o){var s=document.createElementNS(e.svgNS,"image");return s.setAttributeNS(e.xlinkNS,"href",t),s.setAttribute("x",i.toFixed(1)),s.setAttribute("y",n.toFixed(1)),s.setAttribute("width",r.toFixed(1)),s.setAttribute("height",o.toFixed(1)),this._appendChild(s),s},e.prototype._setClipPath=function(t,i){t.setAttribute("clip-path","url(#"+i+")"),e._isSafari&&Object(s.setCss)(t,{"-webkit-clip-path":"url(#"+i+")"})},e.prototype._appendChild=function(e){if(!this.readOnly){var t=this._group;t||(t=this._svg),t.appendChild(e)}},e.prototype._create=function(){this._svg=document.createElementNS(e.svgNS,"svg"),this._defs=document.createElementNS(e.svgNS,"defs"),this._svg.appendChild(this._defs),this._text=this._createText(new s.Point(-1e3,-1e3),""),this._textGroup=document.createElementNS(e.svgNS,"g"),this._textGroup.appendChild(this._text),this._svg.appendChild(this._textGroup)},e.prototype._setText=function(e,t){var i=t?t.toString():null;if(i&&i.indexOf("tspan")>=0)try{e.textContent=null;for(var n=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">'+i+"</svg>","text/xml").documentElement.firstChild;n;)e.appendChild(e.ownerDocument.importNode(n,!0)),n=n.nextSibling}catch(e){throw new Error("Error parsing XML string.")}else e.textContent=i},e.prototype._getKey=function(e,t,i){return e+(t||"")+(i||"")},e.prototype._createText=function(t,i){var n=document.createElementNS(e.svgNS,"text");if(this._setText(n,i),n.setAttribute("x",t.x.toFixed(1)),n.setAttribute("y",t.y.toFixed(1)),this.cssPriority)null!=this._textFill&&n.setAttribute("fill",this._textFill),this._fontSize&&n.setAttribute("font-size",this._fontSize),this._fontFamily&&n.setAttribute("font-family",this._fontFamily);else{var r="";null!=this._textFill&&(r+="fill:"+this._textFill+";"),this._fontSize&&(r+="font-size:"+this._fontSize+";"),this._fontFamily&&(r+="font-family:"+this._fontFamily+";"),r.length>0&&n.setAttribute("style",r)}return n},e.prototype._applyStyle=function(e,t){if(t)for(var i in t)"fill"===i||"stroke"===i?this._applyColor(e,i,t[i]):e.setAttribute(this._deCase(i),t[i])},e.prototype._deCase=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},e.prototype._getClass=function(e){var t;if(e)for(var i=e;i&&!(t=i.getAttribute("class"));i=i.parentNode);return t},e.prototype._getBBox=function(t){if(!e._isff)return t.getBBox();try{return t.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}},e.prototype._applyColor=function(t,i,n){var r=v.tryParse(n);if(null!=r){if(!Object(s.isString)(r)){if(null==this._savedGradient[n]){var o,a="gc"+(1e6*Math.random()).toFixed();null!=r.x1?(o=document.createElementNS(e.svgNS,"linearGradient"),["x1","y1","x2","y2","gradientUnits"].forEach((function(e){null!=r[e]&&o.setAttribute(e,r[e])}))):null!=r.r&&(o=document.createElementNS(e.svgNS,"radialGradient"),["cx","cy","r","fx","fy","fr","gradientUnits"].forEach((function(e){null!=r[e]&&o.setAttribute(e,r[e])}))),r.colors&&r.colors&&r.colors.length>0&&r.colors.forEach((function(t){var i=document.createElementNS(e.svgNS,"stop");null!=t.color&&i.setAttribute("stop-color",t.color),null!=t.offset&&i.setAttribute("offset",t.offset),null!=t.opacity&&i.setAttribute("stop-opacity",t.opacity),o.appendChild(i)})),o.setAttribute("id",a),this._defs.appendChild(o),this._savedGradient[n]=a}r="url("+this._baseUrl+"#"+this._savedGradient[n]+")"}this.cssPriority?t.setAttribute(i,r):this._addInlineStyle(t,i,r)}},e.prototype._addInlineStyle=function(e,t,i){var n=e.getAttribute("style");e.setAttribute("style",n?n+t+":"+i+";":t+":"+i+";")},e.prototype._setAttribute=function(e,t,i){this.cssPriority?e.setAttribute(t,i):this._addInlineStyle(e,t,i)},e.svgNS="http://www.w3.org/2000/svg",e.xlinkNS="http://www.w3.org/1999/xlink",e}(),v=function(){function e(){}return e.tryParse=function(t){if(e.parsedColor[t])return e.parsedColor[t];if(null==t||-1===t.indexOf("-")||-1!==t.indexOf("var("))return t;var i,n=t.replace(/\s+/g,"").split(/\-/g),r=n[0][0],o=!1,s=n[0].match(/\(\S+\)/);if(!s||0==s.length)return t;var a=s[0].replace(/[\(\\)]/g,"").split(/\,/g);"l"===r||"L"===r?(i={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]},"l"===r&&(o=!0),["x1","y1","x2","y2"].forEach((function(e,t){null!=a[t]&&(i[e]=o?100*+a[t]+"%":a[t]+"")}))):"r"!==r&&"R"!==r||(i={cx:"0",cy:"0",r:"0",colors:[]},"r"===r&&(o=!0),["cx","cy","r","fx","fy","fr"].forEach((function(e,t){null!=a[t]&&""!==a[t]&&(i[e]=o?100*+a[t]+"%":a[t]+"")}))),o||(i.gradientUnits="userSpaceOnUse"),e.parsedColor[t]=i;var l=n.length-1;return n.forEach((function(e,t){e.indexOf(")")>-1&&(e=e.match(/\)\S+/)[0].replace(")",""));var n=e.split(":"),r={color:"black"};null!=n[0]&&(r.color=n[0]),r.offset=null!=n[1]?o?100*+n[1]+"%":n[1]+"":t/l*100+"%",null!=n[2]&&(r.opacity=n[2]),i.colors.push(r)})),i},e.parsedColor={},e}(),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(y),w=function(){function e(e){this._position=m.Right,this._title="",this._titleAlign="left",this._titlePadding=5,this._areas=new Array,this._sz=new s.Size,this._colRowLens=[],this._orient=b.Auto,this._chart=e}return Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){(e=Object(s.asEnum)(e,m))!=this._position&&(this._position=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){e!=this._title&&(this._title=Object(s.asString)(e,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleAlign",{get:function(){return this._titleAlign},set:function(e){if(e!=this._titleAlign){var t=Object(s.asString)(e,!1);this._titleAlign="right"===t?"right":"center"===t?"center":"left",this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orient},set:function(e){(e=Object(s.asEnum)(e,b))!=this._orient&&(this._orient=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSz},set:function(e){if(e!=this._maxSz){if(Object(s.isNumber)(e))this._maxSz=e;else if(Object(s.isString)(e)){var t=Object(s.asString)(e);Object(s.assert)(N._endsWith(t,"px")||N._endsWith(t,"%"),"number with unit (px or %) expected."),this._maxSz=t}else e&&Object(s.assert)(!1,"number or string expected.");this._invalidate()}},enumerable:!0,configurable:!0}),e.prototype._getDesiredSize=function(e,t,i,n){if(t==m.None)return null;var r=this._chart._getDesiredLegendSize(e,this.orientation==b.Auto?t==m.Right||t==m.Left:this.orientation==b.Vertical,i,n);if(null!=r){if(this.title.length>0){var o=e.measureString(this.title,"wj-title","wj-legend");r.height+=o.height+this._titlePadding,o.width>r.width&&(r.width=o.width)}this._sz=r}return r},e.prototype._getPosition=function(e,t){return this.position==m.Auto?e>=t?m.Right:m.Bottom:this.position},e.prototype._render=function(e,t,i,n,r){this._areas=[];var o=this.orientation==b.Auto?i==m.Right||i==m.Left:this.orientation==b.Vertical;if(e.fill="transparent",e.stroke=null,e.drawRect(t.x,t.y,this._sz.width,this._sz.height),this.title.length){var s=t.clone(),a=e.measureString(this.title,"wj-title`");s.y+=a.height,"right"===this.titleAlign?s.x=t.x+n-a.width:"center"===this.titleAlign&&(s.x=t.x+.5*(n-a.width)),e.drawString(this.title,s,"wj-title");var l=a.height+this._titlePadding;t.y+=l,r-=l}this._chart._renderLegend(e,t,this._areas,o,n,r)},e.prototype._hitTest=function(e){for(var t=this._areas,i=0;i<t.length;i++)if(t[i]&&N._contains(t[i],e))return i;return null},e.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},e.prototype._getMaxSize=function(e){var t=this.maxSize;if(Object(s.isNumber)(t)){if((n=Object(s.asNumber)(t,!0))>0)return Math.min(n,e)}else{var i=Object(s.asString)(t,!0);if(i)if(N._endsWith(i,"px")){if((n=parseFloat(i.replace("px","")))>0)return Math.min(n,e)}else if(N._endsWith(i,"%")){var n;if((n=parseFloat(i.replace("%","")))>0)return e*Math.min(n,100)/100}}return.5*e},e}(),S=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t},C=function(e){function t(t){var i=e.call(this)||this;return i._engine=t,i}return l(t,e),Object.defineProperty(t.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),t}(s.CancelEventArgs),O=function(e){function t(t,i,n){var r=e.call(this,t)||this;return r._index=i,r._count=n,r}return l(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t}(C);!function(e){e[e.Png=0]="Png",e[e.Jpeg=1]="Jpeg",e[e.Svg=2]="Svg"}(f||(f={})),function(e){e[e.None=0]="None",e[e.Series=1]="Series",e[e.Point=2]="Point"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Top=2]="Top",e[e.Right=3]="Right",e[e.Bottom=4]="Bottom",e[e.Auto=5]="Auto"}(m||(m={})),function(e){e[e.Auto=0]="Auto",e[e.Vertical=1]="Vertical",e[e.Horizontal=2]="Horizontal"}(b||(b={}));var j,T,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._palette=null,t._selectionMode=g.None,t._defPalette=u.standard,t._notifyCurrentChanged=!0,t._legendHost=null,t._needBind=!1,t.rendering=new s.Event,t.rendered=new s.Event,t.itemsSourceChanging=new s.Event,t.itemsSourceChanged=new s.Event,t.selectionChanged=new s.Event,t}return l(t,e),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(e){if(this._items!=e){var t=new s.CancelEventArgs;if(!this.onItemsSourceChanging(t))return;this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=e,this._cv=Object(s.asCollectionView)(e),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this.onItemsSourceChanged(t),this._bindChart()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},set:function(e){e!=this._palette&&(this._palette=Object(s.asArray)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(e){e!=this._plotMargin&&(this._plotMargin=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend},set:function(e){e!=this._legend&&(this._legend=Object(s.asType)(e,w),null!=this._legend&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._header},set:function(e){e!=this._header&&(this._header=Object(s.asString)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footer",{get:function(){return this._footer},set:function(e){e!=this._footer&&(this._footer=Object(s.asString)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(e){e!=this._headerStyle&&(this._headerStyle=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(e){e!=this._footerStyle&&(this._footerStyle=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(e){(e=Object(s.asEnum)(e,g))!=this._selectionMode&&(this._selectionMode=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._itemFormatter=Object(s.asFunction)(e),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendering=function(e){this.rendering.raise(this,e)},t.prototype.onRendered=function(e){this.rendered.raise(this,e)},t.prototype.onItemsSourceChanging=function(e){return this.itemsSourceChanging.raise(this,e),!e.cancel},t.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},t.prototype.saveImageToFile=function(e){var t,i,n,r;e&&0!==e.length&&-1!==e.indexOf(".")||(e="image.png"),r=e.split("."),t=r[0],i=r[1].toLowerCase(),n=f[i[0].toUpperCase()+i.substring(1)],this.saveImageToDataUrl(n,(function(e){M.downloadImage(e,t,i)}))},t.prototype.saveImageToDataUrl=function(e,t){var i=Object(s.asEnum)(e,f,!1),n=f[i].toLowerCase();n&&n.length&&this._exportToImage(n,(function(e){t.call(t,e)}))},t.prototype._exportToImage=function(e,t){var i,n=this,r=new Image,o=this._currentRenderEngine.element;i=M.getDataUri(o,this),"svg"===e?t.call(null,i):(r.onload=function(){var i,a=document.createElement("canvas"),l=o.parentNode||o,c=Object(s.getElementRect)(l);a.width=c.width,a.height=c.height;var h=a.getContext("2d"),u=n._bgColor(n.hostElement);n._isTransparent(u)&&(u="#ffffff"),h.fillStyle=u,h.fillRect(0,0,c.width,c.height);var d=window.getComputedStyle(l,null).getPropertyValue("padding-left").replace("px",""),p=window.getComputedStyle(l,null).getPropertyValue("padding-top").replace("px","");h.drawImage(r,+d||0,+p||0),i=a.toDataURL("image/"+e),t.call(null,i),a=null},r.src=i)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.isUpdating||this._refreshChart()},t.prototype.onSelectionChanged=function(e){this.selectionChanged.raise(this,e)},t.prototype.onLostFocus=function(t){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide(),e.prototype.onLostFocus.call(this,t)},t.prototype._cvCollectionChanged=function(e,t){this._clearCachedValues(),this._bindChart()},t.prototype._cvCurrentChanged=function(e,t){this._notifyCurrentChanged&&this._bindChart()},t.prototype._bgColor=function(e){if(!e)return"transparent";var t=getComputedStyle(e).backgroundColor;return this._isTransparent(t)?this._bgColor(e.parentElement):t},t.prototype._isTransparent=function(e){var t=new s.Color(e);return 0==t.a&&0==t.b&&0==t.g&&0==t.r},t.prototype._getColor=function(e){var t=this._defPalette;return null!=this._palette&&this._palette.length>0&&(t=this._palette),t[e%t.length]},t.prototype._getColorLight=function(e){var t=this._getColor(e);return this._getLightColor(t)},t.prototype._getLightColor=function(e){var t=new s.Color(e);return null!=t&&-1===e.indexOf("-")&&(1==t.a&&-1==e.indexOf("rgba")&&(t.a*=.7),e=t.toString()),e},t.prototype._bindChart=function(){this._needBind=!0,this.invalidate()},t.prototype._clearCachedValues=function(){},t.prototype._renderEls=function(e,i,n,r,o){void 0===n&&(n=!0),void 0===r&&(r=null),void 0===o&&(o=!1);var a=i.width,l=i.height;if(0!=a){(isNaN(a)||a<0)&&(a=t._WIDTH),(l<=0||isNaN(l))&&(l=t._HEIGHT);var c=a>0&&l>0;if(c&&e.setViewportSize(a,l),e.beginRender(),e.cssPriority=!0,c){if(this._rectChart=new s.Rect(0,0,a,l),this._prepareRender(),r){var h=e.stroke,u=e.fill;e.fill=r,e.stroke=null,e.drawRect(0,0,a,l),e.fill=u,e.stroke=h}var d=new s.Rect(0,0,a,l);this._chartRectId="chartRect"+(1e6*Math.random()).toFixed(),e.addClipRect(d,this._chartRectId),this._renderHeader(e,d),this._renderFooter(e,d),this._renderLegends(e,d),this._renderChart(e,d,n)}e.endRender()}},t.prototype._render=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=null);var n=this._getHostSize();this._renderEls(e,n,t,i)},t.prototype._renderHidden=function(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=document.createElement("div");Object(s.addClass)(n,this.hostElement.getAttribute("class")||""),n.style.visibility="hidden";var r=new y(n);if(document.body.appendChild(n),!e){var o=this._getHostComputedStyle(),a=0,l=0;o&&(a=this._parsePx(o.width),l=this._parsePx(o.height),0==a&&(a=t._WIDTH),0==l&&(l=t._HEIGHT),a-=this._parsePx(o.paddingLeft),a-=this._parsePx(o.paddingRight),l-=this._parsePx(o.paddingTop),l-=this._parsePx(o.paddingBottom),a-=this._parsePx(o.borderLeftWidth),a-=this._parsePx(o.borderRightWidth),l-=this._parsePx(o.borderTopWidth),l-=this._parsePx(o.borderBottomWidth)),0==a&&(a=t._WIDTH),0==l&&(l=t._HEIGHT),e=new s.Size(a,l)}return this._renderEls(r,e,!0,i,!0),Object(s.removeChild)(n),r.element},t.prototype._renderHeader=function(e,i){e.startGroup(t._CSS_HEADER,this._chartRectId),i=this._drawTitle(e,i,this.header,this.headerStyle,!1),e.endGroup()},t.prototype._renderFooter=function(e,i){e.startGroup(t._CSS_FOOTER,this._chartRectId),i=this._drawTitle(e,i,this.footer,this.footerStyle,!0),e.endGroup()},t.prototype._renderLegends=function(e,i){var n,r,o=this.legend,a=i.width,l=i.height,c=o._getPosition(a,l);switch(n=o._getDesiredSize(e,c,a,l),c){case m.Right:r=new s.Point(a-=n.width,i.top+.5*(l-n.height));break;case m.Left:i.left+=n.width,a-=n.width,r=new s.Point(0,i.top+.5*(l-n.height));break;case m.Top:l-=n.height,r=new s.Point(.5*(a-n.width),i.top),i.top+=n.height;break;case m.Bottom:r=new s.Point(.5*(a-n.width),i.top+(l-=n.height))}if(i.width=a,i.height=l,n){this._rectLegend=new s.Rect(r.x,r.y,n.width,n.height);var h="legRect"+(1e6*Math.random()).toFixed();e.addClipRect(this._rectLegend,h),this._legendHost=e.startGroup(t._CSS_LEGEND,h),this.legend._render(e,r,c,n.width,n.height),e.endGroup()}else this._legendHost=null,this._rectLegend=null},t.prototype._prepareRender=function(){},t.prototype._renderChart=function(e,t,i){},t.prototype._performBind=function(){},t.prototype._getDesiredLegendSize=function(e,t,i,n){return null},t.prototype._renderLegend=function(e,t,i,n,r,o){},t.prototype._getHitTestItem=function(e){return null},t.prototype._getHitTestValue=function(e,t){return null},t.prototype._getHitTestLabel=function(e){return null},t.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind()),this.hostElement&&this._render(this._currentRenderEngine)},t.prototype._drawTitle=function(e,i,n,r,o){var a=t._CSS_TITLE,l=o?t._CSS_FOOTER:t._CSS_HEADER,c=null;if(o?this._rectFooter=null:this._rectHeader=null,null!=n){var h=null,u=null,d=null,p=null;r&&(r.fontSize&&(h=r.fontSize),r.foreground&&(u=r.foreground),r.fill&&(u=r.fill),r.fontFamily&&(d=r.fontFamily),r.halign&&(p=r.halign)),e.fontSize=h,e.fontFamily=d,c=e.measureString(n,a,l,r),i.height-=c.height,u||(u=t._FG),e.textFill=u,o?("left"==p?t._renderText(e,n,new s.Point(i.left,i.bottom),0,0,a,l,r):"right"==p?t._renderText(e,n,new s.Point(i.left+i.width,i.bottom),2,0,a,l,r):t._renderText(e,n,new s.Point(i.left+.5*i.width,i.bottom),1,0,a,l,r),this._rectFooter=new s.Rect(i.left,i.bottom,i.width,c.height)):(this._rectHeader=new s.Rect(i.left,i.top,i.width,c.height),i.top+=c.height,"left"==p?t._renderText(e,n,new s.Point(i.left,0),0,0,a,l,r):"right"==p?t._renderText(e,n,new s.Point(i.left+i.width,0),2,0,a,l,r):t._renderText(e,n,new s.Point(i.left+.5*i.width,0),1,0,a,l,r)),e.textFill=null,e.fontSize=null,e.fontFamily=null}return i},t.prototype.pageToControl=function(e,t){return this._toControl(e,t)},t.prototype._toControl=function(e,t){Object(s.isNumber)(e)&&Object(s.isNumber)(t)?e=new s.Point(e,t):e instanceof MouseEvent&&(e=Object(s.mouseToPage)(e)),Object(s.asType)(e,s.Point);var i=e.clone(),n=this._getHostOffset();i.x-=n.x,i.y-=n.y;var r=this._getHostComputedStyle();if(r){var o=parseInt(r.paddingLeft.replace("px",""));o&&!isNaN(o)&&(i.x-=o);var a=parseInt(r.paddingTop.replace("px",""));a&&!isNaN(a)&&(i.y-=a)}return i},t.prototype._highlightItems=function(e,t,i){if(i)for(var n=0;n<e.length;n++)Object(s.addClass)(e[n],t);else for(n=0;n<e.length;n++)Object(s.removeClass)(e[n],t)},t.prototype._parseMargin=function(e){var t={};if(Object(s.isNumber)(e)&&!isNaN(e))t.top=t.bottom=t.left=t.right=Object(s.asNumber)(e);else if(Object(s.isString)(e)){var i=Object(s.asString)(e).split(" ",4),n=NaN,r=NaN,o=NaN,a=NaN;i&&(4==i.length?(n=parseFloat(i[0]),a=parseFloat(i[1]),r=parseFloat(i[2]),o=parseFloat(i[3])):2==i.length?(n=r=parseFloat(i[0]),o=a=parseFloat(i[1])):1==i.length&&(n=r=o=a=parseFloat(i[1])),isNaN(n)||(t.top=n),isNaN(r)||(t.bottom=r),isNaN(o)||(t.left=o),isNaN(a)||(t.right=a))}return t},t.prototype._showToolTip=function(e,t){var i=this,n=this._tooltip.showDelay;i._clearTimeouts(),i.isDisabled||(e||i._tooltip.hide(),n>0?i._toShow=setTimeout((function(){i._tooltip.show(i.hostElement,e,t),i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))}),n):(i._tooltip.show(i.hostElement,e,t),i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))))},t.prototype._hideToolTip=function(){this._clearTimeouts(),this._tooltip.hide()},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},t.prototype._getHostOffset=function(){var e=Object(s.getElementRect)(this.hostElement);return new s.Point(e.left,e.top)},t.prototype._getHostSize=function(){var e=new s.Size,t=this.hostElement,i=this._getHostComputedStyle(),n=t.offsetWidth,r=t.offsetHeight;return i&&(n-=this._parsePx(i.paddingLeft),n-=this._parsePx(i.paddingRight),r-=this._parsePx(i.paddingTop),r-=this._parsePx(i.paddingBottom),n-=this._parsePx(i.borderLeftWidth),n-=this._parsePx(i.borderRightWidth),r-=this._parsePx(i.borderTopWidth),r-=this._parsePx(i.borderBottomWidth),e.width=n,e.height=r),e},t.prototype._parsePx=function(e){var t=parseFloat(e.replace("px",""));return isNaN(t)?0:t},t.prototype._getHostComputedStyle=function(){var e=this.hostElement;return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},t.prototype._find=function(e,t){for(var i=[],n=0;n<e.childElementCount;n++){var r=e.childNodes.item(n);if(t.indexOf(r.nodeName)>=0)i.push(r);else{var o=this._find(r,t);if(o.length>0)for(var s=0;s<o.length;s++)i.push(o[s])}}return i},t.prototype._getLegendSize=function(e,t){return Math.min(t,this.legend._getMaxSize(e))},t._contains=function(e,t){return!(!e||!t)&&t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},t._intersects=function(e,t){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)},t._toOADate=function(e){return e.valueOf()},t._fromOADate=function(e){return new Date(e)},t._renderText=function(e,t,i,n,r,o,a,l,c){var h=e.measureString(t,o,a,l),u=i.x,d=i.y;switch(n){case 1:u-=.5*h.width;break;case 2:u-=h.width}switch(r){case 1:d+=.5*h.height;break;case 0:d+=h.height}var p=new s.Rect(u,d-h.height,h.width,h.height);return c?c(p)?(e.drawString(t,new s.Point(u,d),o,l),p):null:(e.drawString(t,new s.Point(u,d),o,l),p)},t._renderRotatedText=function(e,t,i,n,r,o,a,l,c,h){var u=e.measureString(t,l,c,h),d=i.x,p=i.y;switch(n){case 1:d-=.5*u.width;break;case 2:d-=u.width}switch(r){case 1:p+=.5*u.height;break;case 0:p+=u.height}return e.drawStringRotated(t,new s.Point(d,p),o,a,l,h)},t._endsWith=function(e,t){if(e&&t){var i=e.length-t.length;return i>=0&&e.indexOf(t,i)===i}return!1},t._WIDTH=300,t._HEIGHT=200,t._SELECTION_THRESHOLD=15,t._CSS_LEGEND="wj-legend",t._CSS_HEADER="wj-header",t._CSS_FOOTER="wj-footer",t._CSS_TITLE="wj-title",t._CSS_LABEL="wj-label",t._CSS_SELECTION="wj-state-selected",t._CSS_PLOT_AREA="wj-plot-area",t._FG="#666",t._epoch=new Date(1899,11,30).getTime(),t._msPerDay=864e5,t}(s.Control),A=function(){function e(){this._keys={},this._keys.seriesName=null,this._keys.pointIndex=null,this._keys.x=null,this._keys.y=null,this._keys.value=null,this._keys.name=null}return e.prototype.replace=function(e,t){var i=this;return Object(s.format)(e,{},(function(e,n,r,o){return i.getValue(n,t,r)}))},e.prototype.getValue=function(e,t,i){switch(e){case"seriesName":return t.series?t.series.name:"";case"pointIndex":return null!=t.pointIndex?t.pointIndex.toFixed():"";case"x":return i?s.Globalize.format(t.x,i):t._xfmt;case"y":return i?s.Globalize.format(t.y,i):t._yfmt;case"value":return i?s.Globalize.format(t.value,i):t._getValueFmt();case"name":return t.name}if(t.item){0==e.indexOf("item.")&&(e=e.substr(5));var n=t.item[e];if(!Object(s.isUndefined)(n))return i?s.Globalize.format(n,i):n}return""},e}(),M=function(){function e(){}return e.downloadImage=function(e,t,i){var n=document.createElement("a"),r="image/"+i;if(navigator.msSaveOrOpenBlob){e=e.substring(e.indexOf(",")+1);var o,a,l,c=atob(e),h=[];for(o=0;o<c.length;o+=512){a=c.slice(o,o+512);for(var u=new Array(a.length),d=0;d<a.length;d++)u[d]=a.charCodeAt(d);var p=new Uint8Array(u);h.push(p)}l=new Blob(h,{type:r}),navigator.msSaveOrOpenBlob(l,t+"."+i)}else n.download=t+"."+i,n.href=e,document.body.appendChild(n),n.addEventListener("click",(function(e){Object(s.removeChild)(n)})),n.click()},e.getDataUri=function(t,i){var n,r,o,a,l,c,h,u,d,p,f=document.createElement("div"),g=t.cloneNode(!0),m=!1;if("svg"==t.tagName?(r=(n=Object(s.getElementRect)(t.parentNode||t)).width||0,o=n.height||0,0==r&&(m=!0),a=t.viewBox.baseVal&&0!==t.viewBox.baseVal.width?t.viewBox.baseVal.width:r,l=t.viewBox.baseVal&&0!==t.viewBox.baseVal.height?t.viewBox.baseVal.height:o):(r=(c=t.getBBox()).x+c.width,o=c.y+c.height,g.setAttribute("transform",g.getAttribute("transform").replace(/translate\(.*?\)/,"")),a=r,l=o,(u=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(g),g=u),m){var b=i._renderHidden(),_=i._getHostComputedStyle(),y=0,v=0;_&&(y=i._parsePx(_.width),v=i._parsePx(_.height)),0==y&&(y=N._WIDTH),0==v&&(v=N._HEIGHT),a=r=y,l=o=v,g=b.cloneNode(!0)}return g.setAttribute("version","1.1"),g.setAttributeNS(e.xmlns,"xmlns","http://www.w3.org/2000/svg"),g.setAttributeNS(e.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink"),g.setAttribute("width",r),g.setAttribute("height",o),g.setAttribute("viewBox","0 0 "+a+" "+l),Object(s.addClass)(g,t.parentNode&&t.parentNode.getAttribute("class")||""),f.appendChild(g),h=e.getStyles(t),(d=document.createElement("style")).setAttribute("type","text/css"),d.innerHTML="<![CDATA[\n"+h+"\n]]>",(p=document.createElement("defs")).appendChild(d),g.insertBefore(p,g.firstChild),"data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(e.doctype+f.innerHTML)))},e.getStyles=function(e){var t="",i=document.styleSheets;return null==i||0===i.length?null:([].forEach.call(i,(function(i){try{if(null==i.cssRules||0===i.cssRules.length)return!0}catch(e){if("SecurityError"==e.name)return console.log("SecurityError. Can't read: "+i.href),!0}[].forEach.call(i.cssRules,(function(i){var n,r=i.style;if(null==r)return!0;try{n=e.querySelector(i.selectorText)}catch(e){console.warn('Invalid CSS selector "'+i.selectorText+'"',e)}n?t+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(t+=i.cssText+"\n")}))})),t)},e.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',e.xmlns="http://www.w3.org/2000/xmlns/",e}(),E=function(e){function t(){var t=e.call(this)||this;return t._content="<b>{seriesName}</b><br/>{x} {y}",t._threshold=15,t}return l(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){e!=this._content&&(this._content=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._threshold},set:function(e){e!=this._threshold&&(this._threshold=Object(s.asNumber)(e))},enumerable:!0,configurable:!0}),t.prototype.show=function(i,n,r){e.prototype.show.call(this,i,n,r);var o=t._eTip;o&&o.style&&(o.style.pointerEvents="none")},t}(s.Tooltip);!function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Top=2]="Top",e[e.Right=3]="Right",e[e.Bottom=4]="Bottom",e[e.Center=5]="Center"}(j||(j={})),function(e){e[e.None=0]="None",e[e.Inside=1]="Inside",e[e.Center=2]="Center",e[e.Outside=3]="Outside",e[e.Radial=4]="Radial",e[e.Circular=5]="Circular"}(T||(T={}));var P,I,D,k=function(e){function t(t,i,n,r){var o=e.call(this,t)||this;return o.cancel=!1,o._ht=i,o._pt=n,o._text=r,o}return l(t,e),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text=Object(s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),t}(C),L=function(){function e(){this.rendering=new s.Event}return Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){e!=this._content&&(this._content=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){return this._bdr},set:function(e){e!=this._bdr&&(this._bdr=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._off},set:function(e){e!=this._off&&(this._off=Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectingLine",{get:function(){return this._line},set:function(e){e!=this._line&&(this._line=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype.onRendering=function(e){return this.rendering.raise(this,e),!e.cancel},e.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},e}(),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pos=j.Top,t}return l(t,e),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(e){(e=Object(s.asEnum)(e,j))!=this._pos&&(this._pos=e,this._invalidate())},enumerable:!0,configurable:!0}),t}(L),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pos=T.Center,t}return l(t,e),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(e){(e=Object(s.asEnum)(e,T))!=this._pos&&(this._pos=e,this._invalidate())},enumerable:!0,configurable:!0}),t}(L);!function(e){e[e.X=0]="X",e[e.Y=1]="Y"}(P||(P={})),function(e){e[e.Auto=0]="Auto",e[e.Show=1]="Show"}(I||(I={})),function(e){e[e.None=0]="None",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Cross=3]="Cross"}(D||(D={}));var B,z=function(){function e(t){this._GRIDLINE_WIDTH=1,this._LINE_WIDTH=1,this._TICK_WIDTH=1,this._TICK_HEIGHT=4,this._TICK_OVERLAP=1,this._TICK_LABEL_DISTANCE=4,this._minorGrid=!1,this._labels=!0,this._isTimeAxis=!1,this._labelPadding=5,this.rangeChanged=new s.Event,this._customConvert=null,this._customConvertBack=null,this.__uniqueId=e._id++,this._position=t,this._axisType=t==m.Bottom||t==m.Top?P.X:P.Y,this._minorTickMarks=D.None,this._overlap=I.Auto}return Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){e!=this._min&&(this._min=Object(s.isDate)(e)?Object(s.asDate)(e,!0):Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){e!=this._max&&(this._max=Object(s.isDate)(e)?Object(s.asDate)(e,!0):Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(e){this._reversed!=e&&(this._reversed=Object(s.asBoolean)(e),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){(e=Object(s.asEnum)(e,m,!1))!=this._position&&(this._position=e,this._position==m.Bottom||this._position==m.Top?this._axisType=P.X:this._position!=m.Left&&this._position!=m.Right||(this._axisType=P.Y),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(e){e!=this._majorUnit&&(this._majorUnit=Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(e){e!=this._minorUnit&&(this._minorUnit=Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){e!=this._name&&(this._name=Object(s.asString)(e,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){e!=this._title&&(this._title=Object(s.asString)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(e){e!=this._format&&(this._format=Object(s.asString)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(e){e!=this._majorGrid&&(this._majorGrid=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(e){(e=Object(s.asEnum)(e,D,!0))!=this._majorTickMarks&&(this._majorTickMarks=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(e){e!=this._minorGrid&&(this._minorGrid=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(e){(e=Object(s.asEnum)(e,D,!0))!=this._minorTickMarks&&(this._minorTickMarks=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisLine",{get:function(){return void 0===this._axisLine?this.axisType==P.X:this._axisLine},set:function(e){e!=this._axisLine&&(this._axisLine=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},set:function(e){e!=this._labels&&(this._labels=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(e){e!=this._labelAlign&&(this._labelAlign=Object(s.asString)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(e){e!=this._labelAngle&&(this._labelAngle=Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},set:function(e){e!=this._origin&&(this._origin=Object(s.asNumber)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(e){(e=Object(s.asEnum)(e,I,!0))!=this._overlap&&(this._overlap=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=e,this._cv=Object(s.asCollectionView)(e),null!=this._cv&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(e){e!=this._binding&&(this._binding=Object(s.asString)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(e){this._ifmt!=e&&(this._ifmt=Object(s.asFunction)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logBase",{get:function(){return this._logBase},set:function(e){e!=this._logBase&&(this._logBase=Object(s.asNumber)(e,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype._getLogBase=function(){return this._chart&&this._chart._stacking===ie.Stacked100pc?0:this.logBase},e.prototype._isLogAxis=function(){var e=this._getLogBase();return null!=e&&e>0},Object.defineProperty(e.prototype,"plotArea",{get:function(){return this._parea},set:function(e){e!=this._parea&&(this._parea=Object(s.asType)(e,d,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(e){e!=this._labelPadding&&(this._labelPadding=Object(s.asNumber)(e,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_groupClass",{get:function(){return this.axisType===P.X?ge._CSS_AXIS_X:ge._CSS_AXIS_Y},enumerable:!0,configurable:!0}),e.prototype.onRangeChanged=function(e){this.rangeChanged.raise(this,e)},e.prototype._getPosition=function(){if(this.axisType==P.X){if(this.position==m.Auto)return m.Bottom}else if(this.axisType==P.Y&&this.position==m.Auto)return m.Left;return this.position},e.prototype._isOverlapped=function(e,t,i,n){var r=this._lbls;if(null!=r&&r.length>1)for(var o=r.length,s=this._values&&this._values.length==o?this._values:null,a=0,l=0,c=0;c<o;c++){var h=s?s[c]:c;if(h>=this._actualMin&&h<=this._actualMax){var u=t*(h-this._actualMin)/(this._actualMax-this._actualMin),d=e.measureString(r[c],i,this._groupClass);if(this.axisType==P.X){if(c>0&&Math.abs(u-a)<Math.max(d.width,l)+12)return!0;a=u,l=d.width}}}return!1},e.prototype._getHeight=function(e,t){this._actualAngle=null;var i=ge._CSS_LABEL,n=ge._CSS_TITLE,r=this._actualMax-this._actualMin,o=this._nicePrecision(r);(o<0||o>15)&&(o=0);var a=.1*r,l=this._lbls,c=this.labelAngle;if(this.labels&&this._chart._getChartType()!==te.Funnel){if(a=this._updateAutoFormat(a),null!=l&&l.length>0){var h=l.length,u=this._values&&this._values.length==h?this._values:null;this._annoSize=new s.Size;for(var d=0;d<h;d++)if((b=u?u[d]:d)>=this._actualMin&&b<=this._actualMax){var p=l[d],f=i;this.itemFormatter&&(p=(m=this._getFormattedItem(e,b,p,new s.Point,i,!0)).text,f=m.cls);var g=e.measureString(p,f,this._groupClass);g.width>this._annoSize.width&&(this._annoSize.width=g.width),g.height>this._annoSize.height&&(this._annoSize.height=g.height)}null==c&&this.axisType==P.X&&(this._isOverlapped(e,t,i,this.axisType)?c=this._actualAngle=-45:this._actualAngle=0)}else{var m,b=this._actualMin-a;p=this._formatValue(b),f=i,this.itemFormatter&&(p=(m=this._getFormattedItem(e,b,p,new s.Point,i,!0)).text,f=i),g=e.measureString(p,f,this._groupClass),this._annoSize=g,p=this._formatValue(b=this._actualMax+a),f=i,this.itemFormatter&&(p=(m=this._getFormattedItem(e,b,p,new s.Point,i,!0)).text,f=i),(g=e.measureString(p,f,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=g.width),g.height>this._annoSize.height&&(this._annoSize.height=g.height)}if(c){c>90?c=90:c<-90&&(c=-90);var _=c*Math.PI/180,y=this._annoSize.width,v=this._annoSize.height;this._annoSize.width=y*Math.abs(Math.cos(_))+v*Math.abs(Math.sin(_)),this._annoSize.height=y*Math.abs(Math.sin(_))+v*Math.abs(Math.cos(_))}}else this._annoSize=new s.Size;var x=2*(this._labelPadding||5);x+=this._axisType==P.X?this._annoSize.height:this._annoSize.width+this._TICK_LABEL_DISTANCE+2;var w=this._TICK_OVERLAP,S=this.majorTickMarks;return S==D.Outside?w=1:S==D.Inside?w=-1:S==D.Cross&&(w=0),null==S&&(S=D.Outside),S!=D.None&&(x+=.5*(1+w)*this._TICK_HEIGHT),this._title&&(this._szTitle=e.measureString(p=this._title,n,this._groupClass),x+=this._szTitle.height),e.fontSize=null,x},e.prototype._updateAutoFormat=function(e){if(this._isTimeAxis){var t=this.format,i=.001*this._getActualRange()/10,n=new X(i*X.TicksPerSecond),r=Object(s.isNumber)(this._majorUnit)?X.fromDays(this._majorUnit):G.NiceTimeSpan(n,t);t||(this._tfmt=G.GetTimeDefaultFormat(1e3*r.TotalSeconds,0)),e=r.TotalSeconds}return e},e.prototype._getActualRange=function(){return this._actualMax-this._actualMin},e.prototype._updateActualLimitsByChartType=function(e,t,i){if(e&&e.length>0&&!this._isTimeAxis){var n=this._chart._getChartType();n!=te.Column&&n!=te.Bar&&(t-=.5,i+=.5)}return{min:t,max:i}},e.prototype._updateActualLimits=function(e,t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var o=this._actualMin,a=this._actualMax;this._isTimeAxis=e==s.DataType.Date;var l=this._updateActualLimitsByChartType(n,t,i);t=l.min,i=l.max;var c=this._min,h=this._max;Object(s.isDate)(c)&&(c=c.valueOf()),Object(s.isDate)(h)&&(h=h.valueOf());var u=this._chart&&this._chart._stacking!==ie.Stacked100pc;u||(u=this._chart._isRotated()?this.axisType==P.Y:this.axisType==P.X);var d=this._actualMin=null!=c&&u?c:t;if(d==(this._actualMax=null!=h&&u?h:i))if(void 0!==c&&void 0===h)this._actualMax+=1;else if(void 0===c&&void 0!==h)this._actualMin-=1;else if(0===d)this._actualMax=1;else{var p=Math.abs(d);p<1?(this._actualMin-=p,this._actualMax+=p):(this._actualMin-=1,this._actualMax+=1)}if(this._getLogBase()>0){var f=this.logBase,g=Math.log(f);if(!this._max){var m=Math.ceil(Math.log(this._actualMax)/g);this._actualMax=Math.pow(f,m)}if(!this._min){var b=Math.floor(Math.log(this._actualMin)/g);this._actualMin=Math.pow(f,b)}(this._actualMin<=0||!Object(s.isNumber)(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)}if((o!=this._actualMin&&(Object(s.isNumber)(o)||Object(s.isNumber)(this._actualMin))||a!=this._actualMax&&(Object(s.isNumber)(a)||Object(s.isNumber)(this._actualMax)))&&this.onRangeChanged(),this._items){this._values=[],this._lbls=[];var _=this._items.length,y="value",v="text";if(this.binding){var x=this.binding.split(",");2==x.length&&(y=x[0],v=x[1])}for(var w=0;w<_;w++){var S=this._items[w],C=S[y];Object(s.isNumber)(C)?(this._values.push(C),this._lbls.push(S[v])):Object(s.isDate)(C)&&(this._values.push(C.getTime()),this._lbls.push(S[v]))}}else this._lbls=n,this._values=r},e.prototype._layout=function(e,t){var i=this.axisType==P.Y;this._plotrect=t,this._axrect=i?new s.Rect(e.left,e.top,e.height,e.width):e},e.prototype._hasVisibileSeries=function(){for(var e,t=this._chart.series,i=0,n=t.length;i<n;i++)if((e=t[i].visibility)==Q.Plot||e==Q.Visible)return!0;return!1},e.prototype._render=function(t){if(this.position!=m.None&&this._hasVisibileSeries()){this._vals={};var i=0;this.labelAngle&&((i=this.labelAngle)>90?i=90:i<-90&&(i=-90)),null==this.labelAngle&&null!=this._actualAngle&&(i=this._actualAngle);var n=ge._FG,r=this._actualMax-this._actualMin;if(Object(s.isNumber)(r)){var o=this._calcMajorUnit();0==o&&(o=.1*this._niceTickNumber(r));var a=Math.min(e.MAX_MAJOR,Math.floor(r/o)+1),l=[],c=[];this._rects=[],this._vals.major=l,this._vals.hasLbls=[];var h=Math.floor(this._actualMin/o)*o;h<this._actualMin&&(h+=o);var u=!1;if(this._lbls&&this._lbls.length>0)if(c=this._lbls,0==this._values.length){u=!0;for(var d=0;d<c.length;d++)l.push(d)}else l=this._values;else this._isTimeAxis?this._createTimeLabels(h,a,l,c):this._getLogBase()?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,l,c,!0):this._createLabels(h,a,o,l,c);a=Math.min(l.length,c.length),t.textFill=n;var p=this._TICK_HEIGHT,f=this._TICK_OVERLAP,g=this.majorTickMarks;null==g&&(g=D.Outside),g==D.Outside?f=1:g==D.Inside?f=-1:g==D.Cross&&(f=0);var b=.5*(f-1)*p,_=.5*(1+f)*p;for(d=0;d<a;d++){var y=!0,v=l[d],x=this.labels;if(x&&(u||this.itemsSource)&&this.majorUnit&&d%this.majorUnit!=0&&(x=!1),v>=this._actualMin&&v<=this._actualMax){var w=t.textFill;y=this._renderLabelsAndTicks(t,d,v,c[d],i,g,x,b,_),t.textFill=w}this._vals.hasLbls.push(y)}}(this.minorGrid||this.minorTickMarks!=D.None)&&this._renderMinor(t,l,u),t.stroke=n,t.fontSize=null,this._renderLineAndTitle(t),t.stroke=null,t.fontSize=null,t.textFill=null,t.strokeWidth=null}},e.prototype._renderLineAndTitle=function(e){var t=this._getPosition(),i=t!=m.Top&&t!=m.Right,n=ge._CSS_TITLE,r=ge._CSS_LINE;if(this.axisType==P.Y)if(i){if(this._title){var o=new s.Point(this._axrect.left+.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);ge._renderRotatedText(e,this._title,o,1,1,o,-90,n,this._groupClass)}this.axisLine&&e.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,r)}else this._title&&(o=new s.Point(this._axrect.right-.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height),ge._renderRotatedText(e,this._title,o,1,1,o,90,n,this._groupClass)),this.axisLine&&e.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,r);else i?(this.axisLine&&e.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,r),this._title&&ge._renderText(e,this._title,new s.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,n)):(this.axisLine&&e.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,r),this._title&&ge._renderText(e,this._title,new s.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,n))},e.prototype._renderMinor=function(e,t,i){var n=this._getPosition(),r=this.axisType==P.Y,o=n!=m.Top&&n!=m.Right;if(this._getLogBase()){if(this.minorUnit>0){var s=[];this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,s,null,!1);for(var a=[],l=0;l<s.length;l++){var c=s[l];-1==t.indexOf(c)&&c>this._actualMin&&a.push(c)}this._renderMinors(e,a,r,o)}}else this._createMinors(e,t,r,o,i)},e.prototype._renderRotatedText=function(e,t,i,n,r,o,s,a,l,c,h){if(this.itemFormatter){var u=this._getFormattedItem(e,t,i,n,l);u?(i=u.text,l=u.cls):i=null}ge._renderRotatedText(e,i,n,r,o,s,a,l,c,h)},e.prototype._getFormattedItem=function(e,t,i,n,r,o){if(void 0===o&&(o=!1),this.itemFormatter){var s=n.clone();this._plotrect&&(this.axisType==P.X?s.y=this.position==m.Top?this._plotrect.top:this._plotrect.bottom:s.x=this.position==m.Right?this._plotrect.right:this._plotrect.left);var a={val:t,text:i,pos:s,cls:r};return o&&(e.readOnly=!0),a=this.itemFormatter(e,a),o&&(e.readOnly=!1),a}},e.prototype._renderLabelsAndTicks=function(e,t,i,n,r,o,a,l,c){var h=this._getPosition(),u=!1,d=this.axisType==P.Y,p=h!=m.Top&&h!=m.Right,f=this.labelPadding||5,g=this._TICK_WIDTH,b=this._getLabelAlign(d),_=ge._CSS_LABEL,y=ge._CSS_GRIDLINE,v=ge._CSS_TICK,x=ge._FG,w=ge._FG,S=this._GRIDLINE_WIDTH,C=i!=this._actualMin&&this.majorGrid;if(d){var O=this.convert(i);if(C&&(e.stroke=x,e.strokeWidth=S,e.drawLine(this._plotrect.left,O,this._plotrect.right,O,y)),e.stroke=w,e.strokeWidth=g,p){if(a){u=!0;var j=new s.Point(this._axrect.right-c-this._TICK_LABEL_DISTANCE-f,O);r>0?90==r?this._renderRotatedText(e,i,n,j,1,0,j,r,_,this._groupClass):this._renderRotatedText(e,i,n,j,2,1,j,r,_,this._groupClass):r<0?-90==r?this._renderRotatedText(e,i,n,j,1,2,j,r,_,this._groupClass):this._renderRotatedText(e,i,n,j,2,1,j,r,_,this._groupClass):u=this._renderLabel(e,i,n,j,2,b,_)}o!=D.None&&u&&e.drawLine(this._axrect.right-l,O,this._axrect.right-c,O,v)}else a&&(u=!0,j=new s.Point(this._axrect.left+c+this._TICK_LABEL_DISTANCE+f,O),r>0?90==r?this._renderRotatedText(e,i,n,j,1,2,j,r,_,this._groupClass):this._renderRotatedText(e,i,n,j,0,1,j,r,_,this._groupClass):r<0?-90==r?this._renderRotatedText(e,i,n,j,1,0,j,r,_,this._groupClass):this._renderRotatedText(e,i,n,j,0,1,j,r,_,this._groupClass):u=this._renderLabel(e,i,n,j,0,b,_)),o!=D.None&&u&&e.drawLine(this._axrect.left+l,O,this._axrect.left+c,O,v)}else{var T=this.convert(i);this.overlappingLabels==I.Auto&&this._xCross(T)&&(a=!1),C&&a&&(e.stroke=x,e.strokeWidth=S,e.drawLine(T,this._plotrect.top,T,this._plotrect.bottom,y)),e.stroke=w,e.strokeWidth=g,p?(a&&(j=new s.Point(T,this._axrect.top+c+f),u=0!=r?this._renderRotatedLabel(e,i,n,j,b,r,_,p):this._renderLabel(e,i,n,j,b,0,_)),o!=D.None&&u&&(T=this.convert(i),e.drawLine(T,this._axrect.top+l,T,this._axrect.top+c,v))):(a&&(j=new s.Point(T,this._axrect.bottom-c-f),u=0!=r?this._renderRotatedLabel(e,i,n,j,b,r,_,p):this._renderLabel(e,i,n,j,b,2,_)),o!=D.None&&u&&(T=this.convert(i),e.drawLine(T,this._axrect.bottom-l,T,this._axrect.bottom-c,v)))}return u},e.prototype._xCross=function(e){for(var t=this._rects.length,i=0;i<t;i++){var n=this._rects[i];if(e>=n.left&&e<=n.right)return!0}return!1},e.prototype._createMinors=function(t,i,n,r,o){if(i&&i.length>1){for(var a=this.majorUnit?this._isTimeAxis?24*this.majorUnit*3600*1e3:this.majorUnit:i[1]-i[0],l=Object(s.isNumber)(this.minorUnit)?this._isTimeAxis?24*this.minorUnit*3600*1e3:this.minorUnit:.5*a,c=[],h=i[0];h>this._actualMin&&c.length<e.MAX_MINOR;h-=l)-1==i.indexOf(h)&&c.push(h);for(h=i[0]+l;h<this._actualMax&&c.length<e.MAX_MINOR;h+=l)(-1==i.indexOf(h)||o&&this.majorUnit&&h%this.majorUnit!=0)&&c.push(h);this._renderMinors(t,c,n,r)}},e.prototype._renderMinors=function(e,t,i,n){var r=this._TICK_HEIGHT,o=this._TICK_WIDTH,s=this._TICK_OVERLAP,a=ge._FG,l=this.minorTickMarks,c=!0;this._vals.minor=t,l==D.Outside?s=1:l==D.Inside?s=-1:l==D.Cross?s=0:c=!1;for(var h=.5*(s-1)*r,u=.5*(1+s)*r,d=t?t.length:0,p=this.minorGrid,f=this._plotrect,g=this._GRIDLINE_WIDTH,m=ge._FG,b=ge._CSS_GRIDLINE_MINOR,_=ge._CSS_TICK_MINOR,y=0;y<d;y++)if(t[y]>=this.actualMin&&t[y]<=this.actualMax)if(i){var v=this.convert(t[y]);c&&(e.stroke=a,e.strokeWidth=o,n?e.drawLine(this._axrect.right-h,v,this._axrect.right-u,v,_):e.drawLine(this._axrect.left+h,v,this._axrect.left+u,v,_)),p&&(e.stroke=m,e.strokeWidth=g,e.drawLine(f.left,v,f.right,v,b))}else{var x=this.convert(t[y]);c&&(e.stroke=a,e.strokeWidth=o,n?e.drawLine(x,this._axrect.top+h,x,this._axrect.top+u,_):e.drawLine(x,this._axrect.bottom-h,x,this._axrect.bottom-u,_)),p&&(e.stroke=m,e.strokeWidth=g,e.drawLine(x,f.top,x,f.bottom,b))}},e.prototype._renderLabel=function(e,t,i,n,r,o,a){var l=!1;if(this.itemFormatter){var c=this._getFormattedItem(e,t,i,n,a);c?(i=c.text,a=c.cls):i=null}if(i){var h=this._rects,u=this.overlappingLabels==I.Auto&&!Object(s.isNumber)(this._actualAngle),d=ge._renderText(e,i,n,r,o,a,this._groupClass,null,(function(e){if(u)for(var t=h.length,i=0;i<t;i++)if(ge._intersects(h[i],e))return!1;return!0}));d&&(d.left+=4,d.width+=8,h.push(d),l=!0)}return l},e.prototype._renderRotatedLabel=function(e,t,i,n,r,o,a,l){if(this.itemFormatter){var c=this._getFormattedItem(e,t,i,n,a);c?(i=c.text,a=c.cls):i=null}if(i){var h=e.measureString(i,a,this._groupClass),u=.5*h.height,d=.5*h.width*Math.abs(Math.sin(o*Math.PI/180)),p=.5*h.width,f=.5*(h.width*Math.abs(Math.cos(o*Math.PI/180))+h.height*Math.abs(Math.sin(o*Math.PI/180))),g=new s.Point(n.x,n.y),m=new s.Point(n.x,n.y);this.labelAlign||(r=90==o||-90==o?1:l?o>0?0:2:o>0?2:0),l?(n.y+=u+d,g.y+=u+d-.5*h.height):(n.y-=u+d-h.height,g.y-=u+d-.5*h.height);var b=0;2===r?(g.x-=f,n.x-=p+f,b=g.x+f-h.height-2):0===r?(g.x+=f,n.x-=p-f,b=g.x-f):(n.x-=p,b=g.x-h.height/2);var _=new s.Rect(b,m.y,h.height+2,h.width),y=this._rects;if(this.overlappingLabels==I.Auto)for(var v=y.length,x=0;x<v;x++)if(ge._intersects(y[x],_))return!1;return ge._renderRotatedText(e,i,n,0,2,g,o,a,this._groupClass),this._rects.push(_),!0}return!1},e.prototype._getLabelAlign=function(e){var t=1;if(this.labelAlign){var i=this.labelAlign.toLowerCase();e?"top"==i?t=0:"bottom"==i&&(t=2):"left"==i?t=0:"right"==i&&(t=2)}return t},e.prototype.convert=function(e,t,i){var n=null==t?this._actualMax:t,r=null==i?this._actualMin:i;if(n==r||!this._axrect)return 0;var o=this._axrect.left,s=this._axrect.width,a=this._axrect.top,l=this._axrect.height;if(null!=this._customConvert){var c=this._customConvert(e,r,n);return this.axisType==P.Y?a+c*l:o+c*s}if(this._getLogBase()){if(e<=0)return NaN;var h=Math.log(n/r);return this._reversed?this.axisType==P.Y?a+Math.log(e/r)/h*l:o+s-Math.log(e/r)/h*s:this.axisType==P.Y?a+l-Math.log(e/r)/h*l:o+Math.log(e/r)/h*s}return this._reversed?this.axisType==P.Y?a+(e-r)/(n-r)*l:o+s-(e-r)/(n-r)*s:this.axisType==P.Y?a+l-(e-r)/(n-r)*l:o+(e-r)/(n-r)*s},e.prototype.convertBack=function(e){if(this._actualMax==this._actualMin)return 0;var t,i=this._plotrect.left,n=this._plotrect.width,r=this._plotrect.top,o=this._plotrect.height,s=this._actualMax-this._actualMin,a=this._getLogBase();return null!=this._customConvertBack?this._customConvertBack(this.axisType==P.Y?(e-r)/o:(e-i)/n,this._actualMin,this._actualMax):a?(t=this._reversed?this.axisType==P.Y?(e-r)/o:1-(e-i)/n:this.axisType==P.Y?1-(e-r)/o:(e-i)/n,Math.pow(a,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*t)/Math.log(a))):this._reversed?this.axisType==P.Y?this._actualMin+(e-r)*s/o:this._actualMin+(i+n-e)*s/n:this.axisType==P.Y?this._actualMax-(e-r)*s/o:this._actualMin+(e-i)*s/n},Object.defineProperty(e.prototype,"axisType",{get:function(){var e=this._chart;if(e){if(e.axisX==this)return P.X;if(e.axisY==this)return P.Y}return this._axisType},enumerable:!0,configurable:!0}),e.prototype._getMinNum=function(){return this._actualMin},e.prototype._getMaxNum=function(){return this._actualMax},e.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},e.prototype._cvCollectionChanged=function(e,t){this._invalidate()},e.prototype._createLabels=function(e,t,i,n,r){for(var o=0;o<t;o++){var a=(e+i*o).toFixed(14),l=parseFloat(a),c=this._formatValue(l),h=r.indexOf(c);if(h>=0&&!Object(s.isNumber)(this.majorUnit)){var u=parseFloat(c);Math.abs(u-l)<Math.abs(u-n[h])&&(n[h]=l)}else n.push(l),r.push(c)}},e.prototype._createLogarithmicLabels=function(e,t,i,n,r,o){var s=this._getLogBase(),a=Math.log(s),l=Math.floor(Math.log(e)/a),c=Math.ceil(Math.log(t)/a),h=s,u=!0;i>0&&(u=!1,h=i),h<s&&(h=s);var d=(c-l+1)*s/h,p=1;if(o){var f=this._getPosition(),g=this._getAnnoNumber(f==m.Left||f==m.Right);d>g?p=Math.floor(d/g+1):u&&(d<=.2*g?h=.2*s:d<=.1*g&&(h=.1*s))}for(var b=l;b<=c;b+=p){var _;if(u)for(var y=Math.pow(s,b),v=0;v*h<s-1;v++)(_=y*(1+v*h))>=e&&_<=t&&(0==v?(n.unshift(_),r&&r.unshift(this._formatValue(_))):(n.push(_),r&&r.push(this._formatValue(_))));else(_=Math.pow(h,b))>=e&&_<=t&&(n.push(_),r&&r.push(this._formatValue(_)))}},e.prototype._createTimeLabels=function(e,t,i,n){var r=this._actualMin,o=this._actualMax,a=new Date(r),l=new Date(o),c=this._format,h=this._getAnnoNumber(this._axisType==P.Y);h>12&&(h=12);var u=new X(.001*(this._actualMax-this._actualMin)/h*X.TicksPerSecond),d=Object(s.isNumber)(this._majorUnit)?X.fromDays(this._majorUnit):G.NiceTimeSpan(u,c);c||(this._tfmt=c=G.GetTimeDefaultFormat(1e3*d.TotalSeconds,0));var p=d.Ticks,f=G.RoundTime(r,d.TotalDays,!1);isFinite(f)&&(r=f);var g=G.RoundTime(o,d.TotalDays,!0);isFinite(g)&&(o=g);var m=new Date(r);if(new Date(o),d.TotalDays>=365&&!Object(s.isNumber)(this._majorUnit)){(m=new Date(a.getFullYear(),0,1))<a&&m.setFullYear(m.getFullYear()+1);var b=d.TotalDays/365;b-=b%1;for(var _=m;_<=l&&b;_.setFullYear(_.getFullYear()+b)){var y=_.valueOf();i.push(y),n.push(this._formatValue(y))}}else if(d.TotalDays>=30&&!Object(s.isNumber)(this._majorUnit)){(m=new Date(a.getFullYear(),a.getMonth(),1))<a&&m.setMonth(m.getMonth()+1);var v=d.TotalDays/30;for(v-=v%1,_=m;_<=l;_.setMonth(_.getMonth()+v))y=_.valueOf(),i.push(y),n.push(this._formatValue(y))}else{var x=1e3*p/X.TicksPerSecond,w=(_=m,a.getTime()-_.getTime());for(w>x&&(_=new Date(_.getTime()+Math.floor(w/x)*x));_<=l&&x;_=new Date(_.getTime()+x))_>=a&&(y=_.valueOf(),i.push(y),n.push(this._formatValue(y)))}},e.prototype._formatValue=function(e){if(this._isTimeAxis)return s.Globalize.format(new Date(e),this._format?this._format:this._tfmt);if(this._format)return s.Globalize.format(e,this._format);var t=e==Math.round(e)?"n0":"n";return s.Globalize.format(e,t)},e.prototype._calcMajorUnit=function(){var e=this._majorUnit;if(!Object(s.isNumber)(e)){var t=this._actualMax-this._actualMin,i=this._nicePrecision(t),n=t/this._getAnnoNumber(this.axisType==P.Y);(e=this._niceNumber(2*n,-i,!0))<n&&(e=this._niceNumber(n,1-i,!1)),e<n&&(e=this._niceTickNumber(n))}return e},e.prototype._getAnnoNumber=function(e){var t=e?this._annoSize.height:this._annoSize.width,i=e?this._axrect.height:this._axrect.width;if(t>0&&i>0){var n=Math.floor(i/(t+6));return n<=0&&(n=1),n}return 10},e.prototype._nicePrecision=function(e){if(!Object(s.isNumber)(e)||e<=0)return 0;var t,i=Math.log(e)/Math.LN10;t=i>=0?Math.floor(i):Math.ceil(i);var n=e/Math.pow(10,t);return n<3&&(t=1-t,(n=e/Math.pow(10,t))<3&&(t+=1)),t},e.prototype._niceTickNumber=function(e){if(0==e)return e;e<0&&(e=-e);var t=Math.log(e)/Math.LN10,i=Math.floor(t),n=e/Math.pow(10,i),r=10;return n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,i)},e.prototype._niceNumber=function(e,t,i){if(0==e)return e;e<0&&(e=-e);var n=e/Math.pow(10,t),r=10;return i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,t)},Object.defineProperty(e.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),e.MAX_MAJOR=1e3,e.MAX_MINOR=2e3,e._id=0,e}(),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getAxis=function(e){var t=this.indexOf(e);return t>-1?this[t]:null},t.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t].name==e)return t;return-1},t}(s.ObservableArray);!function(e){e[e.tickf7=-7]="tickf7",e[e.tickf6=-6]="tickf6",e[e.tickf5=-5]="tickf5",e[e.tickf4=-4]="tickf4",e[e.tickf3=-3]="tickf3",e[e.tickf2=-2]="tickf2",e[e.tickf1=-1]="tickf1",e[e.second=1]="second",e[e.minute=60]="minute",e[e.hour=3600]="hour",e[e.day=86400]="day",e[e.week=604800]="week",e[e.month=2678400]="month",e[e.year=31536e3]="year",e[e.maxtime=Number.MAX_VALUE]="maxtime"}(B||(B={}));var H,X=function(){function e(e){this.ticks=e}return Object.defineProperty(e.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalDays",{get:function(){return this.ticks/1e7/86400},enumerable:!0,configurable:!0}),e.fromSeconds=function(t){return new e(1e7*t)},e.fromDays=function(t){return new e(1e7*t*24*60*60)},e.TicksPerSecond=1e7,e}(),G=function(){function e(e){Object(s.isDate)(e)?this.init(e):Object(s.isNumber)(e)&&this.init(ge._fromOADate(e))}return e.prototype.init=function(e){this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate(),this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds()},e.prototype.getTimeAsDateTime=function(){return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?this.month=1:this.month>11&&(this.month=12),this.day<1?this.day=1:this.day>28&&2==this.month?this.day=28:this.day>30&&(4==this.month||4==this.month||6==this.month||9==this.month||11==this.month)?this.day=30:this.day>31&&(this.day=31),this.second>59&&(this.second=59),this.minute>59&&(this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},e.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},e.tround=function(e,t,i){var n=e/t*t;return n-=n%1,i&&n!=e&&(n+=t-=t%1),n},e.RoundTime=function(t,i,n){var r=24*i*60*60;if(r>0){var o=new e(t);return r<B.minute?(o.second=this.tround(o.second,r,n),o.getTimeAsDouble()):(o.second=0,r<B.hour?(o.minute=this.tround(o.minute,r/=B.minute,n),o.getTimeAsDouble()):(o.minute=0,r<B.day?(o.hour=this.tround(o.hour,r/=B.hour,n),o.getTimeAsDouble()):(o.hour=0,r<B.month?(o.day=this.tround(o.day,r/=B.day,n),o.getTimeAsDouble()):(o.day=1,r<B.year?(r/=B.month,1!=o.month&&(o.month=this.tround(o.month,r,n)),o.getTimeAsDouble()):(o.month=1,o.year=this.tround(o.year,r/=B.year,n),o.getTimeAsDouble())))))}var s=t-r,a=s/i*i;return n&&a!=s&&(a+=i),r+a},e.TimeSpanFromTmInc=function(e){var t=X.fromSeconds(1);if(e!=B.maxtime)if(e>B.tickf1)t=X.fromSeconds(e);else{var i=e,n=1;for(i+=7;i>0;)n*=10,i--;t=new X(n)}return t},e.manualTimeInc=function(e){var t=B.second;if(null==e||0==e.length)return t;var i=e.indexOf("f");if(i>=0){var n=-1;if(i>0&&"%"==e.substr(i-1,1))n=-1;else for(var r=1;r<6&&!(i+r>=e.length)&&"f"==e.substr(i+r,1);r++)n--;t=n}else e.indexOf("s")>=0?t=B.second:e.indexOf("m")>=0?t=B.minute:e.indexOf("h")>=0||e.indexOf("H")?t=B.hour:e.indexOf("d")>=0?t=B.day:e.indexOf("M")>=0?t=B.month:e.indexOf("y")>=0&&(t=B.year);return t},e.getNiceInc=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n]*i;if(t<=r)return r}return 0},e.NiceTimeSpan=function(t,i){var n=B.second;null!=i&&i.length>0&&(n=e.manualTimeInc(i));var r=0,o=0;if(n<B.second&&t.TotalSeconds<10){for(r=t.Ticks,o=e.TimeSpanFromTmInc(n).Ticks;r>10*o;)o*=10;var s=o;return r>s&&(s*=2),r>s&&(s=5*o),r>s&&(s=10*o),new X(s)}if(0==(r=Math.ceil(t.TotalSeconds)))return e.TimeSpanFromTmInc(n);if(o=1,n<B.minute){if(r<B.minute&&0!=(o=e.getNiceInc([1,2,5,10,15,30],r,n)))return X.fromSeconds(o);n=B.minute}if(n<B.hour){if(r<B.hour&&0!=(o=e.getNiceInc([1,2,5,10,15,30],r,n)))return X.fromSeconds(o);n=B.hour}if(n<B.day){if(r<B.day&&0!=(o=e.getNiceInc([1,3,6,12],r,n)))return X.fromSeconds(o);n=B.day}if(n<B.month){if(r<B.month&&0!=(o=e.getNiceInc([1,2,7,14],r,n)))return X.fromSeconds(o);n=B.month}if(n<B.year){if(r<B.year&&0!=(o=e.getNiceInc([1,2,3,4,6],r,n)))return X.fromSeconds(o);n=B.year}return r<(o=100*B.year)&&0==(o=e.getNiceInc([1,2,5,10,20,50],r,n))&&(o=100*B.year),X.fromSeconds(o)},e.NiceTimeUnit=function(t,i){var n=X.fromDays(t);return(n=e.NiceTimeSpan(n,i)).TotalDays},e.GetTimeDefaultFormat=function(e,t){if(!Object(s.isNumber)(e)||!Object(s.isNumber)(t))return"";var i="s",n=X.fromSeconds(.001*(e-t)),r=n.TotalSeconds;if(r>=B.year)i="yyyy";else if(r>=B.month)i="MMM yyyy";else if(r>=B.day)i="MMM d";else if(r>=B.hour)i="ddd H:mm";else if(r>=.5*B.hour)i="H:mm";else if(r>=1)i="H:mm:ss";else if(r>0){var o=n.Ticks;for(i="s.";o<X.TicksPerSecond;)o*=10,i+="f"}return i},e.secInYear=86400,e}(),W=function(){function e(e,t,i,n){this._seriesIndex=e,this._pointIndex=t,this._dataX=i,this._dataY=n}return Object.defineProperty(e.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataX",{get:function(){return this._dataX},set:function(e){e!==this._dataX&&(this._dataX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataY",{get:function(){return this._dataY},set:function(e){e!==this._dataY&&(this._dataY=e)},enumerable:!0,configurable:!0}),e}();!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.XY=2]="XY"}(H||(H={}));var Y,U=function(){function e(e){this._rect=e}return Object.defineProperty(e.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){var t=this._rect;return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom},e.prototype.pointDistance=function(e,t,i){var n=t.x-e.x,r=t.y-e.y;return i==H.X?Math.abs(n):i==H.Y?Math.abs(r):Math.sqrt(n*n+r*r)},e.prototype.distance=function(e){var t=H.XY;isNaN(e.x)||null===e.x?t=H.Y:(isNaN(e.y)||null===e.y)&&(t=H.X);var i=this._rect;return e.x<i.left?e.y<i.top?this.pointDistance(e,new s.Point(i.left,i.top),t):e.y>i.bottom?this.pointDistance(e,new s.Point(i.left,i.bottom),t):t==H.Y?0:i.left-e.x:e.x>i.right?e.y<i.top?this.pointDistance(e,new s.Point(i.right,i.top),t):e.y>i.bottom?this.pointDistance(e,new s.Point(i.right,i.bottom),t):t==H.Y?0:e.x-i.right:t==H.X?0:e.y<i.top?i.top-e.y:e.y>i.bottom?e.y-i.bottom:0},e}(),q=function(){function e(e,t){this._center=e,this.setRadius(t)}return e.prototype.setRadius=function(e){this._rad=e,this._rad2=e*e},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){var t=this._center.x-e.x,i=this._center.y-e.y;return t*t+i*i<=this._rad2},e.prototype.distance=function(e){var t=isNaN(e.x)?0:this._center.x-e.x,i=isNaN(e.y)?0:this._center.y-e.y,n=t*t+i*i;return n<=this._rad2?0:Math.sqrt(n)-this._rad},e}(),K=function(){function e(e,t){this._x=[],this._y=[],this._x=e,this._y=t}return e.prototype.contains=function(e){return!1},e.prototype.distance=function(e){for(var t=NaN,i=0;i<this._x.length-1;i++){var n=ge._dist(e,new s.Point(this._x[i],this._y[i]),new s.Point(this._x[i+1],this._y[i+1]));(isNaN(t)||n<t)&&(t=n)}return t},e}(),$=function(){},J=function(){function e(e){this._map={},this._chart=e}return e.prototype.add=function(e,t){this._map[t]&&(e.tag||(e.tag=new W(t,NaN,NaN,NaN)),this._map[t].push(e))},e.prototype.clear=function(){this._map={};for(var e=this._chart.series,t=0;t<e.length;t++)e[t].hitTest===se.prototype.hitTest&&(this._map[t]=new Array)},e.prototype.hitTest=function(e,t){void 0===t&&(t=!1);for(var i=null,n=Number.MAX_VALUE,r=this._chart.series.length-1;r>=0;r--){var o=this._map[r];if(o){for(var a=o.length-1;a>=0;a--){var l=o[a];if(!Object(s.tryCast)(l,K)||t){var c=l.distance(e);if(c<n&&(i=l,0==(n=c)))break}}if(0==n)break}}if(i){var h=new $;return h.area=i,h.distance=n,h}return null},e.prototype.hitTestSeries=function(e,t){var i=null,n=Number.MAX_VALUE,r=this._map[t];if(r)for(var o=r.length-1;o>=0;o--){var s=r[o],a=s.distance(e);if(a<n&&(i=s,0==(n=a)))break}if(i){var l=new $;return l.area=i,l.distance=n,l}return null},e}();!function(e){e[e.PlotArea=0]="PlotArea",e[e.AxisX=1]="AxisX",e[e.AxisY=2]="AxisY",e[e.ChartArea=3]="ChartArea",e[e.Legend=4]="Legend",e[e.Header=5]="Header",e[e.Footer=6]="Footer",e[e.Series=7]="Series",e[e.SeriesSymbol=8]="SeriesSymbol",e[e.DataLabel=9]="DataLabel",e[e.None=10]="None"}(Y||(Y={}));var Q,Z,ee=function(){function e(e,t,i){this._pointIndex=null,this._chartElement=Y.None,this._chart=e,this._pt=t,this._chartElement=i}return Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){if(null==this._item&&null!==this.pointIndex)if(null!=this.series)this._item=this.series._getItem(this.pointIndex);else{var e=this._chart._getHitTestItem(this.pointIndex);e&&(this._item=e)}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return void 0===this._x&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return void 0===this._y&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var e=this._chart._getHitTestValue(this.pointIndex,this._groupIndex);return null!=e?e:this.series&&null!=this.series._getValue?this.series._getValue(this.pointIndex):this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){if(void 0===this._name){var e=this._chart._getHitTestLabel(this.pointIndex);return null==e?this.series.name:e.toString()}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupIndex",{get:function(){return this._groupIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_xfmt",{get:function(){return void 0===this.__xfmt&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_yfmt",{get:function(){return void 0===this.__yfmt&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),e.prototype._setData=function(e,t){this._series=e,this._pointIndex=t},e.prototype._setDataGroup=function(e,t){this._groupIndex=e,this._pointIndex=t},e.prototype._setDataPoint=function(e){if(e=Object(s.asType)(e,W,!0)){this._pointIndex=e.pointIndex;var t=Object(s.asType)(this._chart,ge,!0),i=e.seriesIndex;null!==i&&i>=0&&i<t.series.length&&(this._series=t.series[i]),null!=e.item&&(this._item=e.item),null!=e.x&&(this._x=e.x),null!=e.y&&(this._y=e.y),null!=e.xfmt&&(this.__xfmt=e.xfmt),null!=e.yfmt&&(this.__yfmt=e.yfmt),null!=e.name&&(this._name=e.name)}},e.prototype._getValueFmt=function(){var e=this.value;if(null!=e){if(null==this.series){var t=e==Math.round(e)?"{val:n0}":"{val:n}";return Object(s.format)(t,{val:e})}e=this._chart._isRotated()?this.ax._formatValue(e):this.ay._formatValue(e)}return e},e.prototype._getValue=function(e,t){var i=this._chart._getHitTestValue(this.pointIndex,this.groupIndex);if(null!==i)return i;var n=null,r=this._chart,o=this.pointIndex,a=r._isRotated();if(null!==this.series&&null!==o){var l=this.series.getValues(e),c=this.series.getDataType(e);l&&this.pointIndex<l.length?(n=l[this.pointIndex],c!=s.DataType.Date||t||(n=new Date(n))):1==e&&(r._xlabels&&r._xlabels.length>0&&o<r._xlabels.length?n=r._xlabels[o]:r._xvals&&o<r._xvals.length&&(n=r._xvals[o],r._xDataType!=s.DataType.Date||t||(n=new Date(n))))}return null!==n&&t&&(a?0==e?n=this.ax._formatValue(n):1==e&&(n=this.ay._formatValue(n)):0==e?n=this.ay._formatValue(n):1==e&&(n=this.ax._formatValue(n))),n},Object.defineProperty(e.prototype,"ax",{get:function(){return this.series.axisX?this.series.axisX:this._chart.axisX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ay",{get:function(){return this.series.axisY?this.series.axisY:this._chart.axisY},enumerable:!0,configurable:!0}),e}();!function(e){e[e.Visible=0]="Visible",e[e.Plot=1]="Plot",e[e.Legend=2]="Legend",e[e.Hidden=3]="Hidden"}(Q||(Q={})),function(e){e[e.Dot=0]="Dot",e[e.Box=1]="Box"}(Z||(Z={}));var te,ie,ne=function(){},re=function(e){function t(t){var i=e.call(this)||this;return i._series=Object(s.asType)(t,oe),i}return l(t,e),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),t}(s.EventArgs),oe=function(){function e(e){this._altStyle=null,this._symbolMarker=Z.Dot,this._visibility=Q.Visible,this._interpolateNulls=null,this._cache={},this.rendering=new s.Event,this.rendered=new s.Event,this.initialize(e)}return Object.defineProperty(e.prototype,"interpolateNulls",{get:function(){return null==this._interpolateNulls?this._chart&&this._chart.interpolateNulls:this._interpolateNulls},set:function(e){e!=this._interpolateNulls&&(this._interpolateNulls=Object(s.asBoolean)(e,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(e){e!=this._style&&(this._style=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altStyle",{get:function(){return this._altStyle},set:function(e){e!=this._altStyle&&(this._altStyle=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(e){e!=this._symbolStyle&&(this._symbolStyle=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(e){e!=this._symbolSize&&(this._symbolSize=Object(s.asNumber)(e,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(e){(e=Object(s.asEnum)(e,Z,!0))!=this._symbolMarker&&(this._symbolMarker=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(e){e!=this._binding&&(this._binding=Object(s.asString)(e,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(e){e!=this._bindingX&&(this._bindingX=Object(s.asString)(e,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(e){e!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=e,this._cv=Object(s.asCollectionView)(e),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=e,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssClass",{get:function(){return this._cssClass},set:function(e){this._cssClass=Object(s.asString)(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibility",{get:function(){return this._visibility},set:function(e){(e=Object(s.asEnum)(e,Q))!=this._visibility&&(this._visibility=e,this._clearValues(),this._invalidate(),this._chart&&this._chart.onSeriesVisibilityChanged(new re(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipContent",{get:function(){return this._tooltipContent},set:function(e){e!=this._tooltipContent&&(this._tooltipContent=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._itemFormatter=Object(s.asFunction)(e),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(e,t){return Object(s.isNumber)(e)&&Object(s.isNumber)(t)?e=new s.Point(e,t):e instanceof MouseEvent&&(e=new s.Point(e.pageX,e.pageY)),Object(s.asType)(e,s.Point),this._chart?this._chart._hitTestSeries(e,this._chart.series.indexOf(this)):null},e.prototype.getPlotElement=function(e){if(this.hostElement&&e<this._pointIndexes.length){var t=this._pointIndexes[e];if(t<this.hostElement.childNodes.length)return this.hostElement.childNodes[t]}return null},Object.defineProperty(e.prototype,"axisX",{get:function(){return this._axisX},set:function(e){if(e!=this._axisX){if(this._axisX=Object(s.asType)(e,z,!0),this._axisX){var t=this._axisX._chart=this._chart;t&&-1==t.axes.indexOf(this._axisX)&&t.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisY",{get:function(){return this._axisY},set:function(e){if(e!=this._axisY){if(this._axisY=Object(s.asType)(e,z,!0),this._axisY){var t=this._axisY._chart=this._chart;t&&-1==t.axes.indexOf(this._axisY)&&t.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){Object(s.copy)(this,e)},e.prototype.pointToData=function(e){return Object(s.asType)(e,s.Point),(e=e.clone()).x=this._getAxisX().convertBack(e.x),e.y=this._getAxisY().convertBack(e.y),e},e.prototype.dataToPoint=function(e){return Object(s.asType)(e,s.Point),(e=e.clone()).x=this._getAxisX().convert(e.x),e.y=this._getAxisY().convert(e.y),e},e.prototype.onRendering=function(e,t,i){var n=new O(e,t,i);return this.rendering.raise(this,n),n.cancel},e.prototype.onRendered=function(e){this.rendered.raise(this,new C(e))},Object.defineProperty(e.prototype,"_chart",{get:function(){return this.__chart},set:function(e){e!==this.__chart&&(this.__chart=e)},enumerable:!0,configurable:!0}),e.prototype._getSymbolSize=function(){return null!=this.symbolSize?this.symbolSize:this.chart.symbolSize},Object.defineProperty(e.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(e){e!=this.__plotter&&(this.__plotter=e)},enumerable:!0,configurable:!0}),e.prototype.getDataType=function(e){return 0==e?this._valueDataType:1==e?this._xvalueDataType:null},e.prototype.getValues=function(e){if(0==e){if(null==this._values)if(this._valueDataType=null,null!=this._cv){var t=this._bindValues(this._cv.items,this._getBinding(0));this._values=t.values,this._valueDataType=t.dataType}else null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView&&(t=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType);return this._values}if(1==e){if(null==this._xvalues&&(this._xvalueDataType=null,null!=this.bindingX))if(null!=this._cv)t=this._bindValues(this._cv.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values;else{if(null==this._bindingX)return null;null!=this._chart&&null!=this._chart.collectionView&&(t=this._bindValues(this._chart.collectionView.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values)}return this._xvalues}return null},e.prototype.drawLegendItem=function(e,t,i){var n=this._getChartType();null==n&&(n=this._chart._getChartType());var r=this._getLegendStyle(this.style);n===te.Funnel?this._drawFunnelLegendItem(e,t,i,r,this.symbolStyle):this._drawLegendItem(e,t,n,this.name,r,this.symbolStyle)},e.prototype._getLegendStyle=function(e){if(e){var t={};return e.fill&&(t.fill=e.fill),e.stroke&&(t.stroke=e.stroke),t}},e.prototype.measureLegendItem=function(e,t){var i=this._getChartType();return null==i&&(i=this._chart._getChartType()),this._measureLegendItem(e,i===te.Funnel?this._getFunnelLegendName(t):this.name)},e.prototype.legendItemLength=function(){var e=this._getChartType();return null==e&&(e=this._chart._getChartType()),e===te.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:this._chart._xvals&&this._chart._xvals.length?this._chart._xvals.length:1:1},e.prototype.getDataRect=function(e,t){return null},e.prototype._getChartType=function(){return this._chartType},e.prototype._clearValues=function(){this._values=null,this._xvalues=null,this.__plotter=null,this._cache={}},e.prototype._getBinding=function(e){var t=this.binding;if(t){var i=this.chart?this.chart._bindingSeparator:",";if(i){var n=t.split(i);n&&n.length>e&&(t=n[e].trim())}}return t},e.prototype._getBindingValues=function(e){if(this._cache[e])return this._cache[e];var t;null!=this._cv?t=this._cv.items:null!=this._chart&&null!=this._chart.collectionView&&(t=this._chart.collectionView.items);var i=this._bindValues(t,this._getBinding(e));return this._cache[e]=i.values},e.prototype._getItem=function(e){var t=null,i=null;return null!=this.itemsSource?i=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(i=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=i&&(t=i[e]),t},e.prototype._getLength=function(){var e=0,t=null;return null!=this.itemsSource?t=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(t=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=t&&(e=t.length),e},e.prototype._setPointIndex=function(e,t){this._pointIndexes[e]=t},e.prototype._getDataRect=function(){var e=this.getValues(0),t=this.getValues(1);if(e){for(var i=NaN,n=NaN,r=NaN,o=NaN,a=e.length,l=0;l<a;l++){var c=e[l];if(isFinite(c)&&(isNaN(n)?n=o=c:c<n?n=c:c>o&&(o=c)),t){var h=t[l];isFinite(h)&&(isNaN(i)?i=r=h:h<i?i=h:c>o&&(r=h))}}if(t||(i=0,r=a-1),!isNaN(n))return new s.Rect(i,n,r-i,o-n)}return null},e.prototype._isCustomAxisX=function(){return!(!this._axisX||this._chart&&this._axisX==this.chart.axisX)},e.prototype._isCustomAxisY=function(){return!(!this._axisY||this._chart&&this._axisY==this.chart.axisY)},e.prototype._getAxisX=function(){var e=null;return this.axisX?e=this.axisX:this.chart&&(e=this.chart.axisX),e},e.prototype._getAxisY=function(){var e=null;return this.axisY?e=this.axisY:this.chart&&(e=this.chart.axisY),e},e.prototype._measureLegendItem=function(t,i){var n=new s.Size;if(n.width=e._LEGEND_ITEM_WIDTH,n.height=e._LEGEND_ITEM_HEIGHT,this._name){var r=t.measureString(i,ge._CSS_LABEL,ge._CSS_LEGEND);n.width+=r.width,n.height<r.height&&(n.height=r.height)}return n.width+=3*e._LEGEND_ITEM_MARGIN,n.height+=2*e._LEGEND_ITEM_MARGIN,n},e.prototype._drawFunnelLegendItem=function(t,i,n,r,o){t.strokeWidth=1;var a=e._LEGEND_ITEM_MARGIN,l=null,c=null;null===l&&(l=this._chart._getColorLight(n)),null===c&&(c=this._chart._getColor(n)),t.fill=l,t.stroke=c;var h=i.top+.5*i.height,u=e._LEGEND_ITEM_WIDTH,d=e._LEGEND_ITEM_HEIGHT,p=this._getFunnelLegendName(n);t.drawRect(i.left+a,h-.5*d,u,d,null,o||r),null!=p&&ge._renderText(t,p,new s.Point(i.left+d+2*a,h),0,1,ge._CSS_LABEL,ge._CSS_LEGEND)},e.prototype._getFunnelLegendName=function(e){var t,i=this._chart;return i._xlabels&&i._xlabels.length&&e<i._xlabels.length?t=i._xlabels[e]:i._xvals&&i._xvals.length&&e<i._xvals.length&&(t=i._xvals[e],i._xDataType===s.DataType.Date&&(t=ge._fromOADate(t))),null==t&&(t=this.name),t.toString()},e.prototype._drawLegendItem=function(t,i,n,r,o,a){t.strokeWidth=1;var l=e._LEGEND_ITEM_MARGIN,c=null,h=null;null===c&&(c=this._chart._getColorLight(this._chart.series.indexOf(this))),null===h&&(h=this._chart._getColor(this._chart.series.indexOf(this))),t.fill=c,t.stroke=h;var u=i.top+.5*i.height,d=e._LEGEND_ITEM_WIDTH,p=e._LEGEND_ITEM_HEIGHT;switch(n){case te.Area:case te.SplineArea:case te.StepArea:t.drawRect(i.left+l,u-.5*p,d,p,null,o);break;case te.Bar:case te.Column:t.drawRect(i.left+l,u-.5*p,d,p,null,a||o);break;case te.Scatter:case te.Bubble:var f=.3*d,g=.3*p;this.symbolMarker==Z.Box?t.drawRect(i.left+l+.5*d-f,u-g,2*f,2*g,null,a||o):t.drawEllipse(i.left+.5*d+l,u,f,g,null,a||o);break;case te.Line:case te.Spline:case te.Step:t.drawLine(i.left+l,u,i.left+d+l,u,null,o);break;case te.LineSymbols:case te.SplineSymbols:case te.StepSymbols:f=.3*d,g=.3*p,this.symbolMarker==Z.Box?t.drawRect(i.left+l+.5*d-f,u-g,2*f,2*g,null,a||o):t.drawEllipse(i.left+.5*d+l,u,f,g,null,a||o),t.drawLine(i.left+l,u,i.left+d+l,u,null,o);break;case te.Candlestick:case te.HighLowOpenClose:t.drawLine(i.left+l,u,i.left+d+l,u,null,a||o)}this._name&&ge._renderText(t,r,new s.Point(i.left+p+2*l,u),0,1,ge._CSS_LABEL,ge._CSS_LEGEND)},e.prototype._cvCollectionChanged=function(e,t){this._clearValues(),this._invalidate()},e.prototype._cvCurrentChanged=function(e,t){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},e.prototype._bindValues=function(e,t,i){var n,r,o;if(void 0===i&&(i=!1),null!=e){var a=e.length;n=new Array(e.length);for(var l=t?new s.Binding(t):null,c=0;c<a;c++){o=null;var h=e[c];null!=l&&(h=l.getValue(h)),Object(s.isArray)(h)&&h.length>0&&(o=h,h=h[0]),Object(s.isNumber)(h)?(n[c]=h,r=s.DataType.Number):Object(s.isDate)(h)?(n[c]=h.valueOf(),r=s.DataType.Date):i&&h&&(n[c]=c,r=s.DataType.Number),Object(s.isArray)(o)&&o.length>0&&(n[c]=o)}}var u=new ne;return u.values=n,u.dataType=r,u},e.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},e.prototype._indexToPoint=function(e){return e>=0&&e<this._values.length?new s.Point(this._xvalues?this._xvalues[e]:e,this._values[e]):null},e.prototype._getSymbolFill=function(e){var t=null;return this.symbolStyle&&(t=this.symbolStyle.fill),!t&&this.style&&(t=this.style.fill),!t&&this.chart&&(t=this.chart._getColorLight(e)),t},e.prototype._getSymbolStroke=function(e){var t=null;return this.symbolStyle&&(t=this.symbolStyle.stroke),!t&&this.style&&(t=this.style.stroke),!t&&this.chart&&(t=this.chart._getColor(e)),t},e.prototype._getAltSymbolStroke=function(e){var t=null;return this.altStyle&&(t=this.altStyle.stroke),t},e.prototype._getAltSymbolFill=function(e){var t=null;return this.altStyle&&(t=this.altStyle.fill),t},e.prototype._renderLabels=function(e,t,i,n){this._plotter&&this._plotter._renderLabels(e,this,t,i,n)},e._LEGEND_ITEM_WIDTH=10,e._LEGEND_ITEM_HEIGHT=10,e._LEGEND_ITEM_MARGIN=4,e._DEFAULT_SYM_SIZE=10,e}(),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),Object.defineProperty(t.prototype,"chartType",{get:function(){return this._chartType},set:function(e){(e=Object(s.asEnum)(e,te,!0))!=this._chartType&&(this._chartType=e,this._invalidate())},enumerable:!0,configurable:!0}),t}(oe),ae=function(e){function t(t,i){var n=e.call(this,t,null,!0)||this;n._areas=[],n._keywords=new A,n._startAngle=0,n._innerRadius=0,n._offset=0,n._reversed=!1,n._isAnimated=!1,n._selectedItemPosition=m.None,n._selectedItemOffset=0,n._pieGroups=[],n._rotationAngles=[],n._centers=[new s.Point],n._selectedOffset=new s.Point,n._selectedIndex=-1,n._angles=[],n._colRowLens=[],n._titles=void 0,n._values=[],n._labels=[],n._pels=[],n._sum=0,n._sums=[],n._bindingSeparator=",",n.applyTemplate("wj-control wj-flexchart wj-flexpie",null,null),n._currentRenderEngine=new y(n.hostElement),n._legend=new w(n),n._tooltip=new E,n._tooltip.content="<b>{name}</b><br/>{value}",n._tooltip.showDelay=0,n._lbl=new R,n._lbl._chart=n;var r=n;return n.hostElement.addEventListener("mousemove",(function(e){var t=r._tooltip;if(t.content&&!r.isTouching){var i=r.hitTest(e);if(i.distance<=t.threshold){var n=r._getLabelContent(i,r.tooltip.content);r._showToolTip(n,new s.Rect(e.clientX,e.clientY,5,5))}else r._hideToolTip()}})),n.hostElement.addEventListener("click",(function(e){var t=!0;if(r.selectionMode==g.Point){var i=r.hitTest(e),n=N._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(n=r.tooltip.threshold),i.distance<=n?(i.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=m.None&&(t=!1),i.pointIndex!=r._selectionIndex&&r._select(i.pointIndex,!0)):r._selectedIndex>=0&&r._select(null)}if(t&&r.isTouching){var o=r._tooltip;if(o.content)if((i=r.hitTest(e)).distance<=o.threshold){var a=r._getLabelContent(i,r.tooltip.content);r._showToolTip(a,new s.Rect(e.clientX,e.clientY,5,5))}else r._hideToolTip()}})),n.hostElement.addEventListener("mouseleave",(function(e){r._hideToolTip()})),n.initialize(i),n.refresh(),n}return l(t,e),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(e){e!=this._binding&&(this._binding=Object(s.asString)(e,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingName",{get:function(){return this._bindingName},set:function(e){e!=this._bindingName&&(this._bindingName=Object(s.asString)(e,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this._startAngle},set:function(e){e!=this._startAngle&&(this._startAngle=Object(s.asNumber)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(e){e!=this._offset&&(this._offset=Object(s.asNumber)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(e){e!=this._innerRadius&&(this._innerRadius=Object(s.asNumber)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerTextStyle",{get:function(){return this._innerTextStyle},set:function(e){e!=this._innerText&&(this._innerTextStyle=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerText",{get:function(){return this._innerText},set:function(e){e!=this._innerText&&(this._innerText=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(e){e!=this._reversed&&(this._reversed=Object(s.asBoolean)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(e){(e=Object(s.asEnum)(e,m,!0))!=this._selectedItemPosition&&(this._selectedItemPosition=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(e){e!=this._selectedItemOffset&&(this._selectedItemOffset=Object(s.asNumber)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(e){e!=this._isAnimated&&(this._isAnimated=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLabel",{get:function(){return this._lbl},set:function(e){e!=this._lbl&&(this._lbl=e,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){if(e!=this._selectedIndex){var t=Object(s.asNumber)(e,!0);this._select(t,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titles",{get:function(){return this._titles},set:function(e){e!==this._titles&&(this._titles=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype._getLabelsForLegend=function(){return this._labels},t.prototype.hitTest=function(e,t){var i=this._toControl(e,t),n=new ee(this,i),r=null;if(N._contains(this._rectHeader,i))n._chartElement=Y.Header;else if(N._contains(this._rectFooter,i))n._chartElement=Y.Footer;else if(N._contains(this._rectLegend,i))n._chartElement=Y.Legend,null!==(r=this.legend._hitTest(i))&&r>=0&&r<this._areas.length&&n._setData(null,r);else if(N._contains(this._rectChart,i)){for(var o,s=this._areas.length,a=NaN,l=0;l<s;l++){var c=i.clone(),h=this._areas[l],u=this._rotationAngles[h.gi];if(0!=u){var d=this._centers[h.gi],p=d.x,f=d.y,g=-p+c.x,m=-f+c.y,b=Math.sqrt(g*g+m*m),_=Math.atan2(m,g)-u*Math.PI/180;c.x=p+b*Math.cos(_),c.y=f+b*Math.sin(_)}l==this._selectedIndex&&(c.x-=this._selectedOffset.x,c.y-=this._selectedOffset.y);var y=this._areas[l];if(y.contains(c)&&(n._setDataGroup(h.gi,y.tag),n._dist=0,l!=this._selectedIndex))break;var v=y.distance(c);void 0!==v&&(isNaN(a)||v<a)&&(a=v,o=y)}0!==n._dist&&null!=o&&(n._setDataGroup(o.gi,o.tag),n._dist=a),n._chartElement=Y.ChartArea}else n._chartElement=Y.None;return n},t.prototype._performBind=function(){if(this._initData(),this._cv){this._selectionIndex=this._cv.currentPosition;var e=this._cv.items;if(e){for(var t=e.length,i=this._getBindings(),n=0;n<i.length;n++)this._values[n]=[],this._sums[n]=0;for(var r=0;r<t;r++){var o=e[r];for(n=0;n<i.length;n++)this._sums[n]+=Math.abs(this._getBindData(o,this._values[n],0==n?this._labels:null,i[n],this.bindingName))}}}},t.prototype._getBindings=function(){var e=[],t=this.binding;if(t){var i=this._bindingSeparator;i&&(e=t.split(i))}return e},t.prototype._initData=function(){this._sum=0,this._sums=[],this._values=[],this._labels=[]},t.prototype._getBindData=function(e,t,i,n,r){var o,a=0,l=n?new s.Binding(n):null;l&&(o=l.getValue(e)),a=0,Object(s.isNumber)(o)?a=Object(s.asNumber)(o):o&&(a=parseFloat(o.toString())),!isNaN(a)&&isFinite(a)?t.push(a):t.push(a=0);var c=r?new s.Binding(r):null;if(i)if(c&&e){var h=c.getValue(e);h&&(h=h.toString()),i.push(h)}else i.push(a.toString());return a},t.prototype._render=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=null),this._selectionAnimationID&&clearInterval(this._selectionAnimationID),this.onRendering(new C(t)),e.prototype._render.call(this,t,i,n)},t.prototype._prepareRender=function(){this._areas=[]},t.prototype._renderChart=function(e,i,n){var r,o=this._rectChart.clone(),a=new s.Size(o.width,o.height),l=this._parseMargin(this.plotMargin),c=this.dataLabel,h=c.content&&c.position==T.Outside,u=h?(Object(s.isNumber)(c.offset)?c.offset:0)+24:0;isNaN(l.left)&&(l.left=h?u:t._MARGIN),isNaN(l.right)&&(l.right=h?u:t._MARGIN),isNaN(l.top)&&(l.top=h?u:t._MARGIN),isNaN(l.bottom)&&(l.bottom=h?u:t._MARGIN),i.top+=l.top,i.height=(r=i.height-(l.top+l.bottom))>0?r:24,i.left+=l.left,i.width=(a=i.width-(l.left+l.right))>0?a:24;var d=this._getBindings(),p=this.titles;void 0===p&&d.length>1&&(p=d);var f=this._layout(e,i,p,d.length);this._angles=[],this._pels=[],this._pieGroups=[],this._rotationAngles=[];for(var g=0;g<d.length;g++){var m=f[g];p&&g<p.length&&p[g]&&N._renderText(e,p[g],new s.Point(m.left+.5*m.width,m.top),1,2,t._CSS_GROUP_TITLE);var b=e.startGroup("wj-slice-group",null,!0);this._pieGroups.push(b),this._renderData(e,m,g,b),e.endGroup(),this._rotationAngles.push(0)}this._highlightCurrent(),this.innerText&&this._renderInnerText(e),this.dataLabel.content&&this.dataLabel.position!=T.None&&this._renderLabels(e),this.onRendered(new C(e))},t.prototype._layout=function(e,i,n,r){var o=0,a=r,l=1,c=0;if(n)for(var h=0;h<n.length;h++)c=Math.max(c,e.measureString(n[h],t._CSS_GROUP_TITLE).height);for(var u=1;u<=r;u++){var d=Math.floor((r+(u-1))/u),p=Math.floor(i.width/u),f=Math.floor(i.height/d);(f-=c)<p&&(p=f),p>o&&(o=p,a=u,l=d)}for(var g=[],m=.5*(i.width-o*a),b=.5*(i.height-(o+c)*l),_=0;_<l;_++)for(var y=0;y<a;y++)g.push(new s.Rect(i.left+o*y+8+m,i.top+(o+c)*_+8+b+c,o-16,o-16));return g},t.prototype._getDesiredLegendSize=function(e,t,i,n){var r=new s.Size,o=(new s.Size(i,n),this._getLabelsForLegend()),a=o.length,l=0,c=0;this._colRowLens=[];for(var h=0;h<a;h++){var u=this._measureLegendItem(e,o[h]);t?(c+u.height>n&&(r.height=n,this._colRowLens.push(l),l=0,c=0),l<u.width&&(l=u.width),c+=u.height):(l+u.width>i&&(r.width=i,this._colRowLens.push(c),c=0,l=0),c<u.height&&(c=u.height),l+=u.width)}return t?(r.height<c&&(r.height=c),this._colRowLens.push(l),r.width=this._colRowLens.reduce((function(e,t){return e+t}),0),r.width=this._getLegendSize(i,r.width)):(r.width<l&&(r.width=l),this._colRowLens.push(c),r.height=this._colRowLens.reduce((function(e,t){return e+t}),0),r.height=this._getLegendSize(n,r.height)),r},t.prototype._renderLegend=function(e,t,i,n,r,o){for(var a=this._rectLegend,l=this._getLabelsForLegend(),c=l.length,h=0,u=t.clone(),d=0;d<c;d++){var p=this._measureLegendItem(e,l[d]);n?u.y+p.height>a.top+a.height+1&&(u.x+=this._colRowLens[h],h++,u.y=t.y):u.x+p.width>a.left+a.width+1&&(u.y+=this._colRowLens[h],h++,u.x=t.x);var f=new s.Rect(u.x,u.y,p.width,p.height);this._drawLegendItem(e,f,d,l[d]),i.push(f),n?u.y+=p.height:u.x+=p.width}},t.prototype._renderData=function(e,t,i,n){var r=this.innerRadius,o=this.offset;if(this._sums[i]>0){var a=(this.startAngle+180)*Math.PI/180,l=t.left+.5*t.width,c=t.top+.5*t.height,h=Math.min(.5*t.width,.5*t.height);this._centers[i]=new s.Point(l,c);var u=Math.max(o,this.selectedItemOffset);u>0&&(o*=h/=1+u),this._radius=h,this._renderPie(e,i,h,r*h,a,o)}},t.prototype._renderPie=function(e,t,i,n,r,o){this._renderSlices(e,this._values[t],this._sums[t],t,i,n,r,2*Math.PI,o)},t.prototype._getCenter=function(){return this._centers[0]},t.prototype._renderSlices=function(e,t,i,n,r,o,s,a,l){for(var c,h,u,d=t.length,p=0,f=s,g=1==this.reversed,m=this._centers[n],b=0;b<d;b++)t[b]>0&&p++;var _=1===p?360:359.9/360;for(b=0;b<d;b++){h=m.x,u=m.y,c=e.startGroup("wj-slice"),e.fill=this._getColorLight(b),e.stroke=this._getColor(b);var y=Math.abs(t[b]),v=Math.abs(y-i)<1e-10?a:a*y/i;v=Math.min(v,a*_);var x=g?f-.5*v:f+.5*v;l>0&&v<a&&(h+=l*Math.cos(x),u+=l*Math.sin(x)),this._renderSlice(e,h,u,x,n,b,r,o,f,v,a),g?f-=v:f+=v,e.endGroup(),this._pels.push(c)}},t.prototype._renderSlice=function(e,t,i,n,r,o,a,l,c,h,u){var d=this,p=!!this.reversed;if(this._angles.push(n),this.itemFormatter){var f=new ee(this,new s.Point(t+a*Math.cos(n),i+a*Math.sin(n)),Y.SeriesSymbol);f._setData(null,o),this.itemFormatter(e,f,(function(){d._drawSlice(e,r,o,p,t,i,a,l,c,h)})),e.cssPriority=!0}else this._drawSlice(e,r,o,p,t,i,a,l,c,h)},t.prototype._getSelectedItemOffset=function(e,t){var i=0,n=0,r=0;return e==this._selectedIndex&&this.selectedItemOffset>0&&(r=this.selectedItemOffset),r>0&&(i=Math.cos(t)*r*this._radius,n=Math.sin(t)*r*this._radius),{x:i,y:n}},t.prototype._renderInnerText=function(e){for(var i=this.innerText,n=this.innerTextStyle,r=0;r<this._centers.length;r++){var o=this._centers[r],a=void 0;(a=Object(s.isFunction)(i)?i(r):Object(s.isArray)(i)?Object(s.asString)(i[r]):Object(s.asString)(i))&&(a=Object(s.format)(a,{total:this._sums[r],binding:this._getBindings()[r]}),n&&(e.cssPriority=!1),t._renderText(e,a,o,1,1,N._CSS_TITLE,null,n),e.cssPriority=!0)}},t.prototype._renderLabels=function(e){var t=this._areas.length,i=this.dataLabel,n=i.position,r="wj-data-label",o=this._rotationAngles,a=i.connectingLine,l=i.offset?i.offset:0;e.stroke="null",e.fill="transparent",e.strokeWidth=1,e.startGroup("wj-data-labels");for(var c=0;c<t;c++){var h=this._areas[c];if(h){var u=h.radius,d=h.langle+o[h.gi],p=1,f=1;n==T.Center||n===T.Radial||n===T.Circular?u*=.5*(1+(h.innerRadius||0)/h.radius):((d=le.clampAngle(d))<=-170||d>=170?(p=2,f=1):d>=-100&&d<=-80?(p=1,f=2):d>=-10&&d<=10?(p=0,f=1):d>=80&&d<=100?(p=1,f=0):-180<d&&d<-90?(p=2,f=2):-90<=d&&d<0?(p=0,f=2):0<d&&d<90?(p=0,f=0):90<d&&d<180&&(p=2,f=0),n==T.Inside&&(p=2-p,f=2-f)),d*=Math.PI/180;var g=this._getSelectedItemOffset(h.gi?c-h.gi*this._values[0].length:c,d),m=g.x,b=g.y,_=u;n==T.Outside?_+=l:n==T.Inside&&(_-=l);var y=h.center.x,v=h.center.y,x=this._centers[h.gi],w=y-x.x,S=v-x.y;if(0!=this._rotationAngles[h.gi]){var C=Math.sqrt(w*w+S*S),O=Math.atan2(S,w)+this._rotationAngles[h.gi]*Math.PI/180;y=x.x+C*Math.cos(O),v=x.y+C*Math.sin(O)}var j=new s.Point(y+m+_*Math.cos(d),v+b+_*Math.sin(d));i.border&&n!=T.Center&&(0==p?j.x+=2:2==p&&(j.x-=2),0==f?j.y+=2:2==f&&(j.y-=2));var A=new ee(this,j);A._setDataGroup(h.gi,h.tag);var M=this._getLabelContent(A,i.content),E=new k(e,A,j,M);if(i.onRendering&&(i.onRendering(E)?(M=E.text,j=E.point):M=null),M){var P,I=180*Math.atan2(v-j.y,y-j.x)/Math.PI;if(I=(I+360)%360,n===T.Radial||n===T.Circular?(n===T.Radial?I>90&&I<270&&(I+=180):(I>180&&I<360&&(I+=180),I-=90),(P=N._renderRotatedText(e,M,j,p,f,j,I,r).getBBox()).left=P.x,P.top=P.y):P=N._renderText(e,M,j,p,f,r),i.border&&e.drawRect(P.left-2,P.top-2,P.width+4,P.height+4,"wj-data-label-border"),a){var D=new s.Point(y+m+u*Math.cos(d),v+b+u*Math.sin(d));e.drawLine(j.x,j.y,D.x,D.y,"wj-data-label-line")}}e.cssPriority=!0}}e.endGroup()},t.prototype._drawSlice=function(e,t,i,n,r,o,a,l,c,h){var u;n?l>0?(0!=h&&e.drawDonutSegment(r,o,a,l,c-h,h),(u=new he(new s.Point(r,o),a,l,c-h,h,this.startAngle)).tag=i,this._areas.push(u)):(0!=h&&e.drawPieSegment(r,o,a,c-h,h),(u=new ce(new s.Point(r,o),a,c-h,h,this.startAngle)).tag=i,this._areas.push(u)):(l>0?(0!=h&&e.drawDonutSegment(r,o,a,l,c,h),(u=new he(new s.Point(r,o),a,l,c,h,this.startAngle)).tag=i,this._areas.push(u)):(0!=h&&e.drawPieSegment(r,o,a,c,h),(u=new ce(new s.Point(r,o),a,c,h,this.startAngle)).tag=i,this._areas.push(u)),c+=h),u&&(u.gi=t)},t.prototype._measureLegendItem=function(e,t){var i=new s.Size;if(i.width=se._LEGEND_ITEM_WIDTH,i.height=se._LEGEND_ITEM_HEIGHT,t){var n=e.measureString(t,N._CSS_LABEL,N._CSS_LEGEND);i.width+=n.width,i.height<n.height&&(i.height=n.height)}return i.width+=3*se._LEGEND_ITEM_MARGIN,i.height+=2*se._LEGEND_ITEM_MARGIN,i},t.prototype._drawLegendItem=function(e,t,i,n){e.strokeWidth=1;var r=se._LEGEND_ITEM_MARGIN,o=null,a=null;null===o&&(o=this._getColorLight(i)),null===a&&(a=this._getColor(i)),e.fill=o,e.stroke=a;var l=t.top+.5*t.height,c=se._LEGEND_ITEM_HEIGHT;e.drawRect(t.left+r,l-.5*c,se._LEGEND_ITEM_WIDTH,c,null),null!=n&&N._renderText(e,n.toString(),new s.Point(t.left+c+2*r,l),0,1,N._CSS_LABEL)},t.prototype._getLabelContent=function(e,t){return Object(s.isString)(t)?this._keywords.replace(t,e):Object(s.isFunction)(t)?t(e):null},t.prototype._select=function(e,t){if(void 0===t&&(t=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=e,this.selectionMode==g.Point){var i=this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(e),this._notifyCurrentChanged=!0)}null==e?(this._selectedIndex=-1,this.invalidate()):this.isAnimated&&this.selectedItemPosition!=m.None||!(this.selectedItemOffset>0||this.selectedItemPosition!=m.None)?this._highlight(!0,this._selectionIndex,t):(this._selectedIndex=e,this.invalidate()),this.onSelectionChanged()},t.prototype._highlightCurrent=function(){if(this.selectionMode!=g.None){var e=-1,t=this._cv;t&&(e=t.currentPosition),this._highlight(!0,e)}},t.prototype._highlight=function(e,t,i){if(void 0===i&&(i=!1),this.selectionMode==g.Point&&null!=t&&t>=0)if(e){for(var n=[],r=0;r<this._pieGroups.length;r++){if(d=this._pels[t+r*this._values[0].length]){d.parentNode.appendChild(d);var o=this._find(d,["ellipse"]);this._highlightItems(this._find(d,["path","ellipse"]),N._CSS_SELECTION,e)}var s=this._angles[t+r*this._values[0].length];if(this.selectedItemPosition!=m.None&&0!=s){var a=0;this.selectedItemPosition==m.Left?a=180:this.selectedItemPosition==m.Top?a=-90:this.selectedItemPosition==m.Bottom&&(a=90);var l=a*Math.PI/180-s;l*=180/Math.PI,i&&this.isAnimated?n.push(l):(this._rotationAngles[r]=l,this._pieGroups[r].transform.baseVal.getItem(0).setRotate(l,this._centers[r].x,this._centers[r].y))}var c=this.selectedItemOffset;if(c>0&&o&&0==o.length){var h=this._selectedOffset.x=Math.cos(s)*c*this._radius,u=this._selectedOffset.y=Math.sin(s)*c*this._radius;d&&d.setAttribute("transform","translate("+h.toFixed()+","+u.toFixed()+")")}this._selectedIndex=t}n.length>0&&this._animateSelectionAngle(n,.5)}else{for(r=0;r<this._pieGroups.length;r++){var d;(d=this._pels[t+r*this._values[0].length])&&(d.parentNode.insertBefore(d,d.parentNode.childNodes.item(t)),d.removeAttribute("transform"),this._highlightItems(this._find(d,["path","ellipse"]),N._CSS_SELECTION,e))}this._selectedIndex==t&&(this._selectedIndex=-1)}},t.prototype._animateSelectionAngle=function(e,t){var i=this,n=i._pieGroups;i._selectionAnimationID&&clearInterval(this._selectionAnimationID),this._selectionAnimationID=Object(s.animate)((function(t){if(n==i._pieGroups){for(var r=0;r<n.length;r++){var o=le.clampAngle(i._rotationAngles[r]),s=le.clampAngle(e[r])-o;i._rotationAngles[r]=o+=s*t,n[r].transform.baseVal.getItem(0).setRotate(o,i._centers[r].x,i._centers[r].y)}1==t&&clearInterval(i._selectionAnimationID),t>.99&&(i.selectedItemOffset>0||i.selectedItemPosition!=m.None)&&i.invalidate()}}),1e3*t)},t.prototype._getHitTestItem=function(e){var t,i=null;return(t=null!=this._cv?this._cv.items:this.itemsSource)&&e<t.length&&(i=t[e]),i},t.prototype._getHitTestValue=function(e,t){return null==t&&(t=0),this._values[t][e]},t.prototype._getHitTestLabel=function(e){return this._labels[e]},t._MARGIN=4,t._CSS_GROUP_TITLE="wj-label",t}(N),le=function(){function e(){}return e.clampAngle=function(e,t){void 0===t&&(t=0);var i=(e+180)%360-180;return i<-180+(t<0?t+360:t)&&(i+=360),i},e}(),ce=function(){function e(e,t,i,n,r){void 0===r&&(r=0),this._isFull=!1,this._center=e,this._radius=t,this._originAngle=i,this._originSweep=n,n>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*n*180/Math.PI,this._angle=le.clampAngle(180*i/Math.PI+this._sweep),this._radius2=t*t,this._startAngle=r}return e.prototype.contains=function(e){var t=e.x-this._center.x,i=e.y-this._center.y;if(t*t+i*i<=this._radius2){var n=180*Math.atan2(i,t)/Math.PI,r=le.clampAngle(this._angle,this._startAngle)-le.clampAngle(n,this._startAngle);if(this._isFull||Math.abs(r)<=this._sweep)return!0}return!1},e.prototype.distance=function(e){if(this.contains(e))return 0;var t=e.x-this._center.x,i=e.y-this._center.y,n=t*t+i*i,r=180*Math.atan2(i,t)/Math.PI,o=le.clampAngle(this._angle,this._startAngle)-le.clampAngle(r,this._startAngle);return this._isFull||Math.abs(o)<=this._sweep?Math.sqrt(n)-this._radius:void 0},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),e}(),he=function(){function e(e,t,i,n,r,o){void 0===o&&(o=0),this._isFull=!1,this._center=e,this._radius=t,this._iradius=i,this._originAngle=n,this._originSweep=r,r>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*r*180/Math.PI,this._angle=le.clampAngle(180*n/Math.PI+this._sweep),this._radius2=t*t,this._iradius2=i*i,this._startAngle=o}return e.prototype.contains=function(e){var t=e.x-this._center.x,i=e.y-this._center.y,n=t*t+i*i;if(n>=this._iradius2&&n<=this._radius2){var r=180*Math.atan2(i,t)/Math.PI,o=le.clampAngle(this._angle,this._startAngle)-le.clampAngle(r,this._startAngle);if(this._isFull||Math.abs(o)<=this._sweep)return!0}return!1},e.prototype.distance=function(e){if(this.contains(e))return 0},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),e}(),ue=function(){function e(){this._DEFAULT_WIDTH=2,this._DEFAULT_SYM_SIZE=10,this.clipping=!0}return e.prototype.clear=function(){this.seriesCount=0,this.seriesIndex=0},e.prototype._renderLabels=function(e,t,i,n,r){var o=i.length,a=n.dataLabel,l=a.offset;void 0===l&&(l=a.connectingLine?16:0),a.border&&(l-=2);for(var c=0;c<o;c++){var h=i[c],u=Object(s.asType)(h.tag,W,!0);u&&!h.ignoreLabel&&this._renderLabel(e,h,u,n,a,t,l,r)}},e.prototype._renderLabel=function(e,t,i,n,r,o,s,a){var l=null==r.position?j.Top:r.position,c=r.border,h=r.connectingLine,u=new ee(n,p);u._setDataPoint(i);var d=n._getLabelContent(u,r.content),p=this._getLabelPoint(o,i);if(this._getPointAndPosition(p,l,t,n),n._plotRect.contains(p)){var f=new k(e,u,p,d);if(r.onRendering&&(r.onRendering(f)?(d=f.text,p=f.point):d=null),d){var g=this._renderLabelAndBorder(e,d,l,s,p,h,2,c);if(g){var m=new U(g);m.tag=i,a.push(m)}}e.cssPriority=!0}},e.prototype._getPointAndPosition=function(e,t,i,n){if(i instanceof U){var r=i;n._isRotated()?e.y=r.rect.top+.5*r.rect.height:e.x=r.rect.left+.5*r.rect.width}},e.prototype._getLabelPoint=function(e,t){var i=e._getAxisX(),n=e._getAxisY();return new s.Point(i.convert(t.dataX),n.convert(t.dataY))},e.prototype._renderLabelAndBorder=function(e,t,i,n,r,o,s,a){var l,c="wj-data-label",h="wj-data-label-line",u=ge._CSS_DATA_LABELS;switch(i){case j.Top:o&&e.drawLine(r.x,r.y,r.x,r.y-n,h),r.y-=s+n,l=ge._renderText(e,t,r,1,2,c,u);break;case j.Bottom:o&&e.drawLine(r.x,r.y,r.x,r.y+n,h),r.y+=s+n,l=ge._renderText(e,t,r,1,0,c,u);break;case j.Left:o&&e.drawLine(r.x,r.y,r.x-n,r.y,h),r.x-=s+n,l=ge._renderText(e,t,r,2,1,c,u);break;case j.Right:o&&e.drawLine(r.x,r.y,r.x+n,r.y,h),r.x+=s+n,l=ge._renderText(e,t,r,0,1,c,u);break;case j.Center:l=ge._renderText(e,t,r,1,1,c,u)}return a&&l&&e.drawRect(l.left-s,l.top-s,l.width+2*s,l.height+2*s,"wj-data-label-border"),l},e.prototype.getOption=function(e,t){var i=this.chart._options;if(t&&(i=i?i[t]:null),i&&!Object(s.isUndefined)(i[e])&&null!==i[e])return i[e]},e.prototype.getNumOption=function(e,t){var i=this.chart._options;if(t&&(i=i?i[t]:null),i&&i[e])return Object(s.asNumber)(i[e],!0)},e.prototype.getItemFormatter=function(e){return e instanceof oe&&e.itemFormatter?e.itemFormatter:this.chart.itemFormatter},e.cloneStyle=function(e,t){if(!e)return e;var i={};for(var n in e)t&&t.indexOf(n)>=0||(i[n]=e[n]);return i},e.prototype.isValid=function(e,t,i,n){return isFinite(e)&&isFinite(t)&&ge._contains(this.chart._plotRect,new s.Point(e,t))},e.prototype.load=function(){},e.prototype.unload=function(){},e.prototype._createSteps=function(e,t,i){var n=this.getOption("position","step"),r=i||e.length,o=[],s=[],a=this.chart._isRotated();if("center"==n)if(a)for(var l=0;l<r;l++){var c=0==l?t[l+1]-t[l]:t[l]-t[l-1],h=l==r-1?t[l]-t[l-1]:t[l+1]-t[l];o.push(e[l]),s.push(t[l]-.5*c),o.push(e[l]),s.push(t[l]+.5*h)}else for(l=0;l<r;l++){var u=l==r-1?e[l]-e[l-1]:e[l+1]-e[l];o.push(e[l]-.5*(0==l?e[l+1]-e[l]:e[l]-e[l-1])),s.push(t[l]),o.push(e[l]+.5*u),s.push(t[l])}else if("end"==n)for(l=0;l<r;l++)l>0&&(a?(o.push(e[l]),s.push(t[l-1])):(o.push(e[l-1]),s.push(t[l]))),o.push(e[l]),s.push(t[l]);else for(l=0;l<r;l++)o.push(e[l]),s.push(t[l]),l<r-1&&(a?(o.push(e[l]),s.push(t[l+1])):(o.push(e[l+1]),s.push(t[l])));return{x:o,y:s}},e}();!function(e){e[e.Column=0]="Column",e[e.Bar=1]="Bar",e[e.Scatter=2]="Scatter",e[e.Line=3]="Line",e[e.LineSymbols=4]="LineSymbols",e[e.Area=5]="Area",e[e.Bubble=6]="Bubble",e[e.Candlestick=7]="Candlestick",e[e.HighLowOpenClose=8]="HighLowOpenClose",e[e.Spline=9]="Spline",e[e.SplineSymbols=10]="SplineSymbols",e[e.SplineArea=11]="SplineArea",e[e.Funnel=12]="Funnel",e[e.Step=13]="Step",e[e.StepSymbols=14]="StepSymbols",e[e.StepArea=15]="StepArea"}(te||(te={})),function(e){e[e.None=0]="None",e[e.Stacked=1]="Stacked",e[e.Stacked100pc=2]="Stacked100pc"}(ie||(ie={}));var de,pe,fe,ge=function(e){function t(i,n){var r=e.call(this,i,null,!0)||this;r._series=new s.ObservableArray,r._axes=new V,r._pareas=new p,r._interpolateNulls=!1,r._legendToggle=!1,r._symbolSize=10,r._dataInfo=new be,r.__barPlotter=null,r.__linePlotter=null,r.__areaPlotter=null,r.__bubblePlotter=null,r.__financePlotter=null,r.__funnelPlotter=null,r._plotters=[],r._rotated=!1,r._stacking=ie.None,r._xlabels=[],r._xvals=[],r._lblAreas=[],r._colRowLens=[],r._selectedEls=[],r._markers=[],r._bindingSeparator=",",r.seriesVisibilityChanged=new s.Event,r.applyTemplate("wj-control wj-flexchart",null,null);var o=r;return o._series.collectionChanged.addHandler((function(){for(var e=o._series,t=0;t<e.length;t++){var i=Object(s.tryCast)(e[t],oe);if(!i)throw"chartSeries array must contain SeriesBase objects.";i._chart=o,i.axisX&&null==i.axisX._chart&&(i.axisX._chart=o,o.axes.push(i.axisX)),i.axisY&&null==i.axisY._chart&&(i.axisY._chart=o,o.axes.push(i.axisY))}o.invalidate()})),r._currentRenderEngine=new y(r.hostElement),r._hitTester=new J(r),r._legend=new w(r),r._tooltip=new E,r._tooltip.showDelay=0,r._lbl=new F,r._lbl._chart=r,r._initAxes(),o._axes.collectionChanged.addHandler((function(){for(var e=o._axes,t=0;t<e.length;t++){var i=Object(s.tryCast)(e[t],z);if(!i)throw"axes array must contain Axis objects.";i._chart=o}o.invalidate()})),o._pareas.collectionChanged.addHandler((function(){for(var e=o._pareas,t=0;t<e.length;t++){var i=Object(s.tryCast)(e[t],d);if(!i)throw"plotAreas array must contain PlotArea objects.";i._chart=o}o.invalidate()})),r._keywords=new A,r.hostElement.addEventListener("click",(function(e){var t=o._tooltip;t.content&&o.isTouching&&o._updateTooltip(t,e)})),r.hostElement.addEventListener("mousemove",(function(e){var t=o._tooltip;t.content&&!o.isTouching&&o._updateTooltip(t,e)})),r.hostElement.addEventListener("mouseleave",(function(e){o._hideToolTip()})),r.hostElement.addEventListener("click",(function(e){if(o.selectionMode!=g.None){var i=o._hitTestData(e),n=t._SELECTION_THRESHOLD;o.tooltip&&o.tooltip.threshold&&(n=o.tooltip.threshold),i.distance<=n&&i.series?o._select(i.series,i.pointIndex):o.selectionMode==g.Series&&(i=o.hitTest(e)).chartElement==Y.Legend&&i.series?o._select(i.series,null):o._select(null,null)}!0===o.legendToggle&&(i=o.hitTest(e)).chartElement==Y.Legend&&i.series&&(i.series.visibility==Q.Legend?i.series.visibility=Q.Visible:i.series.visibility==Q.Visible&&(i.series.visibility=Q.Legend),o.focus())})),r.initialize(n),r}return l(t,e),t.prototype.initialize=function(t){if(t&&t.renderEngine){var i=Object(s.asType)(this._currentRenderEngine,y,!0);i&&i.detach(),this._currentRenderEngine=null}e.prototype.initialize.call(this,t)},t.prototype._initAxes=function(){this._axisX=new z(m.Bottom),this._axisY=new z(m.Left),this._axisX.majorGrid=!1,this._axisX.name="axisX",this._axisY.majorGrid=!0,this._axisY.majorTickMarks=D.None,this._axisY.name="axisY",this._axisX._chart=this,this._axisY._chart=this,this._axes.push(this._axisX),this._axes.push(this._axisY)},Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(e){if(e!=this._axisX){var t=this._axisX=Object(s.asType)(e,z);this.beginUpdate(),t&&(void 0===t.majorGrid&&(t.majorGrid=!1),void 0===t.name&&(t.name="axisX"),null==t.position&&(t.position=m.Bottom),t._axisType=P.X,t._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(e){if(e!=this._axisY){var t=this._axisY=Object(s.asType)(e,z);this.beginUpdate(),t&&(void 0===t.majorGrid&&(t.majorGrid=!0),void 0===t.name&&(t.name="axisY"),t.majorTickMarks=D.None,null==t.position&&(t.position=m.Left),t._axisType=P.Y,t._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(e){e!=this._binding&&(this._binding=Object(s.asString)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX},set:function(e){e!=this._bindingX&&(this._bindingX=Object(s.asString)(e,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(e){e!=this._symbolSize&&(this._symbolSize=Object(s.asNumber)(e,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(e){e!=this._interpolateNulls&&(this._interpolateNulls=Object(s.asBoolean)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(e){e!=this._legendToggle&&(this._legendToggle=Object(s.asBoolean)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLabel",{get:function(){return this._lbl},set:function(e){e!=this._lbl&&(this._lbl=Object(s.asType)(e,F),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},set:function(e){e!=this._selection&&(this._selection=Object(s.asType)(e,oe,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderEngine",{get:function(){return this._currentRenderEngine},set:function(e){if(e!=this._currentRenderEngine){var t=Object(s.asType)(this._currentRenderEngine,y,!0);t&&t.detach(),this._currentRenderEngine=e;var i=Object(s.asType)(this._currentRenderEngine,y,!0);i&&i.attach(this.hostElement),this.refresh()}},enumerable:!0,configurable:!0}),t.prototype.onSeriesVisibilityChanged=function(e){this.seriesVisibilityChanged.raise(this,e)},t.prototype.hitTest=function(e,i){var n=this._toControl(e,i),r=new ee(this,n),o=null;if(t._contains(this._rectHeader,n))r._chartElement=Y.Header;else if(t._contains(this._rectFooter,n))r._chartElement=Y.Footer;else if(t._contains(this._rectLegend,n))r._chartElement=Y.Legend,null!==(o=this.legend._hitTest(n))&&o>=0&&o<this.series.length&&(this._getChartType()===te.Bar?r._setData(this.series[this.series.length-1-o]):r._setData(this.series[o]));else if(t._contains(this._rectChart,n)){var s=this._hitTestLabels(n);if(s)r._chartElement=Y.DataLabel,r._dist=0,r._setDataPoint(s.tag);else{for(var a=this._hitTester.hitTest(n),l=null,c=null,h=this.series.length-1;h>=0;h--)if(this.series[h].hitTest!==se.prototype.hitTest){var u=this.series[h].hitTest(e);if(u&&((!l||u.distance<l.distance)&&(l=u,c=h),0===u.distance))break}a&&a.area?l&&l.distance<a.distance||l&&l.distance==a.distance&&c>a.area.tag.seriesIndex?r=l:(r._setDataPoint(a.area.tag),r._dist=a.distance):l&&(r=l);var d=!1;this.axes.some((function(e){if(t._contains(e._axrect,n))return r._chartElement=e.axisType===P.X?Y.AxisX:Y.AxisY,d=!0,!0})),d||(t._contains(this._plotRect,n)?r._chartElement=Y.PlotArea:t._contains(this._rectChart,n)&&(r._chartElement=Y.ChartArea))}}else r._chartElement=Y.None;return r},t.prototype.pointToData=function(e,t){return Object(s.isNumber)(e)&&Object(s.isNumber)(t)&&(e=new s.Point(e,t)),e instanceof MouseEvent?(e=new s.Point(e.pageX,e.pageY),e=this._toControl(e)):e=e.clone(),e.x=this.axisX.convertBack(e.x),e.y=this.axisY.convertBack(e.y),e},t.prototype.dataToPoint=function(e,t){Object(s.isNumber)(e)&&Object(s.isNumber)(t)&&(e=new s.Point(e,t)),Object(s.asType)(e,s.Point);var i=e.clone();return i.x=this.axisX.convert(i.x),i.y=this.axisY.convert(i.y),i},t.prototype.dispose=function(){this._markers.forEach((function(e){return e.remove()})),this._markers=[],e.prototype.dispose.call(this)},t.prototype._copy=function(e,t){if("series"==e){this.series.clear();for(var i=Object(s.asArray)(t),n=0;n<i.length;n++){var r=this._createSeries();Object(s.copy)(r,i[n]),this.series.push(r)}return!0}return!1},t.prototype._createSeries=function(){return new se},t.prototype._clearCachedValues=function(){for(var e=0;e<this._series.length;e++){var t=this._series[e];null==t.itemsSource&&t._clearValues()}},t.prototype._performBind=function(){if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv){var e=this._cv.items;if(e){for(var t=e.length,i=this.bindingX?new s.Binding(this.bindingX):null,n=0;n<t;n++)if(i){var r=i.getValue(e[n]);Object(s.isNumber)(r)?(this._xvals.push(Object(s.asNumber)(r)),this._xDataType=s.DataType.Number):Object(s.isDate)(r)&&(this._xvals.push(Object(s.asDate)(r).valueOf()),this._xDataType=s.DataType.Date),this._xlabels.push(r)}this._xvals.length==t?this._xlabels.splice(0):this._xvals.splice(0)}}},t.prototype._hitTestSeries=function(e,t){var i=this._toControl(e),n=new ee(this,i),r=this._hitTester.hitTestSeries(i,t);return r&&r.area&&(n._setDataPoint(r.area.tag),n._chartElement=Y.PlotArea,n._dist=r.distance),n},t.prototype._hitTestData=function(e){var t=this._toControl(e),i=new ee(this,t),n=this._hitTester.hitTest(t,!0);return n&&n.area&&(i._setDataPoint(n.area.tag),i._dist=n.distance),i},t.prototype._hitTestLabels=function(e){for(var t=null,i=this._lblAreas.length,n=0;n<i;n++)if(this._lblAreas[n].contains(e)){t=this._lblAreas[n];break}return t},t._dist2=function(e,t){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},t._dist=function(e,i,n){return Math.sqrt(t._distToSegmentSquared(e,i,n))},t._distToSegmentSquared=function(e,i,n){var r=t._dist2(i,n);if(0==r)return t._dist2(e,i);var o=((e.x-i.x)*(n.x-i.x)+(e.y-i.y)*(n.y-i.y))/r;return t._dist2(e,o<0?i:o>1?n:new s.Point(i.x+o*(n.x-i.x),i.y+o*(n.y-i.y)))},t.prototype._isRotated=function(){return this._getChartType()==te.Bar?!this._rotated:this._rotated},t.prototype._getChartType=function(){return null},t.prototype._prepareRender=function(){this._hitTester.clear()},t.prototype._renderChart=function(e,i,n){var r=this._rectChart.clone(),o=new s.Size(r.width,r.height);this._selectedEls.length=0,(_=this._getPlotter(null)).stacking=this._stacking,this._curPlotter!=_&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=_),_.load();var a=this._isRotated();this._dataInfo.analyse(this._series,a,_.stacking,this._xvals.length>0?this._xvals:null,this.axisX._getLogBase()>0,this.axisY._getLogBase()>0);var l=_.adjustLimits(this._dataInfo,i.clone());if(a){var c=this._dataInfo.getDataTypeX();c||(c=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),l.left,l.right),this.axisY._updateActualLimits(c,l.top,l.bottom,this._xlabels,this._xvals)}else{var h=this._dataInfo.getDataTypeX();h||(h=this._xDataType),this.axisX._updateActualLimits(h,l.left,l.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),l.top,l.bottom)}var u=this._getAxes();if(this._updateAuxAxes(u,a),this._layout(i,o,e),e.startGroup(t._CSS_PLOT_AREA),e.fill="transparent",e.stroke=null,this.plotAreas.length>0)for(var d=0;d<this.plotAreas.length;d++)this.plotAreas[d]._render(e);else{var p=this._plotRect;e.drawRect(p.left,p.top,p.width,p.height)}e.endGroup();var f=this._series.length;this._clearPlotters();var g={};for(d=0;d<f;d++){var m=this._series[d];if(((S=m.visibility)==Q.Visible||S==Q.Plot)&&m.getValues(0)){var b=m._getAxisY(),_=this._getPlotter(m);if(!b||b==this.axisY||_ instanceof ve)_.seriesCount++;else{var y=b._uniqueId;g[y]?g[y].count+=1:g[y]={count:1,index:0}}}}if(this.onRendering(new C(e)),this._getChartType()!==te.Funnel)for(d=0;d<u.length;d++){var v=u[d];w=e.startGroup(v.axisType==P.X?t._CSS_AXIS_X:t._CSS_AXIS_Y,this._chartRectId),v._hostElement=n?w:v._hostElement,v._render(e),e.endGroup()}for(e.startGroup("wj-series-group"),this._plotrectId="plotRect"+(1e6*Math.random()).toFixed(),e.addClipRect(this._plotRect,this._plotrectId),d=0;d<f;d++){var x=this._series[d];x._pointIndexes=[],_=this._getPlotter(x),x._plotter=_;var w=e.startGroup(x.cssClass,_.clipping?this._plotrectId:null);x._hostElement=n?w:x._hostElement;var S=x.visibility,O=x.axisX,T=x.axisY;if(O||(O=this.axisX),T||(T=this.axisY),S==Q.Visible||S==Q.Plot){var N,A,M=g[T._uniqueId];!M||_ instanceof ve?(N=_.seriesIndex,A=_.seriesCount,_.seriesIndex++,x.onRendering(e,N,A)||_.plotSeries(e,O,T,x,this,N,A)):(N=M.index,A=M.count,M.index++,x.onRendering(e,N,A)||_.plotSeries(e,O,T,x,this,N,A)),x.onRendered(e)}e.endGroup()}e.endGroup(),this._lblAreas=[],this.dataLabel.content&&this.dataLabel.position!=j.None&&this._renderLabels(e),this._highlightCurrent(),this.onRendered(new C(e))},t.prototype._getDesiredLegendSize=function(e,t,i,n){var r=new s.Size,o=this.series,a=o.length,l=0,c=0;this._colRowLens=[];for(var h=0;h<a;h++){var u=Object(s.tryCast)(o[h],oe),d=u.visibility;if(u.name&&d!=Q.Hidden&&d!=Q.Plot)for(var p=u.legendItemLength(),f=0;f<p;f++){var g=u.measureLegendItem(e,f);t?(l+g.height>n&&(r.height=n,this._colRowLens.push(c),c=0,l=0),c<g.width&&(c=g.width),l+=g.height):(c+g.width>i&&(r.width=i,this._colRowLens.push(l),l=0,c=0),l<g.height&&(l=g.height),c+=g.width)}}return t?(r.height<l&&(r.height=l),this._colRowLens.push(c),r.width=this._colRowLens.reduce((function(e,t){return e+t}),0),r.width=this._getLegendSize(i,r.width)):(r.width<c&&(r.width=c),this._colRowLens.push(l),r.height=this._colRowLens.reduce((function(e,t){return e+t}),0),r.height=this._getLegendSize(n,r.height)),r},t.prototype._renderLegend=function(e,t,i,n,r,o){var a,l=this.series,c=l.length,h=t.clone(),u=0;if(this._getChartType()===te.Bar)for(var d=c-1;d>=0;d--)a=Object(s.tryCast)(l[d],oe),u=this._renderLegendElements(e,a,t,h,i,n,r,o,u);else for(d=0;d<c;d++)a=Object(s.tryCast)(l[d],oe),u=this._renderLegendElements(e,a,t,h,i,n,r,o,u)},t.prototype._renderLegendElements=function(e,t,i,n,r,o,a,l,c){var h=this._rectLegend,u=c;if(!t)return u;var d=t.visibility;if(!t.name||d==Q.Hidden||d==Q.Plot)return t._legendElement=null,r.push(null),u;var p=t.legendItemLength(),f=e.startGroup(t.cssClass);d==Q.Legend?(f.setAttribute("opacity","0.5"),t._legendElement=f):t._legendElement=d==Q.Visible?f:null;for(var g=0;g<p;g++){var m=t.measureLegendItem(e,g);o?n.y+m.height>h.top+h.height+1&&(n.x+=this._colRowLens[u],u++,n.y=i.y):n.x+m.width>h.left+h.width+1&&(n.y+=this._colRowLens[u],u++,n.x=i.x);var b=new s.Rect(n.x,n.y,m.width,m.height);d!=Q.Legend&&d!=Q.Visible||t.drawLegendItem(e,b,g),r.push(b),o?n.y+=m.height:n.x+=m.width}return e.endGroup(),u},t.prototype._renderLabels=function(e){var i=this.series,n=i.length;e.stroke="null",e.fill="transparent",e.strokeWidth=1,e.startGroup(t._CSS_DATA_LABELS);for(var r=0;r<n;r++){var o=this._hitTester._map[r];o&&i[r]._renderLabels(e,o,this,this._lblAreas)}e.endGroup()},t.prototype._getAxes=function(){for(var e=[this.axisX,this.axisY],t=this.series.length,i=0;i<t;i++){var n=this.series[i],r=n.axisX;r&&-1===e.indexOf(r)&&e.push(r);var o=n.axisY;o&&-1===e.indexOf(o)&&e.push(o)}return e},t.prototype._clearPlotters=function(){for(var e=this._plotters.length,t=0;t<e;t++)this._plotters[t].clear()},t.prototype._initPlotter=function(e){e.chart=this,e.dataInfo=this._dataInfo,e.hitTester=this._hitTester,this._plotters.push(e)},Object.defineProperty(t.prototype,"_barPlotter",{get:function(){return null===this.__barPlotter&&(this.__barPlotter=new ve,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_linePlotter",{get:function(){return null===this.__linePlotter&&(this.__linePlotter=new je,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_areaPlotter",{get:function(){return null===this.__areaPlotter&&(this.__areaPlotter=new ye,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_bubblePlotter",{get:function(){return null===this.__bubblePlotter&&(this.__bubblePlotter=new Te,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_financePlotter",{get:function(){return null===this.__financePlotter&&(this.__financePlotter=new Se,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_funnelPlotter",{get:function(){return null===this.__funnelPlotter&&(this.__funnelPlotter=new xe,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),t.prototype._getPlotter=function(e){var t,i=this._getChartType(),n=!1;if(e){var r=e._getChartType();null!=r&&r!=i&&(i=r,n=!0)}switch(i){case te.Column:this._barPlotter.isVolume=!1,this._barPlotter.width=.7,t=this._barPlotter;break;case te.Bar:this._barPlotter.rotated=!this._rotated,this._barPlotter.isVolume=!1,this._barPlotter.width=.7,t=this._barPlotter;break;case te.Line:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,t=this._linePlotter;break;case te.Scatter:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!1,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,t=this._linePlotter;break;case te.LineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,t=this._linePlotter;break;case te.Area:this._areaPlotter.isSpline=!1,this._areaPlotter.isStep=!1,t=this._areaPlotter;break;case te.Bubble:t=this._bubblePlotter;break;case te.Candlestick:(o=this._financePlotter).isCandle=!0,o.isEqui=!1,o.isArms=!1,o.isVolume=!1,t=o;break;case te.HighLowOpenClose:var o;(o=this._financePlotter).isCandle=!1,o.isEqui=!1,o.isArms=!1,o.isVolume=!1,t=o;break;case te.Spline:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,this._linePlotter.isStep=!1,t=this._linePlotter;break;case te.SplineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,this._linePlotter.isStep=!1,t=this._linePlotter;break;case te.SplineArea:this._areaPlotter.isSpline=!0,this._areaPlotter.isStep=!1,t=this._areaPlotter;break;case te.Funnel:t=this._funnelPlotter;break;case te.Step:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!0,t=this._linePlotter;break;case te.StepSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!0,t=this._linePlotter;break;case te.StepArea:this._areaPlotter.isSpline=!1,this._areaPlotter.isStep=!0,t=this._areaPlotter;break;default:throw"Invalid chart type."}return t.rotated=this._rotated,i==te.Bar&&(t.rotated=!t.rotated),n&&(t.rotated=this._isRotated()),t},t.prototype._layout=function(e,t,i){this.plotAreas.length>0?this._layoutMultiple(e,t,i):this._layoutSingle(e,t,i)},t.prototype._layoutSingle=function(e,t,i){for(var n=e.width,r=e.height,o=new s.Size(n,.75*r),a=new s.Size(r,.75*n),l=0,c=0,h=n,u=r,d=0,p=0,f=n,g=r,b=this._getAxes(),_=0;_<b.length;_++){var y=(T=b[_]).origin,v=T._getPosition();if(T.axisType==P.X){(C=T._getHeight(i,n))>o.height&&(C=o.height),T._desiredSize=new s.Size(o.width,C);var x=T._hasOrigin=Object(s.isNumber)(y)&&y>this.axisY._getMinNum()&&y<this.axisY._getMaxNum(),w=Math.min(.25*n,T._annoSize.width);if(v==m.Bottom)if(l=Math.max(l,.5*w),h=Math.min(h,n-.5*w),x){var S=this._convertY(y,p,g);g-=Math.max(0,S+C-g)}else g-=C;else v==m.Top&&(l=Math.max(l,.5*w),h=Math.min(h,n-.5*w),x?(S=this._convertY(y,p,g),p+=Math.max(0,p-(S-C))):p+=C)}else if(T.axisType==P.Y){var C;if((C=T._getHeight(i,r))>a.height&&(C=a.height),T._desiredSize=new s.Size(a.width,C),x=T._hasOrigin=Object(s.isNumber)(y)&&y>this.axisX._getMinNum()&&y<this.axisX._getMaxNum(),v==m.Left)if(T._actualAngle<0?u=Math.min(u,r-T._annoSize.height):T._actualAngle>0?c=Math.max(c,T._annoSize.height):(c=Math.max(c,T._annoSize.height),u=Math.min(u,r-T._annoSize.height)),x){var O=this._convertX(y,d,f);d+=Math.max(0,d-(O-C))}else d+=C;else v==m.Right&&(T._actualAngle>0?u=Math.min(u,r-T._annoSize.height):T._actualAngle<0?c=Math.max(c,T._annoSize.height):(c=Math.max(c,T._annoSize.height),u=Math.min(u,r-T._annoSize.height)),x?(O=this._convertX(y,d,f),f-=Math.max(0,O+C-f)):f-=C)}}var j=this._parseMargin(this.plotMargin);for(l=d=isNaN(j.left)?Math.max(l,d)+e.left:j.left,h=f=isNaN(j.right)?Math.min(h,f)+e.left:t.width-j.right,c=p=isNaN(j.top)?Math.max(c,p)+e.top:j.top,u=g=isNaN(j.bottom)?Math.min(u,g)+e.top:t.height-j.bottom,n=Math.max(1,h-l),r=Math.max(1,u-c),this._plotRect=new s.Rect(l,c,n,r),u<=c&&(g=p+1),i.stroke=null,_=0;_<b.length;_++){var T,N;if(y=(T=b[_]).origin,v=T._getPosition(),T.axisType==P.X)T._hasOrigin?(S=this._convertY(y,this._plotRect.top,this._plotRect.bottom),v==m.Bottom?(N=new s.Rect(l,S,n,T._desiredSize.height),g+=Math.max(0,N.bottom-this._plotRect.bottom)):v==m.Top?(N=new s.Rect(l,S-T._desiredSize.height,n,T._desiredSize.height),p-=Math.max(0,this._plotRect.top-N.top)):N=new s.Rect(l,S,n,1)):v==m.Bottom?(N=new s.Rect(l,g,n,T._desiredSize.height),g+=T._desiredSize.height):v==m.Top?(N=new s.Rect(l,p-T._desiredSize.height,n,T._desiredSize.height),p-=T._desiredSize.height):N=new s.Rect(l,p,n,1),T._layout(N,this._plotRect);else if(T.axisType==P.Y){var A;T._hasOrigin?(O=this._convertX(y,this._plotRect.left,this._plotRect.right),v==m.Left?(A=new s.Rect(O-T._desiredSize.height,c,r,T._desiredSize.height),d-=T._desiredSize.height):v==m.Right?(A=new s.Rect(O,c,r,T._desiredSize.height),f+=T._desiredSize.height):A=new s.Rect(O,c,r,1)):v==m.Left?(A=new s.Rect(d-T._desiredSize.height,c,r,T._desiredSize.height),d-=T._desiredSize.height):v==m.Right?(A=new s.Rect(f,c,r,T._desiredSize.height),f+=T._desiredSize.height):A=new s.Rect(d,c,r,1),T._layout(A,this._plotRect)}}},t.prototype._layoutMultiple=function(e,t,i){for(var n=e.width,r=e.height,o=[],a=[],l=this._getAxes(),c=l.length,h=0;h<c;h++)if((j=l[h])._plotrect=null,j.axisType==P.X){for(var u=j.plotArea?j.plotArea.column:0;o.length<=u;)o.push(new me);o[u].axes.push(j)}else if(j.axisType==P.Y){for(var d=j.plotArea?j.plotArea.row:0;a.length<=d;)a.push(new me);a[d].axes.push(j)}for(var p=o.length,f=a.length,g=new s.Size(n,.3*r),b=new s.Size(r,.3*n),_=0,y=0,v=n,x=r,w=0;w<p;w++)for((I=o[w]).right=n,I.bottom=r,h=0;h<I.axes.length;h++){var S=(j=I.axes[h])._getHeight(i,j.axisType==P.X?n:r);S>g.height&&(S=g.height);var C=new s.Size(g.width,S);j._desiredSize=C,0==w&&(I.left=Math.max(I.left,.5*j._annoSize.width)),w==p-1&&(I.right=Math.min(I.right,n-.5*j._annoSize.width)),(B=j._getPosition())==m.Bottom?I.bottom-=C.height:B==m.Top&&(I.top+=C.height)}for(var O=0;O<f;O++)for((I=a[O]).right=n,I.bottom=r,h=0;h<I.axes.length;h++){var j=I.axes[h],T=new s.Size(b.width,j._getHeight(i,j.axisType==P.X?n:r));T.height>b.height&&(T.height=b.height),j._desiredSize=T,0==O&&(I.top=Math.max(I.top,.5*j._annoSize.width)),O==f-1&&(I.bottom=Math.min(I.bottom,r-.5*j._annoSize.width)),(B=j._getPosition())==m.Left?I.left+=T.height:B==m.Right&&(I.right-=T.height)}var N=0,A=0,M=n,E=r;for(w=0;w<p;w++){var I=o[w];N=Math.max(N,I.left),A=Math.max(A,I.top),M=Math.min(M,I.right),E=Math.min(E,I.bottom)}for(O=0;O<f;O++)I=a[O],N=Math.max(N,I.left),A=Math.max(A,I.top),M=Math.min(M,I.right),E=Math.min(E,I.bottom);N=_=Math.max(_,N),M=v=Math.min(v,M),A=y=Math.max(y,A),E=x=Math.min(x,E),this._plotRect=new s.Rect(_,y,v-_,x-y);var D=this._plotRect.clone(),k=_,L=this.plotAreas._calculateWidths(this._plotRect.width,p);for(w=0;w<p;w++){E=x,A=y,I=o[w];var F=L[w];for(h=0;h<I.axes.length;h++){var R,B=(j=I.axes[h])._getPosition(),z=new s.Rect(k,D.top,F,D.height);B==m.Bottom?(R=new s.Rect(k,E,F,j._desiredSize.height),E+=j._desiredSize.height):B==m.Top&&(R=new s.Rect(k,A-j._desiredSize.height,F,j._desiredSize.height),A-=j._desiredSize.height),j._layout(R,z)}for(h=0;h<this.plotAreas.length;h++)(W=this.plotAreas[h]).column==w&&W._setPlotX(k,F);k+=F}var V=y,H=this.plotAreas._calculateHeights(this._plotRect.height,f);for(O=0;O<f;O++){N=_,M=v,I=a[O];var X=H[O];for(h=0;h<I.axes.length;h++){var G;B=(j=I.axes[h])._getPosition(),z=new s.Rect(D.left,V,D.width,X),j._plotrect?(z.left=j._plotrect.left,z.width=j._plotrect.width):L&&L.length>0&&(z.width=L[0]),B==m.Left?(G=new s.Rect(N-j._desiredSize.height,V,X,j._desiredSize.height),N-=j._desiredSize.height):B==m.Right&&(G=new s.Rect(M,V,X,j._desiredSize.height),M+=j._desiredSize.height),j._layout(G,z)}for(h=0;h<this.plotAreas.length;h++){var W;(W=this.plotAreas[h]).row==O&&W._setPlotY(V,X)}V+=X}},t.prototype._convertX=function(e,t,i){var n=this.axisX;return n.reversed?i-(i-t)*(e-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):t+(i-t)*(e-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},t.prototype._convertY=function(e,t,i){var n=this.axisY;return n.reversed?t+(i-t)*(e-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):i-(i-t)*(e-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},t.prototype._getLabelContent=function(e,t){return Object(s.isString)(t)?this._keywords.replace(t,e):Object(s.isFunction)(t)?t(e):null},t.prototype._select=function(e,t){var i=!1;if(e==this._selection&&t==this._selectionIndex||(i=!0),this._selection&&this._highlight(this._selection,!1,this._selectionIndex),this._selection=e,this._selectionIndex=t,this._selection&&this._highlight(this._selection,!0,this._selectionIndex),this.selectionMode==g.Point){var n=e?e.collectionView:this._cv;n&&(this._notifyCurrentChanged=!1,n.moveCurrentToPosition(e?t:-1),this._notifyCurrentChanged=!0)}i&&this.onSelectionChanged()},t.prototype._highlightCurrent=function(){if(this.selectionMode!=g.None){var e=this._selection,t=-1;if(e){var i=e.collectionView;i||(i=this._cv),i&&(t=i.currentPosition),this._highlight(e,!0,t)}}},t.prototype._highlight=function(e,i,n){if(e=Object(s.asType)(e,oe,!0),this.selectionMode==g.Series){var r=this.series.indexOf(e),o=e.hostElement;i?o.parentNode.appendChild(o):o.parentNode.insertBefore(o,o.parentNode.childNodes.item(r));var a=this._find(o,["rect","ellipse","polyline","polygon","line","path"]);this._highlightItems(a,t._CSS_SELECTION,i),e.legendElement&&this._highlightItems(this._find(e.legendElement,["rect","ellipse","line"]),t._CSS_SELECTION,i)}else if(this.selectionMode==g.Point)if(r=this.series.indexOf(e),o=e.hostElement,i){o.parentNode.appendChild(o);var l=e.getPlotElement(n);if(l)if(l instanceof SVGElement){if("g"!=l.nodeName&&(this._highlightItems([l],t._CSS_SELECTION,i),this._selectedEls.push(l)),(a=this._find(l,["line","rect","ellipse","path","polygon"])).length>0){this._highlightItems(a,t._CSS_SELECTION,i);for(var c=0;c<a.length;c++)this._selectedEls.push(a[c])}}else if(Array.isArray(l))for(this._highlightItems(l,t._CSS_SELECTION,i),c=0;c<l.length;c++)this._selectedEls.push(l[c])}else o.parentNode.insertBefore(o,o.parentNode.childNodes.item(r)),this._selectedEls.length>0&&(this._highlightItems(this._selectedEls,t._CSS_SELECTION,i),this._selectedEls.length=0)},t.prototype._updateTooltip=function(e,t){var i,n=this.hitTest(t);if(n.distance<=e.threshold){var r=e.content;if(n.series){var o=n.series.tooltipContent;(o||""===o)&&(r=o)}i=this._getLabelContent(n,r)}i?this._showToolTip(i,new s.Rect(t.clientX,t.clientY,5,5)):this._hideToolTip()},t.prototype._updateAuxAxes=function(e,t){for(var i=2;i<e.length;i++){var n=e[i];n._chart=this;for(var r,o,a=[],l=0;l<this.series.length;l++){var c=this.series[l];c.axisX!=n&&c.axisY!=n||a.push(c)}for(l=0;l<a.length;l++){var h=a[l].getDataRect()||a[l]._getDataRect();h&&(n.axisType==P.X&&!t||n.axisType==P.Y&&t?((void 0===r||h.left<r)&&(r=h.left),(void 0===o||h.right>o)&&(o=h.right)):((void 0===r||h.top<r)&&(r=h.top),(void 0===o||h.bottom>o)&&(o=h.bottom)))}var u=a[0].getDataType(0);null==u&&(u=s.DataType.Number),e[i]._updateActualLimits(u,r,o)}},t._CSS_AXIS_X="wj-axis-x",t._CSS_AXIS_Y="wj-axis-y",t._CSS_LINE="wj-line",t._CSS_GRIDLINE="wj-gridline",t._CSS_TICK="wj-tick",t._CSS_GRIDLINE_MINOR="wj-gridline-minor",t._CSS_TICK_MINOR="wj-tick-minor",t._CSS_DATA_LABELS="wj-data-labels",t}(N),me=function(){function e(){this._axes=new Array,this.left=0,this.right=0,this.top=0,this.bottom=0}return Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),e}(),be=function(){function e(){this.stackAbs={},this._xvals=null}return e.prototype.analyse=function(e,t,i,n,r,o){var a=this;this.minY=NaN,this.maxY=NaN,this.minX=NaN,this.maxX=NaN,this.minXp=NaN,this.minYp=NaN,this.dx=0;var l={},c={},h={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=n,null!=n)for(var u=n.length,d=0;d<u;d++){var p=n[d];if((isNaN(this.minX)||this.minX>p)&&(this.minX=p),(isNaN(this.maxX)||this.maxX<p)&&(this.maxX=p),p>0&&(isNaN(this.minXp)||this.minXp>p)&&(this.minXp=p),d>0){var f=Math.abs(p-n[d-1]);!isNaN(f)&&(f<this.dx||0==this.dx)&&(this.dx=f)}}var g,m,b,_,y,v,x,w,S,C,O,j=function(){if(m=(g=e[d])._getChartType(),b=void 0!==g.chartType,(_=g.visibility)==Q.Hidden||_==Q.Legend)return"continue";if((y=g.getDataRect())&&(!isNaN(T.minX)&&T.minX<y.left&&(v=y.right,y.left=T.minX,y.width=v-T.minX),!isNaN(T.maxX)&&T.maxX>y.right&&(y.width=T.maxX-y.left),g._isCustomAxisY()||(!isNaN(T.minY)&&T.minY<y.top&&(v=y.bottom,y.top=T.minY,y.height=v-T.minY),!isNaN(T.maxY)&&T.maxY>y.bottom&&(y.height=T.maxY-y.top))),x=null,t?g._isCustomAxisY()||(x=g.getValues(1)):g._isCustomAxisX()||(x=g.getValues(1)),x){T.dataTypeX||(T.dataTypeX=g.getDataType(1));for(var r=0;r<x.length;r++)w=x[r],isFinite(w)&&((isNaN(T.minX)||T.minX>w)&&(T.minX=w),(isNaN(T.maxX)||T.maxX<w)&&(T.maxX=w),r>0&&(!m||m==te.Column||m==te.Bar)&&(f=Math.abs(w-x[r-1]),!isNaN(f)&&f>0&&(f<T.dx||0==T.dx)&&(T.dx=f)))}if(S=null,C=!1,t?(C=g._isCustomAxisX(),S=g.getValues(0)):(C=g._isCustomAxisY(),S=g.getValues(0)),S&&(T.dataTypeY||C||(T.dataTypeY=g.getDataType(0)),isNaN(T.minX)?T.minX=0:x||n||(T.minX=Math.min(T.minX,0)),isNaN(T.maxX)?T.maxX=S.length-1:x||n||(T.maxX=Math.max(T.maxX,S.length-1)),!C))for(var o=i==ie.None||b,u=function(e){var t=S[e],i=x?Object(s.asNumber)(x[e],!0):n?Object(s.asNumber)(n[e],!0):e;Object(s.isArray)(t)?t.forEach((function(e){a._parseYVal(e,i,o,h,l,c)})):T._parseYVal(t,i,o,h,l,c)},p=0;p<S.length;p++)u(p);(O=g.getDataRect(new s.Rect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),y))&&(T.minX=O.left,T.maxX=O.right,C||(T.minY=O.top,T.maxY=O.bottom))},T=this;for(d=0;d<e.length;d++)j();if(i==ie.Stacked){for(var N in l)l[N]>this.maxY&&(this.maxY=l[N]);for(var N in c)c[N]<this.minY&&(this.minY=c[N])}else if(i==ie.Stacked100pc){for(var N in this.minY=0,this.maxY=0,h){var A=h[N];if(isFinite(A)&&0!=A){var M=l[N],E=c[N];isFinite(M)&&(M=Math.max(M/A,this.maxY))>this.maxY&&(this.maxY=M),isFinite(E)&&(E=Math.min(E/A,this.minY))<this.minY&&(this.minY=E)}}this.minY==this.maxY&&(this.minY=0,this.maxY=1)}this.stackAbs=h,r&&(t?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp),o&&(t?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},e.prototype._parseYVal=function(e,t,i,n,r,o){isFinite(e)&&(null!=e&&(isNaN(this.minY)||this.minY>e)&&(this.minY=e),null!=e&&(isNaN(this.maxY)||this.maxY<e)&&(this.maxY=e),e>0&&(isNaN(this.minYp)||this.minYp>e)&&(this.minYp=e),i||(e>0?isNaN(r[t])?r[t]=e:r[t]+=e:isNaN(o[t])?o[t]=e:o[t]+=e,isNaN(n[t])?n[t]=Math.abs(e):n[t]+=Math.abs(e)))},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinXp=function(){return this.minXp},e.prototype.getMinYp=function(){return this.minYp},e.prototype.getDeltaX=function(){return this.dx},e.prototype.getDataTypeX=function(){return this.dataTypeX},e.prototype.getDataTypeY=function(){return this.dataTypeY},e.prototype.getStackedAbsSum=function(e){var t=this.stackAbs[e];return isFinite(t)?t:0},e.prototype.getXVals=function(){return this._xvals},e.isValid=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=e.length,n=0;n<i;n++)if(!isFinite(e[n]))return!1;return!0},e}(),_e=function(e){function t(t,i){var n=e.call(this,t,null)||this;return n._chartType=te.Column,n.initialize(i),n}return l(t,e),t.prototype._getChartType=function(){return this._chartType},Object.defineProperty(t.prototype,"chartType",{get:function(){return this._chartType},set:function(e){(e=Object(s.asEnum)(e,te))!=this._chartType&&(this._chartType=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotated",{get:function(){return this._rotated},set:function(e){e!=this._rotated&&(this._rotated=Object(s.asBoolean)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stacking",{get:function(){return this._stacking},set:function(e){(e=Object(s.asEnum)(e,ie))!=this._stacking&&(this._stacking=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(e){e!=this._options&&(this._options=e,this.invalidate())},enumerable:!0,configurable:!0}),t}(ge),ye=function(e){function t(){var t=e.call(this)||this;return t.stacking=ie.None,t.isSpline=!1,t.isStep=!1,t.stackPos={},t.stackNeg={},t}return l(t,e),t.prototype.adjustLimits=function(e,t){this.dataInfo=e;for(var i=e.getMinX(),n=e.getMinY(),r=e.getMaxX(),o=e.getMaxY(),a=0;a<this.chart.series.length;a++){var l=this.chart.series[a];if(this._isRange(l)){var c=l._getChartType();if(!c||c==te.Area)for(var h=l._getBindingValues(1),u=0;u<h.length;u++)h[u]>o?o=h[u]:h[u]<n&&(n=h[u])}}if(this.isSpline){var d=.1*(o-n);this.chart.axisY._getLogBase()||(n-=d),o+=d}return this.rotated?new s.Rect(n,i,o-n,r-i):new s.Rect(i,n,r-i,o-n)},t.prototype.clear=function(){e.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},t.prototype.plotSeries=function(e,t,i,n,r,o,a,l){var c=n;if(this._isRange(c))this.plotSeriesRanged(e,t,i,n,r,o,a,l);else{var h=[],u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1);if(d){var f=d.length;if(f){p||(p=this.dataInfo.getXVals());var g=!0;p?p.length<f&&(f=p.length):(g=!1,p=new Array(f));var m=new Array,b=new Array,_=new Array,y=new Array,v=this.stacking!=ie.None&&!c._isCustomAxisY(),x=this.stacking==ie.Stacked100pc&&!c._isCustomAxisY();void 0!==c._getChartType()&&(v=x=!1);for(var w=this.rotated,S=!1,C=c.interpolateNulls,O=null,j=null,T=this.chart._plotRect,N=0;N<f;N++){var A=g?p[N]:N,M=d[N];if((null===O||A>O)&&(O=A),(null===j||A<j)&&(j=A),be.isValid(A,M)){var E=w?i.convert(A):t.convert(A);if(v){x&&(M/=this.dataInfo.getStackedAbsSum(A));var P=0;M>=0?(P=isNaN(this.stackPos[A])?0:this.stackPos[A],M=this.stackPos[A]=P+M):(P=isNaN(this.stackNeg[A])?0:this.stackNeg[A],M=this.stackNeg[A]=P+M),w?(P<t.actualMin&&(P=t.actualMin),_.push(t.convert(P)),y.push(E)):(_.push(E),P<i.actualMin&&(P=i.actualMin),y.push(i.convert(P)))}if(w){var I=t.convert(M);isNaN(E)||isNaN(I)?(S=!0,v||!0===C||(m.push(void 0),b.push(void 0))):(m.push(I),b.push(E),ge._contains(T,new s.Point(I,E))&&((D=new q(new s.Point(I,E),this._DEFAULT_SYM_SIZE)).tag=new W(u,N,M,A),this.hitTester.add(D,u)))}else{var D;I=i.convert(M),isNaN(E)||isNaN(I)?(S=!0,v||!0===C||(m.push(void 0),b.push(void 0))):(m.push(E),b.push(I),ge._contains(T,new s.Point(E,I))&&((D=new q(new s.Point(E,I),this._DEFAULT_SYM_SIZE)).tag=new W(u,N,A,M),this.hitTester.add(D,u)))}}else S=!0,v||!0===C||(m.push(void 0),b.push(void 0))}l&&m.forEach((function(e,t){null!=e&&h.push(new s.Point(e,b[t]))}));var k=this._DEFAULT_WIDTH,L=r._getColorLight(u),F=r._getColor(u),R=ue.cloneStyle(n.style,["fill"]),B=ue.cloneStyle(n.style,["stroke"]);if(!v&&!0!==C&&S){var z=[],V=[];for(N=0;N<f;N++)void 0===m[N]?(z.length>1&&(z=(H=this._modifyPoints(z,V)).x,V=H.y,e.stroke=F,e.strokeWidth=k,e.fill="none",e.drawLines(z,V,null,R),this.hitTester.add(new K(z,V),u),w?(z.push(t.convert(t.actualMin),t.convert(t.actualMin)),V.push(i.convert(i.actualMax),i.convert(i.actualMin))):(z.push(z[z.length-1],z[0]),V.push(i.convert(i.actualMin),i.convert(i.actualMin))),e.fill=L,e.stroke="none",e.drawPolygon(z,V,null,B,this.chart._plotrectId)),z=[],V=[]):(z.push(m[N]),V.push(b[N]));z.length>1&&(z=(H=this._modifyPoints(z,V)).x,V=H.y,e.stroke=F,e.strokeWidth=k,e.fill="none",e.drawLines(z,V,null,R),this.hitTester.add(new K(z,V),u),w?(z.push(t.convert(t.actualMin),t.convert(t.actualMin)),V.push(i.convert(i.actualMax),i.convert(i.actualMin))):(z.push(z[z.length-1],z[0]),V.push(i.convert(i.actualMin),i.convert(i.actualMin))),e.fill=L,e.stroke="none",e.drawPolygon(z,V,null,B,this.chart._plotrectId))}else{var H;if(m=(H=this._modifyPoints(m,b)).x,b=H.y,v){var X=this._modifyPoints(_,y);y=X.y,m=m.concat((_=X.x).reverse()),b=b.concat(y.reverse())}else w?(m.push(t.convert(t.actualMin),t.convert(t.actualMin)),b[0]>b[b.length-1]?b.push(b[b.length-1],b[0]):b.push(b[0],b[b.length-1])):(m[0]>m[m.length-1]?m.push(m[0],m[m.length-1]):m.push(m[m.length-1],m[0]),b.push(i.convert(i.actualMin),i.convert(i.actualMin)));e.fill=L,e.stroke="none",e.drawPolygon(m,b,null,B,this.chart._plotrectId),v?(m=m.slice(0,m.length-_.length),b=b.slice(0,b.length-y.length)):(m=m.slice(0,m.length-2),b=b.slice(0,b.length-2)),e.stroke=F,e.strokeWidth=k,e.fill="none",e.drawLines(m,b,null,R,this.chart._plotrectId),this.hitTester.add(new K(m,b),u)}this._drawSymbols(e,n,u),l&&h&&h.length&&l(h)}}}},t.prototype._isRange=function(e){var t=null==e.binding?null:e.binding.split(this.chart?this.chart._bindingSeparator:",");return null!=t&&2==t.length},t.prototype._modifyPoints=function(e,t){var i={x:e,y:t};if(this.isSpline){var n=this._convertToSpline(e,t);i.x=n.xs,i.y=n.ys}else if(this.isStep){var r=this._createSteps(e,t);i.x=r.x,i.y=r.y}return i},t.prototype.plotSeriesRanged=function(e,t,i,n,r,o,a,l){var c=[],h=this.chart.series.indexOf(n),u=n,d=n.getValues(0),p=n.getValues(1),f=u._getBindingValues(1);if(d){var g=d.length;if(g){p||(p=this.dataInfo.getXVals());var m=!0;p?p.length<g&&(g=p.length):(m=!1,p=new Array(g));for(var b=new Array,_=new Array,y=new Array,v=this.rotated,x=!1,w=u.interpolateNulls,S=this.chart._plotRect,C=0;C<g;C++){var O=m?p[C]:C,j=d[C],T=f[C];if(be.isValid(O,j,T)){var N=v?i.convert(O):t.convert(O);if(v){var A=t.convert(j),M=t.convert(T);isNaN(N)||isNaN(A)?(x=!0,!0!==w&&(b.push(void 0),_.push(void 0),y.push(void 0))):(b.push(A),_.push(N),y.push(M),ge._contains(S,new s.Point(A,N))&&((E=new q(new s.Point(A,N),this._DEFAULT_SYM_SIZE)).tag=new W(h,C,j,O),this.hitTester.add(E,h)),ge._contains(S,new s.Point(M,N))&&((E=new q(new s.Point(M,N),this._DEFAULT_SYM_SIZE)).tag=new W(h,C,T,O),this.hitTester.add(E,h)))}else{var E;A=i.convert(j),M=i.convert(T),isNaN(N)||isNaN(A)?(x=!0,!0!==w&&(b.push(void 0),_.push(void 0),y.push(void 0))):(b.push(N),_.push(A),y.push(M),ge._contains(S,new s.Point(N,A))&&((E=new q(new s.Point(N,A),this._DEFAULT_SYM_SIZE)).tag=new W(h,C,O,j),this.hitTester.add(E,h)),ge._contains(S,new s.Point(N,M))&&((E=new q(new s.Point(N,M),this._DEFAULT_SYM_SIZE)).tag=new W(h,C,O,T),this.hitTester.add(E,h)))}}else x=!0,!0!==w&&(b.push(void 0),_.push(void 0),y.push(void 0))}l&&b.forEach((function(e,t){null!=e&&c.push(new s.Point(e,_[t]))}));var P=this._DEFAULT_WIDTH,I=r._getColorLight(h),D=r._getColor(h),k=ue.cloneStyle(n.style,["fill"]),L=ue.cloneStyle(n.style,["stroke"]);if(!0!==w&&x){var F=[],R=[],B=[];for(C=0;C<g;C++)if(void 0===b[C]){if(F.length>1){var z=v?B.slice(0).reverse():F.slice(0).reverse(),V=v?R.slice(0).reverse():B.slice(0).reverse();this._drawRangedArea(e,F,R,z,V,I,D,P,L,k),this.hitTester.add(new K(F,R),h),this.hitTester.add(new K(z,V),h)}F=[],R=[],B=[]}else F.push(b[C]),R.push(_[C]),B.push(y[C]);F.length>1&&(z=v?B.slice(0).reverse():F.slice(0).reverse(),V=v?R.slice(0).reverse():B.slice(0).reverse(),this._drawRangedArea(e,F,R,z,V,I,D,P,L,k),this.hitTester.add(new K(F,R),h),this.hitTester.add(new K(z,V),h))}else{var H=v?y.slice(0).reverse():b.slice(0).reverse(),X=v?_.slice(0).reverse():y.slice(0).reverse();this._drawRangedArea(e,b,_,H,X,I,D,P,L,k),this.hitTester.add(new K(b,_),h),this.hitTester.add(new K(H,X),h)}this._drawSymbols(e,n,h),l&&c&&c.length&&l(c)}}},t.prototype._drawRangedArea=function(e,t,i,n,r,o,s,a,l,c){if(this.isSpline){var h=this._convertToSpline(t,i),u=this._convertToSpline(n,r);t=h.xs,i=h.ys,n=u.xs,r=u.ys}t=t.concat(n),i=i.concat(r),e.fill=o,e.stroke="none",e.drawPolygon(t,i,null,l),t=t.slice(0,t.length-n.length),i=i.slice(0,i.length-r.length),e.stroke=s,e.strokeWidth=a,e.fill="none",e.drawLines(t,i,null,c),e.drawLines(n,r,null,c)},t.prototype._convertToSpline=function(e,t){if(e&&t){var i=new h(e,t).calculate();return{xs:i.xs,ys:i.ys}}return{xs:e,ys:t}},t.prototype._drawSymbols=function(e,t,i){var n=this.getItemFormatter(t);if(null!=n){for(var r=this.hitTester._map[i],o=0;o<r.length;o++){var a=Object(s.tryCast)(r[o],q);if(a){var l=a.tag;e.startGroup();var c=new ee(this.chart,a.center,Y.SeriesSymbol);c._setDataPoint(l),n(e,c,(function(){})),e.endGroup()}}e.cssPriority=!0}},t}(ue),ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.origin=0,t.width=.7,t.isVolume=!1,t._volHelper=null,t.stackPosMap={},t.stackNegMap={},t.stacking=ie.None,t}return l(t,e),t.prototype.clear=function(){e.prototype.clear.call(this),this.stackNegMap[this.chart.axisY._uniqueId]={},this.stackPosMap[this.chart.axisY._uniqueId]={},this._volHelper=null},t.prototype.load=function(){if(e.prototype.load.call(this),this.isVolume){var t,i,n,r,o,a,l,h,u=null,d=null;for(a=0;a<this.chart.series.length;a++){if(o=(t=this.chart.series[a]).getDataType(1)||t.chart._xDataType,i=t._getAxisX(),(n=null===(n=t._getChartType())||Object(s.isUndefined)(n)?this.chart._getChartType():n)===te.Column){var p=t.binding.split(this.chart?this.chart._bindingSeparator:",").length-1;r=t._getBindingValues(p)}else r=n===te.Candlestick?t._getBindingValues(4):null;var f;if(o===s.DataType.Date)for(l=[],h=[],a=0;a<t._getLength();a++)f=t._getItem(a)[t.bindingX].valueOf(),l.push(f),h.push({value:f,text:s.Globalize.format(new Date(f),i.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),d=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new c(r,l,u,d,o),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),h&&h.length>0&&(this._itemsSource=i.itemsSource=h);break}}}},t.prototype.unload=function(){e.prototype.unload.call(this);for(var t,i=0;i<this.chart.series.length;i++)(t=this.chart.series[i]._getAxisX())&&(t._customConvert=null,t._customConvertBack=null,t.itemsSource&&t.itemsSource==this._itemsSource&&(this._itemsSource=t.itemsSource=null))},t.prototype.adjustLimits=function(e,t){this.dataInfo=e;var i=e.getMinX(),n=e.getMaxX(),r=e.getMinY(),o=e.getMaxY(),a=e.getDeltaX();a<=0&&(a=1);var l=!1;!this.isVolume||this.chart._getChartType()!==te.Column&&this.chart._getChartType()!==te.Candlestick?this.unload():this.load();for(var c=0;c<this.chart.series.length;c++){var h=this.chart.series[c],u=h._getChartType();(u=null===u||Object(s.isUndefined)(u)?this.chart._getChartType():u)!==te.Column&&u!==te.Bar||this._isRange(h)&&h._getBindingValues(1).forEach((function(e){e<r?r=e:e>o&&(o=e)})),l||"BoxWhisker"==h.constructor.name||(l=!0)}return this.rotated?(!this.chart.axisY._getLogBase()&&e.getDataTypeY()!==s.DataType.Date&&l&&(this.origin>o?o=this.origin:this.origin<r&&(r=this.origin)),new s.Rect(r,i-.5*a,o-r,n-i+a)):(!this.chart.axisY._getLogBase()&&e.getDataTypeY()!==s.DataType.Date&&l&&(this.origin>o?o=this.origin:this.origin<r&&(r=this.origin)),new s.Rect(i-.5*a,r,n-i+a,o-r))},t.prototype._isRange=function(e){var t=(null==e.binding?"":e.binding.split(this.chart?this.chart._bindingSeparator:",")).length-1;return this.isVolume?2===t:1===t},t.prototype.plotSeries=function(e,t,i,n,r,o,a,l){var c=[],h=this.chart.series.indexOf(n),u=Object(s.asType)(n,oe),d=this.chart._options,p=this.width,f=0;if(o=o||0,a=a||1,d&&d.groupWidth){var g=d.groupWidth;if(Object(s.isNumber)(g)){var m=Object(s.asNumber)(g);isFinite(m)&&m>0&&(f=m,p=1)}else if(Object(s.isString)(g)){var b=Object(s.asString)(g);b&&b.indexOf("%")>=0?(b=b.replace("%",""),m=parseFloat(b),isFinite(m)&&(m<0?m=0:m>100&&(m=100),f=0,p=m/100)):(m=parseFloat(b),isFinite(m)&&m>0&&(f=m,p=1))}}var _=p/a,y=u._getAxisY()._uniqueId,v=this.stackNegMap[y],x=this.stackPosMap[y],w=n.getValues(0),S=n.getValues(1),C=this._isRange(u),O=u._bindValues(null==u._cv?null==this.chart.collectionView?null:this.chart.collectionView.items:u._cv.items,u._getBinding(1)).values;if(w){if(S||(S=this.dataInfo.getXVals()),S){var j=this.dataInfo.getDeltaX();j>0&&(p*=j,_*=j)}var T=u._getSymbolFill(h),N=u._getAltSymbolFill(h)||T,A=u._getSymbolStroke(h),M=u._getAltSymbolStroke(h)||A,E=w.length;null!=S&&(E=Math.min(E,S.length));var P,I=this.origin,D=0,k=this.stacking!=ie.None,L=this.stacking==ie.Stacked100pc;void 0!==u._getChartType()&&(k=L=!1);var F=this.getItemFormatter(n);if(this.rotated){I<t.actualMin?I=t.actualMin:I>t.actualMax&&(I=t.actualMax),u._isCustomAxisY()&&(k=L=!1),X=t.convert(I);var R=i.actualMin,B=i.actualMax;for(q=0;q<E;q++)if(J=S?S[q]:q,Q=w[q],$=X,this._getSymbolOrigin&&($=i.convert(this._getSymbolOrigin(I,q))),C&&O&&O.length&&be.isValid(Z=O[q])&&($=t.convert(Z)),this._getSymbolStyles&&(T=(K=this._getSymbolStyles(q))&&K.fill?K.fill:T,N=K&&K.fill?K.fill:N,A=K&&K.stroke?K.fill:A,M=K&&K.stroke?K.fill:M),P=Q>0?A:M,e.fill=Q>0?T:N,e.stroke=P,be.isValid(J,Q))if(k){if(te=J+.5*p,(ee=J-.5*p)<R&&te<R||ee>B&&te>B)continue;if(ee=i.convert(Math.max(ee,R)),te=i.convert(Math.min(te,B)),L&&(Q/=this.dataInfo.getStackedAbsSum(J)),re=0,Q>=0?(re=isNaN(x[J])?0:x[J],ce=t.convert(re),ne=t.convert(re+Q),x[J]=re+Q):(re=isNaN(v[J])?0:v[J],ce=t.convert(re),ne=t.convert(re+Q),v[J]=re+Q),l&&c.push(new s.Point(ne,i.convert(J))),!be.isValid(ce,ne))continue;if(se=new s.Rect(Math.min(ce,ne),Math.min(ee,te),Math.abs(ne-ce),Math.abs(te-ee)),f>0){(de=1-f/se.height)<0&&(de=0);var z=se.top+.5*se.height;se.top+=(z-se.top)*de,se.height=Math.min(f,se.height)}le=new U(se),this.drawSymbol(e,se,n,q,new s.Point(ne,se.top+.5*se.height),F),n._setPointIndex(q,D),D++,le.tag=new W(h,q,re+Q,J),this.hitTester.add(le,h)}else{if(te=J-.5*p+(o+1)*_,(ee=J-.5*p+o*_)<R&&te<R||ee>B&&te>B)continue;ee=i.convert(Math.max(ee,R)),te=i.convert(Math.min(te,B));var V=t.convert(Q);if(!be.isValid(V,ee,te))continue;var H=new s.Rect(Math.min(V,$),Math.min(ee,te),Math.abs($-V),Math.abs(te-ee));l&&c.push(new s.Point(V,(ee+te)/2)),f>0&&((de=1-(ue=f/a)/H.height)<0&&(de=0),z=i.convert(J),H.top+=(z-H.top)*de,H.height=Math.min(ue,H.height)),le=new U(H),this.drawSymbol(e,H,n,q,new s.Point(V,H.top+.5*H.height),F),n._setPointIndex(q,D),D++,le.tag=new W(h,q,Q,J),this.hitTester.add(le,h)}else l&&c.push(null)}else{I<i.actualMin?I=i.actualMin:I>i.actualMax&&(I=i.actualMax);var X=i.convert(I),G=t.actualMin,Y=t.actualMax;u._isCustomAxisY()&&(k=L=!1);for(var q=0;q<E;q++){var K,$=X,J=S?S[q]:q,Q=w[q];if(this._getSymbolOrigin&&($=i.convert(this._getSymbolOrigin(I,q,E))),C&&O&&O.length){var Z=O[q];be.isValid(Z)&&($=i.convert(Z))}if(this._getSymbolStyles&&(T=(K=this._getSymbolStyles(q,E))&&K.fill?K.fill:T,N=K&&K.fill?K.fill:N,A=K&&K.stroke?K.stroke:A,M=K&&K.stroke?K.stroke:M),P=Q>0?A:M,e.fill=Q>0?T:N,e.stroke=P,e.strokeWidth=null,be.isValid(J,Q))if(k){var ee,te,ne=J+.5*p;if((ce=J-.5*p)<G&&ne<G||ce>Y&&ne>Y)continue;if(ce=t.convert(ce),ne=t.convert(ne),!be.isValid(ce,ne))continue;L&&(Q/=this.dataInfo.getStackedAbsSum(J));var re=0;if(Q>=0?(re=isNaN(x[J])?0:x[J],ee=i.convert(Math.max(re,i.actualMin)),te=i.convert(Math.max(re+Q,i.actualMin)),x[J]=re+Q):(re=isNaN(v[J])?0:v[J],ee=i.convert(re),te=i.convert(re+Q),v[J]=re+Q),l&&c.push(new s.Point(t.convert(J),te)),!be.isValid(ee,te))continue;var se=new s.Rect(Math.min(ce,ne),Math.min(ee,te),Math.abs(ne-ce),Math.abs(te-ee));if(f>0){(de=1-f/se.width)<0&&(de=0);var ae=se.left+.5*se.width;se.left+=(ae-se.left)*de,se.width=Math.min(f,se.width)}var le=new U(se);this.drawSymbol(e,se,n,q,new s.Point(se.left+.5*se.width,te),F),n._setPointIndex(q,D),D++,le.tag=new W(h,q,J,re+Q),this.hitTester.add(le,h)}else{var ce;if(ne=J-.5*p+(o+1)*_,(ce=J-.5*p+o*_)<G&&ne<G||ce>Y&&ne>Y)continue;ce=t.convert(ce),ne=t.convert(ne);var he=i.convert(Q);if(!be.isValid(he,ce,ne))continue;var ue,de,pe=new s.Rect(Math.min(ce,ne),Math.min(he,$),Math.abs(ne-ce),Math.abs($-he));l&&c.push(new s.Point((ce+ne)/2,he)),f>0&&((de=1-(ue=f/a)/pe.width)<0&&(de=0),ae=t.convert(J),pe.left+=(ae-pe.left)*de,pe.width=Math.min(ue,pe.width)),le=new U(pe),this.drawSymbol(e,pe,n,q,new s.Point(pe.left+.5*pe.width,he),F),n._setPointIndex(q,D),D++,le.tag=new W(h,q,J,Q),this.hitTester.add(le,h)}else l&&c.push(null)}}l&&c&&c.length&&l(c)}},t.prototype.drawSymbol=function(e,t,i,n,r,o){var s=this;if(o){e.startGroup();var a=new ee(this.chart,r,Y.SeriesSymbol);a._setData(i,n),o(e,a,(function(){s.drawDefaultSymbol(e,t,i)})),e.cssPriority=!0,e.endGroup()}else this.drawDefaultSymbol(e,t,i)},t.prototype.drawDefaultSymbol=function(e,t,i){e.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},t}(ue),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stacking=ie.None,t}return l(t,e),t.prototype.adjustLimits=function(e,t){this.dataInfo=e;var i=e.getMinX(),n=e.getMinY(),r=e.getMaxX(),o=e.getMaxY();return new s.Rect(i,n,r-i,o-n)},t.prototype.plotSeries=function(e,t,i,n,r,o,a,l){var c=this.chart.series.indexOf(n);if(!(c>0)){var h,u,d,p,f,g=Object(s.asType)(n,oe),m=this.chart._options,b=n.getValues(0),_=n.getValues(1),y=this.chart._plotRect,v=m&&m.funnel&&null!=m.funnel.neckWidth?m.funnel.neckWidth:.2,x=m&&m.funnel&&null!=m.funnel.neckHeight?m.funnel.neckHeight:0,w=v*y.width,S=0,C=0,O=0,j=0,T=y.left,N=y.top,A=y.width,M=y.height;if(b){this.rotated&&(N+=y.height),w=w||1,_||(_=this.dataInfo.getXVals());var E=b.length;for(null!=_&&(E=Math.min(E,_.length)),S=0;S<E;S++)be.isValid(b[S])&&(C+=b[S]);var P,I,D=0;if(m&&m.funnel&&"rectangle"===m.funnel.type)for(x=M/E,v=A,S=0;S<E;S++){var k=_?_[S]:S,L=b[S],F=g._getSymbolFill(S),R=g._getAltSymbolFill(S)||F,B=g._getSymbolStroke(S),z=g._getAltSymbolStroke(S)||B;if(this._getSymbolStyles&&(F=(X=this._getSymbolStyles(S,E))&&X.fill?X.fill:F,R=X&&X.fill?X.fill:R,B=X&&X.stroke?X.stroke:B,z=X&&X.stroke?X.stroke:z),P=L>0?B:z,e.fill=L>0?F:R,e.stroke=P,be.isValid(k)&&be.isValid(L)){I||(I=A/L);var V=I*L;this.rotated&&(N-=x),e.drawRect(T+=(v-V)/2,N,V,x),H=new we(new s.Point(T,N),V,x,V,x),this.rotated||(N+=x),v=V,H.tag=new W(c,S,k,L),this.hitTester.add(H,c),n._setPointIndex(S,D),D++}}else for(O=y.left+y.width*(1-v)/2,j=y.top+y.height*(this.rotated?x:1-x),u=(1-v)*y.width/2/(y.height*(1-x)),!isNaN(u)&&isFinite(u)||(A=w,T=O,N=j),h=y.width*v*y.height+y.width*(1-v)/2*y.height*(1-x),S=0;S<E;S++){k=_?_[S]:S,L=b[S];var H,X,G=[],Y=[];if(F=g._getSymbolFill(S),R=g._getAltSymbolFill(S)||F,B=g._getSymbolStroke(S),z=g._getAltSymbolStroke(S)||B,this._getSymbolStyles&&(F=(X=this._getSymbolStyles(S,E))&&X.fill?X.fill:F,R=X&&X.fill?X.fill:R,B=X&&X.stroke?X.stroke:B,z=X&&X.stroke?X.stroke:z),P=L>0?B:z,e.fill=L>0?F:R,e.stroke=P,be.isValid(k)&&be.isValid(L)){var U=h*L/C;A>w?(p=this._getTrapezoidOffsetY(A,U,u),this.rotated?N-p>j?(G=[T,T+(d=u*p),T+A-d,T+A],Y=[N,N-p,N-p,N],H=new we(new s.Point(T,N-p),A,p,A-2*d,0,!0),A-=2*d,T+=d,N-=p):(d=u*(p=N-j),f=(U-=this._getTrapezoidArea(A,u,p))/w,G.push(T,T+d,T+d,T+d+w,T+d+w,T+A),Y.push(N,N-p,N-p-f,N-p-f,N-p,N),H=new we(new s.Point(T,N-p-f),A,p+f,w,f,!0),A=w,T+=d,N=N-p-f):N+p<j?(G=[T,T+(d=u*p),T+A-d,T+A],Y=[N,N+p,N+p,N],H=new we(new s.Point(T,N),A,p,A-2*d,0),A-=2*d,T+=d,N+=p):(d=u*(p=j-N),f=(U-=this._getTrapezoidArea(A,u,p))/w,G.push(T,T+d,T+d,T+d+w,T+d+w,T+A),Y.push(N,N+p,N+p+f,N+p+f,N+p,N),H=new we(new s.Point(T,N),A,p+f,w,f),A=w,T+=d,N=N+p+f),e.drawPolygon(G,Y)):(f=U/w,this.rotated&&(N-=f),e.drawRect(T,N,A,f),H=new we(new s.Point(T,N),w,f,w,f),this.rotated||(N+=f)),H.tag=new W(c,S,k,L),this.hitTester.add(H,c),n._setPointIndex(S,D),D++}}}}},t.prototype._getTrapezoidArea=function(e,t,i){var n=i*t;return n*i+(e-2*n)*i},t.prototype._getTrapezoidOffsetY=function(e,t,i){var n=Math.pow(e/2/i,2)-t/i;return e/2/i-Math.sqrt(n>=0?n:0)},t.prototype.drawDefaultSymbol=function(e,t,i){e.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},t.prototype._getPointAndPosition=function(e,t,i,n){var r=i;e.x=r.center.x,e.y=r.center.y,t=null==t?j.Center:t},t}(ue),we=function(){function e(e,t,i,n,r,o){void 0===o&&(o=!1),this._startPoint=e,this._width=t,this._height=i,this._neckWidth=n,this._neckHeight=r,this._center=new s.Point(this._startPoint.x+t/2,this._startPoint.y+i/2),this._offsetX=(t-n)/2,this._offsetY=i-r,this._rotated=o}return e.prototype.contains=function(e){var t=this._startPoint,i=this._offsetX,n=this._offsetY;if(this._rotated){if(e.x>=t.x&&e.x<=t.x+this._width&&e.y>=t.y&&e.y<=t.y+this._height){if(e.x>=t.x+i&&e.x<=t.x+this._width-i)return!0;if(e.y<t.y+this._neckHeight)return!1;if(e.x<this._center.x)return(t.y+this._height-e.y)/(e.x-t.x)<n/i;if(e.x>this._center.x)return(t.y+this._height-e.y)/(t.x+this._width-e.x)<n/i}}else if(e.x>=t.x&&e.x<=t.x+this._width&&e.y>=t.y&&e.y<=t.y+this._height){if(e.x>=t.x+i&&e.x<=t.x+this._width-i)return!0;if(e.y>t.y+n)return!1;if(e.x<this._center.x)return(e.y-t.y)/(e.x-t.x)<n/i;if(e.x>this._center.x)return(e.y-t.y)/(t.x+this._width-e.x)<n/i}return!1},e.prototype.distance=function(e){if(this.contains(e))return 0;var t=this._startPoint,i=this._width,n=this._height,r=this._offsetX,o=this._offsetY;if(this._rotated){if(e.y>t.y+n)return e.x<t.x?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y+n-e.y,2)):e.x>t.x+i?Math.sqrt(Math.pow(e.x-t.x-i,2)+Math.pow(t.y+n-e.y,2)):e.y-t.y-n;if(e.y<t.y)return e.x<t.x+r?Math.sqrt(Math.pow(t.x+r-e.x,2)+Math.pow(e.y-t.y-n,2)):e.x>t.x+i-r?Math.sqrt(Math.pow(e.x-t.x-i+r,2)+Math.pow(e.y-t.y-n,2)):t.y-e.y;if(!(e.y<t.y+n-o))return e.x<t.x+r?Math.min(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(e.y-t.y-n,2)),Math.sqrt(Math.pow(e.x-r/2-t.x,2)+Math.pow(e.y-n+o/2-t.y,2)),Math.sqrt(Math.pow(e.x-r-t.x,2)+Math.pow(e.y-n+o-t.y,2))):Math.min(Math.sqrt(Math.pow(e.x-i-t.x,2)+Math.pow(e.y-n-t.y,2)),Math.sqrt(Math.pow(e.x-i+r/2-t.x,2)+Math.pow(e.y-n+o/2-t.y,2)),Math.sqrt(Math.pow(e.x-i+r-t.x,2)+Math.pow(e.y-n+o-t.y,2)));if(e.x<t.x+r)return t.x+r-e.x;if(e.x>t.x+i-r)return e.x-t.x-i+r}else{if(e.y<t.y)return e.x<t.x?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):e.x>t.x+i?Math.sqrt(Math.pow(e.x-t.x-i,2)+Math.pow(t.y-e.y,2)):t.y-e.y;if(e.y>t.y+n)return e.x<t.x+r?Math.sqrt(Math.pow(t.x+r-e.x,2)+Math.pow(e.y-t.y-n,2)):e.x>t.x+i-r?Math.sqrt(Math.pow(e.x-t.x-i+r,2)+Math.pow(e.y-t.y-n,2)):e.y-t.y-n;if(!(e.y>t.y+o))return e.x<t.x+r?Math.min(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(e.y-t.y,2)),Math.sqrt(Math.pow(e.x-r/2-t.x,2)+Math.pow(e.y-o/2-t.y,2)),Math.sqrt(Math.pow(e.x-r-t.x,2)+Math.pow(e.y-o-t.y,2))):Math.min(Math.sqrt(Math.pow(e.x-i-t.x,2)+Math.pow(e.y-t.y,2)),Math.sqrt(Math.pow(e.x-i+r/2-t.x,2)+Math.pow(e.y-o/2-t.y,2)),Math.sqrt(Math.pow(e.x-i+r-t.x,2)+Math.pow(e.y-o-t.y,2)));if(e.x<t.x+r)return t.x+r-e.x;if(e.x>t.x+i-r)return e.x-t.x-i+r}},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),e}(),Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCandle=!0,t.isArms=!1,t.isEqui=!1,t.isVolume=!1,t._volHelper=null,t._symWidth=.7,t}return l(t,e),t.prototype.clear=function(){e.prototype.clear.call(this),this._volHelper=null},t.prototype.load=function(){if(e.prototype.load.call(this),this.isVolume){var t,i,n,r,o,a,l,h,u=null,d=null;for(a=0;a<this.chart.series.length;a++){var p;if(o=(t=this.chart.series[a]).getDataType(1)||t.chart._xDataType,i=t._getAxisX(),r=(n=null===(n=t._getChartType())||Object(s.isUndefined)(n)?this.chart._getChartType():n)===te.Column?t._getBindingValues(1):n===te.Candlestick?t._getBindingValues(4):null,o===s.DataType.Date)for(l=[],h=[],a=0;a<t._getLength();a++)p=t._getItem(a)[t.bindingX].valueOf(),l.push(p),h.push({value:p,text:s.Globalize.format(new Date(p),i.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),d=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new c(r,l,u,d,o),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),h&&h.length>0&&(this._itemsSource=i.itemsSource=h);break}}}},t.prototype.unload=function(){e.prototype.unload.call(this);for(var t,i=0;i<this.chart.series.length;i++)(t=this.chart.series[i]._getAxisX())&&(t._customConvert=null,t._customConvertBack=null,t.itemsSource&&t.itemsSource==this._itemsSource&&(this._itemsSource=t.itemsSource=null))},t.prototype.parseSymbolWidth=function(e){if(this._isPixel=void 0,e)if(Object(s.isNumber)(e)){var t=Object(s.asNumber)(e);isFinite(t)&&t>0&&(this._symWidth=t,this._isPixel=!0)}else if(Object(s.isString)(e)){var i=Object(s.asString)(e);if(i&&i.indexOf("%")>=0){i=i.replace("%","");var n=parseFloat(i);isFinite(n)&&(n<0?n=0:n>100&&(n=100),this._symWidth=n/100,this._isPixel=!1)}else n=parseFloat(e),isFinite(n)&&n>0&&(this._symWidth=n,this._isPixel=!0)}},t.prototype.adjustLimits=function(e,t){this.dataInfo=e;var i=e.getMinX(),n=e.getMinY(),r=e.getMaxX(),o=e.getMaxY(),a=e.getDeltaX(),l=this.chart._xDataType;a<=0&&(a=1);var c=this.chart.series,h=c.length,u=0;this.parseSymbolWidth(this.symbolWidth),!this.isVolume||this.chart._getChartType()!==te.Column&&this.chart._getChartType()!==te.Candlestick?this.unload():this.load();for(var d=0;d<h;d++){var p=c[d];if(!p._isCustomAxisY()){var f=p._getBinding(1),g=p._getBinding(2),m=p._getBinding(3),b=p._getLength();if(b){var _=p._getSymbolSize();_>u&&(u=_);for(var y=0;y<b;y++){var v=p._getItem(y);v&&[f?v[f]:null,g?v[g]:null,m?v[m]:null].forEach((function(e){be.isValid(e)&&null!==e&&((isNaN(n)||e<n)&&(n=e),(isNaN(o)||e>o)&&(o=e))}))}}}}var x=r-i,w=this.chart._plotRect;if(w&&w.width&&!this.isVolume){isNaN(_)&&(_=p._getSymbolSize());var S=w.width/(w.width-(_+=2))*x;i-=.5*(S-x),x=S}return!(l===s.DataType.Date&&this.isVolume||l===s.DataType.Number)||this.chart._getChartType()!==te.Column&&this.chart._getChartType()!==te.Candlestick?this.chart._isRotated()?new s.Rect(n,i,o-n,x):new s.Rect(i,n,x,o-n):new s.Rect(i-.5*a,n,r-i+a,o-n)},t.prototype.plotSeries=function(e,t,i,n,r,o,a,l){var c=this,h=Object(s.asType)(n,oe),u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1),f=this._symWidth,g=this.chart._isRotated();if(d){if(p||(p=this.dataInfo.getXVals()),p){var m=this.dataInfo.getDeltaX();m>0&&!1===this._isPixel&&(f*=m)}var b=d.length,_=!0;p?b=Math.min(b,p.length):(_=!1,p=new Array(b));var y=this._DEFAULT_WIDTH,v=h._getSymbolFill(u),x=h._getAltSymbolFill(u)||"transparent",w=h._getSymbolStroke(u),S=h._getAltSymbolStroke(u)||w,C=void 0===this._isPixel?h._getSymbolSize():f;e.stroke=w,e.strokeWidth=y,e.fill=v;for(var O,j,T=h._getBinding(1),N=h._getBinding(2),A=h._getBinding(3),M=g?i.actualMin:t.actualMin,E=g?i.actualMax:t.actualMax,P=0,I=null,D=null,k=this.getItemFormatter(n),L=0;L<b;L++)if(I=h._getItem(L)){var F=_?p[L]:L;if(be.isValid(F)&&M<=F&&F<=E){var R=d[L],B=T?I[T]:null,z=N?I[N]:null,V=A?I[A]:null;if(e.startGroup(),this.isEqui&&null!==D?D[A]!==I[A]&&(O=D[A]<I[A]?x:v,j=D[A]<I[A]?S:w):(O=z<V?x:v,j=z<V?S:w),e.fill=O,e.stroke=j,e.strokeWidth=y,k){var H=new ee(this.chart,new s.Point(t.convert(F),i.convert(R)),Y.SeriesSymbol);H._setData(h,L),k(e,H,(function(){c._drawSymbol(e,t,i,u,L,O,C,F,R,B,z,V)})),e.cssPriority=!0}else this._drawSymbol(e,t,i,u,L,O,C,F,R,B,z,V);e.endGroup(),n._setPointIndex(L,P),P++}D=I}}},t.prototype._drawSymbol=function(e,t,i,n,r,o,a,l,c,h,u,d){var p,f=null,g=null,m=null,b=null,_=this.chart._isRotated(),y=_?new W(n,r,c,l):new W(n,r,l,c);if(_){var v=i;i=t,t=v}if(!1===this._isPixel&&(m=t.convert(l-.5*a))>(b=t.convert(l+.5*a))){var x=m;m=b,b=x}l=t.convert(l),!1!==this._isPixel&&(m=l-.5*a,b=l+.5*a),this.isCandle?(be.isValid(u)&&be.isValid(d)&&(u=i.convert(u),d=i.convert(d),g=(f=Math.min(u,d))+Math.abs(u-d),_?(e.drawRect(f,m,g-f||1,b-m||1),p=new U(new s.Rect(f,m,g-f||1,b-m||1))):(e.drawRect(m,f,b-m||1,g-f||1),p=new U(new s.Rect(m,f,b-m||1,g-f||1))),p.tag=y,this.hitTester.add(p,n)),be.isValid(c)&&(c=i.convert(c),null!==f&&(_?(e.drawLine(g,l,c,l),p.rect.width=p.rect.width+c):(e.drawLine(l,f,l,c),p.rect.top=c,p.rect.height=p.rect.height+c))),be.isValid(h)&&(h=i.convert(h),null!==g&&(_?(e.drawLine(f,l,h,l),p.rect.left=h,p.rect.width=p.rect.width+h):(e.drawLine(l,g,l,h),p.rect.height=p.rect.height+h)))):this.isEqui?be.isValid(c)&&be.isValid(h)&&(c=i.convert(c),h=i.convert(h),g=(f=Math.min(c,h))+Math.abs(c-h),e.drawRect(m,f,b-m||1,g-f||1),(p=new U(new s.Rect(m,f,b-m||1,g-f||1))).tag=y,this.hitTester.add(p,n)):this.isArms?(be.isValid(u)&&be.isValid(d)&&(u=i.convert(u),d=i.convert(d),g=(f=Math.min(u,d))+Math.abs(u-d),e.drawRect(m,f,b-m||1,g-f||1)),be.isValid(c)&&null!==f&&(c=i.convert(c),e.drawLine(l,f,l,c)),be.isValid(h)&&null!==g&&(h=i.convert(h),e.drawLine(l,g,l,h)),be.isValid(c)&&be.isValid(h)&&(e.fill="transparent",g=(f=Math.min(c,h))+Math.abs(c-h),e.drawRect(m,f,b-m||1,g-f||1),(p=new U(new s.Rect(m,f,b-m||1,g-f||1))).tag=y,this.hitTester.add(p,n))):(be.isValid(c)&&be.isValid(h)&&(c=i.convert(c),h=i.convert(h),g=(f=Math.min(c,h))+Math.abs(c-h),_?(e.drawLine(h,l,c,l),p=new U(new s.Rect(f,m,g-f||1,b-m||1))):(e.drawLine(l,h,l,c),p=new U(new s.Rect(m,f,b-m||1,g-f||1))),p.tag=y,this.hitTester.add(p,n)),be.isValid(u)&&(u=i.convert(u),_?e.drawLine(u,m,u,l):e.drawLine(m,u,l,u)),be.isValid(d)&&(d=i.convert(d),_?e.drawLine(d,l,d,b):e.drawLine(l,d,b,d)))},t}(ue),Ce=new(function(){function e(){this._moveMarker=function(e){var t=this._markers,i=e.currentTarget.getAttribute("data-markerIndex");null!=i&&t[i].forEach((function(t){t._moveMarker(e)}))},this._markers=[],this._bindMoveMarker=this._moveMarker.bind(this)}return e.prototype.attach=function(e){var t,i,n=e.chart.hostElement,r=this._markers,o=n.getAttribute("data-markerIndex");null!=o?(i=r[o])&&Object(s.isArray)(i)?i.push(e):(r[o]=[e],this._bindMoveEvent(n)):(t=r.length,r.push(i=[e]),n.setAttribute("data-markerIndex",t),this._bindMoveEvent(n))},e.prototype.detach=function(e){var t,i,n=e.chart.hostElement,r=this._markers,o=n.getAttribute("data-markerIndex");null!=o&&((t=(i=r[o]).indexOf(e))>-1&&i.splice(t,1),0===i.length&&((t=r.indexOf(i))>-1&&(r[t]=void 0),this._unbindMoveEvent(n)))},e.prototype._unbindMoveEvent=function(e){var t=this._bindMoveMarker;e.removeEventListener("mousemove",t),"ontouchstart"in window&&e.removeEventListener("touchmove",t)},e.prototype._bindMoveEvent=function(e){var t=this._bindMoveMarker;e.addEventListener("mousemove",t),"ontouchstart"in window&&e.addEventListener("touchmove",t)},e}());!function(e){e[e.None=0]="None",e[e.Vertical=1]="Vertical",e[e.Horizontal=2]="Horizontal",e[e.Both=3]="Both"}(de||(de={})),function(e){e[e.None=0]="None",e[e.Move=1]="Move",e[e.Drag=2]="Drag"}(pe||(pe={})),function(e){e[e.Auto=2]="Auto",e[e.Right=0]="Right",e[e.Left=1]="Left",e[e.Bottom=4]="Bottom",e[e.Top=6]="Top"}(fe||(fe={}));var Oe=function(){function e(e,t){this._wrapperMousedown=null,this._wrapperMouseup=null,this.positionChanged=new s.Event,this._chart=e,e._markers.push(this),e.rendered.addHandler(this._initialize,this),this._resetDefaultValue(),Object(s.copy)(this,t),this._initialize()}return Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){e!==this._isVisible&&(this._isVisible=Object(s.asBoolean)(e),this._marker&&this._toggleVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(e){e!==this._seriesIndex&&(this._seriesIndex=Object(s.asNumber)(e,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(e){if(e!==this._horizontalPosition){if(this._horizontalPosition=Object(s.asNumber)(e,!0),this._horizontalPosition<0||this._horizontalPosition>1)throw"horizontalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._chart.axisX.convertBack(this._targetPoint.x-this._plotRect.left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._chart.axisY.convertBack(this._targetPoint.y-this._plotRect.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){e!==this._content&&(this._content=Object(s.asFunction)(e),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(e){if(e!==this._verticalPosition){if(this._verticalPosition=Object(s.asNumber)(e,!0),this._verticalPosition<0||this._verticalPosition>1)throw"verticalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},set:function(e){e!==this._alignment&&(this._alignment=e,this._marker&&this._updatePositionByAlignment())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return this._lines},set:function(e){(e=Object(s.asEnum)(e,de))!=this._lines&&(this._lines=e,this._marker&&this._resetLinesVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interaction",{get:function(){return this._interaction},set:function(e){(e=Object(s.asEnum)(e,pe))!=this._interaction&&(this._marker&&this._detach(),this._interaction=e,this._marker&&this._attach(),this._toggleElesDraggableClass(this._interaction==pe.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(e){e!=this._dragThreshold&&(this._dragThreshold=Object(s.asNumber)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragContent",{get:function(){return this._dragContent},set:function(t){t!==this._dragContent&&(this._dragContent=Object(s.asBoolean)(t)),Object(s.toggleClass)(this._dragEle,e._CSS_LINE_DRAGGABLE,this._interaction===pe.Drag&&this._dragContent&&this._lines!==de.None)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragLines",{get:function(){return this._dragLines},set:function(e){e!=this._dragLines&&(this._dragLines=Object(s.asBoolean)(e))},enumerable:!0,configurable:!0}),e.prototype.onPositionChanged=function(e){this.positionChanged.raise(this,e)},e.prototype.remove=function(){this._marker&&(this._chart.rendered.removeHandler(this._initialize,this),this._detach(),this._removeMarker(),this._wrapperMoveMarker=null,this._wrapperMousedown=null,this._wrapperMouseup=null)},e.prototype._attach=function(){var t=this._chart.hostElement;this._interaction!==pe.None?Object(s.addClass)(t,e._CSS_TOUCH_DISABLED):Object(s.removeClass)(t,e._CSS_TOUCH_DISABLED),Ce.attach(this),this._attachDrag()},e.prototype._attachDrag=function(){this._interaction===pe.Drag&&(this._wrapperMousedown||(this._wrapperMousedown=this._onMousedown.bind(this)),this._wrapperMouseup||(this._wrapperMouseup=this._onMouseup.bind(this)),this._toggleDragEventAttach(!0))},e.prototype._detach=function(){Object(s.removeClass)(this._chart.hostElement,e._CSS_TOUCH_DISABLED),Ce.detach(this),this._detachDrag()},e.prototype._detachDrag=function(){this._interaction===pe.Drag&&this._toggleDragEventAttach(!1)},e.prototype._toggleDragEventAttach=function(e){var t=this._chart.hostElement,i=e?"addEventListener":"removeEventListener";t[i]("mousedown",this._wrapperMousedown),document[i]("mouseup",this._wrapperMouseup),"ontouchstart"in window&&t[i]("touchstart",this._wrapperMousedown),"ontouchend"in window&&document[i]("touchend",this._wrapperMouseup)},e.prototype._onMousedown=function(t){var i,n,r,o,a,l=this._getEventPoint(t);this._interaction===pe.Drag&&(o=!(0===(i=Object(s.getElementRect)(this._hLine)).width||0===i.height),a=!(0===(n=Object(s.getElementRect)(this._vLine)).width||0===n.height),r=Object(s.getElementRect)(this._markerContent),this._dragContent&&this._pointInRect(l,r)?(this._capturedEle=this._markerContent,this._contentDragStartPoint=new s.Point(l.x,l.y),this._mouseDownCrossPoint=new s.Point(this._targetPoint.x,this._targetPoint.y)):o&&(Math.abs(i.top-l.y)<=this._dragThreshold||Math.abs(l.y-i.top-i.height)<=this._dragThreshold||l.y>=i.top&&l.y<=i.top+i.height)?(this._capturedEle=this._hLine,this._contentDragStartPoint=void 0,Object(s.addClass)(this._chart.hostElement,e._CSS_LINE_DRAGGABLE)):a&&(Math.abs(n.left-l.x)<=this._dragThreshold||Math.abs(l.x-n.left-n.width)<=this._dragThreshold||l.x>=n.left&&l.x<=n.left+n.width)&&(this._capturedEle=this._vLine,this._contentDragStartPoint=void 0,Object(s.addClass)(this._chart.hostElement,e._CSS_LINE_DRAGGABLE)),t.preventDefault())},e.prototype._onMouseup=function(t){var i=this._alignment===fe.Auto&&this._capturedEle===this._markerContent&&this._lines!==de.None;this._capturedEle=void 0,this._contentDragStartPoint=void 0,this._mouseDownCrossPoint=void 0,i&&(this._updatePositionByAlignment(),this._updatePositionByAlignment()),Object(s.removeClass)(this._chart.hostElement,e._CSS_LINE_DRAGGABLE)},e.prototype._moveMarker=function(e){var t,i,n,r,o,a,l=this._chart,c=this._getEventPoint(e),h=this._plotRect,u=this._interaction===pe.Drag,d=this._lines===de.Horizontal,p=this._lines===de.Vertical,f=this._seriesIndex,g=Object(s.getElementRect)(l.hostElement);if(h&&this._isVisible&&this._interaction!==pe.None&&(this._interaction!==pe.Drag||this._capturedEle&&this._lines!==de.None)){if(u&&(this._contentDragStartPoint?(c.x=d?this._targetPoint.x:this._mouseDownCrossPoint.x+c.x-this._contentDragStartPoint.x,c.y=p?this._targetPoint.y:this._mouseDownCrossPoint.y+c.y-this._contentDragStartPoint.y):d||!this._dragLines&&this._capturedEle===this._hLine?c.x=this._targetPoint.x:(p||!this._dragLines&&this._capturedEle===this._vLine)&&(c.y=this._targetPoint.y)),u&&this._lines===de.Horizontal||!this._dragLines&&this._capturedEle===this._hLine){if(c.y<=h.top||c.y>=h.top+h.height)return}else if(u&&this._lines===de.Vertical||!this._dragLines&&this._capturedEle===this._vLine){if(c.x<=h.left||c.x>=h.left+h.width)return}else if(c.x<=h.left||c.y<=h.top||c.x>=h.left+h.width||c.y>=h.top+h.height)return;if(null!=f&&f>=0&&f<l.series.length){if(null==(i=(t=l.series[f]).hitTest(new s.Point(c.x,NaN)))||null==i.x||null==i.y)return;n=t.axisX||l.axisX,r=t._getAxisY(),o=Object(s.isDate)(i.x)?ge._toOADate(i.x):i.x,o=Object(s.isString)(o)?i.pointIndex:o,a=Object(s.isDate)(i.y)?ge._toOADate(i.y):i.y;var m=this._getElementPaddingValuee(l.hostElement,"padding-left"),b=this._getElementPaddingValuee(l.hostElement,"padding-top");c.x=n.convert(o)+m+g.left,c.y=r.convert(a)+b+g.top}this._updateMarkerPosition(c),e.preventDefault()}},e.prototype._getElementPaddingValuee=function(e,t){return+window.getComputedStyle(e,null).getPropertyValue(t).replace("px","")},e.prototype._show=function(e){(e||this._marker).style.display="block"},e.prototype._hide=function(e){(e||this._marker).style.display="none"},e.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},e.prototype._resetDefaultValue=function(){this._isVisible=!0,this._alignment=fe.Auto,this._lines=de.None,this._interaction=pe.None,this._horizontalPosition=null,this._verticalPosition=null,this._content=null,this._seriesIndex=null,this._dragThreshold=15,this._dragContent=!1,this._dragLines=!1,this._targetPoint=new s.Point},e.prototype._initialize=function(){var e,t=this._chart.hostElement.querySelector("."+ge._CSS_PLOT_AREA);this._plot=t,this._marker||this._createMarker(),t&&(this._plotRect=Object(s.getElementRect)(t),e=t.getBBox(),this._plotRect.width=e.width,this._plotRect.height=e.height,this._updateMarkerSize(),this._updateLinesSize()),this._updateMarkerPosition(),this._wrapperMoveMarker=this._moveMarker.bind(this),this._attach()},e.prototype._createMarker=function(){var t,i;t=document.createElement("div"),Object(s.addClass)(t,e._CSS_MARKER),(i=this._getContainer()).appendChild(t),this._markerContainer=i,this._marker=t,this._createChildren()},e.prototype._removeMarker=function(){var e=this._markerContainer;e.removeChild(this._marker),this._content=null,this._hLine=null,this._vLine=null,e.hasChildNodes()||(this._chart.hostElement.removeChild(this._markerContainer),this._markerContainer=null),this._marker=null},e.prototype._getContainer=function(){var t=this._chart.hostElement.querySelector(e._CSS_MARKER_CONTAINER);return t||(t=this._createContainer()),t},e.prototype._createContainer=function(){var t=document.createElement("div"),i=this._chart.hostElement;return Object(s.addClass)(t,e._CSS_MARKER_CONTAINER),i.insertBefore(t,i.firstChild),t},e.prototype._createChildren=function(){var t,i,n,r,o=this._marker;(r=document.createElement("div")).style.position="absolute",r.style.height="100%",r.style.width="100%",o.appendChild(r),this._dragEle=r,t=document.createElement("div"),Object(s.addClass)(t,e._CSS_MARKER_CONTENT),o.appendChild(t),this._markerContent=t,i=document.createElement("div"),Object(s.addClass)(i,e._CSS_MARKER_HLINE),o.appendChild(i),this._hLine=i,n=document.createElement("div"),Object(s.addClass)(n,e._CSS_MARKER_VLINE),o.appendChild(n),this._vLine=n,this._toggleElesDraggableClass(this._interaction===pe.Drag),this._resetLinesVisibility()},e.prototype._toggleElesDraggableClass=function(t){Object(s.toggleClass)(this._hLine,e._CSS_LINE_DRAGGABLE,t),Object(s.toggleClass)(this._vLine,e._CSS_LINE_DRAGGABLE,t),Object(s.toggleClass)(this._dragEle,e._CSS_LINE_DRAGGABLE,t&&this._dragContent&&this._lines!==de.None)},e.prototype._updateMarkerSize=function(){var e=this._plotRect,t=this._chart.hostElement,i=window.getComputedStyle(t,null),n=Object(s.getElementRect)(t);this._marker&&(this._marker.style.marginTop=e.top-n.top-(parseFloat(i.getPropertyValue("padding-top"))||0)+"px",this._marker.style.marginLeft=e.left-n.left-(parseFloat(i.getPropertyValue("padding-left"))||0)+"px")},e.prototype._updateLinesSize=function(){var e=this._plotRect;this._hLine&&this._vLine&&(this._hLine.style.width=e.width+"px",this._vLine.style.height=e.height+"px")},e.prototype._resetLinesVisibility=function(){this._hLine&&this._vLine&&(this._hide(this._hLine),this._hide(this._vLine),this._lines!==de.Horizontal&&this._lines!==de.Both||this._show(this._hLine),this._lines!==de.Vertical&&this._lines!==de.Both||this._show(this._vLine))},e.prototype._updateMarkerPosition=function(e){var t,i,n=this._plotRect,r=this._targetPoint,o=!1;this._plot&&(t=n.left+n.width*(this._horizontalPosition||0),i=n.top+n.height*(this._verticalPosition||0),null==this._horizontalPosition&&e&&(t=e.x),null==this._verticalPosition&&e&&(i=e.y),t===r.x&&i===r.y||(o=!0),r.x=t,r.y=i,this._toggleVisibility(),this._content&&this._updateContent(),o&&this._raisePositionChanged(t,i),this._updatePositionByAlignment(!!e))},e.prototype._updateContent=function(){var e,t=this._targetPoint,i=this._chart.hitTest(t);e=this._content.call(null,i,t),this._markerContent.innerHTML=e||""},e.prototype._raisePositionChanged=function(e,t){this.onPositionChanged(new s.Point(e,t))},e.prototype._updatePositionByAlignment=function(e){var t=this._alignment,i=this._targetPoint,n=this._marker,r=0,o=0,s=n.clientWidth,a=n.clientHeight,l=this._plotRect;this._plot&&(!this._capturedEle||this._capturedEle&&this._capturedEle!==this._markerContent?(t===fe.Auto?(i.x+s+12>l.left+l.width&&i.x-s>=0&&(o=s),r=a,i.y-a<l.top&&(r=0)):(1==(1&t)&&(o=s),2==(2&t)&&(r=a)),this._interaction===pe.Move&&0===r&&0===o&&null==this.verticalPosition&&(o=-12)):(parseInt(this._hLine.style.top)>0&&(r=a),parseInt(this._vLine.style.left)>0&&(o=s)),n.style.left=i.x-o-l.left+"px",n.style.top=i.y-r-l.top+"px",this._hLine.style.top=r+"px",this._hLine.style.left=l.left-i.x+o+"px",this._vLine.style.top=l.top-i.y+r+"px",this._vLine.style.left=o+"px")},e.prototype._getEventPoint=function(e){return e instanceof MouseEvent?new s.Point(e.pageX,e.pageY):new s.Point(e.changedTouches[0].pageX,e.changedTouches[0].pageY)},e.prototype._pointInRect=function(e,t){return!(!e||!t)&&e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height},e._CSS_MARKER="wj-chart-linemarker",e._CSS_MARKER_HLINE="wj-chart-linemarker-hline",e._CSS_MARKER_VLINE="wj-chart-linemarker-vline",e._CSS_MARKER_CONTENT="wj-chart-linemarker-content",e._CSS_MARKER_CONTAINER="wj-chart-linemarker-container",e._CSS_LINE_DRAGGABLE="wj-chart-linemarker-draggable",e._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled",e}(),je=function(e){function t(){var t=e.call(this)||this;return t.hasSymbols=!1,t.hasLines=!0,t.isSpline=!1,t.isStep=!1,t.stacking=ie.None,t.stackPos={},t.stackNeg={},t.clipping=!1,t}return l(t,e),t.prototype.clear=function(){e.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},t.prototype.adjustLimits=function(e,t){this.dataInfo=e;var i=e.getMinX(),n=e.getMinY(),r=e.getMaxX(),o=e.getMaxY();if(this.isSpline&&!this.chart.axisY._getLogBase()){var a=.1*(o-n);n-=a,o+=a}return this.rotated?new s.Rect(n,i,o-n,r-i):new s.Rect(i,n,r-i,o-n)},t.prototype.plotSeries=function(e,t,i,n,r,o,a,l){var c=[],h=Object(s.asType)(n,oe),u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1);if(d){p||(p=this.dataInfo.getXVals());var f=ue.cloneStyle(n.style,["fill"]),g=d.length,m=!0;p?g=Math.min(g,p.length):(m=!1,p=new Array(g));var b=this._DEFAULT_WIDTH,_=h._getSymbolFill(u),y=h._getAltSymbolFill(u)||_,v=h._getSymbolStroke(u),x=h._getAltSymbolStroke(u)||v,w=h._getSymbolSize();e.stroke=v,e.strokeWidth=b,e.fill=_;var S=new Float64Array(g),C=new Float64Array(g),O=0,j=new Int8Array(g),T=0,N=this.rotated,A=this.stacking!=ie.None&&!h._isCustomAxisY(),M=this.stacking==ie.Stacked100pc&&!h._isCustomAxisY();void 0!==h._getChartType()&&(A=M=!1);for(var E=h.interpolateNulls,P=!1,I=this.getItemFormatter(n),D=0;D<g;D++){var k=m?p[D]:D,L=d[D];if(isFinite(k)&&isFinite(L)){if(A)if(M&&(L/=this.dataInfo.getStackedAbsSum(k)),L>=0){var F=isNaN(this.stackPos[k])?0:this.stackPos[k];L=this.stackPos[k]=F+L}else F=isNaN(this.stackNeg[k])?0:this.stackNeg[k],L=this.stackNeg[k]=F+L;var R;if(N){R=new W(u,D,L,k);var B=t.convert(L);L=i.convert(k),k=B}else R=new W(u,D,k,L),k=t.convert(k),L=i.convert(L);if(isNaN(k)||isNaN(L))P=!0,!0!==E&&(S[O]=NaN,C[O++]=NaN),j[T++]=1,l&&c.push(null);else{S[O]=k,C[O++]=L,T++,l&&c.push(new s.Point(k,L));var z=new q(new s.Point(k,L),.5*w);z.tag=R,this.hitTester.add(z,u)}}else P=!0,!0!==E&&(S[O]=NaN,C[O++]=NaN),j[T++]=1,l&&c.push(null)}var V=0;if(this.hasLines)if(e.fill=null,P&&!0!==E){var H=[],X=[];for(D=0;D<g;D++)isNaN(S[D])?(H.length>1&&(this._drawLines(e,H,X,null,f,this.chart._plotrectId),this.hitTester.add(new K(H,X),u),V++),H=[],X=[]):(H.push(S[D]),X.push(C[D]));H.length>1&&(this._drawLines(e,H,X,null,f,this.chart._plotrectId),this.hitTester.add(new K(H,X),u),V++)}else this._drawLines(e,S,C,null,f,this.chart._plotrectId,O),this.hitTester.add(new K(S,C),u),V++;if(this.hasSymbols&&w>0||I){e.fill=_;var G=0;for(D=0;D<g;D++)E&&j[D]||(k=S[G],L=C[G],(!1===this.hasLines||I)&&(e.fill=d[D]>0?_:y,e.stroke=d[D]>0?v:x,e.strokeWidth=b),this.isValid(k,L,t,i)&&(this._drawSymbol(e,k,L,w,h,D,I),n._setPointIndex(D,V),V++),G++)}l&&c&&c.length&&l(c)}},t.prototype._drawLines=function(e,t,i,n,r,o,s){if(this.isSpline)e.drawSplines(t,i,n,r,o,s);else if(this.isStep){var a=this._createSteps(t,i,s);e.drawLines(t=a.x,i=a.y,n,r,o)}else e.drawLines(t,i,n,r,o,s)},t.prototype._drawSymbol=function(e,t,i,n,r,o,a){var l=this;if(a){e.startGroup();var c=new ee(this.chart,new s.Point(t,i),Y.SeriesSymbol);c._setData(r,o),a(e,c,(function(){l.hasSymbols&&n>0&&l._drawDefaultSymbol(e,t,i,n,r.symbolMarker,r.symbolStyle)})),e.cssPriority=!0,e.endGroup()}else this._drawDefaultSymbol(e,t,i,n,r.symbolMarker,r.symbolStyle)},t.prototype._drawDefaultSymbol=function(e,t,i,n,r,o){r==Z.Dot?e.drawEllipse(t,i,.5*n,.5*n,null,o):r==Z.Box&&e.drawRect(t-.5*n,i-.5*n,n,n,null,o)},t}(ue),Te=function(e){function t(){var t=e.call(this)||this;return t._MIN_SIZE=5,t._MAX_SIZE=30,t.hasLines=!1,t.hasSymbols=!0,t.clipping=!0,t}return l(t,e),t.prototype.adjustLimits=function(t,i){var n=this.getNumOption("minSize","bubble");this._minSize=n||this._MIN_SIZE;var r=this.getNumOption("maxSize","bubble");this._maxSize=r||this._MAX_SIZE;for(var o=this.chart.series,s=o.length,a=NaN,l=NaN,c=0;c<s;c++)if(((b=o[c])._getChartType()==te.Bubble||null==b._getChartType()&&b._chart._getChartType()==te.Bubble)&&(_=b._getBindingValues(1)))for(var h=_.length,u=0;u<h;u++)isFinite(_[u])&&((isNaN(a)||_[u]<a)&&(a=_[u]),(isNaN(l)||_[u]>l)&&(l=_[u]));this._minValue=a,this._maxValue=l;var d=e.prototype.adjustLimits.call(this,t,i),p=i.left,f=i.right,g=i.top,m=i.bottom;for(c=0;c<s;c++){var b;if((b=o[c])._getChartType()==te.Bubble||null==b._getChartType()&&b._chart._getChartType()==te.Bubble){var _=b._getBindingValues(1),y=b.getValues(1),v=b.getValues(0);if(_&&y&&v){var x=_.length;for(u=0;u<x;u++){var w=y?y[u]:u,S=v[u],C=_[u];be.isValid(w,S,C)&&((w=i.left+i.width*(w-d.left)/d.width)-(C=this._minSize+(this._maxSize-this._minSize)*(C-a)/(l-a))<p&&(p=w-C),w+C>f&&(f=w+C),(S=i.top+i.height*(S-d.top)/d.height)-C<g&&(g=S-C),S+C>m&&(m=S+C))}}}}p=i.left-p+5,f=f-i.right+5,g=i.top-g+5,m=m-i.bottom+5;var O=this.chart.axisY;if(!this.chart.axisX._isLogAxis()){var j=(i.width-(p+f))/d.width;d.left-=p/j,d.width+=(p+f)/j}if(!O._isLogAxis()){var T=(i.height-(g+m))/d.height;d.top-=g/T,d.height+=(g+m)/T}return d},t.prototype._drawSymbol=function(e,t,i,n,r,o,a){var l=this;if(null==this._minSize){var c=this.getNumOption("minSize","bubble");this._minSize=c||this._MIN_SIZE}if(null==this._maxSize){var h=this.getNumOption("maxSize","bubble");this._maxSize=h||this._MAX_SIZE}var u=r._getItem(o);if(u){var d=r._getBinding(1);if(d&&(n=u[d],isFinite(n))){null==n&&(n=this._minValue);var p=this._minValue==this._maxValue?1:Math.sqrt((n-this._minValue)/(this._maxValue-this._minValue));if(n=this._minSize+(this._maxSize-this._minSize)*p,a){var f=new ee(this.chart,new s.Point(t,i),Y.SeriesSymbol);f._setData(r,o),e.startGroup(),a(e,f,(function(){l._drawDefaultSymbol(e,t,i,n,r.symbolMarker,r.symbolStyle)})),e.endGroup()}else this._drawDefaultSymbol(e,t,i,n,r.symbolMarker,r.symbolStyle);var g=this.hitTester._map[this.chart.series.indexOf(r)];if(null!=g)for(var m=g.length-1;m>=0;m--){var b=g[m];if(b.tag&&b.tag.pointIndex==o){var _=Object(s.tryCast)(b,q);_&&_.setRadius(.5*n)}}}}},t}(je);Object(s._registerModule)("wijmo.chart",a)},oksU:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i("mrSG"),r=i("fXoL"),o=i("tcrU"),s=i("EDFS"),a=i("lMX+"),l=i("lJxs"),c=i("JIr8"),h=i("ZF+8"),u=i("iFvM"),d=i("ztEp"),p=i("EY2u"),f=i("ofXK"),g=i("RsUz"),m=function(){function e(){}return e.prototype.transform=function(e,t){if(t.dataType===o.DataType.Date){var i=Object(d.parseDatetimeOrNull)(e);return o.Globalize.formatDate(i,t.displayFormat||"dd/MM/yyyy")}return e},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Mb({name:"field",type:e,pure:!0}),e}(),b=["grid"],_=["pop"];function y(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",3),r.Tb(1,"div",4,5),r.bc("onHidden",(function(){return r.vc(i),r.dc().onHidden()}))("onShown",(function(){return r.vc(i),r.dc().onShown()})),r.Tb(3,"label",6),r.Ec(4),r.Ob(5,"i",7),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=r.dc(),o=r.sc(4);r.Bb(1),r.jc("popover",o)("outsideClick",!0),r.Bb(2),r.jc("title",n.title),r.Bb(1),r.Gc("",n.label," ")}}var v=function(e){return{selected:e}};function x(e,t){if(1&e){var i=r.Ub();r.Tb(0,"i",8,5),r.bc("onHidden",(function(){return r.vc(i),r.dc().onHidden()}))("onShown",(function(){return r.vc(i),r.dc().onShown()})),r.Sb()}if(2&e){var n=r.dc(),o=r.sc(4);r.jc("ngClass",r.nc(3,v,n.selected&&n.selected.length))("popover",o)("outsideClick",!0)}}function w(e,t){1&e&&(r.Tb(0,"div",28),r.Tb(1,"div",29),r.Tb(2,"span",30),r.Ec(3,"Loading..."),r.Sb(),r.Sb(),r.Sb())}function S(e,t){if(1&e&&(r.Ec(0),r.ec(1,"field")),2&e){var i=t.cell,n=r.dc(2);r.Gc(" ",r.gc(1,1,i.item.value,n.field)," ")}}function C(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",9),r.Cc(1,w,4,0,"div",10),r.Tb(2,"div",11),r.Tb(3,"div",12),r.Tb(4,"div",13),r.Ob(5,"i",14),r.Sb(),r.Sb(),r.Tb(6,"input",15),r.bc("input",(function(e){return r.vc(i),r.dc().onSearch(e.target.value)})),r.Sb(),r.Sb(),r.Tb(7,"wj-flex-grid",16,17),r.bc("sortingColumn",(function(e){r.vc(i);var t=r.sc(8);return r.dc().sortingHandler(t,e)}))("initialized",(function(){r.vc(i);var e=r.sc(8);return r.dc().onGridInit(e)})),r.Ob(9,"wj-flex-grid-column",18),r.Tb(10,"wj-flex-grid-column",19),r.Cc(11,S,2,4,"ng-template",20),r.Sb(),r.Ob(12,"wj-flex-grid-column",21),r.Sb(),r.Tb(13,"div",22),r.Tb(14,"div",23),r.Tb(15,"span"),r.Ec(16,"Used Filter"),r.Sb(),r.Tb(17,"span"),r.Ec(18),r.Sb(),r.Sb(),r.Ob(19,"input",24),r.Sb(),r.Tb(20,"div",25),r.Tb(21,"button",26),r.bc("click",(function(){return r.vc(i),r.dc().onClear()})),r.Ec(22,"Clear"),r.Sb(),r.Tb(23,"button",27),r.bc("click",(function(){return r.vc(i),r.dc().onApply()})),r.Ec(24,"Apply"),r.Sb(),r.Tb(25,"button",26),r.bc("click",(function(){return r.vc(i),r.dc().pop.hide()})),r.Ec(26,"Close"),r.Sb(),r.Sb(),r.Sb()}if(2&e){var n=r.dc();r.Bb(1),r.jc("ngIf",n.loading),r.Bb(6),r.jc("allowDelete",!1)("allowAddNew",!1)("selectionMode",3)("itemsSource",n.collectionView),r.Bb(2),r.jc("isReadOnly",!1)("width",50),r.Bb(1),r.jc("isReadOnly",!0)("dataType",n.field.dataType)("format",n.field.displayFormat),r.Bb(1),r.jc("cellType","Cell"),r.Bb(1),r.jc("isReadOnly",!0)("width",80),r.Bb(6),r.Gc("Rows: ",n.collectionView.items.length,""),r.Bb(1),r.jc("value",n.usedFilters)}}var O=function(){function e(e,t){this.sql=e,this.notificationService=t,this.delete=new r.p,this.apply=new r.p,this.collectionView=new o.CollectionView,this.loading=!0}return e.prototype.ngOnInit=function(){var e=this;this.collectionView.sourceCollection=[],this.collectionView.filter=function(t){var i="string"!=typeof t.value?t.value+"":t.value.toLowerCase();return!e.search||-1!==i.indexOf(e.search.trim().toLowerCase())},this.setSelected(this.currentFilters);var t=new o.PropertyGroupDescription("applied",(function(t,i){return e.isSelected(t.value)?"Applied items":"Select items"}));this.collectionView.groupDescriptions.push(t),this.collectionView.sortConverter=function(t,i,n){return"applied"===t.property&&e.selected?e.isSelected(i.value):n},this.setLabel()},e.prototype.onShown=function(){return Object(n.b)(this,void 0,void 0,(function(){var e,t;return Object(n.e)(this,(function(i){switch(i.label){case 0:this.loading=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.getItems()];case 2:return e=i.sent(),this.collectionView.sourceCollection=e,this.setFooter(this.grid),[3,5];case 3:return t=i.sent(),console.error(t),[3,5];case 4:return this.loading=!1,[7];case 5:return[2]}}))}))},Object.defineProperty(e.prototype,"fieldExp",{get:function(){return this.field.fieldExpression||this.field.bindingName},enumerable:!1,configurable:!0}),e.prototype.getItems=function(){var e=this,t=Object(u.m)(this.currentFilters,this.fieldExp)||[];this.defaultFilters&&(t=Object(n.g)(t,this.defaultFilters));var i=Object(n.a)(Object(n.a)({},this.queryData),{orderBy:[{fieldName:this.field.bindingName,direction:"ASC"}]});return this.sql.selectSqlObjectData$(this.connection,this.dataObject.schemaName,this.dataObject.objectName,Object(n.a)(Object(n.a)({},i),{fields:["GroupBy|"+this.fieldExp,"Count(1) Count"],filters:t})).pipe(Object(l.a)((function(t){return e.usedFilters=e.getUsedFiltersStr(),t.rows&&t.rows.map((function(t){var i=t[0],n=t[1];return{selected:e.isSelected(i),value:i,count:n}})).sort((function(e,t){return null===e.value?-1:null===t.value?1:0}))})),Object(c.a)((function(t){return e.notificationService.error(t),p.a}))).toPromise()},e.prototype.setSelected=function(e){e&&(this.selected=e[this.fieldExp])},e.prototype.ngOnChanges=function(e){var t=e.currentFilters;t&&!t.firstChange&&(this.setSelected(t.currentValue),this.setLabel())},e.prototype.sortingHandler=function(e,t){var i=e.columns[t.col],n=this.collectionView.sortDescriptions,r=new o.SortDescription(i.binding,"+"!==i.currentSort);this.collectionView.deferUpdate((function(){n.clear(),n.push(new o.SortDescription("applied",!1)),n.push(r)})),t.cancel=!0},e.prototype.onGridInit=function(e){e.columnFooters.rows.push(new a.Row({count:0})),e.groupHeaderFormat="<b>{value}</b>",e.formatItem.addHandler((function(e,t){var i=t.panel,n=i.rows[t.row].dataItem,r=i.columns[t.col].binding;i.cellType===a.CellType.Cell&&n&&"value"===r&&null===n[r]&&(t.cell.innerHTML="[NULL]")})),e.hostElement.addEventListener("click",(function(e){"INPUT"===e.target.tagName&&e.stopPropagation()})),this.selected&&this.collectionView.sortDescriptions.push(new o.SortDescription("applied",!1))},e.prototype.onSearch=function(e){this.search=e,this.collectionView.refresh()},e.prototype.onHidden=function(){this.currentFilters&&(this.collectionView.sourceCollection=[])},e.prototype.onApply=function(){this.selected=this.collectionView.items.filter((function(e){return e.selected})).map((function(e){return e.value})),this.selected.length||(this.selected=null),this.pop.hide(),this.apply.emit(this.selected),this.setLabel()},e.prototype.onClear=function(){this.selected=null,this.onHidden(),this.pop.hide(),this.apply.emit(this.selected),this.setLabel()},e.prototype.onDelete=function(){this.selected=null,this.delete.emit(),this.setLabel()},e.prototype.setFooter=function(e){e&&e.columnFooters.setCellData(0,2,this.collectionView.sourceCollection.reduce((function(e,t){return e+t.count}),0))},e.prototype.setLabel=function(){var e=this,t=this.field.bindingName,i=t;this.selected&&this.selected.length&&(t=(i=t+": "+this.selected.map((function(t){return e.field.dataType===o.DataType.Date?Object(u.d)(Object(d.parseDatetimeOrNull)(t),e.field.displayFormat):t})).join(", ")).length>50?i.substring(0,47)+"...":i),this.label=t,this.title=i},e.prototype.isSelected=function(e){return!!this.selected&&(e instanceof Date?this.selected.some((function(t){return t&&t.getTime()===e.getTime()})):this.selected.includes(e))},e.prototype.getUsedFiltersStr=function(){var e=Object(u.m)(this.currentFilters,this.fieldExp);return e&&e.map((function(e){return e.fieldName+" IN ("+e.value.map((function(e){return e instanceof Date?Object(d.dateToString)(e):e})).join(",")+"})"})).join(" AND ")},e.\u0275fac=function(t){return new(t||e)(r.Nb(h.f),r.Nb(h.e))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-filter"]],viewQuery:function(e,t){var i;1&e&&(r.Jc(b,!0),r.Jc(_,!0)),2&e&&(r.rc(i=r.cc())&&(t.grid=i.first),r.rc(i=r.cc())&&(t.pop=i.first))},inputs:{icon:"icon",field:"field",currentFilters:"currentFilters",dataObject:"dataObject",connection:"connection",defaultFilters:"defaultFilters",queryData:"queryData"},outputs:{delete:"delete",apply:"apply"},features:[r.zb],decls:5,vars:2,consts:[["class","d-flex border border-secondary rounded",4,"ngIf","ngIfElse"],["iconTemplate",""],["popTemplate",""],[1,"d-flex","border","border-secondary","rounded"],["containerClass","filter-component","placement","bottom",1,"d-flex",3,"popover","outsideClick","onHidden","onShown"],["pop","bs-popover"],[1,"col-form-label","px-1","cursor-pointer",3,"title"],[1,"fa","fa-angle-down"],["containerClass","filter-component","placement","bottom","container","body",1,"fa","fa-filter","cursor-pointer",3,"ngClass","popover","outsideClick","onHidden","onShown"],[1,"container","p-0","h-100","d-flex","flex-column"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","placeholder","Search",1,"form-control","form-control-sm",3,"input"],["headersVisibility","Column",1,"h-100","flex-fill",3,"allowDelete","allowAddNew","selectionMode","itemsSource","sortingColumn","initialized"],["grid",""],["header","?","binding","selected","dataType","Boolean",3,"isReadOnly","width"],["header","Value","binding","value","width","*",3,"isReadOnly","dataType","format"],["wjFlexGridCellTemplate","",3,"cellType"],["header","Count","binding","count","dataType","Number",3,"isReadOnly","width"],[1,"row","flex-column","m-0","my-2"],[1,"d-flex","justify-content-between","mb-2"],["type","text","disabled","disabled",1,"form-control","form-control-sm",3,"value"],[1,"d-flex"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","ml-auto","mr-2",3,"click"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){if(1&e&&(r.Cc(0,y,6,4,"div",0),r.Cc(1,x,2,5,"ng-template",null,1,r.Dc),r.Cc(3,C,27,15,"ng-template",null,2,r.Dc)),2&e){var i=r.sc(2);r.jc("ngIf",!t.icon)("ngIfElse",i)}},directives:[f.m,s.a,f.k,g.a,g.c,g.b],pipes:[m],styles:['[_ngcontent-%COMP%]:root{--bg:#fff;--body-bg:#e4e5e6;--header-bg:#ebedef;--color:#4f5d73;--border-color:#c4c9d0;--wj-alt:#f7f7f7;--form-input-bg:#fff;--form-input-color:#768192;--nav-link-color:#8a93a2;--secondary-color:#c4c9d0;--opacity:0.05;--hover:"#f0f3f5"}  .filter-component{height:450px;min-width:450px}  .filter-component .popover-content.popover-body{background-color:var(--bg);color:var(--color);height:100%;padding:.5rem}.fa-filter[_ngcontent-%COMP%]{color:#8a93a2}.fa-filter.selected[_ngcontent-%COMP%]{color:#636f83}']}),e}()},rnKy:function(e,t,i){"use strict";var n,r,o;"undefined"!=typeof window&&window,r=[i("KtZj")],void 0===(o="function"==typeof(n=function(e){var t=function(){var t,i={},n=[];function r(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function o(e,t){var i=t.split(/\d/),n=i[i.length-1];switch(t=parseFloat(t),n){case"px":return t;case"em":return t*r(e);case"rem":return t*r();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var o=document.documentElement.clientWidth/100,s=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===n?"min":"max"])(o,s);default:return t}}function s(e,t){var n,r,s,a,l,c,h,u;this.element=e;var d=["min-width","min-height","max-width","max-height"];this.call=function(){for(n in s=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}(this.element),c={},i[t])i[t].hasOwnProperty(n)&&(a=o(this.element,(r=i[t][n]).value),l="width"===r.property?s.width:s.height,h="","min"===r.mode&&l>=a&&(h+=r.value),"max"===r.mode&&l<=a&&(h+=r.value),c[u=r.mode+"-"+r.property]||(c[u]=""),h&&-1===(" "+c[u]+" ").indexOf(" "+h+" ")&&(c[u]+=" "+h));for(var e in d)d.hasOwnProperty(e)&&(c[d[e]]?this.element.setAttribute(d[e],c[d[e]].substr(1)):this.element.removeAttribute(d[e]))}}function a(t,i){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,i)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation.call()})))}function l(e,r,o,s){if(void 0===i[e]){i[e]=[];var a=n.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+a+"px;}",n.push(e)}i[e].push({mode:r,property:o,value:s})}function c(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function h(t){var i=[],n=[],r=[],o=0,s=-1,a=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){i.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),h=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");r.push(h),n.push({minWidth:c}),c?t.children[l].style.display="none":(o=i.length-1,t.children[l].style.display="block")}function u(){var e,l=!1;for(e in i)i.hasOwnProperty(e)&&n[e].minWidth&&t.offsetWidth>n[e].minWidth&&(l=e);if(l||(l=o),s!==l)if(a[l])i[s].style.display="none",i[l].style.display="block",s=l;else{var c=new Image;c.onload=function(){i[l].src=r[l],i[s].style.display="none",i[l].style.display="block",a[l]=!0,s=l},c.src=r[l]}else i[l].src=r[l]}s=o,t.resizeSensorInstance=new e(t,u),u()}var u=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,d=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function p(e){var t,i,n,r;for(e=e.replace(/'/g,'"');null!==(t=u.exec(e));)for(i=t[1]+t[3],n=t[2];null!==(r=d.exec(n));)l(i,r[1],r[2],r[3])}function f(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||p(e);else for(var i=0,n=e.length;i<n;i++)1===e[i].type?-1!==(t=e[i].selectorText||e[i].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?p(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||p(t):4===e[i].type?f(e[i].cssRules||e[i].rules):3===e[i].type&&e[i].styleSheet.hasOwnProperty("cssRules")&&f(e[i].styleSheet.cssRules)}var g=!1;this.init=function(){var i="animationstart";void 0!==document.documentElement.style.webkitAnimationName?i="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?i="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(i="oanimationstart"),document.body.addEventListener(i,(function(t){var i=t.target,r=i&&window.getComputedStyle(i,null),o=r&&r.getPropertyValue("animation-name");if(o&&-1!==o.indexOf("element-queries")){i.elementQueriesSensor=new e(i,(function(){i.elementQueriesSetupInformation&&i.elementQueriesSetupInformation.call()}));var s=window.getComputedStyle(i.resizeSensor,null).getPropertyValue("min-width");s=parseInt(s.replace("px","")),a(t.target,n[s])}})),g||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),g=!0);for(var r=0,o=document.styleSheets.length;r<o;r++)try{document.styleSheets[r].href&&0===document.styleSheets[r].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[r].href),f(document.styleSheets[r].cssRules||document.styleSheets[r].rules||document.styleSheets[r].cssText)}catch(s){}!function(){for(var e=c()("[data-responsive-image],[responsive-image]"),t=0,i=e.length;t<i;t++)h(e[t])}()},this.findElementQueriesElements=function(e){!function(e){var t=c(e);for(var n in i)if(i.hasOwnProperty(n))for(var r=t(n,e),o=0,s=r.length;o<s;o++)a(r[o],n)}(e)},this.update=function(){this.init()}};return t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()},t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){!function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))}),10);else window.onload=e}(t.init)},t})?n.apply(t,r):n)||(e.exports=o)},s90X:function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("mrSG"),r=i("fXoL"),o=i("lJxs"),s=i("eIep"),a=i("XNiG"),l=i("2Vo4"),c=i("ZF+8"),h=i("1ua0"),u=i("ofXK"),d=i("dZIy"),p=i("oksU");function f(e,t){if(1&e){var i=r.Ub();r.Tb(0,"li",8),r.Tb(1,"a",9),r.bc("click",(function(){r.vc(i);var e=t.$implicit;return r.dc(3).addFilter(e)})),r.Ec(2),r.Sb(),r.Sb()}if(2&e){var n=t.$implicit;r.Bb(2),r.Fc(n.bindingName)}}function g(e,t){if(1&e){var i=r.Ub();r.Tb(0,"ul",7),r.Tb(1,"li",8),r.Tb(2,"a",9),r.bc("click",(function(){return r.vc(i),r.dc(2).manageFilter()})),r.Ob(3,"i",10),r.Ec(4," Manage Filter"),r.Sb(),r.Sb(),r.Ob(5,"li",11),r.Cc(6,f,3,1,"li",12),r.ec(7,"async"),r.Sb()}if(2&e){var n=r.dc(2);r.Bb(6),r.jc("ngForOf",r.fc(7,1,n.fields$))}}function m(e,t){if(1&e){var i=r.Ub();r.Tb(0,"div",13),r.Tb(1,"app-filter",14),r.bc("apply",(function(e){r.vc(i);var n=t.index,o=t.$implicit;return r.dc(2).onFilterChange(n,e,o)}))("delete",(function(){r.vc(i);var e=t.index,n=t.$implicit;return r.dc(2).removeFilter(e,n)})),r.Sb(),r.Sb()}if(2&e){var n=t.$implicit,o=r.dc(2);r.Bb(1),r.jc("field",n)("currentFilters",o.currentFilters)("connection",o.connection)("dataObject",o.dataObject)("defaultFilters",o.defaultFilters)("queryData",o.queryData)}}function b(e,t){if(1&e&&(r.Tb(0,"div",1),r.Tb(1,"div",2),r.Tb(2,"button",3),r.ec(3,"async"),r.Ob(4,"i",4),r.Sb(),r.Cc(5,g,8,3,"ul",5),r.Sb(),r.Cc(6,m,2,6,"div",6),r.ec(7,"async"),r.Sb()),2&e){var i=r.dc();r.Bb(2),r.jc("disabled",!r.fc(3,2,i.fields$).length),r.Bb(4),r.jc("ngForOf",r.fc(7,4,i.columnInfo$))}}var _=function(){function e(e){this.dialogService=e,this.changed=new r.p,this.destroy$=new a.a,this.filters$=new l.a([]),this.filtersState=null}return e.prototype.ngOnInit=function(){var e=this;this.fields$=this.filters$.pipe(Object(o.a)((function(t){var i=t.map((function(e){return e.bindingName}));return e.fields.filter((function(e){return!i.includes(e.bindingName)}))}))),this.columnInfo$=this.filters$.pipe(Object(o.a)((function(t){return t.map((function(t){return e.fields.find((function(e){return t.bindingName===e.bindingName}))}))}))),this.selectedFilters$=this.filters$.pipe(Object(o.a)((function(e){return e.filter((function(e){return e.selected&&e.selected.length}))})))},e.prototype.ngOnChanges=function(e){var t=e.fields;t&&!t.firstChange&&this.filters$.next(this.getSavedFilters())},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.addFilter=function(e){var t=Object(n.a)(Object(n.a)({},e),{selected:null,items:[]});this.filters$.next(Object(n.g)(this.filters$.value,[t])),this.saveFilters()},e.prototype.onFilterChange=function(e,t,i){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(e){return this.currentFilters[i.fieldExpression||i.bindingName]=t,this.changed.emit(this.currentFilters),[2]}))}))},e.prototype.removeFilter=function(e,t){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(i){switch(i.label){case 0:return[4,this.onFilterChange(e,null,t)];case 1:return i.sent(),this.currentFilters[t.bindingName]=null,this.filters$.value.splice(e,1),this.filters$.next(Object(n.g)(this.filters$.value)),this.saveFilters(),[2]}}))}))},e.prototype.manageFilter=function(){var e=this,t=this.dialogService.open(h.d);t.config={filters:this.filters$.value,fields:this.fields},t.init.pipe(Object(s.a)((function(){return t.component.change}))).subscribe((function(t){return Object(n.b)(e,void 0,void 0,(function(){var e,i=this;return Object(n.e)(this,(function(n){return e=t,this.filters$.value.filter((function(t){return!e.map((function(e){return e.bindingName})).includes(t.bindingName)})).forEach((function(e){i.currentFilters[e.bindingName]=null})),-1===this.filters$.value.findIndex((function(t,i){return!e[i]||t.bindingName!==e[i].bindingName}))&&e.length===this.filters$.value.length||this.changed.emit(this.currentFilters),this.filters$.next(e),this.saveFilters(),[2]}))}))}))},Object.defineProperty(e.prototype,"filtersKey",{get:function(){return"db-table-filters-"+this.dataObject.schemaName+"-"+this.dataObject.objectName},enumerable:!1,configurable:!0}),e.prototype.saveFilters=function(){var e=this.filters$.value.map((function(e){return e.bindingName}));e.length?localStorage.setItem(this.filtersKey,JSON.stringify(e)):localStorage.removeItem(this.filtersKey)},e.prototype.getSavedFilters=function(){var e,t=this;try{var i=localStorage.getItem(this.filtersKey),r=[];if(i)try{r=JSON.parse(i)}catch(o){r=[]}return(null===(e=this.initFilters)||void 0===e?void 0:e.length)&&(r=Array.from(new Set(Object(n.g)(r,this.initFilters)))),r.map((function(e){var i=t.fields.find((function(t){return t.bindingName===e}));if(i)return Object(n.a)(Object(n.a)({},i),{selected:null,items:[]})})).filter((function(e){return e}))}catch(o){return[]}},e.\u0275fac=function(t){return new(t||e)(r.Nb(c.b))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-filters"]],inputs:{fields:"fields",currentFilters:"currentFilters",connection:"connection",dataObject:"dataObject",defaultFilters:"defaultFilters",initFilters:"initFilters",queryData:"queryData"},outputs:{changed:"changed"},features:[r.zb],decls:1,vars:1,consts:[["class","row m-0",4,"ngIf"],[1,"row","m-0"],["dropdown","",1,"btn-group","mr-2","mb-2","border"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic","triggers","mouseenter:mouseleave","containerClass","applied-popover",1,"btn","btn-primary","dropdown-toggle","align-self-baseline",3,"disabled"],[1,"fa","fa-filter"],["id","dropdown-basic","class","dropdown-menu overflow-auto","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["class","pr-2 mb-2",4,"ngFor","ngForOf"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu","overflow-auto"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"fa","fa-cogs"],[1,"divider","dropdown-divider"],["role","menuitem",4,"ngFor","ngForOf"],[1,"pr-2","mb-2"],[3,"field","currentFilters","connection","dataObject","defaultFilters","queryData","apply","delete"]],template:function(e,t){1&e&&r.Cc(0,b,8,6,"div",0),2&e&&r.jc("ngIf",t.fields&&t.fields.length)},directives:[u.m,d.a,d.d,d.b,u.l,p.a],pipes:[u.b],styles:['[_ngcontent-%COMP%]:root{--bg:#fff;--body-bg:#e4e5e6;--header-bg:#ebedef;--color:#4f5d73;--border-color:#c4c9d0;--wj-alt:#f7f7f7;--form-input-bg:#fff;--form-input-color:#768192;--nav-link-color:#8a93a2;--secondary-color:#c4c9d0;--opacity:0.05;--hover:"#f0f3f5"}.border[dropdown][_ngcontent-%COMP%]{border-color:transparent}.dropdown-menu[_ngcontent-%COMP%]{max-height:500px}.fa.fa-cogs[_ngcontent-%COMP%]{color:#636f83}  .applied-popover{min-width:100px}']}),e}()},vg9S:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e){return e.Input="input",e.Text="text",e}({}),r=function(e){return e.show="d-flex flex-column h-100 w-100",e.hide="d-none",e}({})}}]);
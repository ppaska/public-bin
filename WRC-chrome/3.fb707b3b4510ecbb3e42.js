(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/IbS":function(e,t,n){"use strict";n.r(t);var i=n("Valr"),a=n("QJY3"),r=n("6onV"),o=n("hYGK"),c=n("w1ql"),l=n("mrSG"),s=n("TYT/"),d=n("DUip"),u=n("/PH2"),p=function(){return function(){}}(),m=function(){function e(){}return e.prototype.serialize=function(e){return{root:this.serializeRoute(e.root),url:e.url}},e.prototype.serializeRoute=function(e){var t=this,n=e.children.map((function(e){return t.serializeRoute(e)}));return{params:e.params,paramMap:e.paramMap,data:e.data,url:e.url,outlet:e.outlet,routeConfig:e.routeConfig?{component:e.routeConfig.component,path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet}:null,queryParams:e.queryParams,queryParamMap:e.queryParamMap,fragment:e.fragment,component:e.routeConfig?e.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:n[0],pathFromRoot:void 0,children:n}},e}(),f=function(){function e(){}return e.prototype.serialize=function(e){return{root:this.serializeRoute(e.root),url:e.url}},e.prototype.serializeRoute=function(e){var t=this,n=e.children.map((function(e){return t.serializeRoute(e)}));return{params:e.params,data:e.data,url:e.url,outlet:e.outlet,routeConfig:e.routeConfig?{path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet}:null,queryParams:e.queryParams,fragment:e.fragment,firstChild:n[0],children:n}},e}(),b=function(e){return e[e.PreActivation=1]="PreActivation",e[e.PostActivation=2]="PostActivation",e}({}),h=new s.InjectionToken("@ngrx/router-store Internal Configuration"),g=new s.InjectionToken("@ngrx/router-store Configuration");function x(e){return Object(l.a)({stateKey:"router",serializer:m,navigationActionTiming:b.PreActivation},e)}var v,y,S,j,O=function(e){return e[e.NONE=1]="NONE",e[e.ROUTER=2]="ROUTER",e[e.STORE=3]="STORE",e}({}),w=function(){function e(e,t,n,i,a){this.store=e,this.router=t,this.serializer=n,this.errorHandler=i,this.config=a,this.lastEvent=null,this.trigger=O.NONE,this.stateKey=this.config.stateKey,this.setUpStoreStateListener(),this.setUpRouterEventsListener()}var t;return t=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:h,useValue:e},{provide:g,useFactory:x,deps:[h]},{provide:p,useClass:e.serializer?e.serializer:1===e.routerState?f:m}]}},e.prototype.setUpStoreStateListener=function(){var e=this;this.store.pipe(Object(r.t)(this.stateKey),Object(u.a)(this.store)).subscribe((function(t){var n=Object(l.g)(t,2);e.navigateIfNeeded(n[0],n[1])}))},e.prototype.navigateIfNeeded=function(e,t){var n=this;if(e&&e.state&&this.trigger!==O.ROUTER&&!(this.lastEvent instanceof d.e)){var i=e.state.url;this.router.url!==i&&(this.storeState=t,this.trigger=O.STORE,this.router.navigateByUrl(i).catch((function(e){n.errorHandler.handleError(e)})))}},e.prototype.setUpRouterEventsListener=function(){var e,t=this,n=this.config.navigationActionTiming===b.PostActivation;this.router.events.pipe(Object(u.a)(this.store)).subscribe((function(i){var a=Object(l.g)(i,2),r=a[0],o=a[1];t.lastEvent=r,r instanceof d.e?(t.routerState=t.serializer.serialize(t.router.routerState.snapshot),t.trigger!==O.STORE&&(t.storeState=o,t.dispatchRouterRequest(r))):r instanceof d.k?(e=r,n||t.trigger===O.STORE||t.dispatchRouterNavigation(r)):r instanceof d.b?(t.dispatchRouterCancel(r),t.reset()):r instanceof d.d?(t.dispatchRouterError(r),t.reset()):r instanceof d.c&&(t.trigger!==O.STORE&&(n&&t.dispatchRouterNavigation(e),t.dispatchRouterNavigated(r)),t.reset())}))},e.prototype.dispatchRouterRequest=function(e){this.dispatchRouterAction("@ngrx/router-store/request",{event:e})},e.prototype.dispatchRouterNavigation=function(e){var t=this.serializer.serialize(e.state);this.dispatchRouterAction("@ngrx/router-store/navigation",{routerState:t,event:new d.k(e.id,e.url,e.urlAfterRedirects,t)})},e.prototype.dispatchRouterCancel=function(e){this.dispatchRouterAction("@ngrx/router-store/cancel",{storeState:this.storeState,event:e})},e.prototype.dispatchRouterError=function(e){this.dispatchRouterAction("@ngrx/router-store/error",{storeState:this.storeState,event:new d.d(e.id,e.url,""+e)})},e.prototype.dispatchRouterNavigated=function(e){var t=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction("@ngrx/router-store/navigated",{event:e,routerState:t})},e.prototype.dispatchRouterAction=function(e,t){this.trigger=O.ROUTER;try{this.store.dispatch({type:e,payload:Object(l.a)({routerState:this.routerState},t,{event:1===this.config.routerState?{id:t.event.id,url:t.event.url}:t.event})})}finally{this.trigger=O.NONE}},e.prototype.reset=function(){this.trigger=O.NONE,this.storeState=null,this.routerState=null},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)(s["\u0275\u0275inject"](r.h),s["\u0275\u0275inject"](d.f),s["\u0275\u0275inject"](p),s["\u0275\u0275inject"](s.ErrorHandler),s["\u0275\u0275inject"](g))}}),e}(),C=n("cSvJ"),E=n("b8dF"),N=n("6Fs3"),T=n("u/pq"),I=n("DQr0"),D=n("EQPC"),F=n("1PnN"),R=n("AytR"),q=function(e){return e.LOAD_SQL_OBJECTS="[DB Manager] load sql objects",e.LOADED_SQL_OBJECTS="[DB Manager] loaded sql objects",e.SELECT_CONNECTION="[DB Manager] select connection",e.LOADED_CONNECTIONS="[DB Manager] loaded connections",e}({}),M=function(){return function(e){this.payload=e,this.type=q.LOAD_SQL_OBJECTS}}(),k=function(){return function(e){this.payload=e,this.type=q.LOADED_SQL_OBJECTS}}(),V=function(){return function(e){this.payload=e,this.type=q.SELECT_CONNECTION}}(),$=function(){return function(e){this.payload=e,this.type=q.LOADED_CONNECTIONS}}(),L={list:[],loading:!1},A={list:[],current:null},P=function(e){return e.SET_SQL_DATA_FILTERS="[DB Manager] set sql data filters",e.SET_SQL_DATA_ROWS_COUNT="[DB Manager] set sql data rows count",e.SET_SQL_DATA_FILTER_PROP="[DB Manager] set sql data filter property",e}({}),B=Object(r.n)("[DB Manager] load sql object structure",Object(r.s)()),_=Object(r.n)("[DB Manager] loaded sql object structure",Object(r.s)()),z=Object(r.n)("[DB Manager] deleted sql object"),Q=Object(r.n)("[DB Manager] save sql object structure",Object(r.s)()),G=Object(r.n)("[DB Manager] saved sql object structure"),U=Object(r.n)("[DB Manager] refresh sql object",Object(r.s)()),H=(Object(r.u)({loadSqlObjectStructure:B,loadedSqlObjectStructure:_,saveSqlObjectStructure:Q,refreshSqlObject:U}),n("TwVa")),W=function(e){return e.DATA_SAVE="data-save",e.STRUCTURE_LOAD="structure-load",e}({}),J=((v={})[W.STRUCTURE_LOAD]="Table structure is loading",v[W.DATA_SAVE]="Table data is saving",v),K={fields:[],objectId:0,schemaName:null,objectName:null,objectType:H.g.Table},Y={structure:Object(l.a)({},K),filters:{limitRowsCount:1e3,skipRowsCount:0},loading:[],rowsCount:0},X={sqlObjects:function(e,t){switch(void 0===e&&(e=L),t.type){case q.LOADED_SQL_OBJECTS:var n=t.payload;return Object(l.a)(Object(l.a)({},e),{list:n,loading:!1});case q.LOAD_SQL_OBJECTS:return Object(l.a)(Object(l.a)({},e),{list:[],loading:!0});default:return e}},dbConnections:function(e,t){switch(void 0===e&&(e=A),t.type){case q.SELECT_CONNECTION:var n=t.payload;return Object(l.a)(Object(l.a)({},e),{current:n});case q.LOADED_CONNECTIONS:return n=t.payload,Object(l.a)(Object(l.a)({},e),{list:n});default:return e}},sqlObject:function(e,t){switch(void 0===e&&(e=Y),t.type){case B.type:var n=t.dbObject;return Object(l.a)(Object(l.a)({},e),{filters:{limitRowsCount:e.filters.limitRowsCount,skipRowsCount:0},structure:Object(l.a)(Object(l.a)({},K),n),loading:Array.from(new Set(Object(l.i)(e.loading,[W.STRUCTURE_LOAD])))});case _.type:var i=t.structure||Object(l.a)({},K);return Object(l.a)(Object(l.a)({},e),{structure:i,loading:e.loading.filter((function(e){return e!==W.STRUCTURE_LOAD}))});case P.SET_SQL_DATA_FILTERS:return Object(l.a)(Object(l.a)({},e),{filters:Object(l.a)({limitRowsCount:e.filters.limitRowsCount},t.payload)});case P.SET_SQL_DATA_ROWS_COUNT:return Object(l.a)(Object(l.a)({},e),{rowsCount:t.payload});case P.SET_SQL_DATA_FILTER_PROP:return Object(l.a)(Object(l.a)({},e),{filters:Object(l.a)(Object(l.a)({},e.filters),t.payload)});default:return e}},router:function(e,t){var n=t;switch(n.type){case"@ngrx/router-store/navigation":case"@ngrx/router-store/error":case"@ngrx/router-store/cancel":return{state:n.payload.routerState,navigationId:n.payload.event.id};default:return e}}},Z=n("F/XL"),ee=n("15JJ"),te=n("67Y/"),ne=n("9Z1F"),ie=function(e){return e.ERROR="[DB Manager] error",e.SUCCESS="[DB Manager] success",e}({}),ae=function(){return function(e){this.payload=e,this.type=ie.ERROR}}(),re=function(){return function(e){this.payload=e,this.type=ie.SUCCESS}}(),oe=n("ZF+8"),ce=n("M0ag"),le=Object(r.o)("sqlObject"),se=Object(r.q)(le,(function(e){return e.structure})),de=Object(r.q)(le,(function(e){return e.loading})),ue=Object(r.q)(de,(function(e){return e.length?{messages:e.map((function(e){return J[e]}))}:null})),pe=function(e){return e.dbConnections},me=Object(r.q)((function(e){return e.sqlObjects}),(function(e){return e.list})),fe=Object(r.q)(pe,(function(e){return e.list})),be=Object(r.q)(pe,(function(e){return e.current})),he=Object(r.q)(pe,(function(e){if(e.current&&e.list.length)return e.list.find((function(t){return t.connectionName===e.current}))})),ge=Object(r.o)("router"),xe=(y=ge,S=Object(r.q)(y,(function(e){return e&&e.state})),j=Object(r.q)(S,(function(e){if(e){for(var t=e.root;t.firstChild;)t=t.firstChild;return t}})),Object(r.q)(j,(function(e){return e&&e.queryParams})),Object(r.q)(j,(function(e){return e&&e.params})),Object(r.q)(j,(function(e){return e&&e.data})),Object(r.q)(S,(function(e){return e&&e.url}))),ve=Object(r.q)(ge,(function(e,t){if(void 0===t&&(t=null),!e.state)return{};for(var n=e.state.root,i=Object(l.a)({},n.params);n.firstChild;)n=n.firstChild,i=Object(l.a)(Object(l.a)({},i),n.params);return t?Object.entries(i).reduce((function(e,n){var i=n[0],a=n[1];return t.includes(i)&&(e[i]=a),e}),{}):i})),ye=Object(r.q)(ve,(function(e,t){return e[t]})),Se=function(){function e(e,t,n,i){var a=this;this.actions$=e,this.sqlDb=t,this.store=n,this.router=i,this.loadSqlObjectStructure$=this.actions$.pipe(Object(c.e)(B),Object(u.a)(this.store),Object(ee.a)((function(e){var t=e[0].dbObject;return a.sqlDb.getMetaDataObject(e[1].dbConnections.current,t.schemaName,t.objectName,t.objectType).pipe(Object(te.a)((function(e){return _({structure:e})})),Object(ne.a)((function(e){return Object(Z.a)(new ae(e.message),_({}))})))}))),this.saveSqlObjectStructure$=this.actions$.pipe(Object(c.e)(Q),Object(u.a)(this.store),Object(ee.a)((function(e){var t=e[0].structure,n=e[1];return Object(ce.d)(t,n.sqlObject.structure)?[G(),{type:"Sql structure not changed"}]:a.sqlDb.generateObject(n.dbConnections.current,t).pipe(Object(ee.a)((function(e){return[new M(n.dbConnections.current),_({structure:e}),G(),new re("SQL Structure saved")]})),Object(ne.a)((function(e){return Object(Z.a)(new ae(Object(ce.i)(e)))})))}))),this.deletedSqlObject$=Object(c.d)((function(){return a.actions$.pipe(Object(c.e)(z),Object(u.a)(a.store.select(be)),Object(ee.a)((function(e){var t=e[1];return a.router.navigate(["/database",t]),[new re("SQL Object deleted"),new M(t),_({})]})))})),this.refreshSqlObject$=Object(c.d)((function(){return a.actions$.pipe(Object(c.e)(U),Object(te.a)((function(e){return B({dbObject:e.dbObject})})))})),this.loadedSqlObject$=this.actions$.pipe(Object(c.e)(_),Object(u.a)(this.store),Object(te.a)((function(e){var t=e[0].structure,n=["/database",e[1].dbConnections.current];if(t){var i=t.schemaName,r=t.objectName,o=t.objectType;o===H.g.View?n.push("view"):o===H.g.Procedure&&n.push("procedure"),n=Object(l.i)(n,[i,r]),a.router.navigate(n)}return{type:"Route checked after table structure update"}})))}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](c.a),s["\u0275\u0275inject"](oe.f),s["\u0275\u0275inject"](r.h),s["\u0275\u0275inject"](d.f))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),Object(l.c)([Object(c.b)(),Object(l.f)("design:type",Object)],e.prototype,"loadSqlObjectStructure$",void 0),Object(l.c)([Object(c.b)(),Object(l.f)("design:type",Object)],e.prototype,"saveSqlObjectStructure$",void 0),Object(l.c)([Object(c.b)(),Object(l.f)("design:type",Object)],e.prototype,"loadedSqlObject$",void 0),e}(),je=function(){function e(e,t,n){var i=this;this.actions$=e,this.notificationService=t,this.sqlDb=n,this.loadSqlObjects$=this.actions$.pipe(Object(c.e)(q.LOAD_SQL_OBJECTS),Object(ee.a)((function(e){return i.sqlDb.getObjects(e.payload).pipe(Object(te.a)((function(e){return new k(e)})),Object(ne.a)((function(e){return Object(Z.a)(new k([]),new ae(e.message))})))}))),this.errorHandler$=this.actions$.pipe(Object(c.e)(ie.ERROR),Object(te.a)((function(e){var t=e.payload;return i.notificationService.open({message:t,type:H.f.DANGER}),{type:"[DB Manager] Shown Error: "+t}}))),this.successHandler$=this.actions$.pipe(Object(c.e)(ie.SUCCESS),Object(te.a)((function(e){var t=e.payload;return i.notificationService.open({message:t,type:H.f.SUCCESS}),{type:"[DB Manager] Shown Success: "+t}})))}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](c.a),s["\u0275\u0275inject"](oe.e),s["\u0275\u0275inject"](oe.f))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),Object(l.c)([Object(c.b)(),Object(l.f)("design:type",Object)],e.prototype,"loadSqlObjects$",void 0),Object(l.c)([Object(c.b)(),Object(l.f)("design:type",Object)],e.prototype,"errorHandler$",void 0),Object(l.c)([Object(c.b)(),Object(l.f)("design:type",Object)],e.prototype,"successHandler$",void 0),e}(),Oe=n("OaQ9"),we=n("VnD/"),Ce=n("ad02"),Ee=n("ny24"),Ne=n("K9Ia"),Te=n("iFvM"),Ie=n("7mwo"),De=n("Xn/w");function Fe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"li",6),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275elementStart"](2,"a",7),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"](2).onConnectionSelect(e.connectionName)})),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4,"\n    "),s["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](i.connectionName)}}function Re(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ul",4),s["\u0275\u0275text"](1,"\n    "),s["\u0275\u0275template"](2,Fe,5,1,"li",5),s["\u0275\u0275pipe"](3,"async"),s["\u0275\u0275text"](4,"\n  "),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",s["\u0275\u0275pipeBind1"](3,1,n.connections$))}}var qe=function(){function e(e,t){this.router=e,this.store=t}return e.prototype.ngOnInit=function(){this.connections$=this.store.select(fe),this.selectedConnection$=this.store.select(ye,"connectionName")},e.prototype.onConnectionSelect=function(e){this.router.navigate(["/database",e])},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.f),s["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-connections"]],decls:11,vars:3,consts:[["dropdown","","placement","bottom right",1,"btn-group","align-self-center"],["id","connections-btn-group","dropdownToggle","","type","button","title","Select connection","aria-controls","dropdown-menu-connections","tabindex","0","role","button",1,"btn","btn-light","dropdown-toggle","btn-sm","m-0"],[1,"caret"],["id","dropdown-menu-connections","class","dropdown-menu dropdown-menu-right","role","menu","aria-labelledby","connections-btn-group",4,"dropdownMenu"],["id","dropdown-menu-connections","role","menu","aria-labelledby","connections-btn-group",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"button",1),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"async"),s["\u0275\u0275element"](5,"span",2),s["\u0275\u0275text"](6,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n\n  "),s["\u0275\u0275template"](8,Re,5,3,"ul",3),s["\u0275\u0275text"](9,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](10,"\n")),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("\n    ",s["\u0275\u0275pipeBind1"](4,1,t.selectedConnection$),"\n    "))},directives:[N.a,N.d,N.b,i.NgForOf],pipes:[i.AsyncPipe],styles:[""],changeDetection:0}),e}(),Me=n("GXwU"),ke=n("fQZA"),Ve=n("qaSM"),$e=["listView"],Le=function(e){return["/database",e,"sql-query"]},Ae=function(e){return["/database",e]};function Pe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ul",11),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275elementStart"](2,"li",12),s["\u0275\u0275elementStart"](3,"a",13),s["\u0275\u0275text"](4,"SQL Query"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](5,"\n      "),s["\u0275\u0275elementStart"](6,"li",12),s["\u0275\u0275elementStart"](7,"a",13),s["\u0275\u0275text"](8,"Table"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](9,"\n    "),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction1"](2,Le,n.connectionName)),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction1"](4,Ae,n.connectionName))}}var Be=function(e,t,n){return["/database",e,t,n]};function _e(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"a",15),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275element"](2,"i",16),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,i=s["\u0275\u0275nextContext"]();s["\u0275\u0275propertyInterpolate"]("title",n.objectType),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction3"](4,Be,i.connectionName,n.schemaName,n.objectName)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"]("\n      ",n.schemaName,".",n.objectName,"\n    ")}}var ze=function(e,t,n){return["/database",e,"view",t,n]};function Qe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"a",15),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275element"](2,"i",17),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,i=s["\u0275\u0275nextContext"]();s["\u0275\u0275propertyInterpolate"]("title",n.objectType),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction3"](4,ze,i.connectionName,n.schemaName,n.objectName)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"]("\n      ",n.schemaName,".",n.objectName,"\n    ")}}var Ge=function(e,t,n){return["/database",e,"procedure",t,n]};function Ue(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"a",15),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275element"](2,"i",18),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,i=s["\u0275\u0275nextContext"]();s["\u0275\u0275propertyInterpolate"]("title",n.objectType),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction3"](4,Ge,i.connectionName,n.schemaName,n.objectName)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"]("\n      ",n.schemaName,".",n.objectName,"\n    ")}}function He(e,t){if(1&e&&(s["\u0275\u0275text"](0,"\n    "),s["\u0275\u0275template"](1,_e,4,8,"a",14),s["\u0275\u0275text"](2,"\n    "),s["\u0275\u0275template"](3,Qe,4,8,"a",14),s["\u0275\u0275text"](4,"\n    "),s["\u0275\u0275template"](5,Ue,4,8,"a",14),s["\u0275\u0275text"](6,"\n  ")),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","Table"===n.objectType),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf","View"===n.objectType),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf","Procedure"===n.objectType)}}var We=function(e,t,n){return{"fa-table":e,"fa-cubes":t,"fa-file-code-o":n}};function Je(e,t){if(1&e&&(s["\u0275\u0275text"](0,"\n    "),s["\u0275\u0275element"](1,"i",19),s["\u0275\u0275text"](2,"\n  ")),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction3"](1,We,"Table"===n.value,"View"===n.value,"Procedure"===n.value))}}function Ke(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275text"](1,"\n    "),s["\u0275\u0275elementStart"](2,"div",21),s["\u0275\u0275text"](3,"\n      "),s["\u0275\u0275elementStart"](4,"span",22),s["\u0275\u0275text"](5,"Loading..."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6,"\n    "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n"),s["\u0275\u0275elementEnd"]())}var Ye=function(){function e(e,t,n){this.store=e,this.dialogService=t,this.router=n,this.destroy$=new Ne.a}return e.prototype.ngOnInit=function(){var e=this;this.list$=this.store.select(me).pipe(Object(Ee.a)(this.destroy$)),this.store.select(ye,"connectionName").pipe(Object(we.a)((function(e){return Boolean(e)})),Object(Ee.a)(this.destroy$)).subscribe((function(t){e.connectionName=t,e.store.dispatch(new M(e.connectionName))})),this.store.select(se).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.listView.selectItem(t)})),this.store.select(pe).subscribe((function(t){e.connections=t.list})),this.loading$=this.store.select((function(e){return e.sqlObjects.loading}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.areObjectsEqual=function(e,t){return e&&t&&e.objectName===t.objectName&&e.schemaName===t.schemaName},e.prototype.refresh=function(){this.store.dispatch(U({dbObject:this.listView.selectedItem}))},e.prototype.import=function(){var e=this,t=this.dialogService.open(Me.a,{class:"modal-xl full-height",keyboard:!1});t.config={connection:this.connections.find((function(t){return t.connectionName===e.connectionName})),connections:this.connections},t.init.pipe(Object(ee.a)((function(){return t.component.import}))).subscribe((function(t){var n=t.metaData,i=t.connection;t.newTable&&e.store.dispatch(new M(i)),e.router.navigate(["/database",i,n.schemaName,n.objectName])}))},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.h),s["\u0275\u0275directiveInject"](oe.b),s["\u0275\u0275directiveInject"](d.f))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sql-objects"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275staticViewQuery"]($e,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.listView=n.first)},decls:32,vars:7,consts:[[1,"toolbar","mb-2"],["dropdown","",1,"btn-group","mr-2"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["group","objectType","orderBy","id",1,"d-flex","h-100","overflow-auto",3,"comparator","list"],["listView",""],["icon",""],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu"],["role","menuitem"],[1,"dropdown-item",3,"routerLink"],["class","p-1 pl-4 btn-link w-100",3,"routerLink","title",4,"ngIf"],[1,"p-1","pl-4","btn-link","w-100",3,"routerLink","title"],[1,"fa","fa-table"],[1,"fa","fa-cubes"],[1,"fa","fa-file-code-o"],[1,"fa","mx-1",3,"ngClass"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275text"](3,"\n    "),s["\u0275\u0275elementStart"](4,"button",2),s["\u0275\u0275text"](5,"New "),s["\u0275\u0275element"](6,"span",3),s["\u0275\u0275text"](7,"\n    "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](8,"\n    "),s["\u0275\u0275template"](9,Pe,10,6,"ul",4),s["\u0275\u0275text"](10,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](11,"\n  "),s["\u0275\u0275elementStart"](12,"button",5),s["\u0275\u0275listener"]("click",(function(){return t.refresh()})),s["\u0275\u0275text"](13,"\n    Refresh\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](14,"\n  "),s["\u0275\u0275elementStart"](15,"button",6),s["\u0275\u0275listener"]("click",(function(){return t.import()})),s["\u0275\u0275text"](16,"\n    Import\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](17,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](18,"\n"),s["\u0275\u0275elementStart"](19,"app-list-view",7,8),s["\u0275\u0275pipe"](21,"async"),s["\u0275\u0275text"](22,"\n  "),s["\u0275\u0275template"](23,He,7,3,"ng-template"),s["\u0275\u0275text"](24,"\n  "),s["\u0275\u0275template"](25,Je,3,5,"ng-template",null,9,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275text"](27,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](28,"\n"),s["\u0275\u0275template"](29,Ke,8,0,"div",10),s["\u0275\u0275pipe"](30,"async"),s["\u0275\u0275text"](31,"\n")),2&e&&(s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("comparator",t.areObjectsEqual)("list",s["\u0275\u0275pipeBind1"](21,3,t.list$)),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](30,5,t.loading$)))},directives:[N.a,N.d,N.b,ke.a,i.NgIf,d.h,i.NgClass,Ve.a],pipes:[i.AsyncPipe],styles:["[_nghost-%COMP%]{position:relative}"]}),e}();function Xe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",7),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().openSqlConnectionForm()})),s["\u0275\u0275text"](1,"Edit"),s["\u0275\u0275elementEnd"]()}}var Ze=function(){function e(e,t){this.store=e,this.dialogService=t,this.layoutConfig={icon:"assets/img/rc-logo-64x64.png",smIcon:"assets/img/rc-logo-36x36.png",appName:"database-manager"},this.destroy$=new Ne.a}return e.prototype.ngOnInit=function(){var e=this;this.store.select(ye,"connectionName").pipe(Object(we.a)((function(e){return Boolean(e)})),Object(Ce.a)(),Object(Ee.a)(this.destroy$)).subscribe((function(t){e.store.dispatch(new V(t))})),this.store.select(xe).pipe(Object(Ee.a)(this.destroy$),Object(ee.a)((function(t){return e.store.select(ve,["schemaName","objectName"]).pipe(Object(Ce.a)((function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),Object(Ee.a)(e.destroy$),Object(te.a)((function(e){return{params:e,url:t}})))}))).subscribe((function(t){var n=t.params,i=t.url,a=n.schemaName,r=n.objectName;if(a&&r){var o=Object(Te.p)(i);e.store.dispatch(B({dbObject:{schemaName:a,objectName:r,objectType:o}}))}else e.store.dispatch(_({}))})),this.store.select(he).subscribe((function(t){e.connection=t}))},e.prototype.openSqlConnectionForm=function(){this.dialogService.open(Ie.a,{class:"modal-lg full-height"}).config=this.connection},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.h),s["\u0275\u0275directiveInject"](oe.b))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-manager-layout"]],decls:20,vars:2,consts:[[3,"config"],["title","",1,"mb-0","ml-0","top-sub-header","w-md-down-50"],["header",""],[1,"ml-auto","d-flex","mr-2"],["class","btn btn-light btn-sm align-self-center mr-2",3,"click",4,"ngIf"],["sidebar","",1,"h-100","w-100","py-2","pl-2","d-flex","flex-column"],["content",""],[1,"btn","btn-light","btn-sm","align-self-center","mr-2",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"app-layout",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"h2",1),s["\u0275\u0275text"](3,"WORKSHEET "),s["\u0275\u0275elementStart"](4,"span"),s["\u0275\u0275text"](5,"SYSTEMS"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6," - Database"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n  "),s["\u0275\u0275elementContainerStart"](8,2),s["\u0275\u0275text"](9,"\n    "),s["\u0275\u0275element"](10,"app-db-connections",3),s["\u0275\u0275text"](11,"\n    "),s["\u0275\u0275template"](12,Xe,2,0,"button",4),s["\u0275\u0275text"](13,"\n  "),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275text"](14,"\n  "),s["\u0275\u0275element"](15,"app-sql-objects",5),s["\u0275\u0275text"](16,"\n  "),s["\u0275\u0275element"](17,"router-outlet",6),s["\u0275\u0275text"](18,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](19,"\n")),2&e&&(s["\u0275\u0275property"]("config",t.layoutConfig),s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngIf",t.connection&&t.connection.isAdmin))},directives:[De.a,qe,i.NgIf,Ye,d.j],styles:[""]}),e}(),et=function(){function e(e,t,n){this.store=e,this.dbConnnectionsService=t,this.router=n}return e.prototype.canActivate=function(){var e=this;return this.store.select(ye,"connectionName").pipe(Object(ee.a)((function(t){return t?e.dbConnnectionsService.loadMyDbConnections().pipe(Object(ne.a)((function(e){return Object(Z.a)([])})),Object(te.a)((function(n){try{e.store.dispatch(new $(n))}catch(i){return!1}return n.map((function(e){return e.connectionName.toLowerCase()})).includes(t.toLowerCase())}))):(e.router.navigate(["/login"]),Object(Z.a)(!1))})))},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](r.h),s["\u0275\u0275inject"](oe.a),s["\u0275\u0275inject"](d.f))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),tt=n("xpqn");function nt(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"app-db-view",4),s["\u0275\u0275listener"]("viewSaved",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onSave(e)}))("deleted",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onDeleted()})),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("saveBtn",!0)("dataObject",i.dataObject)("connection",i.connection)}}function it(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h5"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n)}}function at(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",5),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275elementStart"](2,"div",6),s["\u0275\u0275text"](3,"\n        "),s["\u0275\u0275elementStart"](4,"span",7),s["\u0275\u0275text"](5,"Loading..."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6,"\n      "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n      "),s["\u0275\u0275template"](8,it,2,1,"h5",8),s["\u0275\u0275text"](9,"\n    "),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",n.loading.messages)}}var rt=function(){function e(e){this.store=e,this.destroy$=new Ne.a}return e.prototype.ngOnInit=function(){var e=this;this.store.select(se).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.dataObject=t})),this.store.select(ue).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.loading=t})),this.store.select(he).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.connection=t}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.onDeleted=function(){this.store.dispatch(z())},e.prototype.onSave=function(e){this.store.dispatch(_({structure:e}))},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-view-content"]],decls:10,vars:3,consts:[[1,"tabset-fx","sql-object-tab"],[1,"h-100","position-relative",3,"heading"],["class","h-100",3,"saveBtn","dataObject","connection","viewSaved","deleted",4,"ngIf"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"h-100",3,"saveBtn","dataObject","connection","viewSaved","deleted"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"tabset",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"tab",1),s["\u0275\u0275text"](3,"\n    "),s["\u0275\u0275template"](4,nt,1,3,"app-db-view",2),s["\u0275\u0275text"](5,"\n    "),s["\u0275\u0275template"](6,at,10,1,"div",3),s["\u0275\u0275text"](7,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](8,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](9,"\n")),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("heading",(null==t.dataObject?null:t.dataObject.objectName)||"Create view"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.loading&&t.dataObject),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.loading))},directives:[C.d,C.a,i.NgIf,tt.a,i.NgForOf],styles:[""]}),e}(),ot=n("AXyZ");function ct(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h5"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n)}}function lt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",4),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275elementStart"](2,"div",5),s["\u0275\u0275text"](3,"\n        "),s["\u0275\u0275elementStart"](4,"span",6),s["\u0275\u0275text"](5,"Loading..."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6,"\n      "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n      "),s["\u0275\u0275template"](8,ct,2,1,"h5",7),s["\u0275\u0275text"](9,"\n    "),s["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf;s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",n.messages)}}function st(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"app-db-table",9),s["\u0275\u0275listener"]("deleted",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onTableDeleted()}))("tableSaved",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onSave(e)})),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("dataObject",i.dataObject)("connection",i.connection)("saveBtn",!0)}}function dt(e,t){if(1&e&&(s["\u0275\u0275text"](0,"\n      "),s["\u0275\u0275template"](1,st,1,3,"app-db-table",8),s["\u0275\u0275text"](2,"\n    ")),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.dataObject)}}var ut=function(){function e(e){this.store=e,this.destroy$=new Ne.a}return e.prototype.ngOnInit=function(){var e=this;this.store.select(se).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.dataObject=t})),this.loading$=this.store.select(ue),this.store.select(he).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.connection=t}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.onTableDeleted=function(){this.store.dispatch(z())},e.prototype.onSave=function(e){this.store.dispatch(_({structure:e}))},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-table-content"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](ot.a,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.dbTable=n.first)},decls:12,vars:5,consts:[[1,"tabset-fx","sql-object-tab"],[1,"h-100","position-relative",3,"heading"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[4,"ngFor","ngForOf"],["class","h-100",3,"dataObject","connection","saveBtn","deleted","tableSaved",4,"ngIf"],[1,"h-100",3,"dataObject","connection","saveBtn","deleted","tableSaved"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tabset",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"tab",1),s["\u0275\u0275text"](3,"\n    "),s["\u0275\u0275template"](4,lt,10,1,"div",2),s["\u0275\u0275pipe"](5,"async"),s["\u0275\u0275text"](6,"\n    "),s["\u0275\u0275template"](7,dt,3,1,"ng-template",null,3,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275text"](9,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](10,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](11,"\n")),2&e){var n=s["\u0275\u0275reference"](8);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("heading",(null==t.dataObject?null:t.dataObject.objectName)||"Create table"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](5,3,t.loading$))("ngIfElse",n)}},directives:[C.d,C.a,i.NgIf,i.NgForOf,ot.a],pipes:[i.AsyncPipe],styles:["tabset.sql-object-tab[_ngcontent-%COMP%] > .tab-content[_ngcontent-%COMP%]{position:relative}.spinner[_ngcontent-%COMP%]{left:0}"]}),e}(),pt=n("8gf/");function mt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h5"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n)}}function ft(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",4),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275elementStart"](2,"div",5),s["\u0275\u0275text"](3,"\n        "),s["\u0275\u0275elementStart"](4,"span",6),s["\u0275\u0275text"](5,"Loading..."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6,"\n      "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n      "),s["\u0275\u0275template"](8,mt,2,1,"h5",7),s["\u0275\u0275text"](9,"\n    "),s["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf;s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",n.messages)}}function bt(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"app-db-procedure",9),s["\u0275\u0275listener"]("procedureSaved",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onSave(e)}))("procedureDeleted",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onDeleted()})),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("dataObject",i.dataObject)("connection",i.connection)("saveBtn",!0)}}function ht(e,t){if(1&e&&(s["\u0275\u0275text"](0,"\n      "),s["\u0275\u0275template"](1,bt,1,3,"app-db-procedure",8),s["\u0275\u0275text"](2,"\n    ")),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.dataObject)}}var gt=function(){function e(e){this.store=e,this.destroy$=new Ne.a}return e.prototype.ngOnInit=function(){var e=this;this.store.select(se).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.dataObject=t})),this.loading$=this.store.select(ue),this.store.select(he).pipe(Object(Ee.a)(this.destroy$)).subscribe((function(t){e.connection=t}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.onSave=function(e){this.store.dispatch(_({structure:e}))},e.prototype.onDeleted=function(){this.store.dispatch(z())},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-procedure-content"]],decls:12,vars:5,consts:[[1,"tabset-fx","sql-object-tab"],[1,"h-100","position-relative",3,"heading"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[4,"ngFor","ngForOf"],["class","h-100",3,"dataObject","connection","saveBtn","procedureSaved","procedureDeleted",4,"ngIf"],[1,"h-100",3,"dataObject","connection","saveBtn","procedureSaved","procedureDeleted"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tabset",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"tab",1),s["\u0275\u0275text"](3,"\n    "),s["\u0275\u0275template"](4,ft,10,1,"div",2),s["\u0275\u0275pipe"](5,"async"),s["\u0275\u0275text"](6,"\n    "),s["\u0275\u0275template"](7,ht,3,1,"ng-template",null,3,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275text"](9,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](10,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](11,"\n")),2&e){var n=s["\u0275\u0275reference"](8);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("heading",t.dataObject?t.dataObject.objectName:"Create table"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](5,3,t.loading$))("ngIfElse",n)}},directives:[C.d,C.a,i.NgIf,i.NgForOf,pt.a],pipes:[i.AsyncPipe],styles:[""]}),e}(),xt=n("FbUF"),vt=[{path:":connectionName",component:Ze,canActivate:[et],children:[{component:ut,path:""},{component:ut,path:":schemaName/:objectName"},{component:rt,path:"view"},{component:rt,path:"view/:schemaName/:objectName"},{component:function(){function e(e){this.store=e}return e.prototype.ngOnInit=function(){var e=this;this.store.select(pe).subscribe((function(t){var n=t.list;e.connection=t.current,e.connections=n}))},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-query-content"]],decls:8,vars:2,consts:[[1,"tabset-fx","sql-object-tab"],["heading","Sql Query",1,"h-100","position-relative"],[1,"h-100","w-100",3,"connections","defaultConnection"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"tabset",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"tab",1),s["\u0275\u0275text"](3,"\n    "),s["\u0275\u0275element"](4,"app-db-query",2),s["\u0275\u0275text"](5,"\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6,"\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](7,"\n")),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("connections",t.connections)("defaultConnection",t.connection))},directives:[C.d,C.a,xt.a],styles:[""]}),e}(),path:"sql-query"},{component:gt,path:"procedure/:schemaName/:objectName"}]}],yt=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[d.i.forChild(vt)],d.i]}),e}();n.d(t,"DatabaseManagerModule",(function(){return St}));var St=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[et,oe.b],imports:[[i.CommonModule,a.FormsModule,ce.c,r.j.forRoot(X),w.forRoot(),c.c.forRoot([je,Se]),yt,o.a.instrument({maxAge:25,logOnly:R.a.production}),D.WjInputModule,E.b.forRoot(),T.b.forRoot(),N.c.forRoot(),C.c.forRoot(),I.b.forRoot(),Oe.a,F.b]]}),e}()},"2+cH":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("mrSG"),a=n("01LN");function r(e,t){var n=e.added,r=e.edited,o=e.deleted,c=[],l={};if(r&&(c=Object(i.i)(c,r)),n&&(c=Object(i.i)(c,n)),c.length&&(l.data=c),o){var s=o.filter((function(e){return Boolean(e)})).map((function(e){var n,i,r=null===(n=t.primaryKeys)||void 0===n?void 0:n.map((function(e){return e.fieldName}));return(null===(i=r)||void 0===i?void 0:i.length)||(r=Object.keys(e)),r.reduce((function(t,n){var i=e[n];return i instanceof Date&&(i=Object(a.dateToString)(i)),t[n]=i,t}),{})}));s.length&&(l.dataToDelete=s)}return l}},"8gf/":function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("mrSG"),a=n("TYT/"),r=n("tcrU"),o=n("bU/s"),c=n("K9Ia"),l=n("bne5"),s=n("ny24"),d=n("Gi3i"),u=n("ZF+8"),p=n("M0ag"),m=n("TwVa"),f=n("Valr"),b=n("zFFb"),h=n("aYyy"),g=n("UkaQ"),x=n("xAFk"),v=n("QJY3"),y=n("u/pq"),S=["sqlEditor"];function j(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",36),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onSave()})),a["\u0275\u0275text"](1,"Save"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",!i.isChanged)}}function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"wj-flex-grid-column",37),a["\u0275\u0275text"](1,"\n                "),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("header",n.headerText)("binding",n.bindingName)("dataType",n.dataType)}}function w(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",38),a["\u0275\u0275text"](1,"\n  "),a["\u0275\u0275elementStart"](2,"div",39),a["\u0275\u0275text"](3,"\n    "),a["\u0275\u0275elementStart"](4,"span",40),a["\u0275\u0275text"](5,"Loading..."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7,"\n"),a["\u0275\u0275elementEnd"]())}var C=function(){function e(e,t,n){this.dbService=e,this.notificationService=t,this.dialogService=n,this.procedureChanged=new a.EventEmitter,this.procedureSaved=new a.EventEmitter,this.procedureDeleted=new a.EventEmitter,this.isChanged=!1,this.data=null,this.fields=[],this.collection=new r.CollectionView,this.codeContentSize=50,this.parametersSize=30,this.modeState={code:!0,result:!0,parameters:!0},this.loading=!1,this.parameters=[],this.destroy$=new c.a}return e.prototype.ngOnInit=function(){var e=this;this.sqlEditor=Object(o.edit)(this.sqlElement.nativeElement,{mode:"ace/mode/sql",autoScrollEditorIntoView:!0,value:this.dataObject.sqlText||"",theme:Object(p.g)()}),Object(l.a)(this.sqlEditor,"change").pipe(Object(s.a)(this.destroy$),Object(d.a)(200)).subscribe((function(){var t=e.sqlEditor.getValue();e.isChanged=e.dataObject.sqlText!==t;var n=e.isChanged?{structure:Object(i.a)(Object(i.a)({},e.dataObject),{sqlText:t}),connection:e.connection}:null;e.procedureChanged.emit(n)})),this.collection.sourceCollection=(this.dataObject.parameters||[]).map((function(e){return{name:e.parameterName,value:null,isNullable:e.isNullable}}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.ngOnChanges=function(e){e.dataObject.firstChange||(this.isChanged=!1)},e.prototype.onRun=function(){var e;return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r;return Object(i.e)(this,(function(o){switch(o.label){case 0:this.loading=!0,t=this.collection.sourceCollection.reduce((function(e,t){return e[t.name.replace("@","")]=t.value,e}),{}),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.dbService.executeQuery(this.connection.connectionName,{commandType:"StoredProcedure",params:t,sql:this.dataObject.schemaName+"."+this.dataObject.objectName}).toPromise()];case 2:return n=o.sent(),this.fields=n.fields.map((function(e){return{bindingName:e.fieldName,dataType:m.o[m.p[e.dataType]],headerText:e.fieldName}})),a=null===(e=n.table.fieldNames)||void 0===e?void 0:e.map((function(e){var t=n.fields.find((function(t){return t.fieldName===e}));return t?m.p[t.dataType]:null})),this.data=Object(p.n)(Object(i.a)(Object(i.a)({},n.table),{dataTypes:a})),[3,5];case 3:return r=o.sent(),this.notificationService.open({type:m.f.DANGER,message:Object(p.i)(r)}),[3,5];case 4:return this.loading=!1,[7];case 5:return[2]}}))}))},e.prototype.onSave=function(){var e=this,t=this.sqlEditor.getValue();this.dbService.generateObject(this.connection.connectionName,Object(i.a)(Object(i.a)({},this.dataObject),{sqlText:t})).subscribe((function(t){e.procedureSaved.emit(t)}))},e.prototype.onDelete=function(){var e=this;if(this.dataObject){var t=this.dataObject,n=t.objectName,i=t.schemaName;this.dialogService.confirmation("Delete procedure "+i+"."+n+". Are you sure?").subscribe((function(t){t&&e.dbService.deleteObject(e.connection.connectionName,e.dataObject).subscribe((function(){e.notificationService.open({type:m.f.SUCCESS,message:"Procedure "+i+"."+n+" deleted"}),e.procedureDeleted.emit()}),(function(t){e.notificationService.open({type:m.f.DANGER,message:Object(p.i)(t)})}))}))}},e.prototype.onModeState=function(e){var t=this.modeState.parameters||this.modeState.result;this.codeContentSize=this.modeState.code&&!t?100:this.modeState.code&&t?50:0,this.parametersSize=this.modeState.parameters&&!this.modeState.result?100:this.modeState.parameters&&this.modeState.result?30:0},e.prototype.resize=function(){},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.f),a["\u0275\u0275directiveInject"](u.e),a["\u0275\u0275directiveInject"](u.b))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-procedure"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275staticViewQuery"](S,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sqlElement=n.first)},inputs:{dataObject:"dataObject",connection:"connection",saveBtn:"saveBtn"},outputs:{procedureChanged:"procedureChanged",procedureSaved:"procedureSaved",procedureDeleted:"procedureDeleted"},features:[a["\u0275\u0275NgOnChangesFeature"]()],decls:97,vars:35,consts:[[1,"mb-2","d-flex"],[1,"m-0","align-self-center"],[1,"row","mx-0","ml-auto"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary ml-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-secondary","ml-2",3,"click"],[3,"disabled","dataObject","grid"],[1,"card","overflow-hidden","mb-0","w-100","h-100"],[1,"card-body","d-flex","p-0","flex-column","h-100","position-relative"],[3,"useTransition","gutterSize","dragEnd","transitionEnd"],[1,"d-flex","mb-0","position-relative",3,"size"],["area0","asSplitArea"],["left","",1,"h-100","p-2","w-100"],["sqlEditor",""],[1,"d-flex","overflow-auto","flex-column","explorer-section",3,"size"],["area1","asSplitArea"],["direction","vertical","restrictMove","true",3,"useTransition","gutterSize"],[3,"size"],[1,"d-flex","flex-column","p-2"],[1,"mb-2"],["headersVisibility","Column",1,"h-100",3,"itemsSource","allowDelete","allowAddNew"],["header","Parameter","binding","name","dataType","String",3,"width","isReadOnly"],["header","Value","binding","value","width","*"],["header","Nullable","binding","isNullable","dataType","Boolean",3,"isReadOnly","width"],[1,"d-flex","flex-column","p-2","h-100"],[1,"h-100",3,"itemsSource","isReadOnly","itemsSourceChange"],["grid",""],[3,"header","binding","dataType",4,"ngFor","ngForOf"],[1,"btn-group","d-block","mode"],["ngDefaultControl","","btnCheckbox","","tabindex","0","role","button","name","mode-code","title","SQL Procedure panel",1,"btn","btn-secondary","btn-sm","cursor-pointer","mb-0",3,"ngModel","ngModelChange","click"],[1,"fa","fa-code","fa-lg"],["ngDefaultControl","","btnCheckbox","","tabindex","0","role","button","name","mode-result","title","Result panel",1,"btn","btn-secondary","btn-sm","cursor-pointer","mb-0",3,"ngModel","ngModelChange","click"],[1,"fa","fa-table","fa-lg"],["ngDefaultControl","","btnCheckbox","","tabindex","0","role","button","name","mode-parameters",1,"btn","btn-secondary","btn-sm","cursor-pointer","mb-0",3,"ngModel","ngModelChange","click"],[1,"fa","fa-check","fa-lg"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"btn","btn-primary","ml-2",3,"disabled","click"],[3,"header","binding","dataType"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275text"](1,"\n  "),a["\u0275\u0275elementStart"](2,"h5",1),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4,"\n  "),a["\u0275\u0275elementStart"](5,"div",2),a["\u0275\u0275text"](6,"\n    "),a["\u0275\u0275elementStart"](7,"button",3),a["\u0275\u0275listener"]("click",(function(){return t.onRun()})),a["\u0275\u0275text"](8,"Run"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](9,"\n      "),a["\u0275\u0275template"](10,j,2,1,"button",4),a["\u0275\u0275text"](11,"\n      "),a["\u0275\u0275elementStart"](12,"button",5),a["\u0275\u0275listener"]("click",(function(){return t.onDelete()})),a["\u0275\u0275text"](13,"Delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](14,"\n      "),a["\u0275\u0275element"](15,"app-export-menu",6),a["\u0275\u0275text"](16,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](17,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](18,"\n"),a["\u0275\u0275elementStart"](19,"div",7),a["\u0275\u0275text"](20,"\n  "),a["\u0275\u0275elementStart"](21,"div",8),a["\u0275\u0275text"](22,"\n    "),a["\u0275\u0275elementStart"](23,"as-split",9),a["\u0275\u0275listener"]("dragEnd",(function(){return t.resize()}))("transitionEnd",(function(){return t.resize()})),a["\u0275\u0275text"](24,"\n      "),a["\u0275\u0275elementStart"](25,"as-split-area",10,11),a["\u0275\u0275text"](27,"\n        "),a["\u0275\u0275element"](28,"div",12,13),a["\u0275\u0275text"](30,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](31,"\n      "),a["\u0275\u0275elementStart"](32,"as-split-area",14,15),a["\u0275\u0275text"](34,"\n        "),a["\u0275\u0275elementStart"](35,"as-split",16),a["\u0275\u0275text"](36,"\n          "),a["\u0275\u0275elementStart"](37,"as-split-area",17),a["\u0275\u0275text"](38,"\n            "),a["\u0275\u0275elementStart"](39,"div",18),a["\u0275\u0275text"](40,"\n              "),a["\u0275\u0275elementStart"](41,"h4",19),a["\u0275\u0275text"](42,"Parameters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](43,"\n              "),a["\u0275\u0275elementStart"](44,"wj-flex-grid",20),a["\u0275\u0275text"](45,"\n                "),a["\u0275\u0275element"](46,"wj-flex-grid-column",21),a["\u0275\u0275text"](47,"\n                "),a["\u0275\u0275element"](48,"wj-flex-grid-column",22),a["\u0275\u0275text"](49,"\n                "),a["\u0275\u0275element"](50,"wj-flex-grid-column",23),a["\u0275\u0275text"](51,"\n              "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](52,"\n            "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](53,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](54,"\n          "),a["\u0275\u0275elementStart"](55,"as-split-area",17),a["\u0275\u0275text"](56,"\n            "),a["\u0275\u0275elementStart"](57,"div",24),a["\u0275\u0275text"](58,"\n              "),a["\u0275\u0275elementStart"](59,"h4",19),a["\u0275\u0275text"](60,"Result"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](61,"\n              "),a["\u0275\u0275elementStart"](62,"wj-flex-grid",25,26),a["\u0275\u0275listener"]("itemsSourceChange",(function(e){return t.data=e})),a["\u0275\u0275text"](64,"\n                "),a["\u0275\u0275template"](65,O,2,3,"wj-flex-grid-column",27),a["\u0275\u0275text"](66,"\n                "),a["\u0275\u0275element"](67,"wj-flex-grid-filter"),a["\u0275\u0275text"](68,"\n              "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](69,"\n            "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](70,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](71,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](72,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](73,"\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](74,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](75,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](76,"\n"),a["\u0275\u0275elementStart"](77,"div",28),a["\u0275\u0275text"](78,"\n  "),a["\u0275\u0275elementStart"](79,"label",29),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.modeState.code=e}))("click",(function(){return t.onModeState("code")})),a["\u0275\u0275text"](80,"\n    "),a["\u0275\u0275element"](81,"i",30),a["\u0275\u0275text"](82," SQL Procedure\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](83,"\n  "),a["\u0275\u0275elementStart"](84,"label",31),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.modeState.result=e}))("click",(function(){return t.onModeState("result")})),a["\u0275\u0275text"](85,"\n    "),a["\u0275\u0275element"](86,"i",32),a["\u0275\u0275text"](87," Result\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](88,"\n  "),a["\u0275\u0275elementStart"](89,"label",33),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.modeState.parameters=e}))("click",(function(){return t.onModeState("parameters")})),a["\u0275\u0275text"](90,"\n    "),a["\u0275\u0275element"](91,"i",34),a["\u0275\u0275text"](92," Parameters\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](93,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](94,"\n"),a["\u0275\u0275template"](95,w,8,0,"div",35),a["\u0275\u0275text"](96,"\n")),2&e){var n=a["\u0275\u0275reference"](63);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate2"]("",t.dataObject.schemaName,".",t.dataObject.objectName,""),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",t.isChanged),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.saveBtn),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",!(null!=t.data&&t.data.length))("dataObject",t.dataObject)("grid",n),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("useTransition",!0)("gutterSize",50===t.codeContentSize?11:0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("size",t.codeContentSize),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("size",100-t.codeContentSize),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("useTransition",!0)("gutterSize",30===t.parametersSize?11:0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("size",t.parametersSize),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("itemsSource",t.collection)("allowDelete",!1)("allowAddNew",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("width",200)("isReadOnly",!0),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("isReadOnly",!0)("width",70),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("size",100-t.parametersSize),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("itemsSource",t.data)("isReadOnly",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.fields),a["\u0275\u0275advance"](14),a["\u0275\u0275classProp"]("active",t.modeState.code),a["\u0275\u0275property"]("ngModel",t.modeState.code),a["\u0275\u0275advance"](5),a["\u0275\u0275classProp"]("active",t.modeState.result),a["\u0275\u0275property"]("ngModel",t.modeState.result),a["\u0275\u0275advance"](5),a["\u0275\u0275classProp"]("active",t.modeState.parameters),a["\u0275\u0275property"]("ngModel",t.modeState.parameters),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.loading)}},directives:[f.NgIf,b.a,h.c,h.b,g.WjFlexGrid,g.WjFlexGridColumn,f.NgForOf,x.WjFlexGridFilter,v.DefaultValueAccessor,y.a,v.NgControlStatus,v.NgModel],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}"]}),e}()},AXyZ:function(e,t,n){"use strict";var i=n("TYT/"),a=n("K9Ia"),r=n("26FU"),o=n("67Y/"),c=n("xMyE"),l=n("ad02"),s=n("M0ag"),d=n("Xwp4"),u=n("cSvJ"),p=n("mrSG"),m=n("G5J1"),f=n("lMX+"),b=n("tcrU"),h=n("iFvM"),g=n("TwVa"),x=n("ZF+8"),v=n("9Z1F"),y=n("2+cH"),S=n("a5yf"),j=n("Valr"),O=n("QJY3"),w=n("uLXW"),C=n("UkaQ"),E=["form"],N=["grid"];function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",27),i["\u0275\u0275text"](1,"Save"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("disabled",!n.isChanged)}}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",28),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).onTableDelete()})),i["\u0275\u0275text"](1,"Delete"),i["\u0275\u0275elementEnd"]()}}function D(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"Schema Name is required."),i["\u0275\u0275elementEnd"]())}function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,D,2,0,"div",30),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](24);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.errors.required)}}function R(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"Table Name is required."),i["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,R,2,0,"div",30),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](35);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.errors.required)}}function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"form",1,2),i["\u0275\u0275listener"]("ngSubmit",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onSubmit()})),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementStart"](5,"h5",4),i["\u0275\u0275text"](6,"Table Information"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275template"](10,T,2,1,"button",6),i["\u0275\u0275text"](11,"\n      "),i["\u0275\u0275template"](12,I,2,0,"button",7),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n  "),i["\u0275\u0275elementStart"](16,"div",8),i["\u0275\u0275text"](17,"\n    "),i["\u0275\u0275elementStart"](18,"div",9),i["\u0275\u0275text"](19,"\n      "),i["\u0275\u0275elementStart"](20,"label",10),i["\u0275\u0275text"](21,"Schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n      "),i["\u0275\u0275elementStart"](23,"input",11,12),i["\u0275\u0275listener"]("input",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onUpdate()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().dataObjectForm.schemaName=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n      "),i["\u0275\u0275template"](26,F,4,1,"div",13),i["\u0275\u0275text"](27,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n    "),i["\u0275\u0275elementStart"](29,"div",14),i["\u0275\u0275text"](30,"\n      "),i["\u0275\u0275elementStart"](31,"label",15),i["\u0275\u0275text"](32,"Table Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n      "),i["\u0275\u0275elementStart"](34,"input",16,17),i["\u0275\u0275listener"]("input",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onUpdate()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().dataObjectForm.objectName=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](36,"\n      "),i["\u0275\u0275template"](37,q,4,1,"div",13),i["\u0275\u0275text"](38,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](39,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](40,"\n  "),i["\u0275\u0275elementStart"](41,"div",18),i["\u0275\u0275text"](42,"\n    "),i["\u0275\u0275elementStart"](43,"h5",19),i["\u0275\u0275text"](44,"Define Table Fields"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](45,"\n    "),i["\u0275\u0275elementStart"](46,"div",20),i["\u0275\u0275text"](47,"\n      "),i["\u0275\u0275elementStart"](48,"wj-flex-grid",21,22),i["\u0275\u0275listener"]("initialized",(function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275reference"](49);return i["\u0275\u0275nextContext"]().initializedGrid(e)}))("deletedRow",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onUpdate()})),i["\u0275\u0275text"](50,"\n        "),i["\u0275\u0275element"](51,"wj-flex-grid-column",23),i["\u0275\u0275text"](52,"\n        "),i["\u0275\u0275elementStart"](53,"wj-flex-grid-column",24),i["\u0275\u0275text"](54,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](55,"\n        "),i["\u0275\u0275element"](56,"wj-flex-grid-column",25),i["\u0275\u0275text"](57,"\n        "),i["\u0275\u0275element"](58,"wj-flex-grid-column",26),i["\u0275\u0275text"](59,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](60,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](61,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](62,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275reference"](24),r=i["\u0275\u0275reference"](35),o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",o.saveBtn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",o.dataObjectForm),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngModel",o.dataObjectForm.schemaName),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.invalid&&(a.dirty||a.touched)),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngModel",o.dataObjectForm.objectName),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",r.invalid&&(r.dirty||r.touched)),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("itemsSource",o.collection)("allowDelete",!0)("allowAddNew",!0)("itemFormatter",o.formatItem),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("width",50),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("minWidth",50)("width","*"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("dataMap",o.dataTypes),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("width",70)}}var k=function(){function e(e,t,n){var r=this;this.dialogService=e,this.dbService=t,this.notificatioService=n,this.dataTypes=Object.values(g.l),this.update=new i.EventEmitter,this.deletedTable=new i.EventEmitter,this.tableSaved=new i.EventEmitter,this.collection=new b.CollectionView,this.editCollectionMap=new Map,this.addCollectionSet=new Set,this.destroy$=new a.a,this.formatItem=function(e,t,n,i){var a=e.rows[t].dataItem,o=e.columns[n].binding,c=r.editCollectionMap.get(a);e.cellType===f.CellType.Cell&&a&&(r.addCollectionSet.has(a)?i.classList.add("added-item"):c&&c.hasOwnProperty(o)?i.classList.add("edited-item"):(i.classList.remove("added-item"),i.classList.remove("edited-item")))}}return e.prototype.ngOnInit=function(){this.dataObjectForm=Object(p.a)({},this.dataObject);var e=Object(s.m)(this.dataObject);Object(s.p)(Object(h.m)(this.collection.items),e)||(this.collection.sourceCollection=e)},e.prototype.ngOnChanges=function(e){var t=e.dataObject;t.firstChange||(this.dataObjectForm=Object(p.a)({},t.currentValue))},e.prototype.initializedGrid=function(e){var t=this;this.gridContext=Object(S.a)(e),e.cellEditEnded.addHandler((function(){return t.changeHandler()})),e.deletedRow.addHandler((function(){return t.changeHandler()})),this.collection.trackChanges=!0},e.prototype.changeHandler=function(){var e,t,n=Object(y.a)(this.gridContext.state,this.dataObject);this.isChanged=Boolean((null===(e=n.data)||void 0===e?void 0:e.length)||(null===(t=n.dataToDelete)||void 0===t?void 0:t.length)),this.onUpdate()},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.onUpdate=function(){this.update.emit(this.getCurrentState())},e.prototype.onTableDelete=function(){var e=this;if(this.dataObject){var t=this.dataObject,n=t.objectName,i=t.schemaName;this.dialogService.confirmation("Delete table "+i+"."+n+". Are you sure?").subscribe((function(t){t&&e.dbService.deleteObject(e.connection.connectionName,e.dataObject).pipe(Object(c.a)((function(){e.notificatioService.open({type:g.f.SUCCESS,message:"Table "+i+"."+n+" deleted."}),e.deletedTable.emit()})),Object(v.a)((function(t){return e.notificatioService.open({type:g.f.DANGER,message:Object(h.k)(t)}),m.a}))).toPromise()}))}},e.prototype.onSubmit=function(){var e=this;this.form.valid&&this.dbService.generateObject(this.connection.connectionName,this.getCurrentState()).subscribe((function(t){e.tableSaved.emit(t),e.gridContext.clear(),e.isChanged=!1,e.grid.refresh(!0)}))},e.prototype.getCurrentState=function(){return Object(p.a)(Object(p.a)({},this.dataObjectForm),{fields:Object(h.n)(this.collection.items),primaryKeys:Object(h.q)(this.collection.items)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](x.b),i["\u0275\u0275directiveInject"](x.f),i["\u0275\u0275directiveInject"](x.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-structure-editor"]],viewQuery:function(e,t){var n;1&e&&(i["\u0275\u0275viewQuery"](E,!0),i["\u0275\u0275viewQuery"](N,!0)),2&e&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.form=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.grid=n.first))},inputs:{dataObject:"dataObject",saveBtn:"saveBtn",connection:"connection"},outputs:{update:"update",deletedTable:"deletedTable",tableSaved:"tableSaved"},features:[i["\u0275\u0275NgOnChangesFeature"]()],decls:2,vars:1,consts:[["class","d-flex flex-column h-100 overflow-hidden",3,"ngSubmit",4,"ngIf"],[1,"d-flex","flex-column","h-100","overflow-hidden",3,"ngSubmit"],["form","ngForm"],["fxLayout","row","fxLayoutAlign","stretch center"],["fxFlex","",1,"col-sm-12","px-0"],[1,"row","mx-0"],["type","submit","class","btn btn-primary ml-auto mr-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],[1,"row","mx-0",2,"max-width","750px"],[1,"form-group","col-sm-3","px-0","mb-2"],["for","schemaName"],["type","text","id","schemaName","required","","name","schemaName","placeholder","Enter shema name",1,"form-control",3,"ngModel","input","ngModelChange"],["schemaName","ngModel"],["class","alert alert-danger py-1 px-2 m-0 w-100",4,"ngIf"],[1,"form-group","col-sm-9","pr-0","pl-2","mb-2"],["for","name"],["type","text","id","objectName","required","","name","objectName","placeholder","Enter Table name",1,"form-control",3,"ngModel","input","ngModelChange"],["objectName","ngModel"],[1,"d-flex","flex-fill","mx-0","flex-column","h-100","overflow-hidden",2,"max-width","750px"],[1,"col-sm-12","table-title","px-0"],[1,"col","fields-container","d-flex","h-100","px-0","mb-2","overflow-hidden"],[1,"h-100",3,"itemsSource","allowDelete","allowAddNew","itemFormatter","initialized","deletedRow"],["grid",""],["header","IsKey","binding","isKey","dataType","Boolean",3,"width"],["header","Field Name","binding","fieldName",3,"minWidth","width"],["header","Field Data Type","binding","dataType",3,"dataMap"],["header","Size","binding","size","dataType","Number",3,"width"],["type","submit",1,"btn","btn-primary","ml-auto","mr-1",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger","py-1","px-2","m-0","w-100"],[4,"ngIf"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,M,63,15,"form",0),i["\u0275\u0275text"](1,"\n")),2&e&&i["\u0275\u0275property"]("ngIf",t.dataObjectForm)},directives:[j.NgIf,O["\u0275angular_packages_forms_forms_y"],O.NgControlStatusGroup,O.NgForm,w.c,w.b,w.a,O.DefaultValueAccessor,O.RequiredValidator,O.NgControlStatus,O.NgModel,C.WjFlexGrid,C.WjFlexGridColumn],styles:[".table-title[_ngcontent-%COMP%] {\n      flex: 0;\n    }"]}),e}(),V=n("LRkE");function $(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n      "),i["\u0275\u0275element"](1,"i",7),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"async")),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" Structure ",i["\u0275\u0275pipeBind1"](3,1,n.isStructureChanged$)?"*":"","\n    ")}}function L(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h5"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function A(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"span",10),i["\u0275\u0275text"](5,"Loading..."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275template"](8,L,2,1,"h5",11),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf;i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngForOf",n.messages)}}function P(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n      "),i["\u0275\u0275element"](1,"i",12),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"async")),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" Data ",i["\u0275\u0275pipeBind1"](3,1,n.isDataChanged$)?"*":"","\n    ")}}n.d(t,"a",(function(){return B}));var B=function(){function e(){this.tableChange=new i.EventEmitter,this.tableSaved=new i.EventEmitter,this.deleted=new i.EventEmitter,this.loading$=new a.a,this.destroy$=new a.a,this.dataState$=new r.a({}),this.limitRowsCount=1e3,this.rowsCount=0}return e.prototype.ngOnInit=function(){var e=this;this.dataObjectState$=new r.a(this.dataObject),this.isStructureChanged$=this.dataObjectState$.pipe(Object(o.a)((function(t){return!Object(s.d)(e.dataObject,t)})),Object(c.a)((function(t){e.dataObjectState=t?e.dataObjectState$.value:null,e.emitChange()})),Object(l.a)()),this.isDataChanged$=this.dataState$.pipe(Object(c.a)((function(t){e.dataState=t,e.emitChange()})),Object(o.a)((function(e){var t,n;return Boolean((null===(t=e.data)||void 0===t?void 0:t.length)||(null===(n=e.dataToDelete)||void 0===n?void 0:n.length))})),Object(l.a)())},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.ngOnChanges=function(e){var t,n=e.dataObject;(null===(t=n)||void 0===t?void 0:t.firstChange)||this.dataObjectState$.next(n.currentValue)},e.prototype.onSave=function(e){this.tableSaved.emit(e)},e.prototype.emitChange=function(){this.dataObjectState||this.dataState&&Object.keys(this.dataState).length?this.tableChange.emit({connection:this.connection,structureChange:this.dataObjectState,dataChange:this.dataState,structure:this.dataObject}):this.tableChange.emit(null)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-table"]],inputs:{dataObject:"dataObject",connection:"connection",saveBtn:"saveBtn"},outputs:{tableChange:"tableChange",tableSaved:"tableSaved",deleted:"deleted"},features:[i["\u0275\u0275NgOnChangesFeature"]()],decls:23,vars:14,consts:[[3,"connection","sqlObject","limitChange","count"],[1,"tabset-fx"],[1,"position-relative"],["tabHeading",""],[1,"w-100","h-100",3,"saveBtn","dataObject","connection","update","deletedTable","tableSaved"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"h-100","d-flex",3,"saveBtn","isReadOnly","dataObject$","connection","limitRows","rowsCount","update"],[1,"fa","fa-cogs","fa-lg"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[4,"ngFor","ngForOf"],[1,"fa","fa-table","fa-lg"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"app-rows-limit",0),i["\u0275\u0275listener"]("limitChange",(function(e){return t.limitRowsCount=e}))("count",(function(e){return t.rowsCount=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](1,"\n"),i["\u0275\u0275elementStart"](2,"tabset",1),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementStart"](4,"tab",2),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275template"](6,$,4,3,"ng-template",3),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"app-structure-editor",4),i["\u0275\u0275listener"]("update",(function(e){return t.dataObjectState$.next(e)}))("deletedTable",(function(){return t.deleted.emit()}))("tableSaved",(function(e){return t.onSave(e)})),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275template"](11,A,10,1,"div",5),i["\u0275\u0275pipe"](12,"async"),i["\u0275\u0275text"](13,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n  "),i["\u0275\u0275elementStart"](15,"tab"),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275template"](17,P,4,3,"ng-template",3),i["\u0275\u0275text"](18,"\n    "),i["\u0275\u0275elementStart"](19,"app-object-data",6),i["\u0275\u0275listener"]("update",(function(e){return t.dataState$.next(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n")),2&e&&(i["\u0275\u0275property"]("connection",t.connection)("sqlObject",t.dataObject),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("saveBtn",t.saveBtn)("dataObject",t.dataObject)("connection",t.connection),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](12,12,t.loading$)),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("saveBtn",t.saveBtn)("isReadOnly",!1)("dataObject$",t.dataObjectState$)("connection",t.connection)("limitRows",t.limitRowsCount)("rowsCount",t.rowsCount))},directives:[d.a,u.d,u.a,u.b,k,j.NgIf,V.a,j.NgForOf],pipes:[j.AsyncPipe],styles:["tabset.sql-object-tab[_ngcontent-%COMP%] > .tab-content[_ngcontent-%COMP%]{position:relative}.spinner[_ngcontent-%COMP%]{left:0}"]}),e}()},FbUF:function(e,t,n){"use strict";var i=n("bU/s"),a=n("F/XL"),r=n("9Z1F"),o=(n("lMX+"),"https://worksheets-web-api-test.azurewebsites.net/api"),c=(n("kiQV"),n("M0ag")),l=n("TwVa"),s=n("OLrf"),d=n("TYT/"),u=n("cUzu"),p=n("6Fs3"),m=n("Valr"),f=n("zFFb"),b=n("Yh5v"),h=n("b8dF"),g=n("UkaQ"),x=n("xAFk");n.d(t,"a",(function(){return N}));var v=["sqlElement"],y=["grid"];function S(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"li",21),d["\u0275\u0275text"](1,"\n        "),d["\u0275\u0275elementStart"](2,"a",22),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"](2).connection=e.connectionName})),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](4,"\n      "),d["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](i.connectionName)}}function j(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"ul",19),d["\u0275\u0275text"](1,"\n      "),d["\u0275\u0275template"](2,S,5,1,"li",20),d["\u0275\u0275text"](3,"\n    "),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",n.connections)}}function O(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"span",23),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"]("",n.data.length," rows")}}function w(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"alert",24),d["\u0275\u0275text"](1,"\n      "),d["\u0275\u0275elementStart"](2,"strong"),d["\u0275\u0275text"](3,"Error:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate1"](" ",n.error,"\n    ")}}function C(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"wj-flex-grid-column",28),d["\u0275\u0275text"](1,"\n      "),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275property"]("header",n.headerText)("binding",n.bindingName)("dataType",n.dataType)}}function E(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"wj-flex-grid",25,26),d["\u0275\u0275listener"]("itemsSourceChange",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().data=e})),d["\u0275\u0275text"](2,"\n      "),d["\u0275\u0275template"](3,C,2,3,"wj-flex-grid-column",27),d["\u0275\u0275text"](4,"\n      "),d["\u0275\u0275element"](5,"wj-flex-grid-filter"),d["\u0275\u0275text"](6,"\n    "),d["\u0275\u0275elementEnd"]()}if(2&e){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("itemsSource",i.data)("isReadOnly",!0),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngForOf",i.fields)}}var N=function(){function e(e,t){this.http=e,this.authService=t}return e.prototype.handleKeyboardEvent=function(e){"F5"===e.key&&(e.preventDefault(),e.stopImmediatePropagation(),this.onRun())},e.prototype.ngOnInit=function(){this.connection=this.defaultConnection||this.connections[0].connectionName,this.sqlEditor=Object(i.edit)(this.sqlElement.nativeElement,{mode:"ace/mode/sql",autoScrollEditorIntoView:!0,theme:Object(c.g)()})},e.prototype.onRun=function(){var e=this;this.http.post(o+"/sql/"+this.connection+"/execute",{sql:this.sqlEditor.getSelectedText()||this.sqlEditor.getValue()},this.authService.getHttpHeaders()).pipe(Object(r.a)((function(t){return e.error="string"==typeof t.error?t.error:"Failed to query data.",Object(a.a)(null)}))).subscribe((function(t){t?(e.error=null,e.fields=t.fields.map((function(e){return{bindingName:e.fieldName,dataType:l.o[e.dataType],headerText:e.fieldName}})),e.data=Object(c.n)(t.table)):(e.fields=null,e.data=null)}))},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](u.a),d["\u0275\u0275directiveInject"](s.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-query"]],viewQuery:function(e,t){var n;1&e&&(d["\u0275\u0275staticViewQuery"](v,!0),d["\u0275\u0275viewQuery"](y,!0)),2&e&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.sqlElement=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.grid=n.first))},hostBindings:function(e,t){1&e&&d["\u0275\u0275listener"]("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,d["\u0275\u0275resolveDocument"])},inputs:{connections:"connections",defaultConnection:"defaultConnection"},decls:47,vars:6,consts:[[1,"row","mx-0","mb-2"],[1,"mb-0","align-self-center"],["dropdown","",1,"ml-auto","btn-group"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["class","mx-1 align-self-center",4,"ngIf"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],[3,"grid","disabled"],[1,"h-100","overflow-hidden"],["left","",1,"w-100"],["sqlElement",""],["right",""],["type","danger",4,"ngIf"],["class","h-100 border-0",3,"itemsSource","isReadOnly","itemsSourceChange",4,"ngIf"],["left-label",""],[1,"fa","fa-cogs","fa-lg"],["right-label",""],[1,"fa","fa-table","fa-lg"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[1,"dropdown-item",3,"click"],[1,"mx-1","align-self-center"],["type","danger"],[1,"h-100","border-0",3,"itemsSource","isReadOnly","itemsSourceChange"],["grid",""],[3,"header","binding","dataType",4,"ngFor","ngForOf"],[3,"header","binding","dataType"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275text"](1,"\n  "),d["\u0275\u0275elementStart"](2,"h5",1),d["\u0275\u0275text"](3,"Sql Query"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](4,"\n  "),d["\u0275\u0275elementStart"](5,"div",2),d["\u0275\u0275text"](6,"\n    "),d["\u0275\u0275elementStart"](7,"button",3),d["\u0275\u0275text"](8),d["\u0275\u0275element"](9,"span",4),d["\u0275\u0275text"](10,"\n    "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](11,"\n    "),d["\u0275\u0275template"](12,j,4,1,"ul",5),d["\u0275\u0275text"](13,"\n  "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](14,"\n  "),d["\u0275\u0275template"](15,O,2,1,"span",6),d["\u0275\u0275text"](16,"\n  "),d["\u0275\u0275text"](17,"\n  "),d["\u0275\u0275elementStart"](18,"button",7),d["\u0275\u0275listener"]("click",(function(){return t.onRun()})),d["\u0275\u0275text"](19,"Run"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](20,"\n  "),d["\u0275\u0275element"](21,"app-export-menu",8),d["\u0275\u0275text"](22,"\n"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](23,"\n"),d["\u0275\u0275elementStart"](24,"app-split-content",9),d["\u0275\u0275text"](25,"\n  "),d["\u0275\u0275element"](26,"div",10,11),d["\u0275\u0275text"](28,"\n  "),d["\u0275\u0275elementContainerStart"](29,12),d["\u0275\u0275text"](30,"\n    "),d["\u0275\u0275template"](31,w,5,1,"alert",13),d["\u0275\u0275text"](32,"\n    "),d["\u0275\u0275template"](33,E,7,3,"wj-flex-grid",14),d["\u0275\u0275text"](34,"\n  "),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275text"](35,"\n  "),d["\u0275\u0275elementContainerStart"](36,15),d["\u0275\u0275text"](37,"\n    "),d["\u0275\u0275element"](38,"i",16),d["\u0275\u0275text"](39," SQL\n  "),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275text"](40,"\n  "),d["\u0275\u0275elementContainerStart"](41,17),d["\u0275\u0275text"](42,"\n    "),d["\u0275\u0275element"](43,"i",18),d["\u0275\u0275text"](44," Data\n  "),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275text"](45,"\n"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](46,"\n")),2&e&&(d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate"](t.connection),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("ngIf",null==t.data?null:t.data.length),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("grid",t.grid)("disabled",!(null!=t.data&&t.data.length)),d["\u0275\u0275advance"](10),d["\u0275\u0275property"]("ngIf",t.error),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.fields&&t.data))},directives:[p.a,p.d,p.b,m.NgIf,f.a,b.a,m.NgForOf,h.a,g.WjFlexGrid,x.WjFlexGridFilter,g.WjFlexGridColumn],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}"]}),e}()},GXwU:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i=n("mrSG"),a=n("TYT/"),r=n("p0Sj"),o=n("67Y/"),c=n("VnD/"),l=n("15JJ"),s=n("9Z1F"),d=n("26FU"),u=n("G5J1"),p=n("F/XL"),m=n("XlPw"),f=(n("oW1M"),n("01LN")),b=n("ZF+8"),h=n("TwVa"),g=n("HvV6"),x=n("j13F"),v=n("iFvM"),y=n("OLrf"),S=n("3cVM"),j=n("1PnN"),O=n("QJY3"),w=n("Valr"),C=n("uLXW"),E=n("b8dF"),N=["selectConnection"],T=["selectTable"];function I(e,t){1&e&&a["\u0275\u0275text"](0),2&e&&a["\u0275\u0275textInterpolate"](t.item.connectionName)}function D(e,t){1&e&&a["\u0275\u0275text"](0),2&e&&a["\u0275\u0275textInterpolate"](t.item.connectionName)}function F(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275text"](1,"\n        "),a["\u0275\u0275elementStart"](2,"div",31),a["\u0275\u0275text"](3,"\n          "),a["\u0275\u0275elementStart"](4,"label",32),a["\u0275\u0275text"](5,"Schema name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,"\n          "),a["\u0275\u0275elementStart"](7,"div",33),a["\u0275\u0275text"](8,"\n            "),a["\u0275\u0275elementStart"](9,"input",34),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().metaData.schemaName=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](10,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](11,"\n        "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](12,"\n        "),a["\u0275\u0275elementStart"](13,"div",31),a["\u0275\u0275text"](14,"\n          "),a["\u0275\u0275elementStart"](15,"label",35),a["\u0275\u0275text"](16,"Object name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](17,"\n          "),a["\u0275\u0275elementStart"](18,"div",33),a["\u0275\u0275text"](19,"\n            "),a["\u0275\u0275elementStart"](20,"input",36),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().metaData.objectName=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](21,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](22,"\n        "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](23,"\n      "),a["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngModel",i.metaData.schemaName),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngModel",i.metaData.objectName)}}function R(e,t){if(1&e&&a["\u0275\u0275text"](0),2&e){var n=t.item;a["\u0275\u0275textInterpolate2"]("",n.schemaName,".",n.objectName,"")}}function q(e,t){if(1&e&&a["\u0275\u0275text"](0),2&e){var n=t.item;a["\u0275\u0275textInterpolate2"]("",n.schemaName,".",n.objectName,"")}}function M(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275text"](1,"\n        "),a["\u0275\u0275elementStart"](2,"label",37),a["\u0275\u0275text"](3,"Import data into"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4,"\n        "),a["\u0275\u0275elementStart"](5,"ng-select",38,39),a["\u0275\u0275listener"]("change",(function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onTableSelect(e)})),a["\u0275\u0275text"](7,"\n           "),a["\u0275\u0275template"](8,R,1,2,"ng-template",11),a["\u0275\u0275text"](9,"\n           "),a["\u0275\u0275template"](10,q,1,2,"ng-template",12),a["\u0275\u0275text"](11,"\n        "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](12,"\n      "),a["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("items",i.tables)("searchFn",i.tableSearchFn)}}function k(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",40),a["\u0275\u0275text"](1,"Key fields are required."),a["\u0275\u0275elementEnd"]())}function V(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",41),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"number"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](2,1,n.rowsLoaded)," rows loaded")}}function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",42),a["\u0275\u0275text"](1,"\n      "),a["\u0275\u0275elementStart"](2,"div",43),a["\u0275\u0275text"](3,"\n        "),a["\u0275\u0275elementStart"](4,"span",44),a["\u0275\u0275text"](5,"Loading..."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7,"\n      "),a["\u0275\u0275elementStart"](8,"h5"),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](10,"\n    "),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](9),a["\u0275\u0275textInterpolate"](n.progressMessage)}}function L(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",45),a["\u0275\u0275text"](1,"\n      "),a["\u0275\u0275elementStart"](2,"alert",46),a["\u0275\u0275text"](3,"\n        "),a["\u0275\u0275elementStart"](4,"strong"),a["\u0275\u0275text"](5,"Error:"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7,"\n    "),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"](" Verify file format (",n.error,").\n      ")}}var A=function(){function e(e,t,n,i,r){this.fileService=e,this.authService=t,this.sqlService=n,this.notificationService=i,this.dialogService=r,this.import=new a.EventEmitter,this.dataTypes=Object.values(h.l),this.createTable$=new d.a(!0),this.loading=!1,this.preprocessors=h.i}return e.prototype.ngOnInit=function(){var e=this;this.metaData={objectId:0,objectName:null,schemaName:null,objectType:"Table",fields:[]},this.selectConnection.changeEvent.pipe(Object(r.a)(this.config.connection),Object(o.a)((function(t){var n;return e.connection=null===(n=t)||void 0===n?void 0:n.connectionName,e.tables=[],e.selectTable&&e.selectTable.clearModel(),e.connection})),Object(c.a)((function(e){return Boolean(e)})),Object(l.a)((function(t){return e.sqlService.getObjects(t).pipe(Object(s.a)((function(t){return e.notificationService.open({type:h.f.DANGER,message:Object(v.k)(t)}),u.a})))}))).subscribe((function(t){return e.tables=t})),this.createTable$.subscribe((function(t){t?e.createNewTableColumns():e.createSelectedTableColumns()}))},e.prototype.tableSearchFn=function(e,t){return e=e.toLowerCase(),(t.schemaName.toLowerCase()+"."+t.objectName.toLowerCase()).includes(e)},e.prototype.connectionSearchFn=function(e,t){return e=e.toLowerCase(),t.connectionName.toLowerCase().includes(e)},Object.defineProperty(e.prototype,"isValid",{get:function(){var e,t=this.createTable$.value?this.metaData:this.selectedTable;return Boolean(this.connection&&this.data&&(null===(e=t)||void 0===e?void 0:e.schemaName)&&t.objectName&&t.fields.length)},enumerable:!0,configurable:!0}),e.prototype.onTableSelect=function(e){var t=this;e?(this.loading=!0,this.sqlService.getMetaDataObject(this.connection,e.schemaName,e.objectName).subscribe((function(e){t.selectedTable=e,t.createSelectedTableColumns(),t.loading=!1}))):(this.selectedTable=null,this.tableColumns=[])},e.prototype.importData=function(){var e=this,t=this.createTable$.value;this.loading=!0,this.progressMessage=t?h.j.Create:h.j.Importing;var n=this.mappings.getItems(),a=Object(i.a)(Object(i.a)({},t?this.metaData:this.selectedTable),{fields:Object(v.n)(n),primaryKeys:Object(v.q)(n)});(t?this.sqlService.generateObject(this.connection,a):Object(p.a)(null)).pipe(Object(s.a)((function(t){var n=Object(v.k)(t)||"Failed to create new table";return e.notificationService.open({message:n,type:h.f.DANGER}),Object(m.a)(n)})),Object(l.a)((function(){return e.saveData()}))).subscribe((function(t){return e.importHandler(a,t)}),(function(t){return e.importErrorHandler(t)}))},e.prototype.previewData=function(){var e=this.dialogService.open(g.a,{class:"modal-w-90 full-height d-flex flex-column"}),t=this.mappings.getItems();e.config={data:x.b.getValues(this.data,t),fields:t}},e.prototype.loadCSV=function(){var e=this;this.fileService.importCSVFile().subscribe((function(t){if(e.error=null,t.result){var n=t.result.data,i=t.file;e.metaData.objectName||(e.metaData.objectName=Object(v.g)(i.name.replace(/.txt|-|.csv$/g,""))),e.data=n.filter((function(e){return""!==e.join("")})),e.rowsLoaded=e.data.length,e.fileName=i.name;try{e.sourceFields=e.data[0].map((function(e){return Object(v.g)(e)})),e.metaData.fields=Object(v.n)(e.sourceFields),e.createTable$.value?e.createNewTableColumns():e.createSelectedTableColumns()}catch(a){e.data=null,e.sourceFields=null,e.metaData.fields=null,e.error=a.message}finally{e.loading=!1}}else e.loading=!0}))},e.prototype.getSelectedTableTitle=function(){return this.selectedTable?this.selectedTable.schemaName+"."+this.selectedTable.objectName:"Select table"},e.prototype.importHandler=function(e,t){var n=this;if(t.savedItemsCount===t.itemsToSaveCount)this.notificationService.open({type:h.f.SUCCESS,message:Object(v.s)(t)}),this.progressMessage=h.j.Imported,setTimeout((function(){n.modalRef.hide(),n.loading=!1,n.progressMessage=null,n.import.emit({newTable:n.createTable$.value,metaData:e,connection:n.connection})}),1e3);else{var i=t.savedItemsCount?"So far ":"";t.inserted&&(i+="Inserted: "+t.inserted.toLocaleString()+" "),t.updated&&(i+="Updated: "+t.updated.toLocaleString()+" "),t.deleted&&(i+="Deleted: "+t.deleted.toLocaleString()),this.progressMessage=h.j.Importing+" "+t.itemsToSaveCount.toLocaleString()+" rows. "+i}},e.prototype.importErrorHandler=function(e){this.loading=!1,this.progressMessage=null,console.error(e)},e.prototype.createSelectedTableColumns=function(){var e=this;if(this.selectedTable){var t=new Set(this.selectedTable.primaryKeys.map((function(e){return e.fieldName})));this.tableColumns=Object(v.b)(this.selectedTable.fields).map((function(n,i){var a=e.sourceFields?e.sourceFields.find((function(e){return e===n.fieldName})):null;return{fieldName:n.fieldName,dataType:n.dataType||h.l.NVARCHAR,size:n.size,sourceField:a,isKey:t.has(n.fieldName),preprocessFunc:null,preprocessParams:null}}))}else this.tableColumns=[]},e.prototype.createNewTableColumns=function(){if(this.sourceFields){var e=x.b.getTypes(this.data);this.tableColumns=Object(v.b)(this.sourceFields).map((function(t,n){var i=e["col"+n];return{fieldName:t.fieldName,dataType:t.dataType||i.type||h.l.NVARCHAR,size:t.size||i.size,sourceField:t.fieldName,isKey:t.isKey||Boolean(i.uniqueValues),preprocessFunc:null,preprocessParams:null}}))}},e.prototype.saveData=function(){var e=this;return this.progressMessage=h.j.Importing,this.sqlService.saveSqlObjectDataWithStatus(this.connection,this.createTable$.value?this.metaData:this.selectedTable,this.sendData).pipe(Object(s.a)((function(t){var n="string"==typeof t.error?t.error:"Failed to Import";return e.notificationService.open({message:n,type:h.f.DANGER}),Object(m.a)(n)})))},Object.defineProperty(e.prototype,"sendData",{get:function(){var e=this.mappings.getItems(),t=e.map((function(e){return e.fieldName})),n=t.map((function(e,t){return e?t:-1})).filter((function(e){return-1!==e}));return{tableData:{fieldNames:t.filter((function(e){return e})),rows:x.b.getValues(this.data,e).map((function(e){return e.filter((function(e,t){return n.includes(t)}))})).map((function(e){return e.map((function(e){return e instanceof Date?Object(f.dateToString)(e):e}))}))}}},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](b.c),a["\u0275\u0275directiveInject"](y.b),a["\u0275\u0275directiveInject"](b.f),a["\u0275\u0275directiveInject"](b.e),a["\u0275\u0275directiveInject"](b.b))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-import-csv"]],viewQuery:function(e,t){var n;1&e&&(a["\u0275\u0275staticViewQuery"](S.a,!0),a["\u0275\u0275staticViewQuery"](N,!0),a["\u0275\u0275viewQuery"](T,!0)),2&e&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.mappings=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.selectConnection=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.selectTable=n.first))},inputs:{modalRef:"modalRef",config:"config"},outputs:{import:"import"},decls:90,vars:29,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-4","d-flex","flex-column","h-100","overflow-hidden"],[1,"row","m-0"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],[1,"d-flex","w-75"],["for","object-name",1,"col-sm-2","col-form-label","px-2"],["placeholder","Select connection",1,"px-0","col-sm-3",3,"items","ngModel","searchFn"],["selectConnection",""],["ng-label-tmp",""],["ng-option-tmp",""],[4,"ngIf"],[1,"form-check","form-check-inline"],["type","checkbox","id","create-tabel",1,"form-check-input","mr-2",3,"checked","value","change"],["for","create-tabel",1,"form-check-label"],[1,"row","flex-fill","mx-0","flex-column","my-2","h-100","position-relative","overflow-hidden"],["fxLayout","row"],[1,"table-title"],["class","ml-2",4,"ngIf"],["class","ml-auto",4,"ngIf"],[1,"fields-container","d-flex","flex-fill","w-100",3,"tableColumns","sourceFields","isNewTable"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],["class","d-flex position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"modal-footer","flex-column"],[1,"row","w-100","mx-0","px-0"],["type","button",1,"btn","btn-light",3,"disabled","click"],[1,"d-flex","align-items-center","mx-2"],["type","button",1,"btn","btn-primary","ml-auto","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-light",3,"click"],[1,"form-group","row","m-0","w-50x"],["for","schema-name",1,"col-sm-5","col-form-label","px-2"],[1,"col-sm-7","px-2"],["type","text","id","schema-name","placeholder","Shema",1,"form-control",3,"ngModel","ngModelChange"],["for","object-name",1,"col-sm-5","col-form-label","px-2"],["type","text","id","object-name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["for","object-name",1,"col-sm-2","col-form-label"],["placeholder","Select table",1,"col","px-0","mr-3",3,"items","searchFn","change"],["selectTable",""],[1,"ml-2"],[1,"ml-auto"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"d-flex","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["type","danger"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275text"](1,"\n  "),a["\u0275\u0275elementStart"](2,"h4",1),a["\u0275\u0275text"](3,"Import CSV data"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4,"\n  "),a["\u0275\u0275elementStart"](5,"button",2),a["\u0275\u0275listener"]("click",(function(){return t.modalRef.hide()})),a["\u0275\u0275text"](6,"\n    "),a["\u0275\u0275elementStart"](7,"span",3),a["\u0275\u0275text"](8,"\xd7"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](9,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](10,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](11,"\n"),a["\u0275\u0275elementStart"](12,"div",4),a["\u0275\u0275text"](13,"\n  "),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275text"](15,"\n    "),a["\u0275\u0275elementStart"](16,"button",6),a["\u0275\u0275listener"]("click",(function(){return t.loadCSV()})),a["\u0275\u0275text"](17,"Browse..."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](18,"\n    "),a["\u0275\u0275elementStart"](19,"div",7),a["\u0275\u0275text"](20,"\n      "),a["\u0275\u0275elementStart"](21,"label",8),a["\u0275\u0275text"](22,"Select connection"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](23,"\n        "),a["\u0275\u0275elementStart"](24,"ng-select",9,10),a["\u0275\u0275text"](26,"\n           "),a["\u0275\u0275template"](27,I,1,1,"ng-template",11),a["\u0275\u0275text"](28,"\n           "),a["\u0275\u0275template"](29,D,1,1,"ng-template",12),a["\u0275\u0275text"](30,"\n        "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](31,"\n      "),a["\u0275\u0275template"](32,F,24,2,"ng-container",13),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34,"\n      "),a["\u0275\u0275template"](35,M,13,2,"ng-container",13),a["\u0275\u0275pipe"](36,"async"),a["\u0275\u0275text"](37,"\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](38,"\n    "),a["\u0275\u0275elementStart"](39,"div",14),a["\u0275\u0275text"](40,"\n      "),a["\u0275\u0275elementStart"](41,"input",15),a["\u0275\u0275listener"]("change",(function(e){return t.createTable$.next(e.target.checked)})),a["\u0275\u0275pipe"](42,"async"),a["\u0275\u0275pipe"](43,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](44,"\n      "),a["\u0275\u0275elementStart"](45,"label",16),a["\u0275\u0275text"](46,"Create New Table"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](47,"\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](48,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](49,"\n  "),a["\u0275\u0275elementStart"](50,"div",17),a["\u0275\u0275text"](51,"\n    "),a["\u0275\u0275elementStart"](52,"div",18),a["\u0275\u0275text"](53,"\n      "),a["\u0275\u0275elementStart"](54,"h5",19),a["\u0275\u0275text"](55,"Fields Mappings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](56,"\n      "),a["\u0275\u0275template"](57,k,2,0,"span",20),a["\u0275\u0275pipe"](58,"async"),a["\u0275\u0275text"](59,"\n      "),a["\u0275\u0275template"](60,V,3,3,"span",21),a["\u0275\u0275text"](61,"\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](62,"\n    "),a["\u0275\u0275element"](63,"app-fields-mappings",22),a["\u0275\u0275pipe"](64,"async"),a["\u0275\u0275text"](65,"\n    "),a["\u0275\u0275template"](66,$,11,1,"div",23),a["\u0275\u0275text"](67,"\n    "),a["\u0275\u0275template"](68,L,8,1,"div",24),a["\u0275\u0275text"](69,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](70,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](71,"\n"),a["\u0275\u0275elementStart"](72,"div",25),a["\u0275\u0275text"](73,"\n  "),a["\u0275\u0275elementStart"](74,"div",26),a["\u0275\u0275text"](75,"\n    "),a["\u0275\u0275elementStart"](76,"button",27),a["\u0275\u0275listener"]("click",(function(){return t.previewData()})),a["\u0275\u0275text"](77,"Preview\n      Data"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](78," "),a["\u0275\u0275elementStart"](79,"i",28),a["\u0275\u0275text"](80),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](81,"\n    "),a["\u0275\u0275elementStart"](82,"button",29),a["\u0275\u0275listener"]("click",(function(){return t.importData()})),a["\u0275\u0275text"](83,"Import"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](84,"\n    "),a["\u0275\u0275elementStart"](85,"button",30),a["\u0275\u0275listener"]("click",(function(){return t.modalRef.hide()})),a["\u0275\u0275text"](86,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](87,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](88,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](89,"\n")),2&e&&(a["\u0275\u0275advance"](24),a["\u0275\u0275property"]("items",t.config.connections)("ngModel",t.config.connection)("searchFn",t.connectionSearchFn),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](33,17,t.createTable$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](36,19,t.createTable$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("checked",a["\u0275\u0275pipeBind1"](42,21,t.createTable$))("value",a["\u0275\u0275pipeBind1"](43,23,t.createTable$)),a["\u0275\u0275advance"](16),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](58,25,t.createTable$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.rowsLoaded),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("tableColumns",t.tableColumns)("sourceFields",t.sourceFields)("isNewTable",a["\u0275\u0275pipeBind1"](64,27,t.createTable$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.loading),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.error),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("disabled",!t.data||!t.data.length),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.fileName),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",!t.isValid))},directives:[j.a,O.NgControlStatus,O.NgModel,j.d,j.c,w.NgIf,C.c,S.a,O.DefaultValueAccessor,E.a],pipes:[w.AsyncPipe,w.DecimalPipe],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.fields-container[_ngcontent-%COMP%]{height:calc(100% - 200px)}"]}),e}()},LRkE:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var i=n("mrSG"),a=n("TYT/"),r=n("K9Ia"),o=n("G5J1"),c=n("xMyE"),l=n("9Z1F"),s=n("15JJ"),d=n("lMX+"),u=n("tcrU"),p=n("01LN"),m=n("TwVa"),f=n("a5yf"),b=n("M0ag"),h=n("4CEX"),g=n("ZF+8"),x=n("LXVg"),v=n("2+cH"),y=n("s90X"),S=n("Valr"),j=n("zFFb"),O=n("EQPC"),w=n("UkaQ"),C=n("oksU"),E=n("DQr0"),N=["grid"];function T(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",24),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveData()})),a["\u0275\u0275text"](1,"Save"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",!i.isChanged)}}function I(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",25),a["\u0275\u0275text"](1,"\n    "),a["\u0275\u0275elementStart"](2,"div",26),a["\u0275\u0275text"](3,"\n      "),a["\u0275\u0275elementStart"](4,"span",27),a["\u0275\u0275text"](5,"Loading..."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,"\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7,"\n  "),a["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275text"](0,"\n        "),a["\u0275\u0275elementStart"](1,"div",30),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3,"\n        "),a["\u0275\u0275elementStart"](4,"app-filter",31),a["\u0275\u0275listener"]("apply",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().onApply(e,t)})),a["\u0275\u0275pipe"](5,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,"\n      ")}if(2&e){var i=a["\u0275\u0275nextContext"]().$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("title",i.headerText),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](i.headerText),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("field",i)("icon",!0)("dataObject",a["\u0275\u0275pipeBind1"](5,7,r.dataObject$))("connection",r.connection.connectionName)("currentFilters",r.filters)}}function F(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"wj-flex-grid-column",28),a["\u0275\u0275text"](1,"\n      "),a["\u0275\u0275template"](2,D,7,9,"ng-template",29),a["\u0275\u0275text"](3,"\n    "),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("header",n.headerText)("binding",n.bindingName)("dataType",n.dataType)("width",n.width)("format",n.displayFormat)("isRequired",n.isKey),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("cellType","ColumnHeader")}}function R(e,t){if(1&e&&a["\u0275\u0275element"](0,"i",32),2&e){a["\u0275\u0275nextContext"]();var n=a["\u0275\u0275reference"](56);a["\u0275\u0275property"]("popover",n)}}function q(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275text"](1,"\n      |"),a["\u0275\u0275elementStart"](2,"i",33),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onNextPage(-1)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3),a["\u0275\u0275elementStart"](4,"i",34),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onNextPage(1)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](5,"\n    "),a["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("\n      Page: ",i.currentPage,"")}}function M(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"li"),a["\u0275\u0275text"](1,"\n      "),a["\u0275\u0275elementStart"](2,"b"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.fieldName),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](": ",n.value,"\n    ")}}function k(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"ul",36),a["\u0275\u0275text"](1,"\n    "),a["\u0275\u0275template"](2,M,5,2,"li",37),a["\u0275\u0275text"](3,"\n  "),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.filtersList)}}function V(e,t){if(1&e&&(a["\u0275\u0275text"](0,"\n  "),a["\u0275\u0275elementStart"](1,"h6"),a["\u0275\u0275text"](2,"Apply Filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3,"\n  "),a["\u0275\u0275template"](4,k,4,1,"ul",35),a["\u0275\u0275text"](5,"\n")),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",n.filters)}}var $=function(){function e(e,t,n){this.dialogService=e,this.notificationService=t,this.dbService=n,this.update=new a.EventEmitter,this.data=[],this.isChanged=!1,this.filters={},this.currentPage=1,this.destroy$=new r.a}return e.prototype.ngOnInit=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t=this;return Object(i.e)(this,(function(n){return(e=this.dataObject$.value).objectName&&(this.localGridConfig=new x.a("database-"+this.connection.connectionName,e.schemaName+"-"+e.objectName),this.loadData()),this.dataObject$.subscribe((function(e){t.fields=t.getTableFields(e)})),[2]}))}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.ngOnChanges=function(e){var t=e.limitRows;t&&!t.firstChange&&t.currentValue!==t.previousValue&&this.loadData()},e.prototype.saveData=function(){var e=this,t=Object(v.a)(this.gridContext.state,this.dataObject$.value),n=t.data,i=t.dataToDelete;this.dbService.saveSqlObjectDataWithStatus(this.connection.connectionName,this.dataObject$.value,{tableData:Object(b.o)(n),itemsToDelete:i}).pipe(Object(c.a)((function(t){e.notificationService.open({type:m.f.SUCCESS,message:Object(b.l)(t)}),e.loadData(),e.isChanged=!1,e.update.emit({}),e.gridContext.clear()})),Object(l.a)((function(t){return e.notificationService.open({type:m.f.DANGER,message:Object(b.i)(t)}),o.a}))).toPromise()},e.prototype.getTableFields=function(e){var t=this;return e.fields.map((function(n){return{isKey:e.primaryKeys&&e.primaryKeys.map((function(e){return e.fieldName})).includes(n.fieldName),bindingName:n.fieldName,sqlDataType:n.dataType,headerText:t.getColumnHeader(n.fieldName),width:t.getColumnWidth(n.fieldName),dataType:t.getColumnType(n.fieldName,n.dataType),displayFormat:t.getColumnDisplayFormat(n.fieldName)}}))},e.prototype.getColumnWidth=function(e,t){return void 0===t&&(t=150),this.localGridConfig&&this.localGridConfig.getColumn(e).width||t},e.prototype.getColumnHeader=function(e){return this.localGridConfig&&this.localGridConfig.getColumn(e).header},e.prototype.getColumnType=function(e,t){return this.localGridConfig&&this.localGridConfig.getColumn(e).dataType||m.o[t]},e.prototype.getColumnDisplayFormat=function(e){return this.localGridConfig&&this.localGridConfig.getColumn(e).displayFormat||"dd/MM/yyyy"},e.prototype.initializedGrid=function(e){var t=this;this.gridContext=Object(f.a)(e),e.cellEditEnded.addHandler((function(){return t.changeHandler()})),e.deletedRow.addHandler((function(){return t.changeHandler()})),e.addEventListener(e.hostElement,"contextmenu",(function(n){var i=e.hitTest(n);t.columnToEdit=t.fields.find((function(e,t){return i.col===t})),t.contextMenuValue=t.grid.collectionView.items[i.row][t.columnToEdit.bindingName]}));var n=e.itemFormatter;e.itemFormatter=function(t,i,a,r){n(t,i,a,r);var o=t.columns[a].binding;if(t.cellType===d.CellType.ColumnHeader&&r.firstChild instanceof HTMLElement){var c=r.firstChild.querySelector("#sort-icon");c&&r.firstChild.removeChild(c);var l=e.collectionView.sortDescriptions[0];if(l&&l.property===o){var s=document.createElement("SPAN");s.id="sort-icon",s.className=l.ascending?"wj-glyph-up":"wj-glyph-down",r.firstChild.appendChild(s)}}},e.sortingColumn.addHandler((function(e,t){t.data.target.classList.contains("fa-filter")&&(t.cancel=!0)})),e.resizingColumn.addHandler((function(n,i){t.localGridConfig&&t.localGridConfig.saveColumn(e.columns[i.col].binding,{width:e.columns[i.col].renderWidth})}))},e.prototype.onCtxMenuClicked=function(e){switch(e.value){case"edit-column":this.editColumn();break;case"fill-all":this.fillRows("all");break;case"fill-empty":this.fillRows("empty")}},e.prototype.loadData=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o=this;return Object(i.e)(this,(function(i){switch(i.label){case 0:this.loading=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),n=(t=this.limitRows||void 0)?(this.currentPage-1)*t:void 0,[4,this.dbService.selectSqlObjectData(this.connection.connectionName,(e=this.dataObject$.value).schemaName,e.objectName,{filters:Object(b.j)(this.filters),skipRowsCount:n,limitRowsCount:t}).toPromise()];case 2:return a=i.sent(),this.data=this.formatData(Object(p.deepClone)(a)),[3,5];case 3:return r=i.sent(),console.log(r),[3,5];case 4:return window.requestAnimationFrame((function(){o.loading=!1})),[7];case 5:return[2]}}))}))},e.prototype.editColumn=function(){var e=this,t=this.dialogService.open(h.a,{class:"modal-lg"});t.config=[this.columnToEdit],t.init.pipe(Object(s.a)((function(){return t.component.save}))).subscribe((function(t){t.forEach((function(t){e.localGridConfig.saveColumn(t.bindingName,t)}));var n=t[0],i=e.fields.findIndex((function(e){return e.bindingName===n.bindingName}));e.fields.splice(i,1,n)}))},e.prototype.fillRows=function(e){var t=this,n=!1;this.grid.collectionView.sourceCollection.forEach((function(i){var a=t.columnToEdit.bindingName,r=i[a];t.updateCondition(r,e)&&(i[a]=t.contextMenuValue,t.gridContext.setEditValue(i,a,r,t.contextMenuValue),n=!0)})),n&&(this.grid.refresh(!0),this.changeHandler())},e.prototype.updateCondition=function(e,t){switch(t){case"all":return e!==this.contextMenuValue;case"empty":return[null,void 0,""].includes(e);default:return!0}},e.prototype.changeHandler=function(){var e,t,n=Object(v.a)(this.gridContext.state,this.dataObject$.value);this.isChanged=Boolean((null===(e=n.data)||void 0===e?void 0:e.length)||(null===(t=n.dataToDelete)||void 0===t?void 0:t.length)),this.update.emit(n)},e.prototype.onFiltersChange=function(e){this.filters=Object(i.a)({},e),this.applyFilters()},e.prototype.onApply=function(e,t){var n;this.filters=Object(i.a)(Object(i.a)({},this.filters),((n={})[t.bindingName]=e,n)),this.applyFilters()},Object.defineProperty(e.prototype,"skipRows",{get:function(){return(this.currentPage-1)*this.limitRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtersList",{get:function(){var e=this;return Object.entries(this.filters).filter((function(e){return Boolean(e[1])})).map((function(t){var n=t[0];return{fieldName:n,value:t[1].map((function(t){if(e.localGridConfig.getColumn(n).dataType===u.DataType.Date){var i=e.localGridConfig.getColumn(n).displayFormat;return Object(b.f)(t,i)}return t instanceof Date?Object(p.dateToString)(t):null===t?"[NULL]":t})).join(", ")}}))},enumerable:!0,configurable:!0}),e.prototype.onNextPage=function(e){if(this.currentPage>=1&&e>0&&this.skipRows+this.limitRows<this.rowsCount)this.currentPage++;else{if(!(this.currentPage>=2&&e<0))return;this.currentPage--}this.limitRows&&this.loadData()},e.prototype.applyFilters=function(){this.loadData()},e.prototype.formatData=function(e){var t=this;return e&&e.fieldNames?(e.dataTypes=e.fieldNames.map((function(e){var n=t.fields.find((function(t){return t.bindingName===e}));return n?n.sqlDataType:null})),Object(b.n)(e)):[]},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](g.b),a["\u0275\u0275directiveInject"](g.e),a["\u0275\u0275directiveInject"](g.f))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-object-data"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275staticViewQuery"](N,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.grid=n.first)},inputs:{dataObject$:"dataObject$",connection:"connection",isReadOnly:"isReadOnly",saveBtn:"saveBtn",limitRows:"limitRows",rowsCount:"rowsCount"},outputs:{update:"update"},features:[a["\u0275\u0275NgOnChangesFeature"]()],decls:58,vars:24,consts:[[1,"row","mx-0"],[3,"fields","currentFilters","dataObject","connection","changed"],[1,"ml-auto","mb-2","row","m-0"],["type","button","class","btn btn-primary align-self-baseline",3,"disabled","click",4,"ngIf"],[3,"dataObject","grid"],[1,"position-relative","overflow-hidden"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[2,"display","none",3,"isButton","itemClicked"],["ctxMenu",""],["value","edit-column"],[1,"px-2"],[1,"fa","fa-columns","mr-1","my-2"],["value","fill-all"],[1,"fa","fa-file-o","mr-1","my-2"],["value","fill-empty"],[1,"fa","fa-files-o","mr-1","my-2"],[1,"data-grid",3,"wjContextMenu","itemsSource","allowAddNew","allowDelete","isReadOnly","itemsSourceChange","initialized"],["grid",""],[3,"header","binding","dataType","width","format","isRequired",4,"ngFor","ngForOf"],[1,"row","m-0","align-items-center"],["class","fa fa-filter cursor-pointer px-1","triggers","mouseenter:mouseleave",3,"popover",4,"ngIf"],[1,"ml-auto","mr-1"],[4,"ngIf"],["popTemplate",""],["type","button",1,"btn","btn-primary","align-self-baseline",3,"disabled","click"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"header","binding","dataType","width","format","isRequired"],["wjFlexGridCellTemplate","",3,"cellType"],[1,"text-normal",3,"title"],[3,"field","icon","dataObject","connection","currentFilters","apply"],["triggers","mouseenter:mouseleave",1,"fa","fa-filter","cursor-pointer","px-1",3,"popover"],["aria-hidden","true",1,"fa","fa-angle-double-left","ml-1","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-right","cursor-pointer",3,"click"],["class","applied-filters-list px-0",4,"ngIf"],[1,"applied-filters-list","px-0"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275text"](1,"\n  "),a["\u0275\u0275elementStart"](2,"app-filters",1),a["\u0275\u0275listener"]("changed",(function(e){return t.onFiltersChange(e)})),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4,"\n  "),a["\u0275\u0275elementStart"](5,"div",2),a["\u0275\u0275text"](6,"\n    "),a["\u0275\u0275template"](7,T,2,1,"button",3),a["\u0275\u0275text"](8,"\n    "),a["\u0275\u0275element"](9,"app-export-menu",4),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](12,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](13,"\n"),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275text"](15,"\n  "),a["\u0275\u0275template"](16,I,8,0,"div",6),a["\u0275\u0275text"](17,"\n  "),a["\u0275\u0275elementStart"](18,"wj-menu",7,8),a["\u0275\u0275listener"]("itemClicked",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275reference"](19);return t.onCtxMenuClicked(e)})),a["\u0275\u0275text"](20,"\n    "),a["\u0275\u0275elementStart"](21,"wj-menu-item",9),a["\u0275\u0275elementStart"](22,"span",10),a["\u0275\u0275element"](23,"i",11),a["\u0275\u0275text"](24,"Format Column"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](25,"\n    "),a["\u0275\u0275elementStart"](26,"wj-menu-item",12),a["\u0275\u0275elementStart"](27,"span",10),a["\u0275\u0275element"](28,"i",13),a["\u0275\u0275text"](29,"Fill all rows"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](30,"\n    "),a["\u0275\u0275elementStart"](31,"wj-menu-item",14),a["\u0275\u0275elementStart"](32,"span",10),a["\u0275\u0275element"](33,"i",15),a["\u0275\u0275text"](34,"Fill empty rows"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](35,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](36,"\n  "),a["\u0275\u0275elementStart"](37,"wj-flex-grid",16,17),a["\u0275\u0275listener"]("itemsSourceChange",(function(e){return t.data=e}))("initialized",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275reference"](38);return t.initializedGrid(e)})),a["\u0275\u0275text"](39,"\n    "),a["\u0275\u0275template"](40,F,4,7,"wj-flex-grid-column",18),a["\u0275\u0275text"](41,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](42,"\n  "),a["\u0275\u0275elementStart"](43,"div",19),a["\u0275\u0275text"](44,"\n    "),a["\u0275\u0275template"](45,R,1,1,"i",20),a["\u0275\u0275text"](46,"\n    "),a["\u0275\u0275elementStart"](47,"span",21),a["\u0275\u0275text"](48),a["\u0275\u0275pipe"](49,"number"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](50,"\n    "),a["\u0275\u0275template"](51,q,6,1,"ng-container",22),a["\u0275\u0275text"](52,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](53,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](54,"\n\n"),a["\u0275\u0275template"](55,V,6,1,"ng-template",null,23,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275text"](57,"\n")}if(2&e){var i=a["\u0275\u0275reference"](19),r=a["\u0275\u0275reference"](38);a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fields",t.fields)("currentFilters",t.filters)("dataObject",a["\u0275\u0275pipeBind1"](3,18,t.dataObject$))("connection",t.connection.connectionName),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.saveBtn),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("dataObject",a["\u0275\u0275pipeBind1"](10,20,t.dataObject$))("grid",r),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf",t.loading),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("isButton",!0),a["\u0275\u0275advance"](19),a["\u0275\u0275property"]("wjContextMenu",i)("itemsSource",t.data)("allowAddNew",!0)("allowDelete",!0)("isReadOnly",!!t.isReadOnly),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.fields),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.filters),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("Rows: ",t.data?t.data.length:a["\u0275\u0275pipeBind1"](49,22,0),""),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.limitRows)}},directives:[y.a,S.NgIf,j.a,O.WjMenu,O.WjMenuItem,w.WjFlexGrid,O.WjContextMenu,S.NgForOf,w.WjFlexGridColumn,w.WjFlexGridCellTemplate,C.a,E.a],pipes:[S.AsyncPipe,S.DecimalPipe],styles:["[_nghost-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.data-grid[_ngcontent-%COMP%]{height:calc(100% - 25px)}.data-grid[_ngcontent-%COMP%]   app-filter[_ngcontent-%COMP%]{-webkit-box-ordinal-group:2;order:1}.data-grid[_ngcontent-%COMP%]     .wj-cell.wj-header>div{display:-webkit-box;display:flex;height:100%;-webkit-box-align:center;align-items:center;max-height:50px}.applied-filters-list[_ngcontent-%COMP%]{list-style-type:none}.text-normal[_ngcontent-%COMP%]{white-space:normal;word-break:break-word;width:100%;padding-right:5px;max-height:50px;text-overflow:ellipsis;overflow:hidden;text-align:center;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}"]}),e}()},Xwp4:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("TYT/"),a=n("K9Ia"),r=n("ZF+8"),o=n("QJY3"),c=n("Valr"),l=function(){function e(e){this.dbService=e,this.limitChange=new i.EventEmitter,this.count=new i.EventEmitter,this.destroy$=new a.a}return e.prototype.ngOnInit=function(){var e=this;this.sqlObject.objectName&&this.dbService.selectSqlObjectData(this.connection.connectionName,this.sqlObject.schemaName,this.sqlObject.objectName,{fields:["count|1"]}).subscribe((function(t){e.rowsCount=t.rows[0][0],e.count.emit(e.rowsCount)}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.onRowsCountSelect=function(e){this.limitChange.emit(+e.target.value)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.f))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-rows-limit"]],inputs:{connection:"connection",sqlObject:"sqlObject"},outputs:{limitChange:"limitChange",count:"count"},decls:19,vars:3,consts:[[1,"rows-count","position-absolute","pr-2"],["value","1000",1,"form-control","py-0",3,"change"],["value",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"Show max\n  "),i["\u0275\u0275elementStart"](2,"select",1),i["\u0275\u0275listener"]("change",(function(e){return t.onRowsCountSelect(e)})),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"option"),i["\u0275\u0275text"](5,"1000"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementStart"](7,"option"),i["\u0275\u0275text"](8,"10000"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementStart"](10,"option"),i["\u0275\u0275text"](11,"50000"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementStart"](13,"option",2),i["\u0275\u0275text"](14,"ALL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n")),2&e&&(i["\u0275\u0275advance"](16),i["\u0275\u0275textInterpolate1"]("\n  rows. \xa0\xa0\xa0\xa0 Total ",i["\u0275\u0275pipeBind1"](17,1,t.rowsCount)," rows."))},directives:[o.NgSelectOption,o["\u0275angular_packages_forms_forms_x"]],pipes:[c.DecimalPipe],styles:[".rows-count[_ngcontent-%COMP%]{right:0;z-index:11}.rows-count[_ngcontent-%COMP%], .rows-count[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:inline-block;width:auto}.rows-count[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:1.5rem}"]}),e}()},Yh5v:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("TYT/"),a=n("Valr"),r=n("aYyy"),o=n("qaSM"),c=n("QJY3");function l(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function s(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,l,1,0,"ng-container",11),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275projection"](4,2),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](26);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n)}}function d(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function u(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,d,1,0,"ng-container",11),i["\u0275\u0275text"](3,"\n"),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](26);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n)}}var p=function(e){return{"ml-3":e}},m=function(e){return{"btn-sm":e}};function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"div",12),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"label",13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().modeState.left=e}))("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onModeState("left")})),i["\u0275\u0275text"](4,"\n      "),i["\u0275\u0275projection"](5,3),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"label",14),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().modeState.right=e}))("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onModeState("right")})),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275projection"](10,4),i["\u0275\u0275text"](11,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n")}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](9,p,a.toggleTop)),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("active",a.modeState.left),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](11,m,!a.toggleTop))("ngModel",a.modeState.left),i["\u0275\u0275advance"](5),i["\u0275\u0275classProp"]("active",a.modeState.right),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](13,m,!a.toggleTop))("ngModel",a.modeState.right)}}var b=[[["","left",""]],[["","right",""]],[["","actions",""]],[["","left-label",""]],[["","right-label",""]]],h=["[left]","[right]","[actions]","[left-label]","[right-label]"],g=function(){function e(){this.leftContentSize=50,this.modeState={left:!0,right:!0}}return e.prototype.onModeState=function(e){this.modeState[e]=!this.modeState[e],this.leftContentSize=this.modeState.left&&!this.modeState.right?100:this.modeState.left&&this.modeState.right?50:0},e.prototype.resize=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-split-content"]],ngContentSelectors:h,decls:28,vars:6,consts:[[1,"card","overflow-hidden","mb-0","w-100","h-100"],["class","card-header d-flex pl-0 py-2 pr-2",4,"ngIf"],[1,"card-body","d-flex","p-0","flex-column","h-100"],[3,"useTransition","gutterSize","dragEnd","transitionEnd"],[1,"d-flex","mb-0","position-relative",3,"size"],["area0","asSplitArea"],[1,"d-flex","overflow-auto","flex-column","explorer-section",3,"size"],["area1","asSplitArea"],[4,"ngIf"],["toggles",""],[1,"card-header","d-flex","pl-0","py-2","pr-2"],[4,"ngTemplateOutlet"],[1,"btn-group","d-block",3,"ngClass"],["ngDefaultControl","","btnCheckbox","","tabindex","0","role","button","name","mode-left",1,"btn","btn-secondary","cursor-pointer","mb-0",3,"ngClass","ngModel","ngModelChange","click"],["ngDefaultControl","","btnCheckbox","","tabindex","0","role","button","name","mode-right",1,"btn","btn-secondary","cursor-pointer","mb-0",3,"ngClass","ngModel","ngModelChange","click"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](b),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,s,6,1,"div",1),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementStart"](6,"as-split",3),i["\u0275\u0275listener"]("dragEnd",(function(){return t.resize()}))("transitionEnd",(function(){return t.resize()})),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275elementStart"](8,"as-split-area",4,5),i["\u0275\u0275text"](10,"\n        "),i["\u0275\u0275projection"](11),i["\u0275\u0275text"](12,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n      "),i["\u0275\u0275elementStart"](14,"as-split-area",6,7),i["\u0275\u0275text"](16,"\n        "),i["\u0275\u0275projection"](17,1),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n"),i["\u0275\u0275template"](23,u,4,1,"ng-container",8),i["\u0275\u0275text"](24,"\n\n"),i["\u0275\u0275template"](25,f,14,15,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](27,"\n")),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.toggleTop),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("useTransition",!0)("gutterSize",50===t.leftContentSize?11:0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("size",t.leftContentSize),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("size",100-t.leftContentSize),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!t.toggleTop))},directives:[a.NgIf,r.c,r.b,a.NgTemplateOutlet,a.NgClass,o.a,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}"]}),e}()},xpqn:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TYT/"),r=n("26FU"),o=n("Xwp4"),c=n("cSvJ"),l=n("tcrU"),s=n("bU/s"),d=n("ZF+8"),u=n("TwVa"),p=n("M0ag"),m=n("K9Ia"),f=n("bne5"),b=n("ny24"),h=n("Gi3i"),g=n("Valr"),x=n("QJY3"),v=n("uLXW"),y=n("Yh5v"),S=n("UkaQ"),j=["form"],O=["sqlEditor"];function w(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",24),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onSave()})),a["\u0275\u0275text"](1,"Save"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",!i.isChanged)}}function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",25),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onViewDelete()})),a["\u0275\u0275text"](1,"Delete"),a["\u0275\u0275elementEnd"]()}}function E(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",1,2),a["\u0275\u0275text"](2,"\n  "),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275text"](4,"\n    "),a["\u0275\u0275elementStart"](5,"h5",4),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7,"\n    "),a["\u0275\u0275elementStart"](8,"div",5),a["\u0275\u0275text"](9,"\n      "),a["\u0275\u0275template"](10,w,2,1,"button",6),a["\u0275\u0275text"](11,"\n      "),a["\u0275\u0275template"](12,C,2,0,"button",7),a["\u0275\u0275text"](13,"\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](14,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](15,"\n  "),a["\u0275\u0275elementStart"](16,"app-split-content",8),a["\u0275\u0275text"](17,"\n    "),a["\u0275\u0275element"](18,"div",9,10),a["\u0275\u0275text"](20,"\n    "),a["\u0275\u0275elementContainerStart"](21,11,12),a["\u0275\u0275text"](23,"\n      "),a["\u0275\u0275elementStart"](24,"div",13),a["\u0275\u0275text"](25,"\n        "),a["\u0275\u0275elementStart"](26,"wj-flex-grid",14,15),a["\u0275\u0275text"](28,"\n          "),a["\u0275\u0275element"](29,"wj-flex-grid-column",16),a["\u0275\u0275text"](30,"\n          "),a["\u0275\u0275elementStart"](31,"wj-flex-grid-column",17),a["\u0275\u0275text"](32,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](33,"\n          "),a["\u0275\u0275element"](34,"wj-flex-grid-column",18),a["\u0275\u0275text"](35,"\n          "),a["\u0275\u0275element"](36,"wj-flex-grid-column",19),a["\u0275\u0275text"](37,"\n        "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](38,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](39,"\n    "),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275text"](40,"\n    "),a["\u0275\u0275elementContainerStart"](41,20),a["\u0275\u0275text"](42,"\n      "),a["\u0275\u0275element"](43,"i",21),a["\u0275\u0275text"](44," SQL editor\n    "),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275text"](45,"\n    "),a["\u0275\u0275elementContainerStart"](46,22),a["\u0275\u0275text"](47,"\n      "),a["\u0275\u0275element"](48,"i",23),a["\u0275\u0275text"](49," Fields\n    "),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275text"](50,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](51,"\n"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](n.dataObject.objectName),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",n.saveBtn),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.dataObject),a["\u0275\u0275advance"](14),a["\u0275\u0275property"]("isReadOnly",!0)("itemsSource",n.collection)("allowDelete",!1)("allowAddNew",!1),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("width",50),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("minWidth",50)("width","*"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("width",70)}}var N=function(){function e(e,t,n){this.dialogService=e,this.dbService=t,this.notificationService=n,this.edit=new a.EventEmitter,this.viewDeleted=new a.EventEmitter,this.viewSaved=new a.EventEmitter,this.collection=new l.CollectionView,this.isChanged=!1,this.destroy$=new m.a}return e.prototype.ngOnInit=function(){this.collection.sourceCollection=Object(p.m)(this.dataObject)},e.prototype.ngAfterViewInit=function(){var e=this;this.sqlEditor=Object(s.edit)(this.sqlElement.nativeElement,{mode:"ace/mode/sql",autoScrollEditorIntoView:!0,value:this.dataObject.sqlText||"0",theme:Object(p.g)()}),Object(f.a)(this.sqlEditor,"change").pipe(Object(b.a)(this.destroy$),Object(h.a)(200)).subscribe((function(){var t=e.sqlEditor.getValue();e.isChanged=e.dataObject.sqlText!==t,e.edit.emit(t)}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.ngOnChanges=function(e){e.dataObject.firstChange||(this.isChanged=!1,this.collection.sourceCollection=Object(p.m)(this.dataObject))},e.prototype.onViewDelete=function(){var e=this;if(this.dataObject){var t=this.dataObject,n=t.objectName,i=t.schemaName;this.dialogService.confirmation("Delete view "+i+"."+n+". Are you sure?").subscribe((function(t){t&&e.dbService.deleteObject(e.connection.connectionName,e.dataObject).subscribe((function(){e.notificationService.open({type:u.f.SUCCESS,message:"View "+i+"."+n+" deleted"}),e.viewDeleted.emit()}),(function(t){e.notificationService.open({type:u.f.DANGER,message:Object(p.i)(t)})}))}))}},e.prototype.onSave=function(){var e=this;this.dbService.generateObject(this.connection.connectionName,Object(i.a)(Object(i.a)({},this.dataObject),{sqlText:this.sqlEditor.getValue()})).subscribe((function(t){e.viewSaved.emit(t)}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.b),a["\u0275\u0275directiveInject"](d.f),a["\u0275\u0275directiveInject"](d.e))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-view-editor"]],viewQuery:function(e,t){var n;1&e&&(a["\u0275\u0275viewQuery"](j,!0),a["\u0275\u0275viewQuery"](O,!0)),2&e&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.form=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sqlElement=n.first))},inputs:{dataObject:"dataObject",saveBtn:"saveBtn",connection:"connection"},outputs:{edit:"edit",viewDeleted:"viewDeleted",viewSaved:"viewSaved"},features:[a["\u0275\u0275NgOnChangesFeature"]()],decls:1,vars:1,consts:[["class","d-flex flex-column h-100",4,"ngIf"],[1,"d-flex","flex-column","h-100"],["form","ngForm"],["fxLayout","row","fxLayoutAlign","stretch center"],["fxFlex","",1,"col-sm-12","px-0","m-0"],[1,"row","mx-0","mb-2"],["type","submit","class","btn btn-primary ml-auto mr-1",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],[1,"h-100"],["left","",1,"h-100","p-2","w-100"],["sqlEditor",""],["right","",1,"w-100"],["fields",""],[1,"col","fields-container","d-flex","h-100","px-0","mb-2"],[1,"h-100","border-0",3,"isReadOnly","itemsSource","allowDelete","allowAddNew"],["grid",""],["header","IsKey","binding","isKey","dataType","Boolean",3,"width"],["header","Field Name","binding","fieldName",3,"minWidth","width"],["header","Field Data Type","binding","dataType"],["header","Size","binding","size","dataType","Number",3,"width"],["left-label",""],[1,"fa","fa-cogs","fa-lg"],["right-label",""],[1,"fa","fa-table","fa-lg"],["type","submit",1,"btn","btn-primary","ml-auto","mr-1",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,E,52,11,"form",0),2&e&&a["\u0275\u0275property"]("ngIf",t.dataObject)},directives:[g.NgIf,x["\u0275angular_packages_forms_forms_y"],x.NgControlStatusGroup,x.NgForm,v.c,v.b,v.a,y.a,S.WjFlexGrid,S.WjFlexGridColumn],styles:[""]}),e}(),T=n("LRkE");function I(e,t){if(1&e&&(a["\u0275\u0275text"](0,"\n      "),a["\u0275\u0275element"](1,"i",7),a["\u0275\u0275text"](2)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" Structure ",n.isSQLChanged?"*":"","\n    ")}}function D(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275text"](1,"\n      "),a["\u0275\u0275elementStart"](2,"div",9),a["\u0275\u0275text"](3,"\n        "),a["\u0275\u0275elementStart"](4,"span",10),a["\u0275\u0275text"](5,"Loading..."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](6,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](7,"\n    "),a["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&(a["\u0275\u0275text"](0,"\n      "),a["\u0275\u0275element"](1,"i",11),a["\u0275\u0275text"](2," Data\n    "))}n.d(t,"a",(function(){return R}));var R=function(){function e(){this.viewChanged=new a.EventEmitter,this.viewSaved=new a.EventEmitter,this.deleted=new a.EventEmitter,this.loading=!1}return e.prototype.ngOnInit=function(){this.dataObject$=new r.a(this.dataObject)},e.prototype.ngOnChanges=function(e){var t=e.dataObject;t.firstChange||(this.isSQLChanged=!1,this.dataObject$.next(t.currentValue))},e.prototype.onChange=function(e){this.isSQLChanged=e!==this.dataObject.sqlText;var t=this.isSQLChanged?{structure:Object(i.a)(Object(i.a)({},this.dataObject),{sqlText:e}),connection:this.connection}:null;this.viewChanged.emit(t)},e.prototype.onSaved=function(e){this.viewSaved.emit(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-db-view"]],inputs:{dataObject:"dataObject",connection:"connection",saveBtn:"saveBtn"},outputs:{viewChanged:"viewChanged",viewSaved:"viewSaved",deleted:"deleted"},features:[a["\u0275\u0275NgOnChangesFeature"]()],decls:21,vars:11,consts:[[3,"connection","sqlObject","limitChange","count"],[1,"tabset-fx"],[1,"position-relative"],["tabHeading",""],["left","",1,"w-100","h-100",3,"saveBtn","dataObject","connection","viewDeleted","edit","viewSaved"],["class","d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner flex-column",4,"ngIf"],[1,"h-100","d-flex",3,"isReadOnly","dataObject$","connection","limitRows","rowsCount"],[1,"fa","fa-cogs","fa-lg"],[1,"d-flex","justify-content-center","position-absolute","align-items-center","w-100","h-100","spinner","flex-column"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"fa","fa-table","fa-lg"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"app-rows-limit",0),a["\u0275\u0275listener"]("limitChange",(function(e){return t.limitRowsCount=e}))("count",(function(e){return t.rowsCount=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](1,"\n"),a["\u0275\u0275elementStart"](2,"tabset",1),a["\u0275\u0275text"](3,"\n  "),a["\u0275\u0275elementStart"](4,"tab",2),a["\u0275\u0275text"](5,"\n    "),a["\u0275\u0275template"](6,I,3,1,"ng-template",3),a["\u0275\u0275text"](7,"\n    "),a["\u0275\u0275elementStart"](8,"app-db-view-editor",4),a["\u0275\u0275listener"]("viewDeleted",(function(){return t.deleted.emit()}))("edit",(function(e){return t.onChange(e)}))("viewSaved",(function(e){return t.onSaved(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](9,"\n    "),a["\u0275\u0275template"](10,D,8,0,"div",5),a["\u0275\u0275text"](11,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](12,"\n  "),a["\u0275\u0275elementStart"](13,"tab"),a["\u0275\u0275text"](14,"\n    "),a["\u0275\u0275template"](15,F,3,0,"ng-template",3),a["\u0275\u0275text"](16,"\n    "),a["\u0275\u0275element"](17,"app-object-data",6),a["\u0275\u0275text"](18,"\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](19,"\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](20,"\n")),2&e&&(a["\u0275\u0275property"]("connection",t.connection)("sqlObject",t.dataObject),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("saveBtn",t.saveBtn)("dataObject",t.dataObject)("connection",t.connection),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.loading),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("isReadOnly",!0)("dataObject$",t.dataObject$)("connection",t.connection)("limitRows",t.limitRowsCount)("rowsCount",t.rowsCount))},directives:[o.a,c.d,c.a,c.b,N,g.NgIf,T.a],styles:[""]}),e}()},zFFb:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("TYT/"),a=n("EPMZ"),r=(n("lMX+"),n("TwVa")),o=n("ZF+8"),c=n("M0ag"),l=n("15JJ"),s=n("6Fs3"),d=n("Valr");function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",4),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275element"](2,"i",5),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",6),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275element"](2,"i",5),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementEnd"]())}function m(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ul",7),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"li",8),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementStart"](4,"a",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().exportToExcel()})),i["\u0275\u0275text"](5,"Export to Excel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"li",8),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"a",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().exportToCSV()})),i["\u0275\u0275text"](11,"Export to CSV"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275elementStart"](14,"li",8),i["\u0275\u0275text"](15,"\n      "),i["\u0275\u0275elementStart"](16,"a",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().saveToDatabase()})),i["\u0275\u0275text"](17,"Save To Database"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n  "),i["\u0275\u0275elementEnd"]()}}var f=function(){function e(e,t){this.dialogService=e,this.fileService=t,this.saveToDb=new i.EventEmitter}return e.prototype.exportToCSV=function(){this.fileService.exportToFile(this.grid.collectionView.sourceCollection,{fileType:r.e.CSV,fileName:this.getDefaultFileName()})},e.prototype.exportToExcel=function(){a.FlexGridXlsxConverter.saveAsync(this.grid,{includeColumnHeaders:!0},this.getDefaultFileName())},e.prototype.saveToDatabase=function(){var e=this,t=this.dialogService.open(c.b,{class:"modal-xl full-height"});t.config=this.grid.collectionView.sourceCollection,t.init.pipe(Object(l.a)((function(){return t.component.save}))).subscribe((function(t){e.saveToDb.emit()}))},e.prototype.getDefaultFileName=function(){return this.dataObject?this.dataObject.schemaName+"-"+this.dataObject.objectName:"worksheet-data"},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.b),i["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-export-menu"]],inputs:{grid:"grid",dataObject:"dataObject",disabled:"disabled"},outputs:{saveToDb:"saveToDb"},decls:9,vars:2,consts:[["dropdown","","placement","top left",1,"d-flex","position-relative","px-2"],["type","button","class","btn py-0 disabled",4,"ngIf"],["dropdownToggle","","type","button","class","btn py-0",4,"ngIf"],["class","dropdown-menu left-menu","role","menu",4,"dropdownMenu"],["type","button",1,"btn","py-0","disabled"],[1,"fa","fa-ellipsis-v"],["dropdownToggle","","type","button",1,"btn","py-0"],["role","menu",1,"dropdown-menu","left-menu"],["role","menuitem"],[1,"dropdown-item","cursor-pointer",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,u,4,0,"button",1),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275template"](4,p,4,0,"button",2),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275template"](6,m,20,0,"ul",3),i["\u0275\u0275text"](7,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n")),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.disabled))},directives:[s.a,d.NgIf,s.b,s.d],styles:["[_nghost-%COMP%] {\n      display: flex;\n    }"]}),e}()}}]);